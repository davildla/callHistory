{"ast":null,"code":"/*\n * SIP version 0.7.8\n * Copyright (c) 2014-2017 Junction Networks, Inc <http://www.onsip.com>\n * Homepage: http://sipjs.com\n * License: http://sipjs.com/license/\n *\n *\n * ~~~SIP.js contains substantial portions of JsSIP under the following license~~~\n * Homepage: http://jssip.net\n * Copyright (c) 2012-2013 José Luis Millán - Versatica <http://www.versatica.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * ~~~ end JsSIP license ~~~\n */\n(function (f) {\n  if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n\n    g.SIP = f();\n  }\n})(function () {\n  var define, module, exports;\n  return function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;\n          if (!u && a) return a(o, !0);\n          if (i) return i(o, !0);\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\n          throw f.code = \"MODULE_NOT_FOUND\", f;\n        }\n\n        var l = n[o] = {\n          exports: {}\n        };\n        t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];\n          return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }\n\n      return n[o].exports;\n    }\n\n    var i = typeof require == \"function\" && require;\n\n    for (var o = 0; o < r.length; o++) s(r[o]);\n\n    return s;\n  }({\n    1: [function (require, module, exports) {\n      // Copyright Joyent, Inc. and other Node contributors.\n      //\n      // Permission is hereby granted, free of charge, to any person obtaining a\n      // copy of this software and associated documentation files (the\n      // \"Software\"), to deal in the Software without restriction, including\n      // without limitation the rights to use, copy, modify, merge, publish,\n      // distribute, sublicense, and/or sell copies of the Software, and to permit\n      // persons to whom the Software is furnished to do so, subject to the\n      // following conditions:\n      //\n      // The above copyright notice and this permission notice shall be included\n      // in all copies or substantial portions of the Software.\n      //\n      // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n      // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n      // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n      // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n      // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n      // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n      // USE OR OTHER DEALINGS IN THE SOFTWARE.\n      function EventEmitter() {\n        this._events = this._events || {};\n        this._maxListeners = this._maxListeners || undefined;\n      }\n\n      module.exports = EventEmitter; // Backwards-compat with node 0.10.x\n\n      EventEmitter.EventEmitter = EventEmitter;\n      EventEmitter.prototype._events = undefined;\n      EventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n      // added to it. This is a useful default which helps finding memory leaks.\n\n      EventEmitter.defaultMaxListeners = 10; // Obviously not all Emitters should be limited to 10. This function allows\n      // that to be increased. Set to zero for unlimited.\n\n      EventEmitter.prototype.setMaxListeners = function (n) {\n        if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError('n must be a positive number');\n        this._maxListeners = n;\n        return this;\n      };\n\n      EventEmitter.prototype.emit = function (type) {\n        var er, handler, len, args, i, listeners;\n        if (!this._events) this._events = {}; // If there is no 'error' event listener then throw.\n\n        if (type === 'error') {\n          if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n            er = arguments[1];\n\n            if (er instanceof Error) {\n              throw er; // Unhandled 'error' event\n            }\n\n            throw TypeError('Uncaught, unspecified \"error\" event.');\n          }\n        }\n\n        handler = this._events[type];\n        if (isUndefined(handler)) return false;\n\n        if (isFunction(handler)) {\n          switch (arguments.length) {\n            // fast cases\n            case 1:\n              handler.call(this);\n              break;\n\n            case 2:\n              handler.call(this, arguments[1]);\n              break;\n\n            case 3:\n              handler.call(this, arguments[1], arguments[2]);\n              break;\n            // slower\n\n            default:\n              len = arguments.length;\n              args = new Array(len - 1);\n\n              for (i = 1; i < len; i++) args[i - 1] = arguments[i];\n\n              handler.apply(this, args);\n          }\n        } else if (isObject(handler)) {\n          len = arguments.length;\n          args = new Array(len - 1);\n\n          for (i = 1; i < len; i++) args[i - 1] = arguments[i];\n\n          listeners = handler.slice();\n          len = listeners.length;\n\n          for (i = 0; i < len; i++) listeners[i].apply(this, args);\n        }\n\n        return true;\n      };\n\n      EventEmitter.prototype.addListener = function (type, listener) {\n        var m;\n        if (!isFunction(listener)) throw TypeError('listener must be a function');\n        if (!this._events) this._events = {}; // To avoid recursion in the case that type === \"newListener\"! Before\n        // adding it to the listeners, first emit \"newListener\".\n\n        if (this._events.newListener) this.emit('newListener', type, isFunction(listener.listener) ? listener.listener : listener);\n        if (!this._events[type]) // Optimize the case of one listener. Don't need the extra array object.\n          this._events[type] = listener;else if (isObject(this._events[type])) // If we've already got an array, just append.\n          this._events[type].push(listener);else // Adding the second element, need to change to array.\n          this._events[type] = [this._events[type], listener]; // Check for listener leak\n\n        if (isObject(this._events[type]) && !this._events[type].warned) {\n          var m;\n\n          if (!isUndefined(this._maxListeners)) {\n            m = this._maxListeners;\n          } else {\n            m = EventEmitter.defaultMaxListeners;\n          }\n\n          if (m && m > 0 && this._events[type].length > m) {\n            this._events[type].warned = true;\n            console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n\n            if (typeof console.trace === 'function') {\n              // not supported in IE 10\n              console.trace();\n            }\n          }\n        }\n\n        return this;\n      };\n\n      EventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\n      EventEmitter.prototype.once = function (type, listener) {\n        if (!isFunction(listener)) throw TypeError('listener must be a function');\n        var fired = false;\n\n        function g() {\n          this.removeListener(type, g);\n\n          if (!fired) {\n            fired = true;\n            listener.apply(this, arguments);\n          }\n        }\n\n        g.listener = listener;\n        this.on(type, g);\n        return this;\n      }; // emits a 'removeListener' event iff the listener was removed\n\n\n      EventEmitter.prototype.removeListener = function (type, listener) {\n        var list, position, length, i;\n        if (!isFunction(listener)) throw TypeError('listener must be a function');\n        if (!this._events || !this._events[type]) return this;\n        list = this._events[type];\n        length = list.length;\n        position = -1;\n\n        if (list === listener || isFunction(list.listener) && list.listener === listener) {\n          delete this._events[type];\n          if (this._events.removeListener) this.emit('removeListener', type, listener);\n        } else if (isObject(list)) {\n          for (i = length; i-- > 0;) {\n            if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n              position = i;\n              break;\n            }\n          }\n\n          if (position < 0) return this;\n\n          if (list.length === 1) {\n            list.length = 0;\n            delete this._events[type];\n          } else {\n            list.splice(position, 1);\n          }\n\n          if (this._events.removeListener) this.emit('removeListener', type, listener);\n        }\n\n        return this;\n      };\n\n      EventEmitter.prototype.removeAllListeners = function (type) {\n        var key, listeners;\n        if (!this._events) return this; // not listening for removeListener, no need to emit\n\n        if (!this._events.removeListener) {\n          if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n          return this;\n        } // emit removeListener for all listeners on all events\n\n\n        if (arguments.length === 0) {\n          for (key in this._events) {\n            if (key === 'removeListener') continue;\n            this.removeAllListeners(key);\n          }\n\n          this.removeAllListeners('removeListener');\n          this._events = {};\n          return this;\n        }\n\n        listeners = this._events[type];\n\n        if (isFunction(listeners)) {\n          this.removeListener(type, listeners);\n        } else {\n          // LIFO order\n          while (listeners.length) this.removeListener(type, listeners[listeners.length - 1]);\n        }\n\n        delete this._events[type];\n        return this;\n      };\n\n      EventEmitter.prototype.listeners = function (type) {\n        var ret;\n        if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n        return ret;\n      };\n\n      EventEmitter.listenerCount = function (emitter, type) {\n        var ret;\n        if (!emitter._events || !emitter._events[type]) ret = 0;else if (isFunction(emitter._events[type])) ret = 1;else ret = emitter._events[type].length;\n        return ret;\n      };\n\n      function isFunction(arg) {\n        return typeof arg === 'function';\n      }\n\n      function isNumber(arg) {\n        return typeof arg === 'number';\n      }\n\n      function isObject(arg) {\n        return typeof arg === 'object' && arg !== null;\n      }\n\n      function isUndefined(arg) {\n        return arg === void 0;\n      }\n    }, {}],\n    2: [function (require, module, exports) {\n      module.exports = {\n        \"name\": \"sip.js\",\n        \"title\": \"SIP.js\",\n        \"description\": \"A simple, intuitive, and powerful JavaScript signaling library\",\n        \"version\": \"0.7.8\",\n        \"main\": \"src/index.js\",\n        \"browser\": {\n          \"./src/environment.js\": \"./src/environment_browser.js\"\n        },\n        \"homepage\": \"http://sipjs.com\",\n        \"author\": \"OnSIP <developer@onsip.com> (http://sipjs.com/authors/)\",\n        \"contributors\": [{\n          \"url\": \"https://github.com/onsip/SIP.js/blob/master/THANKS.md\"\n        }],\n        \"repository\": {\n          \"type\": \"git\",\n          \"url\": \"https://github.com/onsip/SIP.js.git\"\n        },\n        \"keywords\": [\"sip\", \"websocket\", \"webrtc\", \"library\", \"javascript\"],\n        \"devDependencies\": {\n          \"beefy\": \"^2.1.5\",\n          \"browserify\": \"^4.1.8\",\n          \"grunt\": \"~0.4.0\",\n          \"grunt-browserify\": \"^4.0.1\",\n          \"grunt-cli\": \"~0.1.6\",\n          \"grunt-contrib-copy\": \"^0.5.0\",\n          \"grunt-contrib-jasmine\": \"^1.0.3\",\n          \"grunt-contrib-jshint\": \">0.5.0\",\n          \"grunt-contrib-uglify\": \"~0.2.0\",\n          \"grunt-peg\": \"~1.3.1\",\n          \"grunt-trimtrailingspaces\": \"^0.4.0\",\n          \"pegjs\": \"^0.8.0\"\n        },\n        \"engines\": {\n          \"node\": \">=0.12\"\n        },\n        \"license\": \"MIT\",\n        \"scripts\": {\n          \"repl\": \"beefy test/repl.js --open\",\n          \"build\": \"grunt build\",\n          \"prepublish\": \"cd src/Grammar && mkdir -p dist && pegjs --extra-options-file peg.json src/Grammar.pegjs dist/Grammar.js\",\n          \"test\": \"grunt travis --verbose\"\n        },\n        \"dependencies\": {\n          \"ws\": \"^1.0.1\"\n        },\n        \"optionalDependencies\": {\n          \"promiscuous\": \"^0.6.0\"\n        }\n      };\n    }, {}],\n    3: [function (require, module, exports) {\n      \"use strict\";\n\n      module.exports = function (SIP) {\n        var ClientContext;\n\n        ClientContext = function (ua, method, target, options) {\n          var originalTarget = target; // Validate arguments\n\n          if (target === undefined) {\n            throw new TypeError('Not enough arguments');\n          }\n\n          this.ua = ua;\n          this.logger = ua.getLogger('sip.clientcontext');\n          this.method = method;\n          target = ua.normalizeTarget(target);\n\n          if (!target) {\n            throw new TypeError('Invalid target: ' + originalTarget);\n          }\n          /* Options\n           * - extraHeaders\n           * - params\n           * - contentType\n           * - body\n           */\n\n\n          options = Object.create(options || Object.prototype);\n          options.extraHeaders = (options.extraHeaders || []).slice(); // Build the request\n\n          this.request = new SIP.OutgoingRequest(this.method, target, this.ua, options.params, options.extraHeaders);\n\n          if (options.body) {\n            this.body = {};\n            this.body.body = options.body;\n\n            if (options.contentType) {\n              this.body.contentType = options.contentType;\n            }\n\n            this.request.body = this.body;\n          }\n          /* Set other properties from the request */\n\n\n          this.localIdentity = this.request.from;\n          this.remoteIdentity = this.request.to;\n          this.data = {};\n        };\n\n        ClientContext.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        ClientContext.prototype.send = function () {\n          new SIP.RequestSender(this, this.ua).send();\n          return this;\n        };\n\n        ClientContext.prototype.cancel = function (options) {\n          options = options || {};\n          options.extraHeaders = (options.extraHeaders || []).slice();\n          var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n          this.request.cancel(cancel_reason, options.extraHeaders);\n          this.emit('cancel');\n        };\n\n        ClientContext.prototype.receiveResponse = function (response) {\n          var cause = SIP.Utils.getReasonPhrase(response.status_code);\n\n          switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n              this.emit('progress', response, cause);\n              break;\n\n            case /^2[0-9]{2}$/.test(response.status_code):\n              if (this.ua.applicants[this]) {\n                delete this.ua.applicants[this];\n              }\n\n              this.emit('accepted', response, cause);\n              break;\n\n            default:\n              if (this.ua.applicants[this]) {\n                delete this.ua.applicants[this];\n              }\n\n              this.emit('rejected', response, cause);\n              this.emit('failed', response, cause);\n              break;\n          }\n        };\n\n        ClientContext.prototype.onRequestTimeout = function () {\n          this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n        };\n\n        ClientContext.prototype.onTransportError = function () {\n          this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n        };\n\n        SIP.ClientContext = ClientContext;\n      };\n    }, {}],\n    4: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Constants\n       */\n\n      /**\n       * SIP Constants.\n       * @augments SIP\n       */\n\n      module.exports = function (name, version) {\n        return {\n          USER_AGENT: name + '/' + version,\n          // SIP scheme\n          SIP: 'sip',\n          SIPS: 'sips',\n          // End and Failure causes\n          causes: {\n            // Generic error causes\n            CONNECTION_ERROR: 'Connection Error',\n            REQUEST_TIMEOUT: 'Request Timeout',\n            SIP_FAILURE_CODE: 'SIP Failure Code',\n            INTERNAL_ERROR: 'Internal Error',\n            // SIP error causes\n            BUSY: 'Busy',\n            REJECTED: 'Rejected',\n            REDIRECTED: 'Redirected',\n            UNAVAILABLE: 'Unavailable',\n            NOT_FOUND: 'Not Found',\n            ADDRESS_INCOMPLETE: 'Address Incomplete',\n            INCOMPATIBLE_SDP: 'Incompatible SDP',\n            AUTHENTICATION_ERROR: 'Authentication Error',\n            DIALOG_ERROR: 'Dialog Error',\n            // Session error causes\n            WEBRTC_NOT_SUPPORTED: 'WebRTC Not Supported',\n            WEBRTC_ERROR: 'WebRTC Error',\n            CANCELED: 'Canceled',\n            NO_ANSWER: 'No Answer',\n            EXPIRES: 'Expires',\n            NO_ACK: 'No ACK',\n            NO_PRACK: 'No PRACK',\n            USER_DENIED_MEDIA_ACCESS: 'User Denied Media Access',\n            BAD_MEDIA_DESCRIPTION: 'Bad Media Description',\n            RTP_TIMEOUT: 'RTP Timeout'\n          },\n          supported: {\n            UNSUPPORTED: 'none',\n            SUPPORTED: 'supported',\n            REQUIRED: 'required'\n          },\n          SIP_ERROR_CAUSES: {\n            REDIRECTED: [300, 301, 302, 305, 380],\n            BUSY: [486, 600],\n            REJECTED: [403, 603],\n            NOT_FOUND: [404, 604],\n            UNAVAILABLE: [480, 410, 408, 430],\n            ADDRESS_INCOMPLETE: [484],\n            INCOMPATIBLE_SDP: [488, 606],\n            AUTHENTICATION_ERROR: [401, 407]\n          },\n          // SIP Methods\n          ACK: 'ACK',\n          BYE: 'BYE',\n          CANCEL: 'CANCEL',\n          INFO: 'INFO',\n          INVITE: 'INVITE',\n          MESSAGE: 'MESSAGE',\n          NOTIFY: 'NOTIFY',\n          OPTIONS: 'OPTIONS',\n          REGISTER: 'REGISTER',\n          UPDATE: 'UPDATE',\n          SUBSCRIBE: 'SUBSCRIBE',\n          REFER: 'REFER',\n          PRACK: 'PRACK',\n\n          /* SIP Response Reasons\n           * DOC: http://www.iana.org/assignments/sip-parameters\n           * Copied from https://github.com/versatica/OverSIP/blob/master/lib/oversip/sip/constants.rb#L7\n           */\n          REASON_PHRASE: {\n            100: 'Trying',\n            180: 'Ringing',\n            181: 'Call Is Being Forwarded',\n            182: 'Queued',\n            183: 'Session Progress',\n            199: 'Early Dialog Terminated',\n            // draft-ietf-sipcore-199\n            200: 'OK',\n            202: 'Accepted',\n            // RFC 3265\n            204: 'No Notification',\n            //RFC 5839\n            300: 'Multiple Choices',\n            301: 'Moved Permanently',\n            302: 'Moved Temporarily',\n            305: 'Use Proxy',\n            380: 'Alternative Service',\n            400: 'Bad Request',\n            401: 'Unauthorized',\n            402: 'Payment Required',\n            403: 'Forbidden',\n            404: 'Not Found',\n            405: 'Method Not Allowed',\n            406: 'Not Acceptable',\n            407: 'Proxy Authentication Required',\n            408: 'Request Timeout',\n            410: 'Gone',\n            412: 'Conditional Request Failed',\n            // RFC 3903\n            413: 'Request Entity Too Large',\n            414: 'Request-URI Too Long',\n            415: 'Unsupported Media Type',\n            416: 'Unsupported URI Scheme',\n            417: 'Unknown Resource-Priority',\n            // RFC 4412\n            420: 'Bad Extension',\n            421: 'Extension Required',\n            422: 'Session Interval Too Small',\n            // RFC 4028\n            423: 'Interval Too Brief',\n            428: 'Use Identity Header',\n            // RFC 4474\n            429: 'Provide Referrer Identity',\n            // RFC 3892\n            430: 'Flow Failed',\n            // RFC 5626\n            433: 'Anonymity Disallowed',\n            // RFC 5079\n            436: 'Bad Identity-Info',\n            // RFC 4474\n            437: 'Unsupported Certificate',\n            // RFC 4744\n            438: 'Invalid Identity Header',\n            // RFC 4744\n            439: 'First Hop Lacks Outbound Support',\n            // RFC 5626\n            440: 'Max-Breadth Exceeded',\n            // RFC 5393\n            469: 'Bad Info Package',\n            // draft-ietf-sipcore-info-events\n            470: 'Consent Needed',\n            // RFC 5360\n            478: 'Unresolvable Destination',\n            // Custom code copied from Kamailio.\n            480: 'Temporarily Unavailable',\n            481: 'Call/Transaction Does Not Exist',\n            482: 'Loop Detected',\n            483: 'Too Many Hops',\n            484: 'Address Incomplete',\n            485: 'Ambiguous',\n            486: 'Busy Here',\n            487: 'Request Terminated',\n            488: 'Not Acceptable Here',\n            489: 'Bad Event',\n            // RFC 3265\n            491: 'Request Pending',\n            493: 'Undecipherable',\n            494: 'Security Agreement Required',\n            // RFC 3329\n            500: 'Internal Server Error',\n            501: 'Not Implemented',\n            502: 'Bad Gateway',\n            503: 'Service Unavailable',\n            504: 'Server Time-out',\n            505: 'Version Not Supported',\n            513: 'Message Too Large',\n            580: 'Precondition Failure',\n            // RFC 3312\n            600: 'Busy Everywhere',\n            603: 'Decline',\n            604: 'Does Not Exist Anywhere',\n            606: 'Not Acceptable'\n          },\n\n          /* SIP Option Tags\n           * DOC: http://www.iana.org/assignments/sip-parameters/sip-parameters.xhtml#sip-parameters-4\n           */\n          OPTION_TAGS: {\n            '100rel': true,\n            // RFC 3262\n            199: true,\n            // RFC 6228\n            answermode: true,\n            // RFC 5373\n            'early-session': true,\n            // RFC 3959\n            eventlist: true,\n            // RFC 4662\n            explicitsub: true,\n            // RFC-ietf-sipcore-refer-explicit-subscription-03\n            'from-change': true,\n            // RFC 4916\n            'geolocation-http': true,\n            // RFC 6442\n            'geolocation-sip': true,\n            // RFC 6442\n            gin: true,\n            // RFC 6140\n            gruu: true,\n            // RFC 5627\n            histinfo: true,\n            // RFC 7044\n            ice: true,\n            // RFC 5768\n            join: true,\n            // RFC 3911\n            'multiple-refer': true,\n            // RFC 5368\n            norefersub: true,\n            // RFC 4488\n            nosub: true,\n            // RFC-ietf-sipcore-refer-explicit-subscription-03\n            outbound: true,\n            // RFC 5626\n            path: true,\n            // RFC 3327\n            policy: true,\n            // RFC 6794\n            precondition: true,\n            // RFC 3312\n            pref: true,\n            // RFC 3840\n            privacy: true,\n            // RFC 3323\n            'recipient-list-invite': true,\n            // RFC 5366\n            'recipient-list-message': true,\n            // RFC 5365\n            'recipient-list-subscribe': true,\n            // RFC 5367\n            replaces: true,\n            // RFC 3891\n            'resource-priority': true,\n            // RFC 4412\n            'sdp-anat': true,\n            // RFC 4092\n            'sec-agree': true,\n            // RFC 3329\n            tdialog: true,\n            // RFC 4538\n            timer: true,\n            // RFC 4028\n            uui: true // RFC 7433\n\n          }\n        };\n      };\n    }, {}],\n    5: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview In-Dialog Request Sender\n       */\n\n      /**\n       * @augments SIP.Dialog\n       * @class Class creating an In-dialog request sender.\n       * @param {SIP.Dialog} dialog\n       * @param {Object} applicant\n       * @param {SIP.OutgoingRequest} request\n       */\n\n      /**\n       * @fileoverview in-Dialog Request Sender\n       */\n\n      module.exports = function (SIP) {\n        var RequestSender;\n\n        RequestSender = function (dialog, applicant, request) {\n          this.dialog = dialog;\n          this.applicant = applicant;\n          this.request = request; // RFC3261 14.1 Modifying an Existing Session. UAC Behavior.\n\n          this.reattempt = false;\n          this.reattemptTimer = null;\n        };\n\n        RequestSender.prototype = {\n          send: function () {\n            var self = this,\n                request_sender = new SIP.RequestSender(this, this.dialog.owner.ua);\n            request_sender.send(); // RFC3261 14.2 Modifying an Existing Session -UAC BEHAVIOR-\n\n            if (this.request.method === SIP.C.INVITE && request_sender.clientTransaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n              this.dialog.uac_pending_reply = true;\n              request_sender.clientTransaction.on('stateChanged', function stateChanged() {\n                if (this.state === SIP.Transactions.C.STATUS_ACCEPTED || this.state === SIP.Transactions.C.STATUS_COMPLETED || this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n                  this.removeListener('stateChanged', stateChanged);\n                  self.dialog.uac_pending_reply = false;\n\n                  if (self.dialog.uas_pending_reply === false) {\n                    self.dialog.owner.onReadyToReinvite();\n                  }\n                }\n              });\n            }\n          },\n          onRequestTimeout: function () {\n            this.applicant.onRequestTimeout();\n          },\n          onTransportError: function () {\n            this.applicant.onTransportError();\n          },\n          receiveResponse: function (response) {\n            var self = this; // RFC3261 12.2.1.2 408 or 481 is received for a request within a dialog.\n\n            if (response.status_code === 408 || response.status_code === 481) {\n              this.applicant.onDialogError(response);\n            } else if (response.method === SIP.C.INVITE && response.status_code === 491) {\n              if (this.reattempt) {\n                this.applicant.receiveResponse(response);\n              } else {\n                this.request.cseq.value = this.dialog.local_seqnum += 1;\n                this.reattemptTimer = SIP.Timers.setTimeout(function () {\n                  if (self.applicant.owner.status !== SIP.Session.C.STATUS_TERMINATED) {\n                    self.reattempt = true;\n                    self.request_sender.send();\n                  }\n                }, this.getReattemptTimeout());\n              }\n            } else {\n              this.applicant.receiveResponse(response);\n            }\n          }\n        };\n        return RequestSender;\n      };\n    }, {}],\n    6: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Dialog\n       */\n\n      /**\n       * @augments SIP\n       * @class Class creating a SIP dialog.\n       * @param {SIP.RTCSession} owner\n       * @param {SIP.IncomingRequest|SIP.IncomingResponse} message\n       * @param {Enum} type UAC / UAS\n       * @param {Enum} state SIP.Dialog.C.STATUS_EARLY / SIP.Dialog.C.STATUS_CONFIRMED\n       */\n\n      module.exports = function (SIP) {\n        var RequestSender = require('./Dialog/RequestSender')(SIP);\n\n        var Dialog,\n            C = {\n          // Dialog states\n          STATUS_EARLY: 1,\n          STATUS_CONFIRMED: 2\n        }; // RFC 3261 12.1\n\n        Dialog = function (owner, message, type, state) {\n          var contact;\n          this.uac_pending_reply = false;\n          this.uas_pending_reply = false;\n\n          if (!message.hasHeader('contact')) {\n            return {\n              error: 'unable to create a Dialog without Contact header field'\n            };\n          }\n\n          if (message instanceof SIP.IncomingResponse) {\n            state = message.status_code < 200 ? C.STATUS_EARLY : C.STATUS_CONFIRMED;\n          } else {\n            // Create confirmed dialog if state is not defined\n            state = state || C.STATUS_CONFIRMED;\n          }\n\n          contact = message.parseHeader('contact'); // RFC 3261 12.1.1\n\n          if (type === 'UAS') {\n            this.id = {\n              call_id: message.call_id,\n              local_tag: message.to_tag,\n              remote_tag: message.from_tag,\n              toString: function () {\n                return this.call_id + this.local_tag + this.remote_tag;\n              }\n            };\n            this.state = state;\n            this.remote_seqnum = message.cseq;\n            this.local_uri = message.parseHeader('to').uri;\n            this.remote_uri = message.parseHeader('from').uri;\n            this.remote_target = contact.uri;\n            this.route_set = message.getHeaders('record-route');\n            this.invite_seqnum = message.cseq;\n            this.local_seqnum = message.cseq;\n          } // RFC 3261 12.1.2\n          else if (type === 'UAC') {\n            this.id = {\n              call_id: message.call_id,\n              local_tag: message.from_tag,\n              remote_tag: message.to_tag,\n              toString: function () {\n                return this.call_id + this.local_tag + this.remote_tag;\n              }\n            };\n            this.state = state;\n            this.invite_seqnum = message.cseq;\n            this.local_seqnum = message.cseq;\n            this.local_uri = message.parseHeader('from').uri;\n            this.pracked = [];\n            this.remote_uri = message.parseHeader('to').uri;\n            this.remote_target = contact.uri;\n            this.route_set = message.getHeaders('record-route').reverse(); //RENDERBODY\n\n            if (this.state === C.STATUS_EARLY && !owner.hasOffer) {\n              this.mediaHandler = owner.mediaHandlerFactory(owner);\n            }\n          }\n\n          this.logger = owner.ua.getLogger('sip.dialog', this.id.toString());\n          this.owner = owner;\n          owner.ua.dialogs[this.id.toString()] = this;\n          this.logger.log('new ' + type + ' dialog created with status ' + (this.state === C.STATUS_EARLY ? 'EARLY' : 'CONFIRMED'));\n          owner.emit('dialog', this);\n        };\n\n        Dialog.prototype = {\n          /**\n           * @param {SIP.IncomingMessage} message\n           * @param {Enum} UAC/UAS\n           */\n          update: function (message, type) {\n            this.state = C.STATUS_CONFIRMED;\n            this.logger.log('dialog ' + this.id.toString() + '  changed to CONFIRMED state');\n\n            if (type === 'UAC') {\n              // RFC 3261 13.2.2.4\n              this.route_set = message.getHeaders('record-route').reverse();\n            }\n          },\n          terminate: function () {\n            this.logger.log('dialog ' + this.id.toString() + ' deleted');\n\n            if (this.mediaHandler && this.state !== C.STATUS_CONFIRMED) {\n              this.mediaHandler.peerConnection.close();\n            }\n\n            delete this.owner.ua.dialogs[this.id.toString()];\n          },\n\n          /**\n          * @param {String} method request method\n          * @param {Object} extraHeaders extra headers\n          * @returns {SIP.OutgoingRequest}\n          */\n          // RFC 3261 12.2.1.1\n          createRequest: function (method, extraHeaders, body) {\n            var cseq, request;\n            extraHeaders = (extraHeaders || []).slice();\n\n            if (!this.local_seqnum) {\n              this.local_seqnum = Math.floor(Math.random() * 10000);\n            }\n\n            cseq = method === SIP.C.CANCEL || method === SIP.C.ACK ? this.invite_seqnum : this.local_seqnum += 1;\n            request = new SIP.OutgoingRequest(method, this.remote_target, this.owner.ua, {\n              'cseq': cseq,\n              'call_id': this.id.call_id,\n              'from_uri': this.local_uri,\n              'from_tag': this.id.local_tag,\n              'to_uri': this.remote_uri,\n              'to_tag': this.id.remote_tag,\n              'route_set': this.route_set\n            }, extraHeaders, body);\n            request.dialog = this;\n            return request;\n          },\n\n          /**\n          * @param {SIP.IncomingRequest} request\n          * @returns {Boolean}\n          */\n          // RFC 3261 12.2.2\n          checkInDialogRequest: function (request) {\n            var self = this;\n\n            if (!this.remote_seqnum) {\n              this.remote_seqnum = request.cseq;\n            } else if (request.cseq < this.remote_seqnum) {\n              //Do not try to reply to an ACK request.\n              if (request.method !== SIP.C.ACK) {\n                request.reply(500);\n              }\n\n              if (request.cseq === this.invite_seqnum) {\n                return true;\n              }\n\n              return false;\n            } else if (request.cseq > this.remote_seqnum) {\n              this.remote_seqnum = request.cseq;\n            }\n\n            switch (request.method) {\n              // RFC3261 14.2 Modifying an Existing Session -UAS BEHAVIOR-\n              case SIP.C.INVITE:\n                if (this.uac_pending_reply === true) {\n                  request.reply(491);\n                } else if (this.uas_pending_reply === true) {\n                  var retryAfter = (Math.random() * 10 | 0) + 1;\n                  request.reply(500, null, ['Retry-After:' + retryAfter]);\n                  return false;\n                } else {\n                  this.uas_pending_reply = true;\n                  request.server_transaction.on('stateChanged', function stateChanged() {\n                    if (this.state === SIP.Transactions.C.STATUS_ACCEPTED || this.state === SIP.Transactions.C.STATUS_COMPLETED || this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n                      this.removeListener('stateChanged', stateChanged);\n                      self.uas_pending_reply = false;\n\n                      if (self.uac_pending_reply === false) {\n                        self.owner.onReadyToReinvite();\n                      }\n                    }\n                  });\n                } // RFC3261 12.2.2 Replace the dialog`s remote target URI if the request is accepted\n\n\n                if (request.hasHeader('contact')) {\n                  request.server_transaction.on('stateChanged', function () {\n                    if (this.state === SIP.Transactions.C.STATUS_ACCEPTED) {\n                      self.remote_target = request.parseHeader('contact').uri;\n                    }\n                  });\n                }\n\n                break;\n\n              case SIP.C.NOTIFY:\n                // RFC6665 3.2 Replace the dialog`s remote target URI if the request is accepted\n                if (request.hasHeader('contact')) {\n                  request.server_transaction.on('stateChanged', function () {\n                    if (this.state === SIP.Transactions.C.STATUS_COMPLETED) {\n                      self.remote_target = request.parseHeader('contact').uri;\n                    }\n                  });\n                }\n\n                break;\n            }\n\n            return true;\n          },\n          sendRequest: function (applicant, method, options) {\n            options = options || {};\n            var extraHeaders = (options.extraHeaders || []).slice();\n            var body = null;\n\n            if (options.body) {\n              if (options.body.body) {\n                body = options.body;\n              } else {\n                body = {};\n                body.body = options.body;\n\n                if (options.contentType) {\n                  body.contentType = options.contentType;\n                }\n              }\n            }\n\n            var request = this.createRequest(method, extraHeaders, body),\n                request_sender = new RequestSender(this, applicant, request);\n            request_sender.send();\n            return request;\n          },\n\n          /**\n          * @param {SIP.IncomingRequest} request\n          */\n          receiveRequest: function (request) {\n            //Check in-dialog request\n            if (!this.checkInDialogRequest(request)) {\n              return;\n            }\n\n            this.owner.receiveRequest(request);\n          }\n        };\n        Dialog.C = C;\n        SIP.Dialog = Dialog;\n      };\n    }, {\n      \"./Dialog/RequestSender\": 5\n    }],\n    7: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Digest Authentication\n       */\n\n      /**\n       * SIP Digest Authentication.\n       * @augments SIP.\n       * @function Digest Authentication\n       * @param {SIP.UA} ua\n       */\n\n      module.exports = function (Utils) {\n        var DigestAuthentication;\n\n        DigestAuthentication = function (ua) {\n          this.logger = ua.getLogger('sipjs.digestauthentication');\n          this.username = ua.configuration.authorizationUser;\n          this.password = ua.configuration.password;\n          this.cnonce = null;\n          this.nc = 0;\n          this.ncHex = '00000000';\n          this.response = null;\n        };\n        /**\n        * Performs Digest authentication given a SIP request and the challenge\n        * received in a response to that request.\n        * Returns true if credentials were successfully generated, false otherwise.\n        *\n        * @param {SIP.OutgoingRequest} request\n        * @param {Object} challenge\n        */\n\n\n        DigestAuthentication.prototype.authenticate = function (request, challenge) {\n          // Inspect and validate the challenge.\n          this.algorithm = challenge.algorithm;\n          this.realm = challenge.realm;\n          this.nonce = challenge.nonce;\n          this.opaque = challenge.opaque;\n          this.stale = challenge.stale;\n\n          if (this.algorithm) {\n            if (this.algorithm !== 'MD5') {\n              this.logger.warn('challenge with Digest algorithm different than \"MD5\", authentication aborted');\n              return false;\n            }\n          } else {\n            this.algorithm = 'MD5';\n          }\n\n          if (!this.realm) {\n            this.logger.warn('challenge without Digest realm, authentication aborted');\n            return false;\n          }\n\n          if (!this.nonce) {\n            this.logger.warn('challenge without Digest nonce, authentication aborted');\n            return false;\n          } // 'qop' can contain a list of values (Array). Let's choose just one.\n\n\n          if (challenge.qop) {\n            if (challenge.qop.indexOf('auth') > -1) {\n              this.qop = 'auth';\n            } else if (challenge.qop.indexOf('auth-int') > -1) {\n              this.qop = 'auth-int';\n            } else {\n              // Otherwise 'qop' is present but does not contain 'auth' or 'auth-int', so abort here.\n              this.logger.warn('challenge without Digest qop different than \"auth\" or \"auth-int\", authentication aborted');\n              return false;\n            }\n          } else {\n            this.qop = null;\n          } // Fill other attributes.\n\n\n          this.method = request.method;\n          this.uri = request.ruri;\n          this.cnonce = Utils.createRandomToken(12);\n          this.nc += 1;\n          this.updateNcHex(); // nc-value = 8LHEX. Max value = 'FFFFFFFF'.\n\n          if (this.nc === 4294967296) {\n            this.nc = 1;\n            this.ncHex = '00000001';\n          } // Calculate the Digest \"response\" value.\n\n\n          this.calculateResponse();\n          return true;\n        };\n        /**\n        * Generate Digest 'response' value.\n        * @private\n        */\n\n\n        DigestAuthentication.prototype.calculateResponse = function () {\n          var ha1, ha2; // HA1 = MD5(A1) = MD5(username:realm:password)\n\n          ha1 = Utils.calculateMD5(this.username + \":\" + this.realm + \":\" + this.password);\n\n          if (this.qop === 'auth') {\n            // HA2 = MD5(A2) = MD5(method:digestURI)\n            ha2 = Utils.calculateMD5(this.method + \":\" + this.uri); // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n\n            this.response = Utils.calculateMD5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth:\" + ha2);\n          } else if (this.qop === 'auth-int') {\n            // HA2 = MD5(A2) = MD5(method:digestURI:MD5(entityBody))\n            ha2 = Utils.calculateMD5(this.method + \":\" + this.uri + \":\" + Utils.calculateMD5(this.body ? this.body : \"\")); // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n\n            this.response = Utils.calculateMD5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth-int:\" + ha2);\n          } else if (this.qop === null) {\n            // HA2 = MD5(A2) = MD5(method:digestURI)\n            ha2 = Utils.calculateMD5(this.method + \":\" + this.uri); // response = MD5(HA1:nonce:HA2)\n\n            this.response = Utils.calculateMD5(ha1 + \":\" + this.nonce + \":\" + ha2);\n          }\n        };\n        /**\n        * Return the Proxy-Authorization or WWW-Authorization header value.\n        */\n\n\n        DigestAuthentication.prototype.toString = function () {\n          var auth_params = [];\n\n          if (!this.response) {\n            throw new Error('response field does not exist, cannot generate Authorization header');\n          }\n\n          auth_params.push('algorithm=' + this.algorithm);\n          auth_params.push('username=\"' + this.username + '\"');\n          auth_params.push('realm=\"' + this.realm + '\"');\n          auth_params.push('nonce=\"' + this.nonce + '\"');\n          auth_params.push('uri=\"' + this.uri + '\"');\n          auth_params.push('response=\"' + this.response + '\"');\n\n          if (this.opaque) {\n            auth_params.push('opaque=\"' + this.opaque + '\"');\n          }\n\n          if (this.qop) {\n            auth_params.push('qop=' + this.qop);\n            auth_params.push('cnonce=\"' + this.cnonce + '\"');\n            auth_params.push('nc=' + this.ncHex);\n          }\n\n          return 'Digest ' + auth_params.join(', ');\n        };\n        /**\n        * Generate the 'nc' value as required by Digest in this.ncHex by reading this.nc.\n        * @private\n        */\n\n\n        DigestAuthentication.prototype.updateNcHex = function () {\n          var hex = Number(this.nc).toString(16);\n          this.ncHex = '00000000'.substr(0, 8 - hex.length) + hex;\n        };\n\n        return DigestAuthentication;\n      };\n    }, {}],\n    8: [function (require, module, exports) {\n      \"use strict\";\n\n      var NodeEventEmitter = require('events').EventEmitter;\n\n      module.exports = function (console) {\n        // Don't use `new SIP.EventEmitter()` for inheriting.\n        // Use Object.create(SIP.EventEmitter.prototoype);\n        function EventEmitter() {\n          NodeEventEmitter.call(this);\n        }\n\n        EventEmitter.prototype = Object.create(NodeEventEmitter.prototype, {\n          constructor: {\n            value: EventEmitter,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n\n        EventEmitter.prototype.off = function off(eventName, listener) {\n          var warning = '';\n          warning += 'SIP.EventEmitter#off is deprecated and may be removed in future SIP.js versions.\\n';\n          warning += 'Please use removeListener or removeAllListeners instead.\\n';\n          warning += 'See here for more details:\\n';\n          warning += 'http://nodejs.org/api/events.html#events_emitter_removelistener_event_listener';\n          console.warn(warning);\n\n          if (arguments.length < 2) {\n            return this.removeAllListeners.apply(this, arguments);\n          } else {\n            return this.removeListener(eventName, listener);\n          }\n        };\n\n        return EventEmitter;\n      };\n    }, {\n      \"events\": 1\n    }],\n    9: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview Exceptions\n       */\n\n      /**\n       * SIP Exceptions.\n       * @augments SIP\n       */\n\n      module.exports = {\n        ConfigurationError: function () {\n          var exception = function (parameter, value) {\n            this.code = 1;\n            this.name = 'CONFIGURATION_ERROR';\n            this.parameter = parameter;\n            this.value = value;\n            this.message = !this.value ? 'Missing parameter: ' + this.parameter : 'Invalid value ' + JSON.stringify(this.value) + ' for parameter \"' + this.parameter + '\"';\n          };\n\n          exception.prototype = new Error();\n          return exception;\n        }(),\n        InvalidStateError: function () {\n          var exception = function (status) {\n            this.code = 2;\n            this.name = 'INVALID_STATE_ERROR';\n            this.status = status;\n            this.message = 'Invalid status: ' + status;\n          };\n\n          exception.prototype = new Error();\n          return exception;\n        }(),\n        NotSupportedError: function () {\n          var exception = function (message) {\n            this.code = 3;\n            this.name = 'NOT_SUPPORTED_ERROR';\n            this.message = message;\n          };\n\n          exception.prototype = new Error();\n          return exception;\n        }(),\n        GetDescriptionError: function () {\n          var exception = function (message) {\n            this.code = 4;\n            this.name = 'GET_DESCRIPTION_ERROR';\n            this.message = message;\n          };\n\n          exception.prototype = new Error();\n          return exception;\n        }()\n      };\n    }, {}],\n    10: [function (require, module, exports) {\n      \"use strict\";\n\n      var Grammar = require('./Grammar/dist/Grammar');\n\n      module.exports = function (SIP) {\n        return {\n          parse: function parseCustom(input, startRule) {\n            var options = {\n              startRule: startRule,\n              SIP: SIP\n            };\n\n            try {\n              Grammar.parse(input, options);\n            } catch (e) {\n              options.data = -1;\n            }\n\n            return options.data;\n          }\n        };\n      };\n    }, {\n      \"./Grammar/dist/Grammar\": 11\n    }],\n    11: [function (require, module, exports) {\n      module.exports = function () {\n        /*\n         * Generated by PEG.js 0.8.0.\n         *\n         * http://pegjs.majda.cz/\n         */\n        function peg$subclass(child, parent) {\n          function ctor() {\n            this.constructor = child;\n          }\n\n          ctor.prototype = parent.prototype;\n          child.prototype = new ctor();\n        }\n\n        function SyntaxError(message, expected, found, offset, line, column) {\n          this.message = message;\n          this.expected = expected;\n          this.found = found;\n          this.offset = offset;\n          this.line = line;\n          this.column = column;\n          this.name = \"SyntaxError\";\n        }\n\n        peg$subclass(SyntaxError, Error);\n\n        function parse(input) {\n          var options = arguments.length > 1 ? arguments[1] : {},\n              peg$FAILED = {},\n              peg$startRuleIndices = {\n            Contact: 118,\n            Name_Addr_Header: 155,\n            Record_Route: 175,\n            Request_Response: 81,\n            SIP_URI: 45,\n            Subscription_State: 185,\n            Supported: 190,\n            Require: 181,\n            Via: 193,\n            absoluteURI: 84,\n            Call_ID: 117,\n            Content_Disposition: 129,\n            Content_Length: 134,\n            Content_Type: 135,\n            CSeq: 145,\n            displayName: 121,\n            Event: 148,\n            From: 150,\n            host: 52,\n            Max_Forwards: 153,\n            Min_SE: 212,\n            Proxy_Authenticate: 156,\n            quoted_string: 40,\n            Refer_To: 177,\n            Replaces: 178,\n            Session_Expires: 209,\n            stun_URI: 216,\n            To: 191,\n            turn_URI: 223,\n            uuid: 226,\n            WWW_Authenticate: 208,\n            challenge: 157\n          },\n              peg$startRuleIndex = 118,\n              peg$consts = [\"\\r\\n\", {\n            type: \"literal\",\n            value: \"\\r\\n\",\n            description: \"\\\"\\\\r\\\\n\\\"\"\n          }, /^[0-9]/, {\n            type: \"class\",\n            value: \"[0-9]\",\n            description: \"[0-9]\"\n          }, /^[a-zA-Z]/, {\n            type: \"class\",\n            value: \"[a-zA-Z]\",\n            description: \"[a-zA-Z]\"\n          }, /^[0-9a-fA-F]/, {\n            type: \"class\",\n            value: \"[0-9a-fA-F]\",\n            description: \"[0-9a-fA-F]\"\n          }, /^[\\0-\\xFF]/, {\n            type: \"class\",\n            value: \"[\\\\0-\\\\xFF]\",\n            description: \"[\\\\0-\\\\xFF]\"\n          }, /^[\"]/, {\n            type: \"class\",\n            value: \"[\\\"]\",\n            description: \"[\\\"]\"\n          }, \" \", {\n            type: \"literal\",\n            value: \" \",\n            description: \"\\\" \\\"\"\n          }, \"\\t\", {\n            type: \"literal\",\n            value: \"\\t\",\n            description: \"\\\"\\\\t\\\"\"\n          }, /^[a-zA-Z0-9]/, {\n            type: \"class\",\n            value: \"[a-zA-Z0-9]\",\n            description: \"[a-zA-Z0-9]\"\n          }, \";\", {\n            type: \"literal\",\n            value: \";\",\n            description: \"\\\";\\\"\"\n          }, \"/\", {\n            type: \"literal\",\n            value: \"/\",\n            description: \"\\\"/\\\"\"\n          }, \"?\", {\n            type: \"literal\",\n            value: \"?\",\n            description: \"\\\"?\\\"\"\n          }, \":\", {\n            type: \"literal\",\n            value: \":\",\n            description: \"\\\":\\\"\"\n          }, \"@\", {\n            type: \"literal\",\n            value: \"@\",\n            description: \"\\\"@\\\"\"\n          }, \"&\", {\n            type: \"literal\",\n            value: \"&\",\n            description: \"\\\"&\\\"\"\n          }, \"=\", {\n            type: \"literal\",\n            value: \"=\",\n            description: \"\\\"=\\\"\"\n          }, \"+\", {\n            type: \"literal\",\n            value: \"+\",\n            description: \"\\\"+\\\"\"\n          }, \"$\", {\n            type: \"literal\",\n            value: \"$\",\n            description: \"\\\"$\\\"\"\n          }, \",\", {\n            type: \"literal\",\n            value: \",\",\n            description: \"\\\",\\\"\"\n          }, \"-\", {\n            type: \"literal\",\n            value: \"-\",\n            description: \"\\\"-\\\"\"\n          }, \"_\", {\n            type: \"literal\",\n            value: \"_\",\n            description: \"\\\"_\\\"\"\n          }, \".\", {\n            type: \"literal\",\n            value: \".\",\n            description: \"\\\".\\\"\"\n          }, \"!\", {\n            type: \"literal\",\n            value: \"!\",\n            description: \"\\\"!\\\"\"\n          }, \"~\", {\n            type: \"literal\",\n            value: \"~\",\n            description: \"\\\"~\\\"\"\n          }, \"*\", {\n            type: \"literal\",\n            value: \"*\",\n            description: \"\\\"*\\\"\"\n          }, \"'\", {\n            type: \"literal\",\n            value: \"'\",\n            description: \"\\\"'\\\"\"\n          }, \"(\", {\n            type: \"literal\",\n            value: \"(\",\n            description: \"\\\"(\\\"\"\n          }, \")\", {\n            type: \"literal\",\n            value: \")\",\n            description: \"\\\")\\\"\"\n          }, peg$FAILED, \"%\", {\n            type: \"literal\",\n            value: \"%\",\n            description: \"\\\"%\\\"\"\n          }, null, [], function () {\n            return \" \";\n          }, function () {\n            return ':';\n          }, /^[!-~]/, {\n            type: \"class\",\n            value: \"[!-~]\",\n            description: \"[!-~]\"\n          }, /^[\\x80-\\uFFFF]/, {\n            type: \"class\",\n            value: \"[\\\\x80-\\\\uFFFF]\",\n            description: \"[\\\\x80-\\\\uFFFF]\"\n          }, /^[\\x80-\\xBF]/, {\n            type: \"class\",\n            value: \"[\\\\x80-\\\\xBF]\",\n            description: \"[\\\\x80-\\\\xBF]\"\n          }, /^[a-f]/, {\n            type: \"class\",\n            value: \"[a-f]\",\n            description: \"[a-f]\"\n          }, \"`\", {\n            type: \"literal\",\n            value: \"`\",\n            description: \"\\\"`\\\"\"\n          }, \"<\", {\n            type: \"literal\",\n            value: \"<\",\n            description: \"\\\"<\\\"\"\n          }, \">\", {\n            type: \"literal\",\n            value: \">\",\n            description: \"\\\">\\\"\"\n          }, \"\\\\\", {\n            type: \"literal\",\n            value: \"\\\\\",\n            description: \"\\\"\\\\\\\\\\\"\"\n          }, \"[\", {\n            type: \"literal\",\n            value: \"[\",\n            description: \"\\\"[\\\"\"\n          }, \"]\", {\n            type: \"literal\",\n            value: \"]\",\n            description: \"\\\"]\\\"\"\n          }, \"{\", {\n            type: \"literal\",\n            value: \"{\",\n            description: \"\\\"{\\\"\"\n          }, \"}\", {\n            type: \"literal\",\n            value: \"}\",\n            description: \"\\\"}\\\"\"\n          }, function () {\n            return \"*\";\n          }, function () {\n            return \"/\";\n          }, function () {\n            return \"=\";\n          }, function () {\n            return \"(\";\n          }, function () {\n            return \")\";\n          }, function () {\n            return \">\";\n          }, function () {\n            return \"<\";\n          }, function () {\n            return \",\";\n          }, function () {\n            return \";\";\n          }, function () {\n            return \":\";\n          }, function () {\n            return \"\\\"\";\n          }, /^[!-']/, {\n            type: \"class\",\n            value: \"[!-']\",\n            description: \"[!-']\"\n          }, /^[*-[]/, {\n            type: \"class\",\n            value: \"[*-[]\",\n            description: \"[*-[]\"\n          }, /^[\\]-~]/, {\n            type: \"class\",\n            value: \"[\\\\]-~]\",\n            description: \"[\\\\]-~]\"\n          }, function (contents) {\n            return contents;\n          }, /^[#-[]/, {\n            type: \"class\",\n            value: \"[#-[]\",\n            description: \"[#-[]\"\n          }, /^[\\0-\\t]/, {\n            type: \"class\",\n            value: \"[\\\\0-\\\\t]\",\n            description: \"[\\\\0-\\\\t]\"\n          }, /^[\\x0B-\\f]/, {\n            type: \"class\",\n            value: \"[\\\\x0B-\\\\f]\",\n            description: \"[\\\\x0B-\\\\f]\"\n          }, /^[\\x0E-]/, {\n            type: \"class\",\n            value: \"[\\\\x0E-]\",\n            description: \"[\\\\x0E-]\"\n          }, function () {\n            options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port);\n            delete options.data.scheme;\n            delete options.data.user;\n            delete options.data.host;\n            delete options.data.host_type;\n            delete options.data.port;\n          }, function () {\n            options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n            delete options.data.scheme;\n            delete options.data.user;\n            delete options.data.host;\n            delete options.data.host_type;\n            delete options.data.port;\n            delete options.data.uri_params;\n\n            if (options.startRule === 'SIP_URI') {\n              options.data = options.data.uri;\n            }\n          }, \"sips\", {\n            type: \"literal\",\n            value: \"sips\",\n            description: \"\\\"sips\\\"\"\n          }, \"sip\", {\n            type: \"literal\",\n            value: \"sip\",\n            description: \"\\\"sip\\\"\"\n          }, function (uri_scheme) {\n            options.data.scheme = uri_scheme;\n          }, function () {\n            options.data.user = decodeURIComponent(text().slice(0, -1));\n          }, function () {\n            options.data.password = text();\n          }, function () {\n            options.data.host = text();\n            return options.data.host;\n          }, function () {\n            options.data.host_type = 'domain';\n            return text();\n          }, /^[a-zA-Z0-9_\\-]/, {\n            type: \"class\",\n            value: \"[a-zA-Z0-9_\\\\-]\",\n            description: \"[a-zA-Z0-9_\\\\-]\"\n          }, /^[a-zA-Z0-9\\-]/, {\n            type: \"class\",\n            value: \"[a-zA-Z0-9\\\\-]\",\n            description: \"[a-zA-Z0-9\\\\-]\"\n          }, function () {\n            options.data.host_type = 'IPv6';\n            return text();\n          }, \"::\", {\n            type: \"literal\",\n            value: \"::\",\n            description: \"\\\"::\\\"\"\n          }, function () {\n            options.data.host_type = 'IPv6';\n            return text();\n          }, function () {\n            options.data.host_type = 'IPv4';\n            return text();\n          }, \"25\", {\n            type: \"literal\",\n            value: \"25\",\n            description: \"\\\"25\\\"\"\n          }, /^[0-5]/, {\n            type: \"class\",\n            value: \"[0-5]\",\n            description: \"[0-5]\"\n          }, \"2\", {\n            type: \"literal\",\n            value: \"2\",\n            description: \"\\\"2\\\"\"\n          }, /^[0-4]/, {\n            type: \"class\",\n            value: \"[0-4]\",\n            description: \"[0-4]\"\n          }, \"1\", {\n            type: \"literal\",\n            value: \"1\",\n            description: \"\\\"1\\\"\"\n          }, /^[1-9]/, {\n            type: \"class\",\n            value: \"[1-9]\",\n            description: \"[1-9]\"\n          }, function (port) {\n            port = parseInt(port.join(''));\n            options.data.port = port;\n            return port;\n          }, \"transport=\", {\n            type: \"literal\",\n            value: \"transport=\",\n            description: \"\\\"transport=\\\"\"\n          }, \"udp\", {\n            type: \"literal\",\n            value: \"udp\",\n            description: \"\\\"udp\\\"\"\n          }, \"tcp\", {\n            type: \"literal\",\n            value: \"tcp\",\n            description: \"\\\"tcp\\\"\"\n          }, \"sctp\", {\n            type: \"literal\",\n            value: \"sctp\",\n            description: \"\\\"sctp\\\"\"\n          }, \"tls\", {\n            type: \"literal\",\n            value: \"tls\",\n            description: \"\\\"tls\\\"\"\n          }, function (transport) {\n            if (!options.data.uri_params) options.data.uri_params = {};\n            options.data.uri_params['transport'] = transport.toLowerCase();\n          }, \"user=\", {\n            type: \"literal\",\n            value: \"user=\",\n            description: \"\\\"user=\\\"\"\n          }, \"phone\", {\n            type: \"literal\",\n            value: \"phone\",\n            description: \"\\\"phone\\\"\"\n          }, \"ip\", {\n            type: \"literal\",\n            value: \"ip\",\n            description: \"\\\"ip\\\"\"\n          }, function (user) {\n            if (!options.data.uri_params) options.data.uri_params = {};\n            options.data.uri_params['user'] = user.toLowerCase();\n          }, \"method=\", {\n            type: \"literal\",\n            value: \"method=\",\n            description: \"\\\"method=\\\"\"\n          }, function (method) {\n            if (!options.data.uri_params) options.data.uri_params = {};\n            options.data.uri_params['method'] = method;\n          }, \"ttl=\", {\n            type: \"literal\",\n            value: \"ttl=\",\n            description: \"\\\"ttl=\\\"\"\n          }, function (ttl) {\n            if (!options.data.params) options.data.params = {};\n            options.data.params['ttl'] = ttl;\n          }, \"maddr=\", {\n            type: \"literal\",\n            value: \"maddr=\",\n            description: \"\\\"maddr=\\\"\"\n          }, function (maddr) {\n            if (!options.data.uri_params) options.data.uri_params = {};\n            options.data.uri_params['maddr'] = maddr;\n          }, \"lr\", {\n            type: \"literal\",\n            value: \"lr\",\n            description: \"\\\"lr\\\"\"\n          }, function () {\n            if (!options.data.uri_params) options.data.uri_params = {};\n            options.data.uri_params['lr'] = undefined;\n          }, function (param, value) {\n            if (!options.data.uri_params) options.data.uri_params = {};\n\n            if (value === null) {\n              value = undefined;\n            } else {\n              value = value[1];\n            }\n\n            options.data.uri_params[param.toLowerCase()] = value && value.toLowerCase();\n          }, function (hname, hvalue) {\n            hname = hname.join('').toLowerCase();\n            hvalue = hvalue.join('');\n            if (!options.data.uri_headers) options.data.uri_headers = {};\n\n            if (!options.data.uri_headers[hname]) {\n              options.data.uri_headers[hname] = [hvalue];\n            } else {\n              options.data.uri_headers[hname].push(hvalue);\n            }\n          }, function () {\n            // lots of tests fail if this isn't guarded...\n            if (options.startRule === 'Refer_To') {\n              options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n              delete options.data.scheme;\n              delete options.data.user;\n              delete options.data.host;\n              delete options.data.host_type;\n              delete options.data.port;\n              delete options.data.uri_params;\n            }\n          }, \"//\", {\n            type: \"literal\",\n            value: \"//\",\n            description: \"\\\"//\\\"\"\n          }, function () {\n            options.data.scheme = text();\n          }, {\n            type: \"literal\",\n            value: \"SIP\",\n            description: \"\\\"SIP\\\"\"\n          }, function () {\n            options.data.sip_version = text();\n          }, \"INVITE\", {\n            type: \"literal\",\n            value: \"INVITE\",\n            description: \"\\\"INVITE\\\"\"\n          }, \"ACK\", {\n            type: \"literal\",\n            value: \"ACK\",\n            description: \"\\\"ACK\\\"\"\n          }, \"VXACH\", {\n            type: \"literal\",\n            value: \"VXACH\",\n            description: \"\\\"VXACH\\\"\"\n          }, \"OPTIONS\", {\n            type: \"literal\",\n            value: \"OPTIONS\",\n            description: \"\\\"OPTIONS\\\"\"\n          }, \"BYE\", {\n            type: \"literal\",\n            value: \"BYE\",\n            description: \"\\\"BYE\\\"\"\n          }, \"CANCEL\", {\n            type: \"literal\",\n            value: \"CANCEL\",\n            description: \"\\\"CANCEL\\\"\"\n          }, \"REGISTER\", {\n            type: \"literal\",\n            value: \"REGISTER\",\n            description: \"\\\"REGISTER\\\"\"\n          }, \"SUBSCRIBE\", {\n            type: \"literal\",\n            value: \"SUBSCRIBE\",\n            description: \"\\\"SUBSCRIBE\\\"\"\n          }, \"NOTIFY\", {\n            type: \"literal\",\n            value: \"NOTIFY\",\n            description: \"\\\"NOTIFY\\\"\"\n          }, \"REFER\", {\n            type: \"literal\",\n            value: \"REFER\",\n            description: \"\\\"REFER\\\"\"\n          }, function () {\n            options.data.method = text();\n            return options.data.method;\n          }, function (status_code) {\n            options.data.status_code = parseInt(status_code.join(''));\n          }, function () {\n            options.data.reason_phrase = text();\n          }, function () {\n            options.data = text();\n          }, function () {\n            var idx, length;\n            length = options.data.multi_header.length;\n\n            for (idx = 0; idx < length; idx++) {\n              if (options.data.multi_header[idx].parsed === null) {\n                options.data = null;\n                break;\n              }\n            }\n\n            if (options.data !== null) {\n              options.data = options.data.multi_header;\n            } else {\n              options.data = -1;\n            }\n          }, function () {\n            var header;\n            if (!options.data.multi_header) options.data.multi_header = [];\n\n            try {\n              header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n              delete options.data.uri;\n              delete options.data.displayName;\n              delete options.data.params;\n            } catch (e) {\n              header = null;\n            }\n\n            options.data.multi_header.push({\n              'position': peg$currPos,\n              'offset': offset(),\n              'parsed': header\n            });\n          }, function (displayName) {\n            displayName = text().trim();\n\n            if (displayName[0] === '\\\"') {\n              displayName = displayName.substring(1, displayName.length - 1);\n            }\n\n            options.data.displayName = displayName;\n          }, \"q\", {\n            type: \"literal\",\n            value: \"q\",\n            description: \"\\\"q\\\"\"\n          }, function (q) {\n            if (!options.data.params) options.data.params = {};\n            options.data.params['q'] = q;\n          }, \"expires\", {\n            type: \"literal\",\n            value: \"expires\",\n            description: \"\\\"expires\\\"\"\n          }, function (expires) {\n            if (!options.data.params) options.data.params = {};\n            options.data.params['expires'] = expires;\n          }, function (delta_seconds) {\n            return parseInt(delta_seconds.join(''));\n          }, \"0\", {\n            type: \"literal\",\n            value: \"0\",\n            description: \"\\\"0\\\"\"\n          }, function () {\n            return parseFloat(text());\n          }, function (param, value) {\n            if (!options.data.params) options.data.params = {};\n\n            if (value === null) {\n              value = undefined;\n            } else {\n              value = value[1];\n            }\n\n            options.data.params[param.toLowerCase()] = value;\n          }, \"render\", {\n            type: \"literal\",\n            value: \"render\",\n            description: \"\\\"render\\\"\"\n          }, \"session\", {\n            type: \"literal\",\n            value: \"session\",\n            description: \"\\\"session\\\"\"\n          }, \"icon\", {\n            type: \"literal\",\n            value: \"icon\",\n            description: \"\\\"icon\\\"\"\n          }, \"alert\", {\n            type: \"literal\",\n            value: \"alert\",\n            description: \"\\\"alert\\\"\"\n          }, function () {\n            if (options.startRule === 'Content_Disposition') {\n              options.data.type = text().toLowerCase();\n            }\n          }, \"handling\", {\n            type: \"literal\",\n            value: \"handling\",\n            description: \"\\\"handling\\\"\"\n          }, \"optional\", {\n            type: \"literal\",\n            value: \"optional\",\n            description: \"\\\"optional\\\"\"\n          }, \"required\", {\n            type: \"literal\",\n            value: \"required\",\n            description: \"\\\"required\\\"\"\n          }, function (length) {\n            options.data = parseInt(length.join(''));\n          }, function () {\n            options.data = text();\n          }, \"text\", {\n            type: \"literal\",\n            value: \"text\",\n            description: \"\\\"text\\\"\"\n          }, \"image\", {\n            type: \"literal\",\n            value: \"image\",\n            description: \"\\\"image\\\"\"\n          }, \"audio\", {\n            type: \"literal\",\n            value: \"audio\",\n            description: \"\\\"audio\\\"\"\n          }, \"video\", {\n            type: \"literal\",\n            value: \"video\",\n            description: \"\\\"video\\\"\"\n          }, \"application\", {\n            type: \"literal\",\n            value: \"application\",\n            description: \"\\\"application\\\"\"\n          }, \"message\", {\n            type: \"literal\",\n            value: \"message\",\n            description: \"\\\"message\\\"\"\n          }, \"multipart\", {\n            type: \"literal\",\n            value: \"multipart\",\n            description: \"\\\"multipart\\\"\"\n          }, \"x-\", {\n            type: \"literal\",\n            value: \"x-\",\n            description: \"\\\"x-\\\"\"\n          }, function (cseq_value) {\n            options.data.value = parseInt(cseq_value.join(''));\n          }, function (expires) {\n            options.data = expires;\n          }, function (event_type) {\n            options.data.event = event_type.toLowerCase();\n          }, function () {\n            var tag = options.data.tag;\n            options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n\n            if (tag) {\n              options.data.setParam('tag', tag);\n            }\n          }, \"tag\", {\n            type: \"literal\",\n            value: \"tag\",\n            description: \"\\\"tag\\\"\"\n          }, function (tag) {\n            options.data.tag = tag;\n          }, function (forwards) {\n            options.data = parseInt(forwards.join(''));\n          }, function (min_expires) {\n            options.data = min_expires;\n          }, function () {\n            options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n          }, \"digest\", {\n            type: \"literal\",\n            value: \"Digest\",\n            description: \"\\\"Digest\\\"\"\n          }, \"realm\", {\n            type: \"literal\",\n            value: \"realm\",\n            description: \"\\\"realm\\\"\"\n          }, function (realm) {\n            options.data.realm = realm;\n          }, \"domain\", {\n            type: \"literal\",\n            value: \"domain\",\n            description: \"\\\"domain\\\"\"\n          }, \"nonce\", {\n            type: \"literal\",\n            value: \"nonce\",\n            description: \"\\\"nonce\\\"\"\n          }, function (nonce) {\n            options.data.nonce = nonce;\n          }, \"opaque\", {\n            type: \"literal\",\n            value: \"opaque\",\n            description: \"\\\"opaque\\\"\"\n          }, function (opaque) {\n            options.data.opaque = opaque;\n          }, \"stale\", {\n            type: \"literal\",\n            value: \"stale\",\n            description: \"\\\"stale\\\"\"\n          }, \"true\", {\n            type: \"literal\",\n            value: \"true\",\n            description: \"\\\"true\\\"\"\n          }, function () {\n            options.data.stale = true;\n          }, \"false\", {\n            type: \"literal\",\n            value: \"false\",\n            description: \"\\\"false\\\"\"\n          }, function () {\n            options.data.stale = false;\n          }, \"algorithm\", {\n            type: \"literal\",\n            value: \"algorithm\",\n            description: \"\\\"algorithm\\\"\"\n          }, \"md5\", {\n            type: \"literal\",\n            value: \"MD5\",\n            description: \"\\\"MD5\\\"\"\n          }, \"md5-sess\", {\n            type: \"literal\",\n            value: \"MD5-sess\",\n            description: \"\\\"MD5-sess\\\"\"\n          }, function (algorithm) {\n            options.data.algorithm = algorithm.toUpperCase();\n          }, \"qop\", {\n            type: \"literal\",\n            value: \"qop\",\n            description: \"\\\"qop\\\"\"\n          }, \"auth-int\", {\n            type: \"literal\",\n            value: \"auth-int\",\n            description: \"\\\"auth-int\\\"\"\n          }, \"auth\", {\n            type: \"literal\",\n            value: \"auth\",\n            description: \"\\\"auth\\\"\"\n          }, function (qop_value) {\n            options.data.qop || (options.data.qop = []);\n            options.data.qop.push(qop_value.toLowerCase());\n          }, function (rack_value) {\n            options.data.value = parseInt(rack_value.join(''));\n          }, function () {\n            var idx, length;\n            length = options.data.multi_header.length;\n\n            for (idx = 0; idx < length; idx++) {\n              if (options.data.multi_header[idx].parsed === null) {\n                options.data = null;\n                break;\n              }\n            }\n\n            if (options.data !== null) {\n              options.data = options.data.multi_header;\n            } else {\n              options.data = -1;\n            }\n          }, function () {\n            var header;\n            if (!options.data.multi_header) options.data.multi_header = [];\n\n            try {\n              header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n              delete options.data.uri;\n              delete options.data.displayName;\n              delete options.data.params;\n            } catch (e) {\n              header = null;\n            }\n\n            options.data.multi_header.push({\n              'position': peg$currPos,\n              'offset': offset(),\n              'parsed': header\n            });\n          }, function () {\n            options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n          }, function () {\n            if (!(options.data.replaces_from_tag && options.data.replaces_to_tag)) {\n              options.data = -1;\n            }\n          }, function () {\n            options.data = {\n              call_id: options.data\n            };\n          }, \"from-tag\", {\n            type: \"literal\",\n            value: \"from-tag\",\n            description: \"\\\"from-tag\\\"\"\n          }, function (from_tag) {\n            options.data.replaces_from_tag = from_tag;\n          }, \"to-tag\", {\n            type: \"literal\",\n            value: \"to-tag\",\n            description: \"\\\"to-tag\\\"\"\n          }, function (to_tag) {\n            options.data.replaces_to_tag = to_tag;\n          }, \"early-only\", {\n            type: \"literal\",\n            value: \"early-only\",\n            description: \"\\\"early-only\\\"\"\n          }, function () {\n            options.data.early_only = true;\n          }, function (r) {\n            return r;\n          }, function (first, rest) {\n            return list(first, rest);\n          }, function (value) {\n            if (options.startRule === 'Require') {\n              options.data = value || [];\n            }\n          }, function (rseq_value) {\n            options.data.value = parseInt(rseq_value.join(''));\n          }, \"active\", {\n            type: \"literal\",\n            value: \"active\",\n            description: \"\\\"active\\\"\"\n          }, \"pending\", {\n            type: \"literal\",\n            value: \"pending\",\n            description: \"\\\"pending\\\"\"\n          }, \"terminated\", {\n            type: \"literal\",\n            value: \"terminated\",\n            description: \"\\\"terminated\\\"\"\n          }, function () {\n            options.data.state = text();\n          }, \"reason\", {\n            type: \"literal\",\n            value: \"reason\",\n            description: \"\\\"reason\\\"\"\n          }, function (reason) {\n            if (typeof reason !== 'undefined') options.data.reason = reason;\n          }, function (expires) {\n            if (typeof expires !== 'undefined') options.data.expires = expires;\n          }, \"retry_after\", {\n            type: \"literal\",\n            value: \"retry_after\",\n            description: \"\\\"retry_after\\\"\"\n          }, function (retry_after) {\n            if (typeof retry_after !== 'undefined') options.data.retry_after = retry_after;\n          }, \"deactivated\", {\n            type: \"literal\",\n            value: \"deactivated\",\n            description: \"\\\"deactivated\\\"\"\n          }, \"probation\", {\n            type: \"literal\",\n            value: \"probation\",\n            description: \"\\\"probation\\\"\"\n          }, \"rejected\", {\n            type: \"literal\",\n            value: \"rejected\",\n            description: \"\\\"rejected\\\"\"\n          }, \"timeout\", {\n            type: \"literal\",\n            value: \"timeout\",\n            description: \"\\\"timeout\\\"\"\n          }, \"giveup\", {\n            type: \"literal\",\n            value: \"giveup\",\n            description: \"\\\"giveup\\\"\"\n          }, \"noresource\", {\n            type: \"literal\",\n            value: \"noresource\",\n            description: \"\\\"noresource\\\"\"\n          }, \"invariant\", {\n            type: \"literal\",\n            value: \"invariant\",\n            description: \"\\\"invariant\\\"\"\n          }, function (value) {\n            if (options.startRule === 'Supported') {\n              options.data = value || [];\n            }\n          }, function () {\n            var tag = options.data.tag;\n            options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n\n            if (tag) {\n              options.data.setParam('tag', tag);\n            }\n          }, \"ttl\", {\n            type: \"literal\",\n            value: \"ttl\",\n            description: \"\\\"ttl\\\"\"\n          }, function (via_ttl_value) {\n            options.data.ttl = via_ttl_value;\n          }, \"maddr\", {\n            type: \"literal\",\n            value: \"maddr\",\n            description: \"\\\"maddr\\\"\"\n          }, function (via_maddr) {\n            options.data.maddr = via_maddr;\n          }, \"received\", {\n            type: \"literal\",\n            value: \"received\",\n            description: \"\\\"received\\\"\"\n          }, function (via_received) {\n            options.data.received = via_received;\n          }, \"branch\", {\n            type: \"literal\",\n            value: \"branch\",\n            description: \"\\\"branch\\\"\"\n          }, function (via_branch) {\n            options.data.branch = via_branch;\n          }, \"rport\", {\n            type: \"literal\",\n            value: \"rport\",\n            description: \"\\\"rport\\\"\"\n          }, function () {\n            if (typeof response_port !== 'undefined') options.data.rport = response_port.join('');\n          }, function (via_protocol) {\n            options.data.protocol = via_protocol;\n          }, {\n            type: \"literal\",\n            value: \"UDP\",\n            description: \"\\\"UDP\\\"\"\n          }, {\n            type: \"literal\",\n            value: \"TCP\",\n            description: \"\\\"TCP\\\"\"\n          }, {\n            type: \"literal\",\n            value: \"TLS\",\n            description: \"\\\"TLS\\\"\"\n          }, {\n            type: \"literal\",\n            value: \"SCTP\",\n            description: \"\\\"SCTP\\\"\"\n          }, function (via_transport) {\n            options.data.transport = via_transport;\n          }, function () {\n            options.data.host = text();\n          }, function (via_sent_by_port) {\n            options.data.port = parseInt(via_sent_by_port.join(''));\n          }, function (ttl) {\n            return parseInt(ttl.join(''));\n          }, function (deltaSeconds) {\n            if (options.startRule === 'Session_Expires') {\n              options.data.deltaSeconds = deltaSeconds;\n            }\n          }, \"refresher\", {\n            type: \"literal\",\n            value: \"refresher\",\n            description: \"\\\"refresher\\\"\"\n          }, \"uas\", {\n            type: \"literal\",\n            value: \"uas\",\n            description: \"\\\"uas\\\"\"\n          }, \"uac\", {\n            type: \"literal\",\n            value: \"uac\",\n            description: \"\\\"uac\\\"\"\n          }, function (endpoint) {\n            if (options.startRule === 'Session_Expires') {\n              options.data.refresher = endpoint;\n            }\n          }, function (deltaSeconds) {\n            if (options.startRule === 'Min_SE') {\n              options.data = deltaSeconds;\n            }\n          }, \"stuns\", {\n            type: \"literal\",\n            value: \"stuns\",\n            description: \"\\\"stuns\\\"\"\n          }, \"stun\", {\n            type: \"literal\",\n            value: \"stun\",\n            description: \"\\\"stun\\\"\"\n          }, function (scheme) {\n            options.data.scheme = scheme;\n          }, function (host) {\n            options.data.host = host;\n          }, \"?transport=\", {\n            type: \"literal\",\n            value: \"?transport=\",\n            description: \"\\\"?transport=\\\"\"\n          }, \"turns\", {\n            type: \"literal\",\n            value: \"turns\",\n            description: \"\\\"turns\\\"\"\n          }, \"turn\", {\n            type: \"literal\",\n            value: \"turn\",\n            description: \"\\\"turn\\\"\"\n          }, function () {\n            options.data.transport = transport;\n          }, function () {\n            options.data = text();\n          }],\n              peg$bytecode = [peg$decode(\". \\\"\\\"2 3!\"), peg$decode(\"0\\\"\\\"\\\"1!3#\"), peg$decode(\"0$\\\"\\\"1!3%\"), peg$decode(\"0&\\\"\\\"1!3'\"), peg$decode(\"7'*# \\\"7(\"), peg$decode(\"0(\\\"\\\"1!3)\"), peg$decode(\"0*\\\"\\\"1!3+\"), peg$decode(\".,\\\"\\\"2,3-\"), peg$decode(\"..\\\"\\\"2.3/\"), peg$decode(\"00\\\"\\\"1!31\"), peg$decode(\".2\\\"\\\"2233*\\x89 \\\".4\\\"\\\"2435*} \\\".6\\\"\\\"2637*q \\\".8\\\"\\\"2839*e \\\".:\\\"\\\"2:3;*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\"), peg$decode(\"7)*# \\\"7,\"), peg$decode(\".F\\\"\\\"2F3G*} \\\".H\\\"\\\"2H3I*q \\\".J\\\"\\\"2J3K*e \\\".L\\\"\\\"2L3M*Y \\\".N\\\"\\\"2N3O*M \\\".P\\\"\\\"2P3Q*A \\\".R\\\"\\\"2R3S*5 \\\".T\\\"\\\"2T3U*) \\\".V\\\"\\\"2V3W\"), peg$decode(\"!!.Y\\\"\\\"2Y3Z+7$7#+-%7#+#%'#%$## X$\\\"# X\\\"# X+! (%\"), peg$decode(\"!! \\\\7$,#&7$\\\"+-$7 +#%'\\\"%$\\\"# X\\\"# X*# \\\" [+@$ \\\\7$+&$,#&7$\\\"\\\"\\\" X+'%4\\\"6]\\\" %$\\\"# X\\\"# X\"), peg$decode(\"7.*# \\\" [\"), peg$decode(\"! \\\\7'*# \\\"7(,)&7'*# \\\"7(\\\"+A$.8\\\"\\\"2839+1%7/+'%4#6^# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!! \\\\72+&$,#&72\\\"\\\"\\\" X+o$ \\\\! \\\\7.,#&7.\\\"+-$72+#%'\\\"%$\\\"# X\\\"# X,@&! \\\\7.,#&7.\\\"+-$72+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+! (%\"), peg$decode(\"0_\\\"\\\"1!3`*# \\\"73\"), peg$decode(\"0a\\\"\\\"1!3b\"), peg$decode(\"0c\\\"\\\"1!3d\"), peg$decode(\"7!*) \\\"0e\\\"\\\"1!3f\"), peg$decode(\"! \\\\7)*\\x95 \\\".F\\\"\\\"2F3G*\\x89 \\\".J\\\"\\\"2J3K*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O+\\x9E$,\\x9B&7)*\\x95 \\\".F\\\"\\\"2F3G*\\x89 \\\".J\\\"\\\"2J3K*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O\\\"\\\"\\\" X+! (%\"), peg$decode(\"! \\\\7)*\\x89 \\\".F\\\"\\\"2F3G*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O+\\x92$,\\x8F&7)*\\x89 \\\".F\\\"\\\"2F3G*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O\\\"\\\"\\\" X+! (%\"), peg$decode(\".T\\\"\\\"2T3U*\\xE3 \\\".V\\\"\\\"2V3W*\\xD7 \\\".i\\\"\\\"2i3j*\\xCB \\\".k\\\"\\\"2k3l*\\xBF \\\".:\\\"\\\"2:3;*\\xB3 \\\".D\\\"\\\"2D3E*\\xA7 \\\".2\\\"\\\"2233*\\x9B \\\".8\\\"\\\"2839*\\x8F \\\".m\\\"\\\"2m3n*\\x83 \\\"7&*} \\\".4\\\"\\\"2435*q \\\".o\\\"\\\"2o3p*e \\\".q\\\"\\\"2q3r*Y \\\".6\\\"\\\"2637*M \\\".>\\\"\\\"2>3?*A \\\".s\\\"\\\"2s3t*5 \\\".u\\\"\\\"2u3v*) \\\"7'*# \\\"7(\"), peg$decode(\"! \\\\7)*\\u012B \\\".F\\\"\\\"2F3G*\\u011F \\\".J\\\"\\\"2J3K*\\u0113 \\\".L\\\"\\\"2L3M*\\u0107 \\\".Y\\\"\\\"2Y3Z*\\xFB \\\".P\\\"\\\"2P3Q*\\xEF \\\".H\\\"\\\"2H3I*\\xE3 \\\".@\\\"\\\"2@3A*\\xD7 \\\".g\\\"\\\"2g3h*\\xCB \\\".R\\\"\\\"2R3S*\\xBF \\\".N\\\"\\\"2N3O*\\xB3 \\\".T\\\"\\\"2T3U*\\xA7 \\\".V\\\"\\\"2V3W*\\x9B \\\".i\\\"\\\"2i3j*\\x8F \\\".k\\\"\\\"2k3l*\\x83 \\\".8\\\"\\\"2839*w \\\".m\\\"\\\"2m3n*k \\\"7&*e \\\".4\\\"\\\"2435*Y \\\".o\\\"\\\"2o3p*M \\\".q\\\"\\\"2q3r*A \\\".6\\\"\\\"2637*5 \\\".s\\\"\\\"2s3t*) \\\".u\\\"\\\"2u3v+\\u0134$,\\u0131&7)*\\u012B \\\".F\\\"\\\"2F3G*\\u011F \\\".J\\\"\\\"2J3K*\\u0113 \\\".L\\\"\\\"2L3M*\\u0107 \\\".Y\\\"\\\"2Y3Z*\\xFB \\\".P\\\"\\\"2P3Q*\\xEF \\\".H\\\"\\\"2H3I*\\xE3 \\\".@\\\"\\\"2@3A*\\xD7 \\\".g\\\"\\\"2g3h*\\xCB \\\".R\\\"\\\"2R3S*\\xBF \\\".N\\\"\\\"2N3O*\\xB3 \\\".T\\\"\\\"2T3U*\\xA7 \\\".V\\\"\\\"2V3W*\\x9B \\\".i\\\"\\\"2i3j*\\x8F \\\".k\\\"\\\"2k3l*\\x83 \\\".8\\\"\\\"2839*w \\\".m\\\"\\\"2m3n*k \\\"7&*e \\\".4\\\"\\\"2435*Y \\\".o\\\"\\\"2o3p*M \\\".q\\\"\\\"2q3r*A \\\".6\\\"\\\"2637*5 \\\".s\\\"\\\"2s3t*) \\\".u\\\"\\\"2u3v\\\"\\\"\\\" X+! (%\"), peg$decode(\"!7/+A$.P\\\"\\\"2P3Q+1%7/+'%4#6w# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.4\\\"\\\"2435+1%7/+'%4#6x# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.>\\\"\\\"2>3?+1%7/+'%4#6y# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.T\\\"\\\"2T3U+1%7/+'%4#6z# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.V\\\"\\\"2V3W+1%7/+'%4#6{# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!.k\\\"\\\"2k3l+1$7/+'%4\\\"6|\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7/+7$.i\\\"\\\"2i3j+'%4\\\"6}\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.D\\\"\\\"2D3E+1%7/+'%4#6~# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.2\\\"\\\"2233+1%7/+'%4#6# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+A$.8\\\"\\\"2839+1%7/+'%4#6\\x80# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7/+1$7&+'%4\\\"6\\x81\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7&+1$7/+'%4\\\"6\\x81\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7=+W$ \\\\7G*) \\\"7K*# \\\"7F,/&7G*) \\\"7K*# \\\"7F\\\"+-%7>+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"0\\x82\\\"\\\"1!3\\x83*A \\\"0\\x84\\\"\\\"1!3\\x85*5 \\\"0\\x86\\\"\\\"1!3\\x87*) \\\"73*# \\\"7.\"), peg$decode(\"!!7/+U$7&+K% \\\\7J*# \\\"7K,)&7J*# \\\"7K\\\"+-%7&+#%'$%$$# X$## X$\\\"# X\\\"# X+! (%\"), peg$decode(\"!7/+`$7&+V%! \\\\7J*# \\\"7K,)&7J*# \\\"7K\\\"+! (%+2%7&+(%4$6\\x88$!!%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"7.*G \\\".L\\\"\\\"2L3M*; \\\"0\\x89\\\"\\\"1!3\\x8A*/ \\\"0\\x86\\\"\\\"1!3\\x87*# \\\"73\"), peg$decode(\"!.m\\\"\\\"2m3n+K$0\\x8B\\\"\\\"1!3\\x8C*5 \\\"0\\x8D\\\"\\\"1!3\\x8E*) \\\"0\\x8F\\\"\\\"1!3\\x90+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7N+Q$.8\\\"\\\"2839+A%7O*# \\\" [+1%7S+'%4$6\\x91$ %$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!7N+k$.8\\\"\\\"2839+[%7O*# \\\" [+K%7S+A%7_+7%7l*# \\\" [+'%4&6\\x92& %$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\x93\\\"\\\"1$3\\x94*) \\\"/\\x95\\\"\\\"1#3\\x96+' 4!6\\x97!! %\"), peg$decode(\"!7P+b$!.8\\\"\\\"2839+-$7R+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+7%.:\\\"\\\"2:3;+'%4#6\\x98# %$## X$\\\"# X\\\"# X\"), peg$decode(\" \\\\7+*) \\\"7-*# \\\"7Q+2$,/&7+*) \\\"7-*# \\\"7Q\\\"\\\"\\\" X\"), peg$decode(\".<\\\"\\\"2<3=*q \\\".>\\\"\\\"2>3?*e \\\".@\\\"\\\"2@3A*Y \\\".B\\\"\\\"2B3C*M \\\".D\\\"\\\"2D3E*A \\\".2\\\"\\\"2233*5 \\\".6\\\"\\\"2637*) \\\".4\\\"\\\"2435\"), peg$decode(\"! \\\\7+*_ \\\"7-*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E,e&7+*_ \\\"7-*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\\\"+& 4!6\\x99! %\"), peg$decode(\"!7T+N$!.8\\\"\\\"2839+-$7^+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7U*) \\\"7\\\\*# \\\"7X+& 4!6\\x9A! %\"), peg$decode(\"! \\\\!7V+3$.J\\\"\\\"2J3K+#%'\\\"%$\\\"# X\\\"# X,>&!7V+3$.J\\\"\\\"2J3K+#%'\\\"%$\\\"# X\\\"# X\\\"+G$7W+=%.J\\\"\\\"2J3K*# \\\" [+'%4#6\\x9B# %$## X$\\\"# X\\\"# X\"), peg$decode(\" \\\\0\\x9C\\\"\\\"1!3\\x9D+,$,)&0\\x9C\\\"\\\"1!3\\x9D\\\"\\\"\\\" X\"), peg$decode(\"!0$\\\"\\\"1!3%+A$ \\\\0\\x9E\\\"\\\"1!3\\x9F,)&0\\x9E\\\"\\\"1!3\\x9F\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!.o\\\"\\\"2o3p+A$7Y+7%.q\\\"\\\"2q3r+'%4#6\\xA0# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!!7Z+\\xBF$.8\\\"\\\"2839+\\xAF%7Z+\\xA5%.8\\\"\\\"2839+\\x95%7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'-%$-# X$,# X$+# X$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0838 \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+\\xAF$7Z+\\xA5%.8\\\"\\\"2839+\\x95%7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%',%$,# X$+# X$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0795 \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+\\x95$7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'*%$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u070C \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+{$7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u069D \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+a$7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'&%$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0648 \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+G$7Z+=%.8\\\"\\\"2839+-%7[+#%'$%$$# X$## X$\\\"# X\\\"# X*\\u060D \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+-$7[+#%'\\\"%$\\\"# X\\\"# X*\\u05EC \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+-$7Z+#%'\\\"%$\\\"# X\\\"# X*\\u05CB \\\"!7Z+\\xA5$.\\xA1\\\"\\\"2\\xA13\\xA2+\\x95%7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'+%$+# X$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0538 \\\"!7Z+\\xB6$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x8B%.\\xA1\\\"\\\"2\\xA13\\xA2+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'*%$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0494 \\\"!7Z+\\xC7$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x9C%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+q%.\\xA1\\\"\\\"2\\xA13\\xA2+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%')%$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u03DF \\\"!7Z+\\xD8$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xAD%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x82%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+W%.\\xA1\\\"\\\"2\\xA13\\xA2+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0319 \\\"!7Z+\\xE9$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xBE%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x93%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+h%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+=%.\\xA1\\\"\\\"2\\xA13\\xA2+-%7[+#%''%$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0242 \\\"!7Z+\\u0114$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xE9%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xBE%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x93%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+h%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+=%.\\xA1\\\"\\\"2\\xA13\\xA2+-%7Z+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0140 \\\"!7Z+\\u0135$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\u010A%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xDF%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xB4%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x89%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+^%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+3%.\\xA1\\\"\\\"2\\xA13\\xA2+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X+& 4!6\\xA3! %\"), peg$decode(\"!7#+S$7#*# \\\" [+C%7#*# \\\" [+3%7#*# \\\" [+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!7Z+=$.8\\\"\\\"2839+-%7Z+#%'#%$## X$\\\"# X\\\"# X*# \\\"7\\\\\"), peg$decode(\"!7]+u$.J\\\"\\\"2J3K+e%7]+[%.J\\\"\\\"2J3K+K%7]+A%.J\\\"\\\"2J3K+1%7]+'%4'6\\xA4' %$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!.\\xA5\\\"\\\"2\\xA53\\xA6+3$0\\xA7\\\"\\\"1!3\\xA8+#%'\\\"%$\\\"# X\\\"# X*\\xA0 \\\"!.\\xA9\\\"\\\"2\\xA93\\xAA+=$0\\xAB\\\"\\\"1!3\\xAC+-%7!+#%'#%$## X$\\\"# X\\\"# X*o \\\"!.\\xAD\\\"\\\"2\\xAD3\\xAE+7$7!+-%7!+#%'#%$## X$\\\"# X\\\"# X*D \\\"!0\\xAF\\\"\\\"1!3\\xB0+-$7!+#%'\\\"%$\\\"# X\\\"# X*# \\\"7!\"), peg$decode(\"!!7!*# \\\" [+c$7!*# \\\" [+S%7!*# \\\" [+C%7!*# \\\" [+3%7!*# \\\" [+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X+' 4!6\\xB1!! %\"), peg$decode(\" \\\\!.2\\\"\\\"2233+-$7`+#%'\\\"%$\\\"# X\\\"# X,>&!.2\\\"\\\"2233+-$7`+#%'\\\"%$\\\"# X\\\"# X\\\"\"), peg$decode(\"7a*A \\\"7b*; \\\"7c*5 \\\"7d*/ \\\"7e*) \\\"7f*# \\\"7g\"), peg$decode(\"!/\\xB2\\\"\\\"1*3\\xB3+b$/\\xB4\\\"\\\"1#3\\xB5*G \\\"/\\xB6\\\"\\\"1#3\\xB7*; \\\"/\\xB8\\\"\\\"1$3\\xB9*/ \\\"/\\xBA\\\"\\\"1#3\\xBB*# \\\"76+(%4\\\"6\\xBC\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"!/\\xBD\\\"\\\"1%3\\xBE+J$/\\xBF\\\"\\\"1%3\\xC0*/ \\\"/\\xC1\\\"\\\"1\\\"3\\xC2*# \\\"76+(%4\\\"6\\xC3\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"!/\\xC4\\\"\\\"1'3\\xC5+2$7\\x8F+(%4\\\"6\\xC6\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"!/\\xC7\\\"\\\"1$3\\xC8+2$7\\xEF+(%4\\\"6\\xC9\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"!/\\xCA\\\"\\\"1&3\\xCB+2$7T+(%4\\\"6\\xCC\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"!/\\xCD\\\"\\\"1\\\"3\\xCE+R$!.>\\\"\\\"2>3?+-$76+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\xCF\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7h+T$!.>\\\"\\\"2>3?+-$7i+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+)%4\\\"6\\xD0\\\"\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7j+&$,#&7j\\\"\\\"\\\" X+! (%\"), peg$decode(\"! \\\\7j+&$,#&7j\\\"\\\"\\\" X+! (%\"), peg$decode(\"7k*) \\\"7+*# \\\"7-\"), peg$decode(\".o\\\"\\\"2o3p*e \\\".q\\\"\\\"2q3r*Y \\\".4\\\"\\\"2435*M \\\".8\\\"\\\"2839*A \\\".<\\\"\\\"2<3=*5 \\\".@\\\"\\\"2@3A*) \\\".B\\\"\\\"2B3C\"), peg$decode(\"!.6\\\"\\\"2637+u$7m+k% \\\\!.<\\\"\\\"2<3=+-$7m+#%'\\\"%$\\\"# X\\\"# X,>&!.<\\\"\\\"2<3=+-$7m+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!7n+C$.>\\\"\\\"2>3?+3%7o+)%4#6\\xD1#\\\"\\\" %$## X$\\\"# X\\\"# X\"), peg$decode(\" \\\\7p*) \\\"7+*# \\\"7-+2$,/&7p*) \\\"7+*# \\\"7-\\\"\\\"\\\" X\"), peg$decode(\" \\\\7p*) \\\"7+*# \\\"7-,/&7p*) \\\"7+*# \\\"7-\\\"\"), peg$decode(\".o\\\"\\\"2o3p*e \\\".q\\\"\\\"2q3r*Y \\\".4\\\"\\\"2435*M \\\".6\\\"\\\"2637*A \\\".8\\\"\\\"2839*5 \\\".@\\\"\\\"2@3A*) \\\".B\\\"\\\"2B3C\"), peg$decode(\"7\\x90*# \\\"7r\"), peg$decode(\"!7\\x8F+K$7'+A%7s+7%7'+-%7\\x84+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"7M*# \\\"7t\"), peg$decode(\"!7+G$.8\\\"\\\"2839+7%7u*# \\\"7x+'%4#6\\xD2# %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7v*# \\\"7w+N$!.6\\\"\\\"2637+-$7\\x83+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!.\\xD3\\\"\\\"2\\xD33\\xD4+=$7\\x80+3%7w*# \\\" [+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!.4\\\"\\\"2435+-$7{+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7z+5$ \\\\7y,#&7y\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"7**) \\\"7+*# \\\"7-\"), peg$decode(\"7+*\\x8F \\\"7-*\\x89 \\\".2\\\"\\\"2233*} \\\".6\\\"\\\"2637*q \\\".8\\\"\\\"2839*e \\\".:\\\"\\\"2:3;*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\"), peg$decode(\"!7|+k$ \\\\!.4\\\"\\\"2435+-$7|+#%'\\\"%$\\\"# X\\\"# X,>&!.4\\\"\\\"2435+-$7|+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7~,#&7~\\\"+k$ \\\\!.2\\\"\\\"2233+-$7}+#%'\\\"%$\\\"# X\\\"# X,>&!.2\\\"\\\"2233+-$7}+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\" \\\\7~,#&7~\\\"\"), peg$decode(\"7+*w \\\"7-*q \\\".8\\\"\\\"2839*e \\\".:\\\"\\\"2:3;*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\"), peg$decode(\"!7\\\"+\\x8D$ \\\\7\\\"*G \\\"7!*A \\\".@\\\"\\\"2@3A*5 \\\".F\\\"\\\"2F3G*) \\\".J\\\"\\\"2J3K,M&7\\\"*G \\\"7!*A \\\".@\\\"\\\"2@3A*5 \\\".F\\\"\\\"2F3G*) \\\".J\\\"\\\"2J3K\\\"+'%4\\\"6\\xD5\\\" %$\\\"# X\\\"# X\"), peg$decode(\"7\\x81*# \\\"7\\x82\"), peg$decode(\"!!7O+3$.:\\\"\\\"2:3;+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+-$7S+#%'\\\"%$\\\"# X\\\"# X*# \\\" [\"), peg$decode(\" \\\\7+*\\x83 \\\"7-*} \\\".B\\\"\\\"2B3C*q \\\".D\\\"\\\"2D3E*e \\\".2\\\"\\\"2233*Y \\\".8\\\"\\\"2839*M \\\".:\\\"\\\"2:3;*A \\\".<\\\"\\\"2<3=*5 \\\".>\\\"\\\"2>3?*) \\\".@\\\"\\\"2@3A+\\x8C$,\\x89&7+*\\x83 \\\"7-*} \\\".B\\\"\\\"2B3C*q \\\".D\\\"\\\"2D3E*e \\\".2\\\"\\\"2233*Y \\\".8\\\"\\\"2839*M \\\".:\\\"\\\"2:3;*A \\\".<\\\"\\\"2<3=*5 \\\".>\\\"\\\"2>3?*) \\\".@\\\"\\\"2@3A\\\"\\\"\\\" X\"), peg$decode(\" \\\\7y,#&7y\\\"\"), peg$decode(\"!/\\x95\\\"\\\"1#3\\xD6+y$.4\\\"\\\"2435+i% \\\\7!+&$,#&7!\\\"\\\"\\\" X+P%.J\\\"\\\"2J3K+@% \\\\7!+&$,#&7!\\\"\\\"\\\" X+'%4%6\\xD7% %$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\".\\xD8\\\"\\\"2\\xD83\\xD9\"), peg$decode(\".\\xDA\\\"\\\"2\\xDA3\\xDB\"), peg$decode(\".\\xDC\\\"\\\"2\\xDC3\\xDD\"), peg$decode(\".\\xDE\\\"\\\"2\\xDE3\\xDF\"), peg$decode(\".\\xE0\\\"\\\"2\\xE03\\xE1\"), peg$decode(\".\\xE2\\\"\\\"2\\xE23\\xE3\"), peg$decode(\".\\xE4\\\"\\\"2\\xE43\\xE5\"), peg$decode(\".\\xE6\\\"\\\"2\\xE63\\xE7\"), peg$decode(\".\\xE8\\\"\\\"2\\xE83\\xE9\"), peg$decode(\".\\xEA\\\"\\\"2\\xEA3\\xEB\"), peg$decode(\"!7\\x85*S \\\"7\\x86*M \\\"7\\x88*G \\\"7\\x89*A \\\"7\\x8A*; \\\"7\\x8B*5 \\\"7\\x8C*/ \\\"7\\x8D*) \\\"7\\x8E*# \\\"76+& 4!6\\xEC! %\"), peg$decode(\"!7\\x84+K$7'+A%7\\x91+7%7'+-%7\\x93+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!7\\x92+' 4!6\\xED!! %\"), peg$decode(\"!7!+7$7!+-%7!+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7**A \\\"7+*; \\\"7-*5 \\\"73*/ \\\"74*) \\\"7'*# \\\"7(,G&7**A \\\"7+*; \\\"7-*5 \\\"73*/ \\\"74*) \\\"7'*# \\\"7(\\\"+& 4!6\\xEE! %\"), peg$decode(\"!7\\xB5+_$ \\\\!7A+-$7\\xB5+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xB5+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!79+R$!.:\\\"\\\"2:3;+-$79+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\xEF\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7:*j \\\"!7\\x97+_$ \\\\!7A+-$7\\x97+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\x97+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+& 4!6\\xF0! %\"), peg$decode(\"!7L*# \\\"7\\x98+c$ \\\\!7B+-$7\\x9A+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9A+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\xF1\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7\\x99*# \\\" [+A$7@+7%7M+-%7?+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!!76+_$ \\\\!7.+-$76+#%'\\\"%$\\\"# X\\\"# X,8&!7.+-$76+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X*# \\\"7H+' 4!6\\xF2!! %\"), peg$decode(\"7\\x9B*) \\\"7\\x9C*# \\\"7\\x9F\"), peg$decode(\"!/\\xF3\\\"\\\"1!3\\xF4+<$7<+2%7\\x9E+(%4#6\\xF5#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\xF6\\\"\\\"1'3\\xF7+<$7<+2%7\\x9D+(%4#6\\xF8#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\xF9!! %\"), peg$decode(\"!.\\xFA\\\"\\\"2\\xFA3\\xFB+x$!.J\\\"\\\"2J3K+S$7!*# \\\" [+C%7!*# \\\" [+3%7!*# \\\" [+#%'$%$$# X$## X$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\xFC\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!76+N$!7<+-$7\\xA0+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+)%4\\\"6\\xFD\\\"\\\"! %$\\\"# X\\\"# X\"), peg$decode(\"76*) \\\"7T*# \\\"7H\"), peg$decode(\"!7\\xA2+_$ \\\\!7B+-$7\\xA3+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xA3+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!/\\xFE\\\"\\\"1&3\\xFF*G \\\"/\\u0100\\\"\\\"1'3\\u0101*; \\\"/\\u0102\\\"\\\"1$3\\u0103*/ \\\"/\\u0104\\\"\\\"1%3\\u0105*# \\\"76+& 4!6\\u0106! %\"), peg$decode(\"7\\xA4*# \\\"7\\x9F\"), peg$decode(\"!/\\u0107\\\"\\\"1(3\\u0108+O$7<+E%/\\u0109\\\"\\\"1(3\\u010A*/ \\\"/\\u010B\\\"\\\"1(3\\u010C*# \\\"76+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!76+_$ \\\\!7A+-$76+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$76+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u010D!! %\"), peg$decode(\"!7\\xA8+& 4!6\\u010E! %\"), peg$decode(\"!7\\xA9+s$7;+i%7\\xAE+_% \\\\!7B+-$7\\xAF+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xAF+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"7\\xAA*# \\\"7\\xAB\"), peg$decode(\"/\\u010F\\\"\\\"1$3\\u0110*S \\\"/\\u0111\\\"\\\"1%3\\u0112*G \\\"/\\u0113\\\"\\\"1%3\\u0114*; \\\"/\\u0115\\\"\\\"1%3\\u0116*/ \\\"/\\u0117\\\"\\\"1+3\\u0118*# \\\"7\\xAC\"), peg$decode(\"/\\u0119\\\"\\\"1'3\\u011A*/ \\\"/\\u011B\\\"\\\"1)3\\u011C*# \\\"7\\xAC\"), peg$decode(\"76*# \\\"7\\xAD\"), peg$decode(\"!/\\u011D\\\"\\\"1\\\"3\\u011E+-$76+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"7\\xAC*# \\\"76\"), peg$decode(\"!76+7$7<+-%7\\xB0+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"76*# \\\"7H\"), peg$decode(\"!7\\xB2+7$7.+-%7\\x8F+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u011F!! %\"), peg$decode(\"!7\\x9D+' 4!6\\u0120!! %\"), peg$decode(\"!7\\xB5+d$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+(%4\\\"6\\u0121\\\"!!%$\\\"# X\\\"# X\"), peg$decode(\"!!77+k$ \\\\!.J\\\"\\\"2J3K+-$77+#%'\\\"%$\\\"# X\\\"# X,>&!.J\\\"\\\"2J3K+-$77+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+! (%\"), peg$decode(\"!7L*# \\\"7\\x98+c$ \\\\!7B+-$7\\xB7+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xB7+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u0122\\\" %$\\\"# X\\\"# X\"), peg$decode(\"7\\xB8*# \\\"7\\x9F\"), peg$decode(\"!/\\u0123\\\"\\\"1#3\\u0124+<$7<+2%76+(%4#6\\u0125#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u0126!! %\"), peg$decode(\"!7\\x9D+' 4!6\\u0127!! %\"), peg$decode(\"! \\\\7\\x99,#&7\\x99\\\"+\\x81$7@+w%7M+m%7?+c% \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4%6\\u0128% %$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"7\\xBD\"), peg$decode(\"!/\\u0129\\\"\\\"1&3\\u012A+s$7.+i%7\\xC0+_% \\\\!7A+-$7\\xC0+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xC0+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X*# \\\"7\\xBE\"), peg$decode(\"!76+s$7.+i%7\\xBF+_% \\\\!7A+-$7\\xBF+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xBF+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!76+=$7<+3%76*# \\\"7H+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"7\\xC1*G \\\"7\\xC3*A \\\"7\\xC5*; \\\"7\\xC7*5 \\\"7\\xC8*/ \\\"7\\xC9*) \\\"7\\xCA*# \\\"7\\xBF\"), peg$decode(\"!/\\u012B\\\"\\\"1%3\\u012C+7$7<+-%7\\xC2+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!7I+' 4!6\\u012D!! %\"), peg$decode(\"!/\\u012E\\\"\\\"1&3\\u012F+\\xA5$7<+\\x9B%7D+\\x91%7\\xC4+\\x87% \\\\! \\\\7'+&$,#&7'\\\"\\\"\\\" X+-$7\\xC4+#%'\\\"%$\\\"# X\\\"# X,G&! \\\\7'+&$,#&7'\\\"\\\"\\\" X+-$7\\xC4+#%'\\\"%$\\\"# X\\\"# X\\\"+-%7E+#%'&%$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"7t*# \\\"7w\"), peg$decode(\"!/\\u0130\\\"\\\"1%3\\u0131+7$7<+-%7\\xC6+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!7I+' 4!6\\u0132!! %\"), peg$decode(\"!/\\u0133\\\"\\\"1&3\\u0134+<$7<+2%7I+(%4#6\\u0135#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0136\\\"\\\"1%3\\u0137+_$7<+U%!/\\u0138\\\"\\\"1$3\\u0139+& 4!6\\u013A! %*4 \\\"!/\\u013B\\\"\\\"1%3\\u013C+& 4!6\\u013D! %+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u013E\\\"\\\"1)3\\u013F+T$7<+J%/\\u0140\\\"\\\"1#3\\u0141*/ \\\"/\\u0142\\\"\\\"1(3\\u0143*# \\\"76+(%4#6\\u0144#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0145\\\"\\\"1#3\\u0146+\\x9E$7<+\\x94%7D+\\x8A%!7\\xCB+k$ \\\\!.D\\\"\\\"2D3E+-$7\\xCB+#%'\\\"%$\\\"# X\\\"# X,>&!.D\\\"\\\"2D3E+-$7\\xCB+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+-%7E+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0147\\\"\\\"1(3\\u0148*/ \\\"/\\u0149\\\"\\\"1$3\\u014A*# \\\"76+' 4!6\\u014B!! %\"), peg$decode(\"!76+_$ \\\\!7A+-$76+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$76+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7\\xCE+K$7.+A%7\\xCE+7%7.+-%7\\x8F+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u014C!! %\"), peg$decode(\"!7\\xD0+c$ \\\\!7A+-$7\\xD0+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xD0+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u014D\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7\\x98+c$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u014E\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7L*T \\\"7\\x98*N \\\"!7@*# \\\" [+=$7t+3%7?*# \\\" [+#%'#%$## X$\\\"# X\\\"# X+c$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u014F\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7\\xD3+c$ \\\\!7B+-$7\\xD4+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xD4+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u0150\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7\\x95+& 4!6\\u0151! %\"), peg$decode(\"!/\\u0152\\\"\\\"1(3\\u0153+<$7<+2%76+(%4#6\\u0154#! %$## X$\\\"# X\\\"# X*j \\\"!/\\u0155\\\"\\\"1&3\\u0156+<$7<+2%76+(%4#6\\u0157#! %$## X$\\\"# X\\\"# X*: \\\"!/\\u0158\\\"\\\"1*3\\u0159+& 4!6\\u015A! %*# \\\"7\\x9F\"), peg$decode(\"!!76+o$ \\\\!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X,=&!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X\\\"+)%4\\\"6\\u015C\\\"\\\"! %$\\\"# X\\\"# X*# \\\" [+' 4!6\\u015D!! %\"), peg$decode(\"!7\\xD7+_$ \\\\!7A+-$7\\xD7+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xD7+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7\\x98+_$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u015E!! %\"), peg$decode(\"!7\\xDA+_$ \\\\!7B+-$7\\xDB+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xDB+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!/\\u015F\\\"\\\"1&3\\u0160*; \\\"/\\u0161\\\"\\\"1'3\\u0162*/ \\\"/\\u0163\\\"\\\"1*3\\u0164*# \\\"76+& 4!6\\u0165! %\"), peg$decode(\"!/\\u0166\\\"\\\"1&3\\u0167+<$7<+2%7\\xDC+(%4#6\\u0168#! %$## X$\\\"# X\\\"# X*\\x83 \\\"!/\\xF6\\\"\\\"1'3\\xF7+<$7<+2%7\\x9D+(%4#6\\u0169#! %$## X$\\\"# X\\\"# X*S \\\"!/\\u016A\\\"\\\"1+3\\u016B+<$7<+2%7\\x9D+(%4#6\\u016C#! %$## X$\\\"# X\\\"# X*# \\\"7\\x9F\"), peg$decode(\"/\\u016D\\\"\\\"1+3\\u016E*k \\\"/\\u016F\\\"\\\"1)3\\u0170*_ \\\"/\\u0171\\\"\\\"1(3\\u0172*S \\\"/\\u0173\\\"\\\"1'3\\u0174*G \\\"/\\u0175\\\"\\\"1&3\\u0176*; \\\"/\\u0177\\\"\\\"1*3\\u0178*/ \\\"/\\u0179\\\"\\\"1)3\\u017A*# \\\"76\"), peg$decode(\"71*# \\\" [\"), peg$decode(\"!!76+o$ \\\\!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X,=&!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X\\\"+)%4\\\"6\\u015C\\\"\\\"! %$\\\"# X\\\"# X*# \\\" [+' 4!6\\u017B!! %\"), peg$decode(\"!7L*# \\\"7\\x98+c$ \\\\!7B+-$7\\xE0+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xE0+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u017C\\\" %$\\\"# X\\\"# X\"), peg$decode(\"7\\xB8*# \\\"7\\x9F\"), peg$decode(\"!7\\xE2+_$ \\\\!7A+-$7\\xE2+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xE2+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7\\xE9+s$7.+i%7\\xEC+_% \\\\!7B+-$7\\xE3+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xE3+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"7\\xE4*; \\\"7\\xE5*5 \\\"7\\xE6*/ \\\"7\\xE7*) \\\"7\\xE8*# \\\"7\\x9F\"), peg$decode(\"!/\\u017D\\\"\\\"1#3\\u017E+<$7<+2%7\\xEF+(%4#6\\u017F#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0180\\\"\\\"1%3\\u0181+<$7<+2%7T+(%4#6\\u0182#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0183\\\"\\\"1(3\\u0184+B$7<+8%7\\\\*# \\\"7Y+(%4#6\\u0185#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0186\\\"\\\"1&3\\u0187+<$7<+2%76+(%4#6\\u0188#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u0189\\\"\\\"1%3\\u018A+T$!7<+5$ \\\\7!,#&7!\\\"+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\u018B\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7\\xEA+K$7;+A%76+7%7;+-%7\\xEB+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\x95\\\"\\\"1#3\\xD6*# \\\"76+' 4!6\\u018C!! %\"), peg$decode(\"!/\\xB4\\\"\\\"1#3\\u018D*G \\\"/\\xB6\\\"\\\"1#3\\u018E*; \\\"/\\xBA\\\"\\\"1#3\\u018F*/ \\\"/\\xB8\\\"\\\"1$3\\u0190*# \\\"76+' 4!6\\u0191!! %\"), peg$decode(\"!7\\xED+H$!7C+-$7\\xEE+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7U*) \\\"7\\\\*# \\\"7X+& 4!6\\u0192! %\"), peg$decode(\"!!7!*# \\\" [+c$7!*# \\\" [+S%7!*# \\\" [+C%7!*# \\\" [+3%7!*# \\\" [+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X+' 4!6\\u0193!! %\"), peg$decode(\"!!7!+C$7!*# \\\" [+3%7!*# \\\" [+#%'#%$## X$\\\"# X\\\"# X+' 4!6\\u0194!! %\"), peg$decode(\"7\\xBD\"), peg$decode(\"!7\\x9D+d$ \\\\!7B+-$7\\xF2+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xF2+#%'\\\"%$\\\"# X\\\"# X\\\"+(%4\\\"6\\u0195\\\"!!%$\\\"# X\\\"# X\"), peg$decode(\"7\\xF3*# \\\"7\\x9F\"), peg$decode(\"!.\\u0196\\\"\\\"2\\u01963\\u0197+N$7<+D%.\\u0198\\\"\\\"2\\u01983\\u0199*) \\\".\\u019A\\\"\\\"2\\u019A3\\u019B+(%4#6\\u019C#! %$## X$\\\"# X\\\"# X\"), peg$decode(\"!7\\x9D+d$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+(%4\\\"6\\u019D\\\"!!%$\\\"# X\\\"# X\"), peg$decode(\"!76+7$70+-%7\\xF6+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\" \\\\72*) \\\"74*# \\\"7.,/&72*) \\\"74*# \\\"7.\\\"\"), peg$decode(\" \\\\7%,#&7%\\\"\"), peg$decode(\"!7\\xF9+=$.8\\\"\\\"2839+-%7\\xFA+#%'#%$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u019E\\\"\\\"1%3\\u019F*) \\\"/\\u01A0\\\"\\\"1$3\\u01A1+' 4!6\\u01A2!! %\"), peg$decode(\"!7\\xFB+N$!.8\\\"\\\"2839+-$7^+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7\\\\*) \\\"7X*# \\\"7\\x82+' 4!6\\u01A3!! %\"), peg$decode(\"! \\\\7\\xFD*) \\\"7-*# \\\"7\\xFE,/&7\\xFD*) \\\"7-*# \\\"7\\xFE\\\"+! (%\"), peg$decode(\"7\\\"*S \\\"7!*M \\\".F\\\"\\\"2F3G*A \\\".J\\\"\\\"2J3K*5 \\\".H\\\"\\\"2H3I*) \\\".N\\\"\\\"2N3O\"), peg$decode(\".L\\\"\\\"2L3M*\\x95 \\\".B\\\"\\\"2B3C*\\x89 \\\".<\\\"\\\"2<3=*} \\\".R\\\"\\\"2R3S*q \\\".T\\\"\\\"2T3U*e \\\".V\\\"\\\"2V3W*Y \\\".P\\\"\\\"2P3Q*M \\\".@\\\"\\\"2@3A*A \\\".D\\\"\\\"2D3E*5 \\\".2\\\"\\\"2233*) \\\".>\\\"\\\"2>3?\"), peg$decode(\"!7\\u0100+h$.8\\\"\\\"2839+X%7\\xFA+N%!.\\u01A4\\\"\\\"2\\u01A43\\u01A5+-$7\\xEB+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!/\\u01A6\\\"\\\"1%3\\u01A7*) \\\"/\\u01A8\\\"\\\"1$3\\u01A9+' 4!6\\u01A2!! %\"), peg$decode(\"!7\\xEB+Q$/\\xB4\\\"\\\"1#3\\xB5*7 \\\"/\\xB6\\\"\\\"1#3\\xB7*+ \\\" \\\\7+,#&7+\\\"+'%4\\\"6\\u01AA\\\" %$\\\"# X\\\"# X\"), peg$decode(\"!7\\u0104+\\x8F$.F\\\"\\\"2F3G+%7\\u0103+u%.F\\\"\\\"2F3G+e%7\\u0103+[%.F\\\"\\\"2F3G+K%7\\u0103+A%.F\\\"\\\"2F3G+1%7\\u0105+'%4)6\\u01AB) %$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!7#+A$7#+7%7#+-%7#+#%'$%$$# X$## X$\\\"# X\\\"# X\"), peg$decode(\"!7\\u0103+-$7\\u0103+#%'\\\"%$\\\"# X\\\"# X\"), peg$decode(\"!7\\u0103+7$7\\u0103+-%7\\u0103+#%'#%$## X$\\\"# X\\\"# X\")],\n              peg$currPos = 0,\n              peg$reportedPos = 0,\n              peg$cachedPos = 0,\n              peg$cachedPosDetails = {\n            line: 1,\n            column: 1,\n            seenCR: false\n          },\n              peg$maxFailPos = 0,\n              peg$maxFailExpected = [],\n              peg$silentFails = 0,\n              peg$result;\n\n          if (\"startRule\" in options) {\n            if (!(options.startRule in peg$startRuleIndices)) {\n              throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n            }\n\n            peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n          }\n\n          function text() {\n            return input.substring(peg$reportedPos, peg$currPos);\n          }\n\n          function offset() {\n            return peg$reportedPos;\n          }\n\n          function line() {\n            return peg$computePosDetails(peg$reportedPos).line;\n          }\n\n          function column() {\n            return peg$computePosDetails(peg$reportedPos).column;\n          }\n\n          function expected(description) {\n            throw peg$buildException(null, [{\n              type: \"other\",\n              description: description\n            }], peg$reportedPos);\n          }\n\n          function error(message) {\n            throw peg$buildException(message, null, peg$reportedPos);\n          }\n\n          function peg$computePosDetails(pos) {\n            function advance(details, startPos, endPos) {\n              var p, ch;\n\n              for (p = startPos; p < endPos; p++) {\n                ch = input.charAt(p);\n\n                if (ch === \"\\n\") {\n                  if (!details.seenCR) {\n                    details.line++;\n                  }\n\n                  details.column = 1;\n                  details.seenCR = false;\n                } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n                  details.line++;\n                  details.column = 1;\n                  details.seenCR = true;\n                } else {\n                  details.column++;\n                  details.seenCR = false;\n                }\n              }\n            }\n\n            if (peg$cachedPos !== pos) {\n              if (peg$cachedPos > pos) {\n                peg$cachedPos = 0;\n                peg$cachedPosDetails = {\n                  line: 1,\n                  column: 1,\n                  seenCR: false\n                };\n              }\n\n              advance(peg$cachedPosDetails, peg$cachedPos, pos);\n              peg$cachedPos = pos;\n            }\n\n            return peg$cachedPosDetails;\n          }\n\n          function peg$fail(expected) {\n            if (peg$currPos < peg$maxFailPos) {\n              return;\n            }\n\n            if (peg$currPos > peg$maxFailPos) {\n              peg$maxFailPos = peg$currPos;\n              peg$maxFailExpected = [];\n            }\n\n            peg$maxFailExpected.push(expected);\n          }\n\n          function peg$buildException(message, expected, pos) {\n            function cleanupExpected(expected) {\n              var i = 1;\n              expected.sort(function (a, b) {\n                if (a.description < b.description) {\n                  return -1;\n                } else if (a.description > b.description) {\n                  return 1;\n                } else {\n                  return 0;\n                }\n              });\n\n              while (i < expected.length) {\n                if (expected[i - 1] === expected[i]) {\n                  expected.splice(i, 1);\n                } else {\n                  i++;\n                }\n              }\n            }\n\n            function buildMessage(expected, found) {\n              function stringEscape(s) {\n                function hex(ch) {\n                  return ch.charCodeAt(0).toString(16).toUpperCase();\n                }\n\n                return s.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"').replace(/\\x08/g, '\\\\b').replace(/\\t/g, '\\\\t').replace(/\\n/g, '\\\\n').replace(/\\f/g, '\\\\f').replace(/\\r/g, '\\\\r').replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function (ch) {\n                  return '\\\\x0' + hex(ch);\n                }).replace(/[\\x10-\\x1F\\x80-\\xFF]/g, function (ch) {\n                  return '\\\\x' + hex(ch);\n                }).replace(/[\\u0180-\\u0FFF]/g, function (ch) {\n                  return '\\\\u0' + hex(ch);\n                }).replace(/[\\u1080-\\uFFFF]/g, function (ch) {\n                  return '\\\\u' + hex(ch);\n                });\n              }\n\n              var expectedDescs = new Array(expected.length),\n                  expectedDesc,\n                  foundDesc,\n                  i;\n\n              for (i = 0; i < expected.length; i++) {\n                expectedDescs[i] = expected[i].description;\n              }\n\n              expectedDesc = expected.length > 1 ? expectedDescs.slice(0, -1).join(\", \") + \" or \" + expectedDescs[expected.length - 1] : expectedDescs[0];\n              foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n              return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n            }\n\n            var posDetails = peg$computePosDetails(pos),\n                found = pos < input.length ? input.charAt(pos) : null;\n\n            if (expected !== null) {\n              cleanupExpected(expected);\n            }\n\n            return new SyntaxError(message !== null ? message : buildMessage(expected, found), expected, found, pos, posDetails.line, posDetails.column);\n          }\n\n          function peg$decode(s) {\n            var bc = new Array(s.length),\n                i;\n\n            for (i = 0; i < s.length; i++) {\n              bc[i] = s.charCodeAt(i) - 32;\n            }\n\n            return bc;\n          }\n\n          function peg$parseRule(index) {\n            var bc = peg$bytecode[index],\n                ip = 0,\n                ips = [],\n                end = bc.length,\n                ends = [],\n                stack = [],\n                params,\n                i;\n\n            function protect(object) {\n              return Object.prototype.toString.apply(object) === \"[object Array]\" ? [] : object;\n            }\n\n            while (true) {\n              while (ip < end) {\n                switch (bc[ip]) {\n                  case 0:\n                    stack.push(protect(peg$consts[bc[ip + 1]]));\n                    ip += 2;\n                    break;\n\n                  case 1:\n                    stack.push(peg$currPos);\n                    ip++;\n                    break;\n\n                  case 2:\n                    stack.pop();\n                    ip++;\n                    break;\n\n                  case 3:\n                    peg$currPos = stack.pop();\n                    ip++;\n                    break;\n\n                  case 4:\n                    stack.length -= bc[ip + 1];\n                    ip += 2;\n                    break;\n\n                  case 5:\n                    stack.splice(-2, 1);\n                    ip++;\n                    break;\n\n                  case 6:\n                    stack[stack.length - 2].push(stack.pop());\n                    ip++;\n                    break;\n\n                  case 7:\n                    stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n                    ip += 2;\n                    break;\n\n                  case 8:\n                    stack.pop();\n                    stack.push(input.substring(stack[stack.length - 1], peg$currPos));\n                    ip++;\n                    break;\n\n                  case 9:\n                    ends.push(end);\n                    ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n                    if (stack[stack.length - 1]) {\n                      end = ip + 3 + bc[ip + 1];\n                      ip += 3;\n                    } else {\n                      end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                      ip += 3 + bc[ip + 1];\n                    }\n\n                    break;\n\n                  case 10:\n                    ends.push(end);\n                    ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n                    if (stack[stack.length - 1] === peg$FAILED) {\n                      end = ip + 3 + bc[ip + 1];\n                      ip += 3;\n                    } else {\n                      end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                      ip += 3 + bc[ip + 1];\n                    }\n\n                    break;\n\n                  case 11:\n                    ends.push(end);\n                    ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n                    if (stack[stack.length - 1] !== peg$FAILED) {\n                      end = ip + 3 + bc[ip + 1];\n                      ip += 3;\n                    } else {\n                      end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                      ip += 3 + bc[ip + 1];\n                    }\n\n                    break;\n\n                  case 12:\n                    if (stack[stack.length - 1] !== peg$FAILED) {\n                      ends.push(end);\n                      ips.push(ip);\n                      end = ip + 2 + bc[ip + 1];\n                      ip += 2;\n                    } else {\n                      ip += 2 + bc[ip + 1];\n                    }\n\n                    break;\n\n                  case 13:\n                    ends.push(end);\n                    ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n\n                    if (input.length > peg$currPos) {\n                      end = ip + 3 + bc[ip + 1];\n                      ip += 3;\n                    } else {\n                      end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                      ip += 3 + bc[ip + 1];\n                    }\n\n                    break;\n\n                  case 14:\n                    ends.push(end);\n                    ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n                    if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]) {\n                      end = ip + 4 + bc[ip + 2];\n                      ip += 4;\n                    } else {\n                      end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                      ip += 4 + bc[ip + 2];\n                    }\n\n                    break;\n\n                  case 15:\n                    ends.push(end);\n                    ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n                    if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]) {\n                      end = ip + 4 + bc[ip + 2];\n                      ip += 4;\n                    } else {\n                      end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                      ip += 4 + bc[ip + 2];\n                    }\n\n                    break;\n\n                  case 16:\n                    ends.push(end);\n                    ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n\n                    if (peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))) {\n                      end = ip + 4 + bc[ip + 2];\n                      ip += 4;\n                    } else {\n                      end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                      ip += 4 + bc[ip + 2];\n                    }\n\n                    break;\n\n                  case 17:\n                    stack.push(input.substr(peg$currPos, bc[ip + 1]));\n                    peg$currPos += bc[ip + 1];\n                    ip += 2;\n                    break;\n\n                  case 18:\n                    stack.push(peg$consts[bc[ip + 1]]);\n                    peg$currPos += peg$consts[bc[ip + 1]].length;\n                    ip += 2;\n                    break;\n\n                  case 19:\n                    stack.push(peg$FAILED);\n\n                    if (peg$silentFails === 0) {\n                      peg$fail(peg$consts[bc[ip + 1]]);\n                    }\n\n                    ip += 2;\n                    break;\n\n                  case 20:\n                    peg$reportedPos = stack[stack.length - 1 - bc[ip + 1]];\n                    ip += 2;\n                    break;\n\n                  case 21:\n                    peg$reportedPos = peg$currPos;\n                    ip++;\n                    break;\n\n                  case 22:\n                    params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);\n\n                    for (i = 0; i < bc[ip + 3]; i++) {\n                      params[i] = stack[stack.length - 1 - params[i]];\n                    }\n\n                    stack.splice(stack.length - bc[ip + 2], bc[ip + 2], peg$consts[bc[ip + 1]].apply(null, params));\n                    ip += 4 + bc[ip + 3];\n                    break;\n\n                  case 23:\n                    stack.push(peg$parseRule(bc[ip + 1]));\n                    ip += 2;\n                    break;\n\n                  case 24:\n                    peg$silentFails++;\n                    ip++;\n                    break;\n\n                  case 25:\n                    peg$silentFails--;\n                    ip++;\n                    break;\n\n                  default:\n                    throw new Error(\"Invalid opcode: \" + bc[ip] + \".\");\n                }\n              }\n\n              if (ends.length > 0) {\n                end = ends.pop();\n                ip = ips.pop();\n              } else {\n                break;\n              }\n            }\n\n            return stack[0];\n          }\n\n          options.data = {}; // Object to which header attributes will be assigned during parsing\n\n          function list(first, rest) {\n            return [first].concat(rest);\n          }\n\n          peg$result = peg$parseRule(peg$startRuleIndex);\n\n          if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n            return peg$result;\n          } else {\n            if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n              peg$fail({\n                type: \"end\",\n                description: \"end of input\"\n              });\n            }\n\n            throw peg$buildException(null, peg$maxFailExpected, peg$maxFailPos);\n          }\n        }\n\n        return {\n          SyntaxError: SyntaxError,\n          parse: parse\n        };\n      }();\n    }, {}],\n    12: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview Hacks - This file contains all of the things we\n       * wish we didn't have to do, just for interop.  It is similar to\n       * Utils, which provides actually useful and relevant functions for\n       * a SIP library. Methods in this file are grouped by vendor, so\n       * as to most easily track when particular hacks may not be necessary anymore.\n       */\n\n      module.exports = function (SIP) {\n        //keep to quiet jshint, and remain consistent with other files\n        SIP = SIP;\n        var Hacks = {\n          AllBrowsers: {\n            maskDtls: function (sdp) {\n              if (sdp) {\n                sdp = sdp.replace(/ UDP\\/TLS\\/RTP\\/SAVP/gmi, \" RTP/SAVP\");\n              }\n\n              return sdp;\n            },\n            unmaskDtls: function (sdp) {\n              /**\n               * Chrome does not handle DTLS correctly (Canaray does, but not production)\n               * keeping Chrome as SDES until DTLS is fixed (comment out 'is_opera' condition)\n               *\n               * UPDATE: May 21, 2014\n               * Chrome 35 now properly defaults to DTLS.  Only Opera remains using SDES\n               *\n               * UPDATE: 2014-09-24\n               * Opera now supports DTLS by default as well.\n               *\n               **/\n              return sdp.replace(/ RTP\\/SAVP/gmi, \" UDP/TLS/RTP/SAVP\");\n            }\n          },\n          Firefox: {\n            /* Condition to detect if hacks are applicable */\n            isFirefox: function () {\n              return typeof mozRTCPeerConnection !== 'undefined';\n            },\n            cannotHandleExtraWhitespace: function (sdp) {\n              if (this.isFirefox() && sdp) {\n                sdp = sdp.replace(/ \\r\\n/g, \"\\r\\n\");\n              }\n\n              return sdp;\n            },\n            hasMissingCLineInSDP: function (sdp) {\n              /*\n               * This is a Firefox hack to insert valid sdp when getDescription is\n               * called with the constraint offerToReceiveVideo = false.\n               * We search for either a c-line at the top of the sdp above all\n               * m-lines. If that does not exist then we search for a c-line\n               * beneath each m-line. If it is missing a c-line, we insert\n               * a fake c-line with the ip address 0.0.0.0. This is then valid\n               * sdp and no media will be sent for that m-line.\n               *\n               * Valid SDP is:\n               * m=\n               * i=\n               * c=\n               */\n              var insertAt, mlines;\n\n              if (sdp.indexOf('c=') > sdp.indexOf('m=')) {\n                // Find all m= lines\n                mlines = sdp.match(/m=.*\\r\\n.*/g);\n\n                for (var i = 0; i < mlines.length; i++) {\n                  // If it has an i= line, check if the next line is the c= line\n                  if (mlines[i].toString().search(/i=.*/) >= 0) {\n                    insertAt = sdp.indexOf(mlines[i].toString()) + mlines[i].toString().length;\n\n                    if (sdp.substr(insertAt, 2) !== 'c=') {\n                      sdp = sdp.substr(0, insertAt) + '\\r\\nc=IN IP4 0.0.0.0' + sdp.substr(insertAt);\n                    } // else add the C line if it's missing\n\n                  } else if (mlines[i].toString().search(/c=.*/) < 0) {\n                    insertAt = sdp.indexOf(mlines[i].toString().match(/.*/)) + mlines[i].toString().match(/.*/).toString().length;\n                    sdp = sdp.substr(0, insertAt) + '\\r\\nc=IN IP4 0.0.0.0' + sdp.substr(insertAt);\n                  }\n                }\n              }\n\n              return sdp;\n            }\n          },\n          Chrome: {\n            needsExplicitlyInactiveSDP: function (sdp) {\n              var sub, index;\n\n              if (Hacks.Firefox.isFirefox()) {\n                // Fix this in Firefox before sending\n                index = sdp.indexOf('m=video 0');\n\n                if (index !== -1) {\n                  sub = sdp.substr(index);\n                  sub = sub.replace(/\\r\\nc=IN IP4.*\\r\\n$/, '\\r\\nc=IN IP4 0.0.0.0\\r\\na=inactive\\r\\n');\n                  return sdp.substr(0, index) + sub;\n                }\n              }\n\n              return sdp;\n            },\n            getsConfusedAboutGUM: function (session) {\n              if (session.mediaHandler) {\n                session.mediaHandler.close();\n              }\n            }\n          }\n        };\n        return Hacks;\n      };\n    }, {}],\n    13: [function (require, module, exports) {\n      \"use strict\";\n\n      var levels = {\n        'error': 0,\n        'warn': 1,\n        'log': 2,\n        'debug': 3\n      };\n\n      module.exports = function (console) {\n        var LoggerFactory = function () {\n          var logger,\n              level = 2,\n              builtinEnabled = true,\n              connector = null;\n          this.loggers = {};\n          logger = this.getLogger('sip.loggerfactory');\n          Object.defineProperties(this, {\n            builtinEnabled: {\n              get: function () {\n                return builtinEnabled;\n              },\n              set: function (value) {\n                if (typeof value === 'boolean') {\n                  builtinEnabled = value;\n                } else {\n                  logger.error('invalid \"builtinEnabled\" parameter value: ' + JSON.stringify(value));\n                }\n              }\n            },\n            level: {\n              get: function () {\n                return level;\n              },\n              set: function (value) {\n                if (value >= 0 && value <= 3) {\n                  level = value;\n                } else if (value > 3) {\n                  level = 3;\n                } else if (levels.hasOwnProperty(value)) {\n                  level = levels[value];\n                } else {\n                  logger.error('invalid \"level\" parameter value: ' + JSON.stringify(value));\n                }\n              }\n            },\n            connector: {\n              get: function () {\n                return connector;\n              },\n              set: function (value) {\n                if (value === null || value === \"\" || value === undefined) {\n                  connector = null;\n                } else if (typeof value === 'function') {\n                  connector = value;\n                } else {\n                  logger.error('invalid \"connector\" parameter value: ' + JSON.stringify(value));\n                }\n              }\n            }\n          });\n        };\n\n        LoggerFactory.prototype.print = function (target, category, label, content) {\n          if (typeof content === 'string') {\n            var prefix = [new Date(), category];\n\n            if (label) {\n              prefix.push(label);\n            }\n\n            content = prefix.concat(content).join(' | ');\n          }\n\n          target.call(console, content);\n        };\n\n        function Logger(logger, category, label) {\n          this.logger = logger;\n          this.category = category;\n          this.label = label;\n        }\n\n        Object.keys(levels).forEach(function (targetName) {\n          Logger.prototype[targetName] = function (content) {\n            this.logger[targetName](this.category, this.label, content);\n          };\n\n          LoggerFactory.prototype[targetName] = function (category, label, content) {\n            if (this.level >= levels[targetName]) {\n              if (this.builtinEnabled) {\n                this.print(console[targetName], category, label, content);\n              }\n\n              if (this.connector) {\n                this.connector(targetName, category, label, content);\n              }\n            }\n          };\n        });\n\n        LoggerFactory.prototype.getLogger = function (category, label) {\n          var logger;\n\n          if (label && this.level === 3) {\n            return new Logger(this, category, label);\n          } else if (this.loggers[category]) {\n            return this.loggers[category];\n          } else {\n            logger = new Logger(this, category);\n            this.loggers[category] = logger;\n            return logger;\n          }\n        };\n\n        return LoggerFactory;\n      };\n    }, {}],\n    14: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview MediaHandler\n       */\n\n      /* MediaHandler\n       * @class PeerConnection helper Class.\n       * @param {SIP.Session} session\n       * @param {Object} [options]\n       */\n\n      module.exports = function (EventEmitter) {\n        var MediaHandler = function (session, options) {\n          // keep jshint happy\n          session = session;\n          options = options;\n        };\n\n        MediaHandler.prototype = Object.create(EventEmitter.prototype, {\n          isReady: {\n            value: function isReady() {}\n          },\n          close: {\n            value: function close() {}\n          },\n\n          /**\n           * @param {Object} [mediaHint] A custom object describing the media to be used during this session.\n           */\n          getDescription: {\n            value: function getDescription(mediaHint) {\n              // keep jshint happy\n              mediaHint = mediaHint;\n            }\n          },\n\n          /**\n           * Check if a SIP message contains a session description.\n           * @param {SIP.SIPMessage} message\n           * @returns {boolean}\n           */\n          hasDescription: {\n            value: function hasDescription(message) {\n              // keep jshint happy\n              message = message;\n            }\n          },\n\n          /**\n           * Set the session description contained in a SIP message.\n           * @param {SIP.SIPMessage} message\n           * @returns {Promise}\n           */\n          setDescription: {\n            value: function setDescription(message) {\n              // keep jshint happy\n              message = message;\n            }\n          }\n        });\n        return MediaHandler;\n      };\n    }, {}],\n    15: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP NameAddrHeader\n       */\n\n      /**\n       * @augments SIP\n       * @class Class creating a Name Address SIP header.\n       *\n       * @param {SIP.URI} uri\n       * @param {String} [displayName]\n       * @param {Object} [parameters]\n       *\n       */\n\n      module.exports = function (SIP) {\n        var NameAddrHeader;\n\n        NameAddrHeader = function (uri, displayName, parameters) {\n          var param; // Checks\n\n          if (!uri || !(uri instanceof SIP.URI)) {\n            throw new TypeError('missing or invalid \"uri\" parameter');\n          } // Initialize parameters\n\n\n          this.uri = uri;\n          this.parameters = {};\n\n          for (param in parameters) {\n            this.setParam(param, parameters[param]);\n          }\n\n          Object.defineProperties(this, {\n            friendlyName: {\n              get: function () {\n                return this.displayName || uri.aor;\n              }\n            },\n            displayName: {\n              get: function () {\n                return displayName;\n              },\n              set: function (value) {\n                displayName = value === 0 ? '0' : value;\n              }\n            }\n          });\n        };\n\n        NameAddrHeader.prototype = {\n          setParam: function (key, value) {\n            if (key) {\n              this.parameters[key.toLowerCase()] = typeof value === 'undefined' || value === null ? null : value.toString();\n            }\n          },\n          getParam: SIP.URI.prototype.getParam,\n          hasParam: SIP.URI.prototype.hasParam,\n          deleteParam: SIP.URI.prototype.deleteParam,\n          clearParams: SIP.URI.prototype.clearParams,\n          clone: function () {\n            return new NameAddrHeader(this.uri.clone(), this.displayName, JSON.parse(JSON.stringify(this.parameters)));\n          },\n          toString: function () {\n            var body, parameter;\n            body = this.displayName || this.displayName === 0 ? '\"' + this.displayName + '\" ' : '';\n            body += '<' + this.uri.toString() + '>';\n\n            for (parameter in this.parameters) {\n              body += ';' + parameter;\n\n              if (this.parameters[parameter] !== null) {\n                body += '=' + this.parameters[parameter];\n              }\n            }\n\n            return body;\n          }\n        };\n        /**\n          * Parse the given string and returns a SIP.NameAddrHeader instance or undefined if\n          * it is an invalid NameAddrHeader.\n          * @public\n          * @param {String} name_addr_header\n          */\n\n        NameAddrHeader.parse = function (name_addr_header) {\n          name_addr_header = SIP.Grammar.parse(name_addr_header, 'Name_Addr_Header');\n\n          if (name_addr_header !== -1) {\n            return name_addr_header;\n          } else {\n            return undefined;\n          }\n        };\n\n        SIP.NameAddrHeader = NameAddrHeader;\n      };\n    }, {}],\n    16: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Message Parser\n       */\n\n      /**\n       * Extract and parse every header of a SIP message.\n       * @augments SIP\n       * @namespace\n       */\n\n      module.exports = function (SIP) {\n        var Parser;\n\n        function getHeader(data, headerStart) {\n          var // 'start' position of the header.\n          start = headerStart,\n              // 'end' position of the header.\n          end = 0,\n              // 'partial end' position of the header.\n          partialEnd = 0; //End of message.\n\n          if (data.substring(start, start + 2).match(/(^\\r\\n)/)) {\n            return -2;\n          }\n\n          while (end === 0) {\n            // Partial End of Header.\n            partialEnd = data.indexOf('\\r\\n', start); // 'indexOf' returns -1 if the value to be found never occurs.\n\n            if (partialEnd === -1) {\n              return partialEnd;\n            }\n\n            if (!data.substring(partialEnd + 2, partialEnd + 4).match(/(^\\r\\n)/) && data.charAt(partialEnd + 2).match(/(^\\s+)/)) {\n              // Not the end of the message. Continue from the next position.\n              start = partialEnd + 2;\n            } else {\n              end = partialEnd;\n            }\n          }\n\n          return end;\n        }\n\n        function parseHeader(message, data, headerStart, headerEnd) {\n          var header,\n              idx,\n              length,\n              parsed,\n              hcolonIndex = data.indexOf(':', headerStart),\n              headerName = data.substring(headerStart, hcolonIndex).trim(),\n              headerValue = data.substring(hcolonIndex + 1, headerEnd).trim(); // If header-field is well-known, parse it.\n\n          switch (headerName.toLowerCase()) {\n            case 'via':\n            case 'v':\n              message.addHeader('via', headerValue);\n\n              if (message.getHeaders('via').length === 1) {\n                parsed = message.parseHeader('Via');\n\n                if (parsed) {\n                  message.via = parsed;\n                  message.via_branch = parsed.branch;\n                }\n              } else {\n                parsed = 0;\n              }\n\n              break;\n\n            case 'from':\n            case 'f':\n              message.setHeader('from', headerValue);\n              parsed = message.parseHeader('from');\n\n              if (parsed) {\n                message.from = parsed;\n                message.from_tag = parsed.getParam('tag');\n              }\n\n              break;\n\n            case 'to':\n            case 't':\n              message.setHeader('to', headerValue);\n              parsed = message.parseHeader('to');\n\n              if (parsed) {\n                message.to = parsed;\n                message.to_tag = parsed.getParam('tag');\n              }\n\n              break;\n\n            case 'record-route':\n              parsed = SIP.Grammar.parse(headerValue, 'Record_Route');\n\n              if (parsed === -1) {\n                parsed = undefined;\n                break;\n              }\n\n              length = parsed.length;\n\n              for (idx = 0; idx < length; idx++) {\n                header = parsed[idx];\n                message.addHeader('record-route', headerValue.substring(header.position, header.offset));\n                message.headers['Record-Route'][message.getHeaders('record-route').length - 1].parsed = header.parsed;\n              }\n\n              break;\n\n            case 'call-id':\n            case 'i':\n              message.setHeader('call-id', headerValue);\n              parsed = message.parseHeader('call-id');\n\n              if (parsed) {\n                message.call_id = headerValue;\n              }\n\n              break;\n\n            case 'contact':\n            case 'm':\n              parsed = SIP.Grammar.parse(headerValue, 'Contact');\n\n              if (parsed === -1) {\n                parsed = undefined;\n                break;\n              }\n\n              length = parsed.length;\n\n              for (idx = 0; idx < length; idx++) {\n                header = parsed[idx];\n                message.addHeader('contact', headerValue.substring(header.position, header.offset));\n                message.headers['Contact'][message.getHeaders('contact').length - 1].parsed = header.parsed;\n              }\n\n              break;\n\n            case 'content-length':\n            case 'l':\n              message.setHeader('content-length', headerValue);\n              parsed = message.parseHeader('content-length');\n              break;\n\n            case 'content-type':\n            case 'c':\n              message.setHeader('content-type', headerValue);\n              parsed = message.parseHeader('content-type');\n              break;\n\n            case 'cseq':\n              message.setHeader('cseq', headerValue);\n              parsed = message.parseHeader('cseq');\n\n              if (parsed) {\n                message.cseq = parsed.value;\n              }\n\n              if (message instanceof SIP.IncomingResponse) {\n                message.method = parsed.method;\n              }\n\n              break;\n\n            case 'max-forwards':\n              message.setHeader('max-forwards', headerValue);\n              parsed = message.parseHeader('max-forwards');\n              break;\n\n            case 'www-authenticate':\n              message.setHeader('www-authenticate', headerValue);\n              parsed = message.parseHeader('www-authenticate');\n              break;\n\n            case 'proxy-authenticate':\n              message.setHeader('proxy-authenticate', headerValue);\n              parsed = message.parseHeader('proxy-authenticate');\n              break;\n\n            case 'refer-to':\n            case 'r':\n              message.setHeader('refer-to', headerValue);\n              parsed = message.parseHeader('refer-to');\n\n              if (parsed) {\n                message.refer_to = parsed;\n              }\n\n              break;\n\n            default:\n              // Do not parse this header.\n              message.setHeader(headerName, headerValue);\n              parsed = 0;\n          }\n\n          if (parsed === undefined) {\n            return {\n              error: 'error parsing header \"' + headerName + '\"'\n            };\n          } else {\n            return true;\n          }\n        }\n        /** Parse SIP Message\n         * @function\n         * @param {String} message SIP message.\n         * @param {Object} logger object.\n         * @returns {SIP.IncomingRequest|SIP.IncomingResponse|undefined}\n         */\n\n\n        Parser = {};\n\n        Parser.parseMessage = function (data, ua) {\n          var message,\n              firstLine,\n              contentLength,\n              bodyStart,\n              parsed,\n              headerStart = 0,\n              headerEnd = data.indexOf('\\r\\n'),\n              logger = ua.getLogger('sip.parser');\n\n          if (headerEnd === -1) {\n            logger.warn('no CRLF found, not a SIP message, discarded');\n            return;\n          } // Parse first line. Check if it is a Request or a Reply.\n\n\n          firstLine = data.substring(0, headerEnd);\n          parsed = SIP.Grammar.parse(firstLine, 'Request_Response');\n\n          if (parsed === -1) {\n            logger.warn('error parsing first line of SIP message: \"' + firstLine + '\"');\n            return;\n          } else if (!parsed.status_code) {\n            message = new SIP.IncomingRequest(ua);\n            message.method = parsed.method;\n            message.ruri = parsed.uri;\n          } else {\n            message = new SIP.IncomingResponse(ua);\n            message.status_code = parsed.status_code;\n            message.reason_phrase = parsed.reason_phrase;\n          }\n\n          message.data = data;\n          headerStart = headerEnd + 2;\n          /* Loop over every line in data. Detect the end of each header and parse\n          * it or simply add to the headers collection.\n          */\n\n          while (true) {\n            headerEnd = getHeader(data, headerStart); // The SIP message has normally finished.\n\n            if (headerEnd === -2) {\n              bodyStart = headerStart + 2;\n              break;\n            } // data.indexOf returned -1 due to a malformed message.\n            else if (headerEnd === -1) {\n              logger.error('malformed message');\n              return;\n            }\n\n            parsed = parseHeader(message, data, headerStart, headerEnd);\n\n            if (parsed !== true) {\n              logger.error(parsed.error);\n              return;\n            }\n\n            headerStart = headerEnd + 2;\n          }\n          /* RFC3261 18.3.\n           * If there are additional bytes in the transport packet\n           * beyond the end of the body, they MUST be discarded.\n           */\n\n\n          if (message.hasHeader('content-length')) {\n            contentLength = message.getHeader('content-length');\n            message.body = data.substr(bodyStart, contentLength);\n          } else {\n            message.body = data.substring(bodyStart);\n          }\n\n          return message;\n        };\n\n        SIP.Parser = Parser;\n      };\n    }, {}],\n    17: [function (require, module, exports) {\n      \"use strict\";\n\n      module.exports = function (SIP) {\n        var RegisterContext;\n\n        RegisterContext = function (ua) {\n          var params = {},\n              regId = 1;\n          this.registrar = ua.configuration.registrarServer;\n          this.expires = ua.configuration.registerExpires; // Contact header\n\n          this.contact = ua.contact.toString();\n\n          if (regId) {\n            this.contact += ';reg-id=' + regId;\n            this.contact += ';+sip.instance=\"<urn:uuid:' + ua.configuration.instanceId + '>\"';\n          } // Call-ID and CSeq values RFC3261 10.2\n\n\n          this.call_id = SIP.Utils.createRandomToken(22);\n          this.cseq = 80;\n          this.to_uri = ua.configuration.uri;\n          params.to_uri = this.to_uri;\n          params.to_displayName = ua.configuration.displayName;\n          params.call_id = this.call_id;\n          params.cseq = this.cseq; // Extends ClientContext\n\n          SIP.Utils.augment(this, SIP.ClientContext, [ua, 'REGISTER', this.registrar, {\n            params: params\n          }]);\n          this.registrationTimer = null;\n          this.registrationExpiredTimer = null; // Set status\n\n          this.registered = false;\n          this.logger = ua.getLogger('sip.registercontext');\n        };\n\n        RegisterContext.prototype = {\n          register: function (options) {\n            var self = this,\n                extraHeaders; // Handle Options\n\n            this.options = options || {};\n            extraHeaders = (this.options.extraHeaders || []).slice();\n            extraHeaders.push('Contact: ' + this.contact + ';expires=' + this.expires);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString()); // Save original extraHeaders to be used in .close\n\n            this.closeHeaders = this.options.closeWithHeaders ? (this.options.extraHeaders || []).slice() : [];\n\n            this.receiveResponse = function (response) {\n              var contact,\n                  expires,\n                  contacts = response.getHeaders('contact').length,\n                  cause; // Discard responses to older REGISTER/un-REGISTER requests.\n\n              if (response.cseq !== this.cseq) {\n                return;\n              } // Clear registration timer\n\n\n              if (this.registrationTimer !== null) {\n                SIP.Timers.clearTimeout(this.registrationTimer);\n                this.registrationTimer = null;\n              }\n\n              switch (true) {\n                case /^1[0-9]{2}$/.test(response.status_code):\n                  this.emit('progress', response);\n                  break;\n\n                case /^2[0-9]{2}$/.test(response.status_code):\n                  this.emit('accepted', response);\n\n                  if (response.hasHeader('expires')) {\n                    expires = response.getHeader('expires');\n                  }\n\n                  if (this.registrationExpiredTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                    this.registrationExpiredTimer = null;\n                  } // Search the Contact pointing to us and update the expires value accordingly.\n\n\n                  if (!contacts) {\n                    this.logger.warn('no Contact header in response to REGISTER, response ignored');\n                    break;\n                  }\n\n                  while (contacts--) {\n                    contact = response.parseHeader('contact', contacts);\n\n                    if (contact.uri.user === this.ua.contact.uri.user) {\n                      expires = contact.getParam('expires');\n                      break;\n                    } else {\n                      contact = null;\n                    }\n                  }\n\n                  if (!contact) {\n                    this.logger.warn('no Contact header pointing to us, response ignored');\n                    break;\n                  }\n\n                  if (!expires) {\n                    expires = this.expires;\n                  } // Re-Register before the expiration interval has elapsed.\n                  // For that, decrease the expires value. ie: 3 seconds\n\n\n                  this.registrationTimer = SIP.Timers.setTimeout(function () {\n                    self.registrationTimer = null;\n                    self.register(self.options);\n                  }, expires * 1000 - 3000);\n                  this.registrationExpiredTimer = SIP.Timers.setTimeout(function () {\n                    self.logger.warn('registration expired');\n\n                    if (self.registered) {\n                      self.unregistered(null, SIP.C.causes.EXPIRES);\n                    }\n                  }, expires * 1000); //Save gruu values\n\n                  if (contact.hasParam('temp-gruu')) {\n                    this.ua.contact.temp_gruu = SIP.URI.parse(contact.getParam('temp-gruu').replace(/\"/g, ''));\n                  }\n\n                  if (contact.hasParam('pub-gruu')) {\n                    this.ua.contact.pub_gruu = SIP.URI.parse(contact.getParam('pub-gruu').replace(/\"/g, ''));\n                  }\n\n                  this.registered = true;\n                  this.emit('registered', response || null);\n                  break;\n                // Interval too brief RFC3261 10.2.8\n\n                case /^423$/.test(response.status_code):\n                  if (response.hasHeader('min-expires')) {\n                    // Increase our registration interval to the suggested minimum\n                    this.expires = response.getHeader('min-expires'); // Attempt the registration again immediately\n\n                    this.register(this.options);\n                  } else {\n                    //This response MUST contain a Min-Expires header field\n                    this.logger.warn('423 response received for REGISTER without Min-Expires');\n                    this.registrationFailure(response, SIP.C.causes.SIP_FAILURE_CODE);\n                  }\n\n                  break;\n\n                default:\n                  cause = SIP.Utils.sipErrorCause(response.status_code);\n                  this.registrationFailure(response, cause);\n              }\n            };\n\n            this.onRequestTimeout = function () {\n              this.registrationFailure(null, SIP.C.causes.REQUEST_TIMEOUT);\n            };\n\n            this.onTransportError = function () {\n              this.registrationFailure(null, SIP.C.causes.CONNECTION_ERROR);\n            };\n\n            this.cseq++;\n            this.request.cseq = this.cseq;\n            this.request.setHeader('cseq', this.cseq + ' REGISTER');\n            this.request.extraHeaders = extraHeaders;\n            this.send();\n          },\n          registrationFailure: function (response, cause) {\n            this.emit('failed', response || null, cause || null);\n          },\n          onTransportClosed: function () {\n            this.registered_before = this.registered;\n\n            if (this.registrationTimer !== null) {\n              SIP.Timers.clearTimeout(this.registrationTimer);\n              this.registrationTimer = null;\n            }\n\n            if (this.registrationExpiredTimer !== null) {\n              SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n              this.registrationExpiredTimer = null;\n            }\n\n            if (this.registered) {\n              this.unregistered(null, SIP.C.causes.CONNECTION_ERROR);\n            }\n          },\n          onTransportConnected: function () {\n            this.register(this.options);\n          },\n          close: function () {\n            var options = {\n              all: false,\n              extraHeaders: this.closeHeaders\n            };\n            this.registered_before = this.registered;\n            this.unregister(options);\n          },\n          unregister: function (options) {\n            var extraHeaders;\n            options = options || {};\n\n            if (!this.registered && !options.all) {\n              this.logger.warn('already unregistered');\n              return;\n            }\n\n            extraHeaders = (options.extraHeaders || []).slice();\n            this.registered = false; // Clear the registration timer.\n\n            if (this.registrationTimer !== null) {\n              SIP.Timers.clearTimeout(this.registrationTimer);\n              this.registrationTimer = null;\n            }\n\n            if (options.all) {\n              extraHeaders.push('Contact: *');\n              extraHeaders.push('Expires: 0');\n            } else {\n              extraHeaders.push('Contact: ' + this.contact + ';expires=0');\n            }\n\n            this.receiveResponse = function (response) {\n              var cause;\n\n              switch (true) {\n                case /^1[0-9]{2}$/.test(response.status_code):\n                  this.emit('progress', response);\n                  break;\n\n                case /^2[0-9]{2}$/.test(response.status_code):\n                  this.emit('accepted', response);\n\n                  if (this.registrationExpiredTimer !== null) {\n                    SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                    this.registrationExpiredTimer = null;\n                  }\n\n                  this.unregistered(response);\n                  break;\n\n                default:\n                  cause = SIP.Utils.sipErrorCause(response.status_code);\n                  this.unregistered(response, cause);\n              }\n            };\n\n            this.onRequestTimeout = function () {// Not actually unregistered...\n              //this.unregistered(null, SIP.C.causes.REQUEST_TIMEOUT);\n            };\n\n            this.onTransportError = function () {// Not actually unregistered...\n              //this.unregistered(null, SIP.C.causes.CONNECTION_ERROR);\n            };\n\n            this.cseq++;\n            this.request.cseq = this.cseq;\n            this.request.setHeader('cseq', this.cseq + ' REGISTER');\n            this.request.extraHeaders = extraHeaders;\n            this.send();\n          },\n          unregistered: function (response, cause) {\n            this.registered = false;\n            this.emit('unregistered', response || null, cause || null);\n          }\n        };\n        SIP.RegisterContext = RegisterContext;\n      };\n    }, {}],\n    18: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview Request Sender\n       */\n\n      /**\n       * @augments SIP\n       * @class Class creating a request sender.\n       * @param {Object} applicant\n       * @param {SIP.UA} ua\n       */\n\n      module.exports = function (SIP) {\n        var RequestSender;\n\n        RequestSender = function (applicant, ua) {\n          this.logger = ua.getLogger('sip.requestsender');\n          this.ua = ua;\n          this.applicant = applicant;\n          this.method = applicant.request.method;\n          this.request = applicant.request;\n          this.credentials = null;\n          this.challenged = false;\n          this.staled = false; // If ua is in closing process or even closed just allow sending Bye and ACK\n\n          if (ua.status === SIP.UA.C.STATUS_USER_CLOSED && (this.method !== SIP.C.BYE || this.method !== SIP.C.ACK)) {\n            this.onTransportError();\n          }\n        };\n        /**\n        * Create the client transaction and send the message.\n        */\n\n\n        RequestSender.prototype = {\n          send: function () {\n            switch (this.method) {\n              case \"INVITE\":\n                this.clientTransaction = new SIP.Transactions.InviteClientTransaction(this, this.request, this.ua.transport);\n                break;\n\n              case \"ACK\":\n                this.clientTransaction = new SIP.Transactions.AckClientTransaction(this, this.request, this.ua.transport);\n                break;\n\n              default:\n                this.clientTransaction = new SIP.Transactions.NonInviteClientTransaction(this, this.request, this.ua.transport);\n            }\n\n            this.clientTransaction.send();\n            return this.clientTransaction;\n          },\n\n          /**\n          * Callback fired when receiving a request timeout error from the client transaction.\n          * To be re-defined by the applicant.\n          * @event\n          */\n          onRequestTimeout: function () {\n            this.applicant.onRequestTimeout();\n          },\n\n          /**\n          * Callback fired when receiving a transport error from the client transaction.\n          * To be re-defined by the applicant.\n          * @event\n          */\n          onTransportError: function () {\n            this.applicant.onTransportError();\n          },\n\n          /**\n          * Called from client transaction when receiving a correct response to the request.\n          * Authenticate request if needed or pass the response back to the applicant.\n          * @param {SIP.IncomingResponse} response\n          */\n          receiveResponse: function (response) {\n            var cseq,\n                challenge,\n                authorization_header_name,\n                status_code = response.status_code;\n            /*\n            * Authentication\n            * Authenticate once. _challenged_ flag used to avoid infinite authentications.\n            */\n\n            if (status_code === 401 || status_code === 407) {\n              // Get and parse the appropriate WWW-Authenticate or Proxy-Authenticate header.\n              if (response.status_code === 401) {\n                challenge = response.parseHeader('www-authenticate');\n                authorization_header_name = 'authorization';\n              } else {\n                challenge = response.parseHeader('proxy-authenticate');\n                authorization_header_name = 'proxy-authorization';\n              } // Verify it seems a valid challenge.\n\n\n              if (!challenge) {\n                this.logger.warn(response.status_code + ' with wrong or missing challenge, cannot authenticate');\n                this.applicant.receiveResponse(response);\n                return;\n              }\n\n              if (!this.challenged || !this.staled && challenge.stale === true) {\n                if (!this.credentials) {\n                  this.credentials = this.ua.configuration.authenticationFactory(this.ua);\n                } // Verify that the challenge is really valid.\n\n\n                if (!this.credentials.authenticate(this.request, challenge)) {\n                  this.applicant.receiveResponse(response);\n                  return;\n                }\n\n                this.challenged = true;\n\n                if (challenge.stale) {\n                  this.staled = true;\n                }\n\n                if (response.method === SIP.C.REGISTER) {\n                  cseq = this.applicant.cseq += 1;\n                } else if (this.request.dialog) {\n                  cseq = this.request.dialog.local_seqnum += 1;\n                } else {\n                  cseq = this.request.cseq + 1;\n                  this.request.cseq = cseq;\n                }\n\n                this.request.setHeader('cseq', cseq + ' ' + this.method);\n                this.request.setHeader(authorization_header_name, this.credentials.toString());\n                this.send();\n              } else {\n                this.applicant.receiveResponse(response);\n              }\n            } else {\n              this.applicant.receiveResponse(response);\n            }\n          }\n        };\n        SIP.RequestSender = RequestSender;\n      };\n    }, {}],\n    19: [function (require, module, exports) {\n      /**\n       * @name SIP\n       * @namespace\n       */\n      \"use strict\";\n\n      module.exports = function (environment) {\n        var pkg = require('../package.json'),\n            version = pkg.version,\n            title = pkg.title;\n\n        var SIP = Object.defineProperties({}, {\n          version: {\n            get: function () {\n              return version;\n            }\n          },\n          name: {\n            get: function () {\n              return title;\n            }\n          }\n        });\n\n        require('./Utils')(SIP, environment);\n\n        SIP.LoggerFactory = require('./LoggerFactory')(environment.console);\n        SIP.EventEmitter = require('./EventEmitter')(environment.console);\n        SIP.C = require('./Constants')(SIP.name, SIP.version);\n        SIP.Exceptions = require('./Exceptions');\n        SIP.Timers = require('./Timers')(environment.timers);\n        SIP.Transport = environment.Transport(SIP, environment.WebSocket);\n\n        require('./Parser')(SIP);\n\n        require('./SIPMessage')(SIP);\n\n        require('./URI')(SIP);\n\n        require('./NameAddrHeader')(SIP);\n\n        require('./Transactions')(SIP);\n\n        require('./Dialogs')(SIP);\n\n        require('./RequestSender')(SIP);\n\n        require('./RegisterContext')(SIP);\n\n        SIP.MediaHandler = require('./MediaHandler')(SIP.EventEmitter);\n\n        require('./ClientContext')(SIP);\n\n        require('./ServerContext')(SIP);\n\n        require('./Session')(SIP, environment);\n\n        require('./Subscription')(SIP);\n\n        SIP.WebRTC = require('./WebRTC')(SIP, environment);\n\n        require('./UA')(SIP, environment);\n\n        SIP.Hacks = require('./Hacks')(SIP);\n\n        require('./SanityCheck')(SIP);\n\n        SIP.DigestAuthentication = require('./DigestAuthentication')(SIP.Utils);\n        SIP.Grammar = require('./Grammar')(SIP);\n        return SIP;\n      };\n    }, {\n      \"../package.json\": 2,\n      \"./ClientContext\": 3,\n      \"./Constants\": 4,\n      \"./Dialogs\": 6,\n      \"./DigestAuthentication\": 7,\n      \"./EventEmitter\": 8,\n      \"./Exceptions\": 9,\n      \"./Grammar\": 10,\n      \"./Hacks\": 12,\n      \"./LoggerFactory\": 13,\n      \"./MediaHandler\": 14,\n      \"./NameAddrHeader\": 15,\n      \"./Parser\": 16,\n      \"./RegisterContext\": 17,\n      \"./RequestSender\": 18,\n      \"./SIPMessage\": 20,\n      \"./SanityCheck\": 21,\n      \"./ServerContext\": 22,\n      \"./Session\": 23,\n      \"./Subscription\": 25,\n      \"./Timers\": 26,\n      \"./Transactions\": 27,\n      \"./UA\": 29,\n      \"./URI\": 30,\n      \"./Utils\": 31,\n      \"./WebRTC\": 32\n    }],\n    20: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Message\n       */\n\n      module.exports = function (SIP) {\n        var OutgoingRequest, IncomingMessage, IncomingRequest, IncomingResponse;\n\n        function getSupportedHeader(request) {\n          var allowUnregistered = request.ua.configuration.hackAllowUnregisteredOptionTags;\n          var optionTags = [];\n          var optionTagSet = {};\n\n          if (request.method === SIP.C.REGISTER) {\n            optionTags.push('path', 'gruu');\n          } else if (request.method === SIP.C.INVITE && (request.ua.contact.pub_gruu || request.ua.contact.temp_gruu)) {\n            optionTags.push('gruu');\n          }\n\n          if (request.ua.configuration.rel100 === SIP.C.supported.SUPPORTED) {\n            optionTags.push('100rel');\n          }\n\n          if (request.ua.configuration.replaces === SIP.C.supported.SUPPORTED) {\n            optionTags.push('replaces');\n          }\n\n          optionTags.push('outbound');\n          optionTags = optionTags.concat(request.ua.configuration.extraSupported);\n          optionTags = optionTags.filter(function (optionTag) {\n            var registered = SIP.C.OPTION_TAGS[optionTag];\n            var unique = !optionTagSet[optionTag];\n            optionTagSet[optionTag] = true;\n            return (registered || allowUnregistered) && unique;\n          });\n          return 'Supported: ' + optionTags.join(', ') + '\\r\\n';\n        }\n        /**\n         * @augments SIP\n         * @class Class for outgoing SIP request.\n         * @param {String} method request method\n         * @param {String} ruri request uri\n         * @param {SIP.UA} ua\n         * @param {Object} params parameters that will have priority over ua.configuration parameters:\n         * <br>\n         *  - cseq, call_id, from_tag, from_uri, from_displayName, to_uri, to_tag, route_set\n         * @param {Object} [headers] extra headers\n         * @param {String} [body]\n         */\n\n\n        OutgoingRequest = function (method, ruri, ua, params, extraHeaders, body) {\n          var to, from, call_id, cseq, to_uri, from_uri;\n          params = params || {}; // Mandatory parameters check\n\n          if (!method || !ruri || !ua) {\n            return null;\n          }\n\n          this.logger = ua.getLogger('sip.sipmessage');\n          this.ua = ua;\n          this.headers = {};\n          this.method = method;\n          this.ruri = ruri;\n          this.body = body;\n          this.extraHeaders = (extraHeaders || []).slice();\n          this.statusCode = params.status_code;\n          this.reasonPhrase = params.reason_phrase; // Fill the Common SIP Request Headers\n          // Route\n\n          if (params.route_set) {\n            this.setHeader('route', params.route_set);\n          } else if (ua.configuration.usePreloadedRoute) {\n            this.setHeader('route', ua.transport.server.sip_uri);\n          } // Via\n          // Empty Via header. Will be filled by the client transaction.\n\n\n          this.setHeader('via', ''); // Max-Forwards\n\n          this.setHeader('max-forwards', SIP.UA.C.MAX_FORWARDS); // To\n\n          to_uri = params.to_uri || ruri;\n          to = params.to_displayName || params.to_displayName === 0 ? '\"' + params.to_displayName + '\" ' : '';\n          to += '<' + (to_uri && to_uri.toRaw ? to_uri.toRaw() : to_uri) + '>';\n          to += params.to_tag ? ';tag=' + params.to_tag : '';\n          this.to = new SIP.NameAddrHeader.parse(to);\n          this.setHeader('to', to); // From\n\n          from_uri = params.from_uri || ua.configuration.uri;\n\n          if (params.from_displayName || params.from_displayName === 0) {\n            from = '\"' + params.from_displayName + '\" ';\n          } else if (ua.configuration.displayName) {\n            from = '\"' + ua.configuration.displayName + '\" ';\n          } else {\n            from = '';\n          }\n\n          from += '<' + (from_uri && from_uri.toRaw ? from_uri.toRaw() : from_uri) + '>;tag=';\n          from += params.from_tag || SIP.Utils.newTag();\n          this.from = new SIP.NameAddrHeader.parse(from);\n          this.setHeader('from', from); // Call-ID\n\n          call_id = params.call_id || ua.configuration.sipjsId + SIP.Utils.createRandomToken(15);\n          this.call_id = call_id;\n          this.setHeader('call-id', call_id); // CSeq\n\n          cseq = params.cseq || Math.floor(Math.random() * 10000);\n          this.cseq = cseq;\n          this.setHeader('cseq', cseq + ' ' + method);\n        };\n\n        OutgoingRequest.prototype = {\n          /**\n           * Replace the the given header by the given value.\n           * @param {String} name header name\n           * @param {String | Array} value header value\n           */\n          setHeader: function (name, value) {\n            this.headers[SIP.Utils.headerize(name)] = value instanceof Array ? value : [value];\n          },\n\n          /**\n           * Get the value of the given header name at the given position.\n           * @param {String} name header name\n           * @returns {String|undefined} Returns the specified header, undefined if header doesn't exist.\n           */\n          getHeader: function (name) {\n            var regexp,\n                idx,\n                length = this.extraHeaders.length,\n                header = this.headers[SIP.Utils.headerize(name)];\n\n            if (header) {\n              if (header[0]) {\n                return header[0];\n              }\n            } else {\n              regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n\n              for (idx = 0; idx < length; idx++) {\n                header = this.extraHeaders[idx];\n\n                if (regexp.test(header)) {\n                  return header.substring(header.indexOf(':') + 1).trim();\n                }\n              }\n            }\n\n            return;\n          },\n\n          /**\n           * Get the header/s of the given name.\n           * @param {String} name header name\n           * @returns {Array} Array with all the headers of the specified name.\n           */\n          getHeaders: function (name) {\n            var idx,\n                length,\n                regexp,\n                header = this.headers[SIP.Utils.headerize(name)],\n                result = [];\n\n            if (header) {\n              length = header.length;\n\n              for (idx = 0; idx < length; idx++) {\n                result.push(header[idx]);\n              }\n\n              return result;\n            } else {\n              length = this.extraHeaders.length;\n              regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n\n              for (idx = 0; idx < length; idx++) {\n                header = this.extraHeaders[idx];\n\n                if (regexp.test(header)) {\n                  result.push(header.substring(header.indexOf(':') + 1).trim());\n                }\n              }\n\n              return result;\n            }\n          },\n\n          /**\n           * Verify the existence of the given header.\n           * @param {String} name header name\n           * @returns {boolean} true if header with given name exists, false otherwise\n           */\n          hasHeader: function (name) {\n            var regexp,\n                idx,\n                length = this.extraHeaders.length;\n\n            if (this.headers[SIP.Utils.headerize(name)]) {\n              return true;\n            } else {\n              regexp = new RegExp('^\\\\s*' + name + '\\\\s*:', 'i');\n\n              for (idx = 0; idx < length; idx++) {\n                if (regexp.test(this.extraHeaders[idx])) {\n                  return true;\n                }\n              }\n            }\n\n            return false;\n          },\n          toString: function () {\n            var msg = '',\n                header,\n                length,\n                idx;\n            msg += this.method + ' ' + (this.ruri.toRaw ? this.ruri.toRaw() : this.ruri) + ' SIP/2.0\\r\\n';\n\n            for (header in this.headers) {\n              length = this.headers[header].length;\n\n              for (idx = 0; idx < length; idx++) {\n                msg += header + ': ' + this.headers[header][idx] + '\\r\\n';\n              }\n            }\n\n            length = this.extraHeaders.length;\n\n            for (idx = 0; idx < length; idx++) {\n              msg += this.extraHeaders[idx].trim() + '\\r\\n';\n            }\n\n            msg += getSupportedHeader(this);\n            msg += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n\n            if (this.body) {\n              if (typeof this.body === 'string') {\n                length = SIP.Utils.str_utf8_length(this.body);\n                msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                msg += this.body;\n              } else {\n                if (this.body.body && this.body.contentType) {\n                  length = SIP.Utils.str_utf8_length(this.body.body);\n                  msg += 'Content-Type: ' + this.body.contentType + '\\r\\n';\n                  msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                  msg += this.body.body;\n                } else {\n                  msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n                }\n              }\n            } else {\n              msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n            }\n\n            return msg;\n          }\n        };\n        /**\n         * @augments SIP\n         * @class Class for incoming SIP message.\n         */\n\n        IncomingMessage = function () {\n          this.data = null;\n          this.headers = null;\n          this.method = null;\n          this.via = null;\n          this.via_branch = null;\n          this.call_id = null;\n          this.cseq = null;\n          this.from = null;\n          this.from_tag = null;\n          this.to = null;\n          this.to_tag = null;\n          this.body = null;\n        };\n\n        IncomingMessage.prototype = {\n          /**\n          * Insert a header of the given name and value into the last position of the\n          * header array.\n          * @param {String} name header name\n          * @param {String} value header value\n          */\n          addHeader: function (name, value) {\n            var header = {\n              raw: value\n            };\n            name = SIP.Utils.headerize(name);\n\n            if (this.headers[name]) {\n              this.headers[name].push(header);\n            } else {\n              this.headers[name] = [header];\n            }\n          },\n\n          /**\n           * Get the value of the given header name at the given position.\n           * @param {String} name header name\n           * @returns {String|undefined} Returns the specified header, null if header doesn't exist.\n           */\n          getHeader: function (name) {\n            var header = this.headers[SIP.Utils.headerize(name)];\n\n            if (header) {\n              if (header[0]) {\n                return header[0].raw;\n              }\n            } else {\n              return;\n            }\n          },\n\n          /**\n           * Get the header/s of the given name.\n           * @param {String} name header name\n           * @returns {Array} Array with all the headers of the specified name.\n           */\n          getHeaders: function (name) {\n            var idx,\n                length,\n                header = this.headers[SIP.Utils.headerize(name)],\n                result = [];\n\n            if (!header) {\n              return [];\n            }\n\n            length = header.length;\n\n            for (idx = 0; idx < length; idx++) {\n              result.push(header[idx].raw);\n            }\n\n            return result;\n          },\n\n          /**\n           * Verify the existence of the given header.\n           * @param {String} name header name\n           * @returns {boolean} true if header with given name exists, false otherwise\n           */\n          hasHeader: function (name) {\n            return this.headers[SIP.Utils.headerize(name)] ? true : false;\n          },\n\n          /**\n          * Parse the given header on the given index.\n          * @param {String} name header name\n          * @param {Number} [idx=0] header index\n          * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n          */\n          parseHeader: function (name, idx) {\n            var header, value, parsed;\n            name = SIP.Utils.headerize(name);\n            idx = idx || 0;\n\n            if (!this.headers[name]) {\n              this.logger.log('header \"' + name + '\" not present');\n              return;\n            } else if (idx >= this.headers[name].length) {\n              this.logger.log('not so many \"' + name + '\" headers present');\n              return;\n            }\n\n            header = this.headers[name][idx];\n            value = header.raw;\n\n            if (header.parsed) {\n              return header.parsed;\n            } //substitute '-' by '_' for grammar rule matching.\n\n\n            parsed = SIP.Grammar.parse(value, name.replace(/-/g, '_'));\n\n            if (parsed === -1) {\n              this.headers[name].splice(idx, 1); //delete from headers\n\n              this.logger.warn('error parsing \"' + name + '\" header field with value \"' + value + '\"');\n              return;\n            } else {\n              header.parsed = parsed;\n              return parsed;\n            }\n          },\n\n          /**\n           * Message Header attribute selector. Alias of parseHeader.\n           * @param {String} name header name\n           * @param {Number} [idx=0] header index\n           * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n           *\n           * @example\n           * message.s('via',3).port\n           */\n          s: function (name, idx) {\n            return this.parseHeader(name, idx);\n          },\n\n          /**\n          * Replace the value of the given header by the value.\n          * @param {String} name header name\n          * @param {String} value header value\n          */\n          setHeader: function (name, value) {\n            var header = {\n              raw: value\n            };\n            this.headers[SIP.Utils.headerize(name)] = [header];\n          },\n          toString: function () {\n            return this.data;\n          }\n        };\n        /**\n         * @augments IncomingMessage\n         * @class Class for incoming SIP request.\n         */\n\n        IncomingRequest = function (ua) {\n          this.logger = ua.getLogger('sip.sipmessage');\n          this.ua = ua;\n          this.headers = {};\n          this.ruri = null;\n          this.transport = null;\n          this.server_transaction = null;\n        };\n\n        IncomingRequest.prototype = new IncomingMessage();\n        /**\n        * Stateful reply.\n        * @param {Number} code status code\n        * @param {String} reason reason phrase\n        * @param {Object} headers extra headers\n        * @param {String} body body\n        * @param {Function} [onSuccess] onSuccess callback\n        * @param {Function} [onFailure] onFailure callback\n        */\n\n        IncomingRequest.prototype.reply = function (code, reason, extraHeaders, body, onSuccess, onFailure) {\n          var rr,\n              vias,\n              length,\n              idx,\n              response,\n              to = this.getHeader('To'),\n              r = 0,\n              v = 0;\n          response = SIP.Utils.buildStatusLine(code, reason);\n          extraHeaders = (extraHeaders || []).slice();\n\n          if (this.method === SIP.C.INVITE && code > 100 && code <= 200) {\n            rr = this.getHeaders('record-route');\n            length = rr.length;\n\n            for (r; r < length; r++) {\n              response += 'Record-Route: ' + rr[r] + '\\r\\n';\n            }\n          }\n\n          vias = this.getHeaders('via');\n          length = vias.length;\n\n          for (v; v < length; v++) {\n            response += 'Via: ' + vias[v] + '\\r\\n';\n          }\n\n          if (!this.to_tag && code > 100) {\n            to += ';tag=' + SIP.Utils.newTag();\n          } else if (this.to_tag && !this.s('to').hasParam('tag')) {\n            to += ';tag=' + this.to_tag;\n          }\n\n          response += 'To: ' + to + '\\r\\n';\n          response += 'From: ' + this.getHeader('From') + '\\r\\n';\n          response += 'Call-ID: ' + this.call_id + '\\r\\n';\n          response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n          length = extraHeaders.length;\n\n          for (idx = 0; idx < length; idx++) {\n            response += extraHeaders[idx].trim() + '\\r\\n';\n          }\n\n          response += getSupportedHeader(this);\n          response += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n\n          if (body) {\n            if (typeof body === 'string') {\n              length = SIP.Utils.str_utf8_length(body);\n              response += 'Content-Type: application/sdp\\r\\n';\n              response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n              response += body;\n            } else {\n              if (body.body && body.contentType) {\n                length = SIP.Utils.str_utf8_length(body.body);\n                response += 'Content-Type: ' + body.contentType + '\\r\\n';\n                response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n                response += body.body;\n              } else {\n                response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n              }\n            }\n          } else {\n            response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n          }\n\n          this.server_transaction.receiveResponse(code, response).then(onSuccess, onFailure);\n          return response;\n        };\n        /**\n        * Stateless reply.\n        * @param {Number} code status code\n        * @param {String} reason reason phrase\n        */\n\n\n        IncomingRequest.prototype.reply_sl = function (code, reason) {\n          var to,\n              response,\n              v = 0,\n              vias = this.getHeaders('via'),\n              length = vias.length;\n          response = SIP.Utils.buildStatusLine(code, reason);\n\n          for (v; v < length; v++) {\n            response += 'Via: ' + vias[v] + '\\r\\n';\n          }\n\n          to = this.getHeader('To');\n\n          if (!this.to_tag && code > 100) {\n            to += ';tag=' + SIP.Utils.newTag();\n          } else if (this.to_tag && !this.s('to').hasParam('tag')) {\n            to += ';tag=' + this.to_tag;\n          }\n\n          response += 'To: ' + to + '\\r\\n';\n          response += 'From: ' + this.getHeader('From') + '\\r\\n';\n          response += 'Call-ID: ' + this.call_id + '\\r\\n';\n          response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n          response += 'User-Agent: ' + this.ua.configuration.userAgentString + '\\r\\n';\n          response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n          this.transport.send(response);\n        };\n        /**\n         * @augments IncomingMessage\n         * @class Class for incoming SIP response.\n         */\n\n\n        IncomingResponse = function (ua) {\n          this.logger = ua.getLogger('sip.sipmessage');\n          this.headers = {};\n          this.status_code = null;\n          this.reason_phrase = null;\n        };\n\n        IncomingResponse.prototype = new IncomingMessage();\n        SIP.OutgoingRequest = OutgoingRequest;\n        SIP.IncomingRequest = IncomingRequest;\n        SIP.IncomingResponse = IncomingResponse;\n      };\n    }, {}],\n    21: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview Incoming SIP Message Sanity Check\n       */\n\n      /**\n       * SIP message sanity check.\n       * @augments SIP\n       * @function\n       * @param {SIP.IncomingMessage} message\n       * @param {SIP.UA} ua\n       * @param {SIP.Transport} transport\n       * @returns {Boolean}\n       */\n\n      module.exports = function (SIP) {\n        var sanityCheck,\n            requests = [],\n            responses = [],\n            all = []; // Reply\n\n        function reply(status_code, message, transport) {\n          var to,\n              response = SIP.Utils.buildStatusLine(status_code),\n              vias = message.getHeaders('via'),\n              length = vias.length,\n              idx = 0;\n\n          for (idx; idx < length; idx++) {\n            response += \"Via: \" + vias[idx] + \"\\r\\n\";\n          }\n\n          to = message.getHeader('To');\n\n          if (!message.to_tag) {\n            to += ';tag=' + SIP.Utils.newTag();\n          }\n\n          response += \"To: \" + to + \"\\r\\n\";\n          response += \"From: \" + message.getHeader('From') + \"\\r\\n\";\n          response += \"Call-ID: \" + message.call_id + \"\\r\\n\";\n          response += \"CSeq: \" + message.cseq + \" \" + message.method + \"\\r\\n\";\n          response += \"\\r\\n\";\n          transport.send(response);\n        }\n        /*\n         * Sanity Check for incoming Messages\n         *\n         * Requests:\n         *  - _rfc3261_8_2_2_1_ Receive a Request with a non supported URI scheme\n         *  - _rfc3261_16_3_4_ Receive a Request already sent by us\n         *   Does not look at via sent-by but at sipjsId, which is inserted as\n         *   a prefix in all initial requests generated by the ua\n         *  - _rfc3261_18_3_request_ Body Content-Length\n         *  - _rfc3261_8_2_2_2_ Merged Requests\n         *\n         * Responses:\n         *  - _rfc3261_8_1_3_3_ Multiple Via headers\n         *  - _rfc3261_18_1_2_ sent-by mismatch\n         *  - _rfc3261_18_3_response_ Body Content-Length\n         *\n         * All:\n         *  - Minimum headers in a SIP message\n         */\n        // Sanity Check functions for requests\n\n\n        function rfc3261_8_2_2_1(message, ua, transport) {\n          if (!message.ruri || message.ruri.scheme !== 'sip') {\n            reply(416, message, transport);\n            return false;\n          }\n        }\n\n        function rfc3261_16_3_4(message, ua, transport) {\n          if (!message.to_tag) {\n            if (message.call_id.substr(0, 5) === ua.configuration.sipjsId) {\n              reply(482, message, transport);\n              return false;\n            }\n          }\n        }\n\n        function rfc3261_18_3_request(message, ua, transport) {\n          var len = SIP.Utils.str_utf8_length(message.body),\n              contentLength = message.getHeader('content-length');\n\n          if (len < contentLength) {\n            reply(400, message, transport);\n            return false;\n          }\n        }\n\n        function rfc3261_8_2_2_2(message, ua, transport) {\n          var tr,\n              idx,\n              fromTag = message.from_tag,\n              call_id = message.call_id,\n              cseq = message.cseq;\n\n          if (!message.to_tag) {\n            if (message.method === SIP.C.INVITE) {\n              tr = ua.transactions.ist[message.via_branch];\n\n              if (tr) {\n                return;\n              } else {\n                for (idx in ua.transactions.ist) {\n                  tr = ua.transactions.ist[idx];\n\n                  if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                    reply(482, message, transport);\n                    return false;\n                  }\n                }\n              }\n            } else {\n              tr = ua.transactions.nist[message.via_branch];\n\n              if (tr) {\n                return;\n              } else {\n                for (idx in ua.transactions.nist) {\n                  tr = ua.transactions.nist[idx];\n\n                  if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                    reply(482, message, transport);\n                    return false;\n                  }\n                }\n              }\n            }\n          }\n        } // Sanity Check functions for responses\n\n\n        function rfc3261_8_1_3_3(message, ua) {\n          if (message.getHeaders('via').length > 1) {\n            ua.getLogger('sip.sanitycheck').warn('More than one Via header field present in the response. Dropping the response');\n            return false;\n          }\n        }\n\n        function rfc3261_18_1_2(message, ua) {\n          var viaHost = ua.configuration.viaHost;\n\n          if (message.via.host !== viaHost || message.via.port !== undefined) {\n            ua.getLogger('sip.sanitycheck').warn('Via sent-by in the response does not match UA Via host value. Dropping the response');\n            return false;\n          }\n        }\n\n        function rfc3261_18_3_response(message, ua) {\n          var len = SIP.Utils.str_utf8_length(message.body),\n              contentLength = message.getHeader('content-length');\n\n          if (len < contentLength) {\n            ua.getLogger('sip.sanitycheck').warn('Message body length is lower than the value in Content-Length header field. Dropping the response');\n            return false;\n          }\n        } // Sanity Check functions for requests and responses\n\n\n        function minimumHeaders(message, ua) {\n          var mandatoryHeaders = ['from', 'to', 'call_id', 'cseq', 'via'],\n              idx = mandatoryHeaders.length;\n\n          while (idx--) {\n            if (!message.hasHeader(mandatoryHeaders[idx])) {\n              ua.getLogger('sip.sanitycheck').warn('Missing mandatory header field : ' + mandatoryHeaders[idx] + '. Dropping the response');\n              return false;\n            }\n          }\n        }\n\n        requests.push(rfc3261_8_2_2_1);\n        requests.push(rfc3261_16_3_4);\n        requests.push(rfc3261_18_3_request);\n        requests.push(rfc3261_8_2_2_2);\n        responses.push(rfc3261_8_1_3_3);\n        responses.push(rfc3261_18_1_2);\n        responses.push(rfc3261_18_3_response);\n        all.push(minimumHeaders);\n\n        sanityCheck = function (message, ua, transport) {\n          var len, pass;\n          len = all.length;\n\n          while (len--) {\n            pass = all[len](message, ua, transport);\n\n            if (pass === false) {\n              return false;\n            }\n          }\n\n          if (message instanceof SIP.IncomingRequest) {\n            len = requests.length;\n\n            while (len--) {\n              pass = requests[len](message, ua, transport);\n\n              if (pass === false) {\n                return false;\n              }\n            }\n          } else if (message instanceof SIP.IncomingResponse) {\n            len = responses.length;\n\n            while (len--) {\n              pass = responses[len](message, ua, transport);\n\n              if (pass === false) {\n                return false;\n              }\n            }\n          } //Everything is OK\n\n\n          return true;\n        };\n\n        SIP.sanityCheck = sanityCheck;\n      };\n    }, {}],\n    22: [function (require, module, exports) {\n      \"use strict\";\n\n      module.exports = function (SIP) {\n        var ServerContext;\n\n        ServerContext = function (ua, request) {\n          this.ua = ua;\n          this.logger = ua.getLogger('sip.servercontext');\n          this.request = request;\n\n          if (request.method === SIP.C.INVITE) {\n            this.transaction = new SIP.Transactions.InviteServerTransaction(request, ua);\n          } else {\n            this.transaction = new SIP.Transactions.NonInviteServerTransaction(request, ua);\n          }\n\n          if (request.body) {\n            this.body = request.body;\n          }\n\n          if (request.hasHeader('Content-Type')) {\n            this.contentType = request.getHeader('Content-Type');\n          }\n\n          this.method = request.method;\n          this.data = {};\n          this.localIdentity = request.to;\n          this.remoteIdentity = request.from;\n        };\n\n        ServerContext.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        ServerContext.prototype.progress = function (options) {\n          options = Object.create(options || Object.prototype);\n          options.statusCode || (options.statusCode = 180);\n          options.minCode = 100;\n          options.maxCode = 199;\n          options.events = ['progress'];\n          return this.reply(options);\n        };\n\n        ServerContext.prototype.accept = function (options) {\n          options = Object.create(options || Object.prototype);\n          options.statusCode || (options.statusCode = 200);\n          options.minCode = 200;\n          options.maxCode = 299;\n          options.events = ['accepted'];\n          return this.reply(options);\n        };\n\n        ServerContext.prototype.reject = function (options) {\n          options = Object.create(options || Object.prototype);\n          options.statusCode || (options.statusCode = 480);\n          options.minCode = 300;\n          options.maxCode = 699;\n          options.events = ['rejected', 'failed'];\n          return this.reply(options);\n        };\n\n        ServerContext.prototype.reply = function (options) {\n          options = options || {}; // This is okay, so long as we treat options as read-only in this method\n\n          var statusCode = options.statusCode || 100,\n              minCode = options.minCode || 100,\n              maxCode = options.maxCode || 699,\n              reasonPhrase = SIP.Utils.getReasonPhrase(statusCode, options.reasonPhrase),\n              extraHeaders = options.extraHeaders || [],\n              body = options.body,\n              events = options.events || [],\n              response;\n\n          if (statusCode < minCode || statusCode > maxCode) {\n            throw new TypeError('Invalid statusCode: ' + statusCode);\n          }\n\n          response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n          events.forEach(function (event) {\n            this.emit(event, response, reasonPhrase);\n          }, this);\n          return this;\n        };\n\n        ServerContext.prototype.onRequestTimeout = function () {\n          this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n        };\n\n        ServerContext.prototype.onTransportError = function () {\n          this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n        };\n\n        SIP.ServerContext = ServerContext;\n      };\n    }, {}],\n    23: [function (require, module, exports) {\n      \"use strict\";\n\n      module.exports = function (SIP, environment) {\n        var DTMF = require('./Session/DTMF')(SIP);\n\n        var Session,\n            InviteServerContext,\n            InviteClientContext,\n            C = {\n          //Session states\n          STATUS_NULL: 0,\n          STATUS_INVITE_SENT: 1,\n          STATUS_1XX_RECEIVED: 2,\n          STATUS_INVITE_RECEIVED: 3,\n          STATUS_WAITING_FOR_ANSWER: 4,\n          STATUS_ANSWERED: 5,\n          STATUS_WAITING_FOR_PRACK: 6,\n          STATUS_WAITING_FOR_ACK: 7,\n          STATUS_CANCELED: 8,\n          STATUS_TERMINATED: 9,\n          STATUS_ANSWERED_WAITING_FOR_PRACK: 10,\n          STATUS_EARLY_MEDIA: 11,\n          STATUS_CONFIRMED: 12\n        };\n        /*\n         * @param {function returning SIP.MediaHandler} [mediaHandlerFactory]\n         *        (See the documentation for the mediaHandlerFactory argument of the UA constructor.)\n         */\n\n        Session = function (mediaHandlerFactory) {\n          this.status = C.STATUS_NULL;\n          this.dialog = null;\n          this.earlyDialogs = {};\n          this.mediaHandlerFactory = mediaHandlerFactory || SIP.WebRTC.MediaHandler.defaultFactory; // this.mediaHandler gets set by ICC/ISC constructors\n\n          this.hasOffer = false;\n          this.hasAnswer = false; // Session Timers\n\n          this.timers = {\n            ackTimer: null,\n            expiresTimer: null,\n            invite2xxTimer: null,\n            userNoAnswerTimer: null,\n            rel1xxTimer: null,\n            prackTimer: null\n          }; // Session info\n\n          this.startTime = null;\n          this.endTime = null;\n          this.tones = null; // Mute/Hold state\n\n          this.local_hold = false;\n          this.remote_hold = false;\n          this.pending_actions = {\n            actions: [],\n            length: function () {\n              return this.actions.length;\n            },\n            isPending: function (name) {\n              var idx = 0,\n                  length = this.actions.length;\n\n              for (idx; idx < length; idx++) {\n                if (this.actions[idx].name === name) {\n                  return true;\n                }\n              }\n\n              return false;\n            },\n            shift: function () {\n              return this.actions.shift();\n            },\n            push: function (name) {\n              this.actions.push({\n                name: name\n              });\n            },\n            pop: function (name) {\n              var idx = 0,\n                  length = this.actions.length;\n\n              for (idx; idx < length; idx++) {\n                if (this.actions[idx].name === name) {\n                  this.actions.splice(idx, 1);\n                  length--;\n                  idx--;\n                }\n              }\n            }\n          };\n          this.early_sdp = null;\n          this.rel100 = SIP.C.supported.UNSUPPORTED;\n        };\n\n        Session.prototype = {\n          dtmf: function (tones, options) {\n            var tone,\n                dtmfs = [],\n                self = this;\n            options = options || {};\n\n            if (tones === undefined) {\n              throw new TypeError('Not enough arguments');\n            } // Check Session Status\n\n\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_WAITING_FOR_ACK) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            } // Check tones\n\n\n            if (typeof tones !== 'string' && typeof tones !== 'number' || !tones.toString().match(/^[0-9A-D#*,]+$/i)) {\n              throw new TypeError('Invalid tones: ' + tones);\n            }\n\n            tones = tones.toString().split('');\n\n            while (tones.length > 0) {\n              dtmfs.push(new DTMF(this, tones.shift(), options));\n            }\n\n            if (this.tones) {\n              // Tones are already queued, just add to the queue\n              this.tones = this.tones.concat(dtmfs);\n              return this;\n            }\n\n            var sendDTMF = function () {\n              var dtmf, timeout;\n\n              if (self.status === C.STATUS_TERMINATED || !self.tones || self.tones.length === 0) {\n                // Stop sending DTMF\n                self.tones = null;\n                return this;\n              }\n\n              dtmf = self.tones.shift();\n\n              if (tone === ',') {\n                timeout = 2000;\n              } else {\n                dtmf.on('failed', function () {\n                  self.tones = null;\n                });\n                dtmf.send(options);\n                timeout = dtmf.duration + dtmf.interToneGap;\n              } // Set timeout for the next tone\n\n\n              SIP.Timers.setTimeout(sendDTMF, timeout);\n            };\n\n            this.tones = dtmfs;\n            sendDTMF();\n            return this;\n          },\n          bye: function (options) {\n            options = Object.create(options || Object.prototype);\n            var statusCode = options.statusCode; // Check Session Status\n\n            if (this.status === C.STATUS_TERMINATED) {\n              this.logger.error('Error: Attempted to send BYE in a terminated session.');\n              return this;\n            }\n\n            this.logger.log('terminating Session');\n\n            if (statusCode && (statusCode < 200 || statusCode >= 700)) {\n              throw new TypeError('Invalid statusCode: ' + statusCode);\n            }\n\n            options.receiveResponse = function () {};\n\n            return this.sendRequest(SIP.C.BYE, options).terminated();\n          },\n          refer: function (target, options) {\n            options = options || {};\n            var extraHeaders = (options.extraHeaders || []).slice(),\n                withReplaces = target instanceof SIP.InviteServerContext || target instanceof SIP.InviteClientContext,\n                originalTarget = target;\n\n            if (target === undefined) {\n              throw new TypeError('Not enough arguments');\n            } // Check Session Status\n\n\n            if (this.status !== C.STATUS_CONFIRMED) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            } // transform `target` so that it can be a Refer-To header value\n\n\n            if (withReplaces) {\n              //Attended Transfer\n              // B.transfer(C)\n              target = '\"' + target.remoteIdentity.friendlyName + '\" ' + '<' + target.dialog.remote_target.toString() + '?Replaces=' + target.dialog.id.call_id + '%3Bto-tag%3D' + target.dialog.id.remote_tag + '%3Bfrom-tag%3D' + target.dialog.id.local_tag + '>';\n            } else {\n              //Blind Transfer\n              // normalizeTarget allows instances of SIP.URI to pass through unaltered,\n              // so try to make one ahead of time\n              try {\n                target = SIP.Grammar.parse(target, 'Refer_To').uri || target;\n              } catch (e) {\n                this.logger.debug(\".refer() cannot parse Refer_To from\", target);\n                this.logger.debug(\"...falling through to normalizeTarget()\");\n              } // Check target validity\n\n\n              target = this.ua.normalizeTarget(target);\n\n              if (!target) {\n                throw new TypeError('Invalid target: ' + originalTarget);\n              }\n            }\n\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n            extraHeaders.push('Refer-To: ' + target); // Send the request\n\n            this.sendRequest(SIP.C.REFER, {\n              extraHeaders: extraHeaders,\n              body: options.body,\n              receiveResponse: function (response) {\n                if (!/^2[0-9]{2}$/.test(response.status_code)) {\n                  return;\n                } // hang up only if we transferred to a SIP address\n\n\n                if (withReplaces || target.scheme && target.scheme.match(\"^sips?$\")) {\n                  this.terminate();\n                }\n              }.bind(this)\n            });\n            return this;\n          },\n          followRefer: function followRefer(callback) {\n            return function referListener(callback, request) {\n              // open non-SIP URIs if possible and keep session open\n              var referTo = request.parseHeader('refer-to');\n              var target = referTo.uri;\n\n              if (!target.scheme.match(\"^sips?$\")) {\n                var targetString = target.toString();\n\n                if (typeof environment.open === \"function\") {\n                  environment.open(targetString);\n                } else {\n                  this.logger.warn(\"referred to non-SIP URI but `open` isn't in the environment: \" + targetString);\n                }\n\n                return;\n              }\n\n              var extraHeaders = [];\n              /* Copy the Replaces query into a Replaces header */\n\n              /* TODO - make sure we don't copy a poorly formatted header? */\n\n              var replaces = target.getHeader('Replaces');\n\n              if (replaces !== undefined) {\n                extraHeaders.push('Replaces: ' + decodeURIComponent(replaces));\n              } // don't embed headers into Request-URI of INVITE\n\n\n              target.clearHeaders();\n              /*\n                Harmless race condition.  Both sides of REFER\n                may send a BYE, but in the end the dialogs are destroyed.\n              */\n\n              var getReferMedia = this.mediaHandler.getReferMedia;\n              var mediaHint = getReferMedia ? getReferMedia.call(this.mediaHandler) : this.mediaHint;\n              SIP.Hacks.Chrome.getsConfusedAboutGUM(this);\n              var referSession = this.ua.invite(target, {\n                media: mediaHint,\n                params: {\n                  to_displayName: referTo.friendlyName\n                },\n                extraHeaders: extraHeaders\n              });\n              callback.call(this, request, referSession);\n              this.terminate();\n            }.bind(this, callback);\n          },\n          sendRequest: function (method, options) {\n            options = options || {};\n            var self = this;\n            var request = new SIP.OutgoingRequest(method, this.dialog.remote_target, this.ua, {\n              cseq: options.cseq || (this.dialog.local_seqnum += 1),\n              call_id: this.dialog.id.call_id,\n              from_uri: this.dialog.local_uri,\n              from_tag: this.dialog.id.local_tag,\n              to_uri: this.dialog.remote_uri,\n              to_tag: this.dialog.id.remote_tag,\n              route_set: this.dialog.route_set,\n              statusCode: options.statusCode,\n              reasonPhrase: options.reasonPhrase\n            }, options.extraHeaders || [], options.body);\n            new SIP.RequestSender({\n              request: request,\n              onRequestTimeout: function () {\n                self.onRequestTimeout();\n              },\n              onTransportError: function () {\n                self.onTransportError();\n              },\n              receiveResponse: options.receiveResponse || function (response) {\n                self.receiveNonInviteResponse(response);\n              }\n            }, this.ua).send(); // Emit the request event\n\n            this.emit(method.toLowerCase(), request);\n            return this;\n          },\n          close: function () {\n            var idx;\n\n            if (this.status === C.STATUS_TERMINATED) {\n              return this;\n            }\n\n            this.logger.log('closing INVITE session ' + this.id); // 1st Step. Terminate media.\n\n            if (this.mediaHandler) {\n              this.mediaHandler.close();\n            } // 2nd Step. Terminate signaling.\n            // Clear session timers\n\n\n            for (idx in this.timers) {\n              SIP.Timers.clearTimeout(this.timers[idx]);\n            } // Terminate dialogs\n            // Terminate confirmed dialog\n\n\n            if (this.dialog) {\n              this.dialog.terminate();\n              delete this.dialog;\n            } // Terminate early dialogs\n\n\n            for (idx in this.earlyDialogs) {\n              this.earlyDialogs[idx].terminate();\n              delete this.earlyDialogs[idx];\n            }\n\n            this.status = C.STATUS_TERMINATED;\n            delete this.ua.sessions[this.id];\n            return this;\n          },\n          createDialog: function (message, type, early) {\n            var dialog,\n                early_dialog,\n                local_tag = message[type === 'UAS' ? 'to_tag' : 'from_tag'],\n                remote_tag = message[type === 'UAS' ? 'from_tag' : 'to_tag'],\n                id = message.call_id + local_tag + remote_tag;\n            early_dialog = this.earlyDialogs[id]; // Early Dialog\n\n            if (early) {\n              if (early_dialog) {\n                return true;\n              } else {\n                early_dialog = new SIP.Dialog(this, message, type, SIP.Dialog.C.STATUS_EARLY); // Dialog has been successfully created.\n\n                if (early_dialog.error) {\n                  this.logger.error(early_dialog.error);\n                  this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n                  return false;\n                } else {\n                  this.earlyDialogs[id] = early_dialog;\n                  return true;\n                }\n              }\n            } // Confirmed Dialog\n            else {\n              // In case the dialog is in _early_ state, update it\n              if (early_dialog) {\n                early_dialog.update(message, type);\n                this.dialog = early_dialog;\n                delete this.earlyDialogs[id];\n\n                for (var dia in this.earlyDialogs) {\n                  this.earlyDialogs[dia].terminate();\n                  delete this.earlyDialogs[dia];\n                }\n\n                return true;\n              } // Otherwise, create a _confirmed_ dialog\n\n\n              dialog = new SIP.Dialog(this, message, type);\n\n              if (dialog.error) {\n                this.logger.error(dialog.error);\n                this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n                return false;\n              } else {\n                this.to_tag = message.to_tag;\n                this.dialog = dialog;\n                return true;\n              }\n            }\n          },\n\n          /**\n          * Check if Session is ready for a re-INVITE\n          *\n          * @returns {Boolean}\n          */\n          isReadyToReinvite: function () {\n            return this.mediaHandler.isReady() && !this.dialog.uac_pending_reply && !this.dialog.uas_pending_reply;\n          },\n\n          /**\n           * Mute\n           */\n          mute: function (options) {\n            var ret = this.mediaHandler.mute(options);\n\n            if (ret) {\n              this.onmute(ret);\n            }\n          },\n\n          /**\n           * Unmute\n           */\n          unmute: function (options) {\n            var ret = this.mediaHandler.unmute(options);\n\n            if (ret) {\n              this.onunmute(ret);\n            }\n          },\n\n          /**\n           * Hold\n           */\n          hold: function (options) {\n            if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n\n            this.mediaHandler.hold(); // Check if RTCSession is ready to send a reINVITE\n\n            if (!this.isReadyToReinvite()) {\n              /* If there is a pending 'unhold' action, cancel it and don't queue this one\n               * Else, if there isn't any 'hold' action, add this one to the queue\n               * Else, if there is already a 'hold' action, skip\n               */\n              if (this.pending_actions.isPending('unhold')) {\n                this.pending_actions.pop('unhold');\n              } else if (!this.pending_actions.isPending('hold')) {\n                this.pending_actions.push('hold');\n              }\n\n              return;\n            } else if (this.local_hold === true) {\n              return;\n            }\n\n            this.onhold('local');\n            this.sendReinvite(options);\n          },\n\n          /**\n           * Unhold\n           */\n          unhold: function (options) {\n            if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n\n            this.mediaHandler.unhold();\n\n            if (!this.isReadyToReinvite()) {\n              /* If there is a pending 'hold' action, cancel it and don't queue this one\n               * Else, if there isn't any 'unhold' action, add this one to the queue\n               * Else, if there is already a 'unhold' action, skip\n               */\n              if (this.pending_actions.isPending('hold')) {\n                this.pending_actions.pop('hold');\n              } else if (!this.pending_actions.isPending('unhold')) {\n                this.pending_actions.push('unhold');\n              }\n\n              return;\n            } else if (this.local_hold === false) {\n              return;\n            }\n\n            this.onunhold('local');\n            this.sendReinvite(options);\n          },\n\n          /**\n           * isOnHold\n           */\n          isOnHold: function () {\n            return {\n              local: this.local_hold,\n              remote: this.remote_hold\n            };\n          },\n\n          /**\n           * In dialog INVITE Reception\n           * @private\n           */\n          receiveReinvite: function (request) {\n            var self = this;\n\n            if (!this.mediaHandler.hasDescription(request)) {\n              this.logger.warn('invalid Content-Type');\n              request.reply(415);\n              return;\n            }\n\n            this.mediaHandler.setDescription(request).then(this.mediaHandler.getDescription.bind(this.mediaHandler, this.mediaHint)).then(function (description) {\n              var extraHeaders = ['Contact: ' + self.contact];\n              request.reply(200, null, extraHeaders, description, function () {\n                self.status = C.STATUS_WAITING_FOR_ACK;\n                self.setInvite2xxTimer(request, description);\n                self.setACKTimer();\n\n                if (self.remote_hold && !self.mediaHandler.remote_hold) {\n                  self.onunhold('remote');\n                } else if (!self.remote_hold && self.mediaHandler.remote_hold) {\n                  self.onhold('remote');\n                }\n              });\n            }).catch(function onFailure(e) {\n              var statusCode;\n\n              if (e instanceof SIP.Exceptions.GetDescriptionError) {\n                statusCode = 500;\n              } else {\n                self.logger.error(e);\n                statusCode = 488;\n              }\n\n              request.reply(statusCode);\n            });\n          },\n          sendReinvite: function (options) {\n            options = options || {};\n            var self = this,\n                extraHeaders = (options.extraHeaders || []).slice(),\n                eventHandlers = options.eventHandlers || {},\n                succeeded;\n\n            if (eventHandlers.succeeded) {\n              succeeded = eventHandlers.succeeded;\n            }\n\n            this.reinviteSucceeded = function () {\n              SIP.Timers.clearTimeout(self.timers.ackTimer);\n              SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n              self.status = C.STATUS_CONFIRMED;\n              succeeded && succeeded.apply(this, arguments);\n            };\n\n            if (eventHandlers.failed) {\n              this.reinviteFailed = eventHandlers.failed;\n            } else {\n              this.reinviteFailed = function () {};\n            }\n\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n            this.receiveResponse = this.receiveReinviteResponse; //REVISIT\n\n            this.mediaHandler.getDescription(self.mediaHint).then(function (description) {\n              self.dialog.sendRequest(self, SIP.C.INVITE, {\n                extraHeaders: extraHeaders,\n                body: description\n              });\n            }, function () {\n              if (self.isReadyToReinvite()) {\n                self.onReadyToReinvite();\n              }\n\n              self.reinviteFailed();\n            });\n          },\n          receiveRequest: function (request) {\n            switch (request.method) {\n              case SIP.C.BYE:\n                request.reply(200);\n\n                if (this.status === C.STATUS_CONFIRMED) {\n                  this.emit('bye', request);\n                  this.terminated(request, SIP.C.causes.BYE);\n                }\n\n                break;\n\n              case SIP.C.INVITE:\n                if (this.status === C.STATUS_CONFIRMED) {\n                  this.logger.log('re-INVITE received');\n                  this.receiveReinvite(request);\n                }\n\n                break;\n\n              case SIP.C.INFO:\n                if (this.status === C.STATUS_CONFIRMED || this.status === C.STATUS_WAITING_FOR_ACK) {\n                  if (this.onInfo) {\n                    return this.onInfo(request);\n                  }\n\n                  var body,\n                      tone,\n                      duration,\n                      contentType = request.getHeader('content-type'),\n                      reg_tone = /^(Signal\\s*?=\\s*?)([0-9A-D#*]{1})(\\s)?.*/,\n                      reg_duration = /^(Duration\\s?=\\s?)([0-9]{1,4})(\\s)?.*/;\n\n                  if (contentType) {\n                    if (contentType.match(/^application\\/dtmf-relay/i)) {\n                      if (request.body) {\n                        body = request.body.split('\\r\\n', 2);\n\n                        if (body.length === 2) {\n                          if (reg_tone.test(body[0])) {\n                            tone = body[0].replace(reg_tone, \"$2\");\n                          }\n\n                          if (reg_duration.test(body[1])) {\n                            duration = parseInt(body[1].replace(reg_duration, \"$2\"), 10);\n                          }\n                        }\n                      }\n\n                      new DTMF(this, tone, {\n                        duration: duration\n                      }).init_incoming(request);\n                    } else {\n                      request.reply(415, null, [\"Accept: application/dtmf-relay\"]);\n                    }\n                  }\n                }\n\n                break;\n\n              case SIP.C.REFER:\n                if (this.status === C.STATUS_CONFIRMED) {\n                  this.logger.log('REFER received');\n                  var hasReferListener = this.listeners('refer').length,\n                      notifyBody;\n\n                  if (hasReferListener) {\n                    request.reply(202, 'Accepted');\n                    notifyBody = 'SIP/2.0 100 Trying';\n                    this.sendRequest(SIP.C.NOTIFY, {\n                      extraHeaders: ['Event: refer', 'Subscription-State: terminated', 'Content-Type: message/sipfrag'],\n                      body: notifyBody,\n                      receiveResponse: function () {}\n                    });\n                    this.emit('refer', request);\n                  } else {\n                    // RFC 3515.2.4.2: 'the UA MAY decline the request.'\n                    request.reply(603, 'Declined');\n                  }\n                }\n\n                break;\n\n              case SIP.C.NOTIFY:\n                request.reply(200, 'OK');\n                this.emit('notify', request);\n                break;\n            }\n          },\n\n          /**\n           * Reception of Response for in-dialog INVITE\n           * @private\n           */\n          receiveReinviteResponse: function (response) {\n            var self = this;\n\n            if (this.status === C.STATUS_TERMINATED) {\n              return;\n            }\n\n            switch (true) {\n              case /^1[0-9]{2}$/.test(response.status_code):\n                break;\n\n              case /^2[0-9]{2}$/.test(response.status_code):\n                this.status = C.STATUS_CONFIRMED;\n                this.sendRequest(SIP.C.ACK, {\n                  cseq: response.cseq\n                });\n\n                if (!this.mediaHandler.hasDescription(response)) {\n                  this.reinviteFailed();\n                  break;\n                } //REVISIT\n\n\n                this.mediaHandler.setDescription(response).then(function onSuccess() {\n                  self.reinviteSucceeded();\n                }, function onFailure() {\n                  self.reinviteFailed();\n                });\n                break;\n\n              default:\n                this.reinviteFailed();\n            }\n          },\n          acceptAndTerminate: function (response, status_code, reason_phrase) {\n            var extraHeaders = [];\n\n            if (status_code) {\n              extraHeaders.push('Reason: ' + SIP.Utils.getReasonHeaderValue(status_code, reason_phrase));\n            } // An error on dialog creation will fire 'failed' event\n\n\n            if (this.dialog || this.createDialog(response, 'UAC')) {\n              this.sendRequest(SIP.C.ACK, {\n                cseq: response.cseq\n              });\n              this.sendRequest(SIP.C.BYE, {\n                extraHeaders: extraHeaders\n              });\n            }\n\n            return this;\n          },\n\n          /**\n           * RFC3261 13.3.1.4\n           * Response retransmissions cannot be accomplished by transaction layer\n           *  since it is destroyed when receiving the first 2xx answer\n           */\n          setInvite2xxTimer: function (request, description) {\n            var self = this,\n                timeout = SIP.Timers.T1;\n            this.timers.invite2xxTimer = SIP.Timers.setTimeout(function invite2xxRetransmission() {\n              if (self.status !== C.STATUS_WAITING_FOR_ACK) {\n                return;\n              }\n\n              self.logger.log('no ACK received, attempting to retransmit OK');\n              var extraHeaders = ['Contact: ' + self.contact];\n              request.reply(200, null, extraHeaders, description);\n              timeout = Math.min(timeout * 2, SIP.Timers.T2);\n              self.timers.invite2xxTimer = SIP.Timers.setTimeout(invite2xxRetransmission, timeout);\n            }, timeout);\n          },\n\n          /**\n           * RFC3261 14.2\n           * If a UAS generates a 2xx response and never receives an ACK,\n           *  it SHOULD generate a BYE to terminate the dialog.\n           */\n          setACKTimer: function () {\n            var self = this;\n            this.timers.ackTimer = SIP.Timers.setTimeout(function () {\n              if (self.status === C.STATUS_WAITING_FOR_ACK) {\n                self.logger.log('no ACK received for an extended period of time, terminating the call');\n                SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n                self.sendRequest(SIP.C.BYE);\n                self.terminated(null, SIP.C.causes.NO_ACK);\n              }\n            }, SIP.Timers.TIMER_H);\n          },\n\n          /*\n           * @private\n           */\n          onReadyToReinvite: function () {\n            var action = this.pending_actions.shift();\n\n            if (!action || !this[action.name]) {\n              return;\n            }\n\n            this[action.name]();\n          },\n          onTransportError: function () {\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n              this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n            }\n          },\n          onRequestTimeout: function () {\n            if (this.status === C.STATUS_CONFIRMED) {\n              this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            } else if (this.status !== C.STATUS_TERMINATED) {\n              this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n              this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n          },\n          onDialogError: function (response) {\n            if (this.status === C.STATUS_CONFIRMED) {\n              this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n            } else if (this.status !== C.STATUS_TERMINATED) {\n              this.failed(response, SIP.C.causes.DIALOG_ERROR);\n              this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n            }\n          },\n\n          /**\n           * @private\n           */\n          onhold: function (originator) {\n            this[originator === 'local' ? 'local_hold' : 'remote_hold'] = true;\n            this.emit('hold', {\n              originator: originator\n            });\n          },\n\n          /**\n           * @private\n           */\n          onunhold: function (originator) {\n            this[originator === 'local' ? 'local_hold' : 'remote_hold'] = false;\n            this.emit('unhold', {\n              originator: originator\n            });\n          },\n\n          /*\n           * @private\n           */\n          onmute: function (options) {\n            this.emit('muted', {\n              audio: options.audio,\n              video: options.video\n            });\n          },\n\n          /*\n           * @private\n           */\n          onunmute: function (options) {\n            this.emit('unmuted', {\n              audio: options.audio,\n              video: options.video\n            });\n          },\n          failed: function (response, cause) {\n            if (this.status === C.STATUS_TERMINATED) {\n              return this;\n            }\n\n            this.emit('failed', response || null, cause || null);\n            return this;\n          },\n          rejected: function (response, cause) {\n            this.emit('rejected', response || null, cause || null);\n            return this;\n          },\n          canceled: function () {\n            this.emit('cancel');\n            return this;\n          },\n          accepted: function (response, cause) {\n            cause = SIP.Utils.getReasonPhrase(response && response.status_code, cause);\n            this.startTime = new Date();\n\n            if (this.replacee) {\n              this.replacee.emit('replaced', this);\n              this.replacee.terminate();\n            }\n\n            this.emit('accepted', response, cause);\n            return this;\n          },\n          terminated: function (message, cause) {\n            if (this.status === C.STATUS_TERMINATED) {\n              return this;\n            }\n\n            this.endTime = new Date();\n            this.close();\n            this.emit('terminated', message || null, cause || null);\n            return this;\n          },\n          connecting: function (request) {\n            this.emit('connecting', {\n              request: request\n            });\n            return this;\n          }\n        };\n\n        Session.desugar = function desugar(options) {\n          if (environment.HTMLMediaElement && options instanceof environment.HTMLMediaElement) {\n            options = {\n              media: {\n                constraints: {\n                  audio: true,\n                  video: options.tagName === 'VIDEO'\n                },\n                render: {\n                  remote: options\n                }\n              }\n            };\n          }\n\n          return options || {};\n        };\n\n        Session.C = C;\n        SIP.Session = Session;\n\n        InviteServerContext = function (ua, request) {\n          var expires,\n              self = this,\n              contentType = request.getHeader('Content-Type'),\n              contentDisp = request.parseHeader('Content-Disposition');\n          SIP.Utils.augment(this, SIP.ServerContext, [ua, request]);\n          SIP.Utils.augment(this, SIP.Session, [ua.configuration.mediaHandlerFactory]); //Initialize Media Session\n\n          this.mediaHandler = this.mediaHandlerFactory(this, {\n            RTCConstraints: {\n              \"optional\": [{\n                'DtlsSrtpKeyAgreement': 'true'\n              }]\n            }\n          }); // Check body and content type\n\n          if (!contentDisp && !this.mediaHandler.hasDescription(request) || contentDisp && contentDisp.type === 'render') {\n            this.renderbody = request.body;\n            this.rendertype = contentType;\n          } else if (!this.mediaHandler.hasDescription(request) && contentDisp && contentDisp.type === 'session') {\n            request.reply(415); //TODO: instead of 415, pass off to the media handler, who can then decide if we can use it\n\n            return;\n          }\n\n          this.status = C.STATUS_INVITE_RECEIVED;\n          this.from_tag = request.from_tag;\n          this.id = request.call_id + this.from_tag;\n          this.request = request;\n          this.contact = this.ua.contact.toString();\n\n          this.receiveNonInviteResponse = function () {}; // intentional no-op\n\n\n          this.logger = ua.getLogger('sip.inviteservercontext', this.id); //Save the session into the ua sessions collection.\n\n          this.ua.sessions[this.id] = this; //Get the Expires header value if exists\n\n          if (request.hasHeader('expires')) {\n            expires = request.getHeader('expires') * 1000;\n          } //Set 100rel if necessary\n\n\n          function set100rel(h, c) {\n            if (request.hasHeader(h) && request.getHeader(h).toLowerCase().indexOf('100rel') >= 0) {\n              self.rel100 = c;\n            }\n          }\n\n          set100rel('require', SIP.C.supported.REQUIRED);\n          set100rel('supported', SIP.C.supported.SUPPORTED);\n          /* Set the to_tag before\n           * replying a response code that will create a dialog.\n           */\n\n          request.to_tag = SIP.Utils.newTag(); // An error on dialog creation will fire 'failed' event\n\n          if (!this.createDialog(request, 'UAS', true)) {\n            request.reply(500, 'Missing Contact header field');\n            return;\n          }\n\n          if (this.mediaHandler && this.mediaHandler.getRemoteStreams) {\n            this.getRemoteStreams = this.mediaHandler.getRemoteStreams.bind(this.mediaHandler);\n            this.getLocalStreams = this.mediaHandler.getLocalStreams.bind(this.mediaHandler);\n          }\n\n          function fireNewSession() {\n            var options = {\n              extraHeaders: ['Contact: ' + self.contact]\n            };\n\n            if (self.rel100 !== SIP.C.supported.REQUIRED) {\n              self.progress(options);\n            }\n\n            self.status = C.STATUS_WAITING_FOR_ANSWER; // Set userNoAnswerTimer\n\n            self.timers.userNoAnswerTimer = SIP.Timers.setTimeout(function () {\n              request.reply(408);\n              self.failed(request, SIP.C.causes.NO_ANSWER);\n              self.terminated(request, SIP.C.causes.NO_ANSWER);\n            }, self.ua.configuration.noAnswerTimeout);\n            /* Set expiresTimer\n             * RFC3261 13.3.1\n             */\n\n            if (expires) {\n              self.timers.expiresTimer = SIP.Timers.setTimeout(function () {\n                if (self.status === C.STATUS_WAITING_FOR_ANSWER) {\n                  request.reply(487);\n                  self.failed(request, SIP.C.causes.EXPIRES);\n                  self.terminated(request, SIP.C.causes.EXPIRES);\n                }\n              }, expires);\n            }\n\n            self.emit('invite', request);\n          }\n\n          if (!this.mediaHandler.hasDescription(request) || this.renderbody) {\n            SIP.Timers.setTimeout(fireNewSession, 0);\n          } else {\n            this.hasOffer = true;\n            this.mediaHandler.setDescription(request).then(fireNewSession, function onFailure(e) {\n              self.logger.warn('invalid description');\n              self.logger.warn(e);\n              request.reply(488);\n            });\n          }\n        };\n\n        InviteServerContext.prototype = {\n          reject: function (options) {\n            // Check Session Status\n            if (this.status === C.STATUS_TERMINATED) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n\n            this.logger.log('rejecting RTCSession');\n            SIP.ServerContext.prototype.reject.call(this, options);\n            return this.terminated();\n          },\n          terminate: function (options) {\n            options = options || {};\n            var extraHeaders = (options.extraHeaders || []).slice(),\n                body = options.body,\n                dialog,\n                self = this;\n\n            if (this.status === C.STATUS_WAITING_FOR_ACK && this.request.server_transaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n              dialog = this.dialog;\n\n              this.receiveRequest = function (request) {\n                if (request.method === SIP.C.ACK) {\n                  this.sendRequest(SIP.C.BYE, {\n                    extraHeaders: extraHeaders,\n                    body: body\n                  });\n                  dialog.terminate();\n                }\n              };\n\n              this.request.server_transaction.on('stateChanged', function () {\n                if (this.state === SIP.Transactions.C.STATUS_TERMINATED && this.dialog) {\n                  this.request = new SIP.OutgoingRequest(SIP.C.BYE, this.dialog.remote_target, this.ua, {\n                    'cseq': this.dialog.local_seqnum += 1,\n                    'call_id': this.dialog.id.call_id,\n                    'from_uri': this.dialog.local_uri,\n                    'from_tag': this.dialog.id.local_tag,\n                    'to_uri': this.dialog.remote_uri,\n                    'to_tag': this.dialog.id.remote_tag,\n                    'route_set': this.dialog.route_set\n                  }, extraHeaders, body);\n                  new SIP.RequestSender({\n                    request: this.request,\n                    onRequestTimeout: function () {\n                      self.onRequestTimeout();\n                    },\n                    onTransportError: function () {\n                      self.onTransportError();\n                    },\n                    receiveResponse: function () {\n                      return;\n                    }\n                  }, this.ua).send();\n                  dialog.terminate();\n                }\n              });\n              this.emit('bye', this.request);\n              this.terminated(); // Restore the dialog into 'this' in order to be able to send the in-dialog BYE :-)\n\n              this.dialog = dialog; // Restore the dialog into 'ua' so the ACK can reach 'this' session\n\n              this.ua.dialogs[dialog.id.toString()] = dialog;\n            } else if (this.status === C.STATUS_CONFIRMED) {\n              this.bye(options);\n            } else {\n              this.reject(options);\n            }\n\n            return this;\n          },\n\n          /*\n           * @param {Object} [options.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n           */\n          progress: function (options) {\n            options = options || {};\n            var statusCode = options.statusCode || 180,\n                reasonPhrase = options.reasonPhrase,\n                extraHeaders = (options.extraHeaders || []).slice(),\n                iceServers,\n                stunServers = options.stunServers || null,\n                turnServers = options.turnServers || null,\n                body = options.body,\n                response;\n\n            if (statusCode < 100 || statusCode > 199) {\n              throw new TypeError('Invalid statusCode: ' + statusCode);\n            }\n\n            if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n              return this;\n            }\n\n            if (stunServers || turnServers) {\n              if (stunServers) {\n                iceServers = this.ua.getConfigurationCheck().optional['stunServers'](stunServers);\n\n                if (!iceServers) {\n                  throw new TypeError('Invalid stunServers: ' + stunServers);\n                } else {\n                  this.stunServers = iceServers;\n                }\n              }\n\n              if (turnServers) {\n                iceServers = this.ua.getConfigurationCheck().optional['turnServers'](turnServers);\n\n                if (!iceServers) {\n                  throw new TypeError('Invalid turnServers: ' + turnServers);\n                } else {\n                  this.turnServers = iceServers;\n                }\n              }\n\n              this.mediaHandler.updateIceServers({\n                stunServers: this.stunServers,\n                turnServers: this.turnServers\n              });\n            }\n\n            function do100rel() {\n              /* jshint validthis: true */\n              statusCode = options.statusCode || 183; // Set status and add extra headers\n\n              this.status = C.STATUS_WAITING_FOR_PRACK;\n              extraHeaders.push('Contact: ' + this.contact);\n              extraHeaders.push('Require: 100rel');\n              extraHeaders.push('RSeq: ' + Math.floor(Math.random() * 10000)); // Save media hint for later (referred sessions)\n\n              this.mediaHint = options.media; // Get the session description to add to preaccept with\n\n              this.mediaHandler.getDescription(options.media).then(function onSuccess(description) {\n                if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n                  return;\n                }\n\n                this.early_sdp = description.body;\n                this[this.hasOffer ? 'hasAnswer' : 'hasOffer'] = true; // Retransmit until we get a response or we time out (see prackTimer below)\n\n                var timeout = SIP.Timers.T1;\n                this.timers.rel1xxTimer = SIP.Timers.setTimeout(function rel1xxRetransmission() {\n                  this.request.reply(statusCode, null, extraHeaders, description);\n                  timeout *= 2;\n                  this.timers.rel1xxTimer = SIP.Timers.setTimeout(rel1xxRetransmission.bind(this), timeout);\n                }.bind(this), timeout); // Timeout and reject INVITE if no response\n\n                this.timers.prackTimer = SIP.Timers.setTimeout(function () {\n                  if (this.status !== C.STATUS_WAITING_FOR_PRACK) {\n                    return;\n                  }\n\n                  this.logger.log('no PRACK received, rejecting the call');\n                  SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                  this.request.reply(504);\n                  this.terminated(null, SIP.C.causes.NO_PRACK);\n                }.bind(this), SIP.Timers.T1 * 64); // Send the initial response\n\n                response = this.request.reply(statusCode, reasonPhrase, extraHeaders, description);\n                this.emit('progress', response, reasonPhrase);\n              }.bind(this), function onFailure() {\n                this.request.reply(480);\n                this.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                this.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n              }.bind(this));\n            } // end do100rel\n\n\n            function normalReply() {\n              /* jshint validthis:true */\n              response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n              this.emit('progress', response, reasonPhrase);\n            }\n\n            if (options.statusCode !== 100 && (this.rel100 === SIP.C.supported.REQUIRED || this.rel100 === SIP.C.supported.SUPPORTED && options.rel100 || this.rel100 === SIP.C.supported.SUPPORTED && this.ua.configuration.rel100 === SIP.C.supported.REQUIRED)) {\n              do100rel.apply(this);\n            } else {\n              normalReply.apply(this);\n            }\n\n            return this;\n          },\n\n          /*\n           * @param {Object} [options.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n           */\n          accept: function (options) {\n            options = Object.create(Session.desugar(options));\n            SIP.Utils.optionsOverride(options, 'media', 'mediaConstraints', true, this.logger, this.ua.configuration.media);\n            this.mediaHint = options.media;\n            this.onInfo = options.onInfo; // commented out now-unused hold-related variables for jshint. See below. JMF 2014-1-21\n\n            var //idx, length, hasAudio, hasVideo,\n            self = this,\n                request = this.request,\n                extraHeaders = (options.extraHeaders || []).slice(),\n                //mediaStream = options.mediaStream || null,\n            iceServers,\n                stunServers = options.stunServers || null,\n                turnServers = options.turnServers || null,\n                descriptionCreationSucceeded = function (description) {\n              var response,\n                  // run for reply success callback\n              replySucceeded = function () {\n                self.status = C.STATUS_WAITING_FOR_ACK;\n                self.setInvite2xxTimer(request, description);\n                self.setACKTimer();\n              },\n                  // run for reply failure callback\n              replyFailed = function () {\n                self.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                self.terminated(null, SIP.C.causes.CONNECTION_ERROR);\n              }; // Chrome might call onaddstream before accept() is called, which means\n              // mediaHandler.render() was called without a renderHint, so we need to\n              // re-render now that mediaHint.render has been set.\n              //\n              // Chrome seems to be in the right regarding this, see\n              // http://dev.w3.org/2011/webrtc/editor/webrtc.html#widl-RTCPeerConnection-onaddstream\n\n\n              self.mediaHandler.render();\n              extraHeaders.push('Contact: ' + self.contact);\n              extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n\n              if (!self.hasOffer) {\n                self.hasOffer = true;\n              } else {\n                self.hasAnswer = true;\n              }\n\n              response = request.reply(200, null, extraHeaders, description, replySucceeded, replyFailed);\n\n              if (self.status !== C.STATUS_TERMINATED) {\n                // Didn't fail\n                self.accepted(response, SIP.Utils.getReasonPhrase(200));\n              }\n            },\n                descriptionCreationFailed = function () {\n              if (self.status === C.STATUS_TERMINATED) {\n                return;\n              } // TODO - fail out on error\n\n\n              self.request.reply(480); //self.failed(response, SIP.C.causes.USER_DENIED_MEDIA_ACCESS);\n\n              self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n              self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n            }; // Check Session Status\n\n\n            if (this.status === C.STATUS_WAITING_FOR_PRACK) {\n              this.status = C.STATUS_ANSWERED_WAITING_FOR_PRACK;\n              return this;\n            } else if (this.status === C.STATUS_WAITING_FOR_ANSWER) {\n              this.status = C.STATUS_ANSWERED;\n            } else if (this.status !== C.STATUS_EARLY_MEDIA) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n\n            if ((stunServers || turnServers) && this.status !== C.STATUS_EARLY_MEDIA && this.status !== C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n              if (stunServers) {\n                iceServers = this.ua.getConfigurationCheck().optional['stunServers'](stunServers);\n\n                if (!iceServers) {\n                  throw new TypeError('Invalid stunServers: ' + stunServers);\n                } else {\n                  this.stunServers = iceServers;\n                }\n              }\n\n              if (turnServers) {\n                iceServers = this.ua.getConfigurationCheck().optional['turnServers'](turnServers);\n\n                if (!iceServers) {\n                  throw new TypeError('Invalid turnServers: ' + turnServers);\n                } else {\n                  this.turnServers = iceServers;\n                }\n              }\n\n              this.mediaHandler.updateIceServers({\n                stunServers: this.stunServers,\n                turnServers: this.turnServers\n              });\n            } // An error on dialog creation will fire 'failed' event\n\n\n            if (!this.createDialog(request, 'UAS')) {\n              request.reply(500, 'Missing Contact header field');\n              return this;\n            }\n\n            SIP.Timers.clearTimeout(this.timers.userNoAnswerTimer); // this hold-related code breaks FF accepting new calls - JMF 2014-1-21\n\n            /*\n            length = this.getRemoteStreams().length;\n                 for (idx = 0; idx < length; idx++) {\n              if (this.mediaHandler.getRemoteStreams()[idx].getVideoTracks().length > 0) {\n                hasVideo = true;\n              }\n              if (this.mediaHandler.getRemoteStreams()[idx].getAudioTracks().length > 0) {\n                hasAudio = true;\n              }\n            }\n                 if (!hasAudio && this.mediaConstraints.audio === true) {\n              this.mediaConstraints.audio = false;\n              if (mediaStream) {\n                length = mediaStream.getAudioTracks().length;\n                for (idx = 0; idx < length; idx++) {\n                  mediaStream.removeTrack(mediaStream.getAudioTracks()[idx]);\n                }\n              }\n            }\n                 if (!hasVideo && this.mediaConstraints.video === true) {\n              this.mediaConstraints.video = false;\n              if (mediaStream) {\n                length = mediaStream.getVideoTracks().length;\n                for (idx = 0; idx < length; idx++) {\n                  mediaStream.removeTrack(mediaStream.getVideoTracks()[idx]);\n                }\n              }\n            }\n            */\n\n            if (this.status === C.STATUS_EARLY_MEDIA) {\n              descriptionCreationSucceeded({});\n            } else {\n              this.mediaHandler.getDescription(self.mediaHint).then(descriptionCreationSucceeded, descriptionCreationFailed);\n            }\n\n            return this;\n          },\n          receiveRequest: function (request) {\n            // ISC RECEIVE REQUEST\n            function confirmSession() {\n              /* jshint validthis:true */\n              var contentType;\n              SIP.Timers.clearTimeout(this.timers.ackTimer);\n              SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n              this.status = C.STATUS_CONFIRMED;\n              this.unmute(); // TODO - this logic assumes Content-Disposition defaults\n\n              contentType = request.getHeader('Content-Type');\n\n              if (!this.mediaHandler.hasDescription(request)) {\n                this.renderbody = request.body;\n                this.rendertype = contentType;\n              }\n\n              this.emit('confirmed', request);\n            }\n\n            switch (request.method) {\n              case SIP.C.CANCEL:\n                /* RFC3261 15 States that a UAS may have accepted an invitation while a CANCEL\n                 * was in progress and that the UAC MAY continue with the session established by\n                 * any 2xx response, or MAY terminate with BYE. SIP does continue with the\n                 * established session. So the CANCEL is processed only if the session is not yet\n                 * established.\n                 */\n\n                /*\n                 * Terminate the whole session in case the user didn't accept (or yet to send the answer) nor reject the\n                 *request opening the session.\n                 */\n                if (this.status === C.STATUS_WAITING_FOR_ANSWER || this.status === C.STATUS_WAITING_FOR_PRACK || this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK || this.status === C.STATUS_EARLY_MEDIA || this.status === C.STATUS_ANSWERED) {\n                  this.status = C.STATUS_CANCELED;\n                  this.request.reply(487);\n                  this.canceled(request);\n                  this.rejected(request, SIP.C.causes.CANCELED);\n                  this.failed(request, SIP.C.causes.CANCELED);\n                  this.terminated(request, SIP.C.causes.CANCELED);\n                }\n\n                break;\n\n              case SIP.C.ACK:\n                if (this.status === C.STATUS_WAITING_FOR_ACK) {\n                  if (!this.hasAnswer) {\n                    if (this.mediaHandler.hasDescription(request)) {\n                      // ACK contains answer to an INVITE w/o SDP negotiation\n                      this.hasAnswer = true;\n                      this.mediaHandler.setDescription(request).then(confirmSession.bind(this), function onFailure(e) {\n                        this.logger.warn(e);\n                        this.terminate({\n                          statusCode: '488',\n                          reasonPhrase: 'Bad Media Description'\n                        });\n                        this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                        this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                      }.bind(this));\n                    } else if (this.early_sdp) {\n                      confirmSession.apply(this);\n                    } else {\n                      //TODO: Pass to mediahandler\n                      this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                      this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                    }\n                  } else {\n                    confirmSession.apply(this);\n                  }\n                }\n\n                break;\n\n              case SIP.C.PRACK:\n                if (this.status === C.STATUS_WAITING_FOR_PRACK || this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                  //localMedia = session.mediaHandler.localMedia;\n                  if (!this.hasAnswer) {\n                    if (this.mediaHandler.hasDescription(request)) {\n                      this.hasAnswer = true;\n                      this.mediaHandler.setDescription(request).then(function onSuccess() {\n                        SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                        SIP.Timers.clearTimeout(this.timers.prackTimer);\n                        request.reply(200);\n\n                        if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                          this.status = C.STATUS_EARLY_MEDIA;\n                          this.accept();\n                        }\n\n                        this.status = C.STATUS_EARLY_MEDIA; //REVISIT\n\n                        this.mute();\n                      }.bind(this), function onFailure(e) {\n                        //TODO: Send to media handler\n                        this.logger.warn(e);\n                        this.terminate({\n                          statusCode: '488',\n                          reasonPhrase: 'Bad Media Description'\n                        });\n                        this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                        this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                      }.bind(this));\n                    } else {\n                      this.terminate({\n                        statusCode: '488',\n                        reasonPhrase: 'Bad Media Description'\n                      });\n                      this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                      this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                    }\n                  } else {\n                    SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                    SIP.Timers.clearTimeout(this.timers.prackTimer);\n                    request.reply(200);\n\n                    if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                      this.status = C.STATUS_EARLY_MEDIA;\n                      this.accept();\n                    }\n\n                    this.status = C.STATUS_EARLY_MEDIA; //REVISIT\n\n                    this.mute();\n                  }\n                } else if (this.status === C.STATUS_EARLY_MEDIA) {\n                  request.reply(200);\n                }\n\n                break;\n\n              default:\n                Session.prototype.receiveRequest.apply(this, [request]);\n                break;\n            }\n          },\n          onTransportError: function () {\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n              this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n            }\n          },\n          onRequestTimeout: function () {\n            if (this.status === C.STATUS_CONFIRMED) {\n              this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            } else if (this.status !== C.STATUS_TERMINATED) {\n              this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n              this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n          }\n        };\n        SIP.InviteServerContext = InviteServerContext;\n\n        InviteClientContext = function (ua, target, options) {\n          options = Object.create(Session.desugar(options));\n          options.params = Object.create(options.params || Object.prototype);\n          var iceServers,\n              extraHeaders = (options.extraHeaders || []).slice(),\n              stunServers = options.stunServers || null,\n              turnServers = options.turnServers || null,\n              mediaHandlerFactory = options.mediaHandlerFactory || ua.configuration.mediaHandlerFactory,\n              isMediaSupported = mediaHandlerFactory.isSupported; // Check WebRTC support\n\n          if (isMediaSupported && !isMediaSupported()) {\n            throw new SIP.Exceptions.NotSupportedError('Media not supported');\n          }\n\n          this.RTCConstraints = options.RTCConstraints || {};\n          this.inviteWithoutSdp = options.inviteWithoutSdp || false; // Set anonymous property\n\n          this.anonymous = options.anonymous || false; // Custom data to be sent either in INVITE or in ACK\n\n          this.renderbody = options.renderbody || null;\n          this.rendertype = options.rendertype || 'text/plain';\n          options.params.from_tag = this.from_tag;\n          /* Do not add ;ob in initial forming dialog requests if the registration over\n           *  the current connection got a GRUU URI.\n           */\n\n          this.contact = ua.contact.toString({\n            anonymous: this.anonymous,\n            outbound: this.anonymous ? !ua.contact.temp_gruu : !ua.contact.pub_gruu\n          });\n\n          if (this.anonymous) {\n            options.params.from_displayName = 'Anonymous';\n            options.params.from_uri = 'sip:anonymous@anonymous.invalid';\n            extraHeaders.push('P-Preferred-Identity: ' + ua.configuration.uri.toString());\n            extraHeaders.push('Privacy: id');\n          }\n\n          extraHeaders.push('Contact: ' + this.contact);\n          extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n\n          if (this.inviteWithoutSdp && this.renderbody) {\n            extraHeaders.push('Content-Type: ' + this.rendertype);\n            extraHeaders.push('Content-Disposition: render;handling=optional');\n          }\n\n          if (ua.configuration.rel100 === SIP.C.supported.REQUIRED) {\n            extraHeaders.push('Require: 100rel');\n          }\n\n          if (ua.configuration.replaces === SIP.C.supported.REQUIRED) {\n            extraHeaders.push('Require: replaces');\n          }\n\n          options.extraHeaders = extraHeaders;\n          SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.INVITE, target, options]);\n          SIP.Utils.augment(this, SIP.Session, [mediaHandlerFactory]); // Check Session Status\n\n          if (this.status !== C.STATUS_NULL) {\n            throw new SIP.Exceptions.InvalidStateError(this.status);\n          } // Session parameter initialization\n\n\n          this.from_tag = SIP.Utils.newTag(); // OutgoingSession specific parameters\n\n          this.isCanceled = false;\n          this.received_100 = false;\n          this.method = SIP.C.INVITE;\n          this.receiveNonInviteResponse = this.receiveResponse;\n          this.receiveResponse = this.receiveInviteResponse;\n          this.logger = ua.getLogger('sip.inviteclientcontext');\n\n          if (stunServers) {\n            iceServers = this.ua.getConfigurationCheck().optional['stunServers'](stunServers);\n\n            if (!iceServers) {\n              throw new TypeError('Invalid stunServers: ' + stunServers);\n            } else {\n              this.stunServers = iceServers;\n            }\n          }\n\n          if (turnServers) {\n            iceServers = this.ua.getConfigurationCheck().optional['turnServers'](turnServers);\n\n            if (!iceServers) {\n              throw new TypeError('Invalid turnServers: ' + turnServers);\n            } else {\n              this.turnServers = iceServers;\n            }\n          }\n\n          ua.applicants[this] = this;\n          this.id = this.request.call_id + this.from_tag; //Initialize Media Session\n\n          this.mediaHandler = this.mediaHandlerFactory(this, {\n            RTCConstraints: this.RTCConstraints,\n            stunServers: this.stunServers,\n            turnServers: this.turnServers\n          });\n\n          if (this.mediaHandler && this.mediaHandler.getRemoteStreams) {\n            this.getRemoteStreams = this.mediaHandler.getRemoteStreams.bind(this.mediaHandler);\n            this.getLocalStreams = this.mediaHandler.getLocalStreams.bind(this.mediaHandler);\n          }\n\n          SIP.Utils.optionsOverride(options, 'media', 'mediaConstraints', true, this.logger, this.ua.configuration.media);\n          this.mediaHint = options.media;\n          this.onInfo = options.onInfo;\n        };\n\n        InviteClientContext.prototype = {\n          invite: function () {\n            var self = this; //Save the session into the ua sessions collection.\n            //Note: placing in constructor breaks call to request.cancel on close... User does not need this anyway\n\n            this.ua.sessions[this.id] = this; //Note: due to the way Firefox handles gUM calls, it is recommended to make the gUM call at the app level\n            // and hand sip.js a stream as the mediaHint\n\n            if (this.inviteWithoutSdp) {\n              //just send an invite with no sdp...\n              this.request.body = self.renderbody;\n              this.status = C.STATUS_INVITE_SENT;\n              this.send();\n            } else {\n              this.mediaHandler.getDescription(self.mediaHint).then(function onSuccess(description) {\n                if (self.isCanceled || self.status === C.STATUS_TERMINATED) {\n                  return;\n                }\n\n                self.hasOffer = true;\n                self.request.body = description;\n                self.status = C.STATUS_INVITE_SENT;\n                self.send();\n              }, function onFailure() {\n                if (self.status === C.STATUS_TERMINATED) {\n                  return;\n                } // TODO...fail out\n                //self.failed(null, SIP.C.causes.USER_DENIED_MEDIA_ACCESS);\n                //self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n\n\n                self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n              });\n            }\n\n            return this;\n          },\n          receiveInviteResponse: function (response) {\n            var cause,\n                //localMedia,\n            session = this,\n                id = response.call_id + response.from_tag + response.to_tag,\n                extraHeaders = [],\n                options = {};\n\n            if (this.status === C.STATUS_TERMINATED || response.method !== SIP.C.INVITE) {\n              return;\n            }\n\n            if (this.dialog && response.status_code >= 200 && response.status_code <= 299) {\n              if (id !== this.dialog.id.toString()) {\n                if (!this.createDialog(response, 'UAC', true)) {\n                  return;\n                }\n\n                this.earlyDialogs[id].sendRequest(this, SIP.C.ACK, {\n                  body: SIP.Utils.generateFakeSDP(response.body)\n                });\n                this.earlyDialogs[id].sendRequest(this, SIP.C.BYE);\n                /* NOTE: This fails because the forking proxy does not recognize that an unanswerable\n                 * leg (due to peerConnection limitations) has been answered first. If your forking\n                 * proxy does not hang up all unanswered branches on the first branch answered, remove this.\n                 */\n\n                if (this.status !== C.STATUS_CONFIRMED) {\n                  this.failed(response, SIP.C.causes.WEBRTC_ERROR);\n                  this.terminated(response, SIP.C.causes.WEBRTC_ERROR);\n                }\n\n                return;\n              } else if (this.status === C.STATUS_CONFIRMED) {\n                this.sendRequest(SIP.C.ACK, {\n                  cseq: response.cseq\n                });\n                return;\n              } else if (!this.hasAnswer) {\n                // invite w/o sdp is waiting for callback\n                //an invite with sdp must go on, and hasAnswer is true\n                return;\n              }\n            }\n\n            if (this.dialog && response.status_code < 200) {\n              /*\n                Early media has been set up with at least one other different branch,\n                but a final 2xx response hasn't been received\n              */\n              if (this.dialog.pracked.indexOf(response.getHeader('rseq')) !== -1 || this.dialog.pracked[this.dialog.pracked.length - 1] >= response.getHeader('rseq') && this.dialog.pracked.length > 0) {\n                return;\n              }\n\n              if (!this.earlyDialogs[id] && !this.createDialog(response, 'UAC', true)) {\n                return;\n              }\n\n              if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 || this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length - 1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0) {\n                return;\n              }\n\n              extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n              this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n              this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                extraHeaders: extraHeaders,\n                body: SIP.Utils.generateFakeSDP(response.body)\n              });\n              return;\n            } // Proceed to cancellation if the user requested.\n\n\n            if (this.isCanceled) {\n              if (response.status_code >= 100 && response.status_code < 200) {\n                this.request.cancel(this.cancelReason, extraHeaders);\n                this.canceled(null);\n              } else if (response.status_code >= 200 && response.status_code < 299) {\n                this.acceptAndTerminate(response);\n                this.emit('bye', this.request);\n              } else if (response.status_code >= 300) {\n                cause = SIP.C.REASON_PHRASE[response.status_code] || SIP.C.causes.CANCELED;\n                this.rejected(response, cause);\n                this.failed(response, cause);\n                this.terminated(response, cause);\n              }\n\n              return;\n            }\n\n            switch (true) {\n              case /^100$/.test(response.status_code):\n                this.received_100 = true;\n                this.emit('progress', response);\n                break;\n\n              case /^1[0-9]{2}$/.test(response.status_code):\n                // Do nothing with 1xx responses without To tag.\n                if (!response.to_tag) {\n                  this.logger.warn('1xx response received without to tag');\n                  break;\n                } // Create Early Dialog if 1XX comes with contact\n\n\n                if (response.hasHeader('contact')) {\n                  // An error on dialog creation will fire 'failed' event\n                  if (!this.createDialog(response, 'UAC', true)) {\n                    break;\n                  }\n                }\n\n                this.status = C.STATUS_1XX_RECEIVED;\n\n                if (response.hasHeader('require') && response.getHeader('require').indexOf('100rel') !== -1) {\n                  // Do nothing if this.dialog is already confirmed\n                  if (this.dialog || !this.earlyDialogs[id]) {\n                    break;\n                  }\n\n                  if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 || this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length - 1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0) {\n                    return;\n                  }\n\n                  if (!this.mediaHandler.hasDescription(response)) {\n                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                    this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n                    this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                      extraHeaders: extraHeaders\n                    });\n                    this.emit('progress', response);\n                  } else if (this.hasOffer) {\n                    if (!this.createDialog(response, 'UAC')) {\n                      break;\n                    }\n\n                    this.hasAnswer = true;\n                    this.dialog.pracked.push(response.getHeader('rseq'));\n                    this.mediaHandler.setDescription(response).then(function onSuccess() {\n                      extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                      session.sendRequest(SIP.C.PRACK, {\n                        extraHeaders: extraHeaders,\n                        receiveResponse: function () {}\n                      });\n                      session.status = C.STATUS_EARLY_MEDIA;\n                      session.mute();\n                      session.emit('progress', response);\n                      /*\n                      if (session.status === C.STATUS_EARLY_MEDIA) {\n                        localMedia = session.mediaHandler.localMedia;\n                        if (localMedia.getAudioTracks().length > 0) {\n                          localMedia.getAudioTracks()[0].enabled = false;\n                        }\n                        if (localMedia.getVideoTracks().length > 0) {\n                          localMedia.getVideoTracks()[0].enabled = false;\n                        }\n                      }*/\n                    }, function onFailure(e) {\n                      session.logger.warn(e);\n                      session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                      session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                    });\n                  } else {\n                    var earlyDialog = this.earlyDialogs[id];\n                    var earlyMedia = earlyDialog.mediaHandler;\n                    earlyDialog.pracked.push(response.getHeader('rseq'));\n                    earlyMedia.setDescription(response).then(earlyMedia.getDescription.bind(earlyMedia, session.mediaHint)).then(function onSuccess(description) {\n                      extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                      earlyDialog.sendRequest(session, SIP.C.PRACK, {\n                        extraHeaders: extraHeaders,\n                        body: description\n                      });\n                      session.status = C.STATUS_EARLY_MEDIA;\n                      session.emit('progress', response);\n                    }).catch(function onFailure(e) {\n                      if (e instanceof SIP.Exceptions.GetDescriptionError) {\n                        earlyDialog.pracked.push(response.getHeader('rseq'));\n\n                        if (session.status === C.STATUS_TERMINATED) {\n                          return;\n                        } // TODO - fail out on error\n                        // session.failed(gum error);\n\n\n                        session.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                        session.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                      } else {\n                        earlyDialog.pracked.splice(earlyDialog.pracked.indexOf(response.getHeader('rseq')), 1); // Could not set remote description\n\n                        session.logger.warn('invalid description');\n                        session.logger.warn(e);\n                      }\n                    });\n                  }\n                } else {\n                  this.emit('progress', response);\n                }\n\n                break;\n\n              case /^2[0-9]{2}$/.test(response.status_code):\n                var cseq = this.request.cseq + ' ' + this.request.method;\n\n                if (cseq !== response.getHeader('cseq')) {\n                  break;\n                }\n\n                if (this.status === C.STATUS_EARLY_MEDIA && this.dialog) {\n                  this.status = C.STATUS_CONFIRMED;\n                  this.unmute();\n                  /*localMedia = this.mediaHandler.localMedia;\n                  if (localMedia.getAudioTracks().length > 0) {\n                    localMedia.getAudioTracks()[0].enabled = true;\n                  }\n                  if (localMedia.getVideoTracks().length > 0) {\n                    localMedia.getVideoTracks()[0].enabled = true;\n                  }*/\n\n                  options = {};\n\n                  if (this.renderbody) {\n                    extraHeaders.push('Content-Type: ' + this.rendertype);\n                    options.extraHeaders = extraHeaders;\n                    options.body = this.renderbody;\n                  }\n\n                  options.cseq = response.cseq;\n                  this.sendRequest(SIP.C.ACK, options);\n                  this.accepted(response);\n                  break;\n                } // Do nothing if this.dialog is already confirmed\n\n\n                if (this.dialog) {\n                  break;\n                } // This is an invite without sdp\n\n\n                if (!this.hasOffer) {\n                  if (this.earlyDialogs[id] && this.earlyDialogs[id].mediaHandler.localMedia) {\n                    //REVISIT\n                    this.hasOffer = true;\n                    this.hasAnswer = true;\n                    this.mediaHandler = this.earlyDialogs[id].mediaHandler;\n\n                    if (!this.createDialog(response, 'UAC')) {\n                      break;\n                    }\n\n                    this.status = C.STATUS_CONFIRMED;\n                    this.sendRequest(SIP.C.ACK, {\n                      cseq: response.cseq\n                    });\n                    this.unmute();\n                    /*\n                    localMedia = session.mediaHandler.localMedia;\n                    if (localMedia.getAudioTracks().length > 0) {\n                      localMedia.getAudioTracks()[0].enabled = true;\n                    }\n                    if (localMedia.getVideoTracks().length > 0) {\n                      localMedia.getVideoTracks()[0].enabled = true;\n                    }*/\n\n                    this.accepted(response);\n                  } else {\n                    if (!this.mediaHandler.hasDescription(response)) {\n                      this.acceptAndTerminate(response, 400, 'Missing session description');\n                      this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                      break;\n                    }\n\n                    if (!this.createDialog(response, 'UAC')) {\n                      break;\n                    }\n\n                    this.hasOffer = true;\n                    this.mediaHandler.setDescription(response).then(this.mediaHandler.getDescription.bind(this.mediaHandler, this.mediaHint)).then(function onSuccess(description) {\n                      //var localMedia;\n                      if (session.isCanceled || session.status === C.STATUS_TERMINATED) {\n                        return;\n                      }\n\n                      session.status = C.STATUS_CONFIRMED;\n                      session.hasAnswer = true;\n                      session.unmute();\n                      /*localMedia = session.mediaHandler.localMedia;\n                      if (localMedia.getAudioTracks().length > 0) {\n                        localMedia.getAudioTracks()[0].enabled = true;\n                      }\n                      if (localMedia.getVideoTracks().length > 0) {\n                        localMedia.getVideoTracks()[0].enabled = true;\n                      }*/\n\n                      session.sendRequest(SIP.C.ACK, {\n                        body: description,\n                        cseq: response.cseq\n                      });\n                      session.accepted(response);\n                    }).catch(function onFailure(e) {\n                      if (e instanceof SIP.Exceptions.GetDescriptionError) {\n                        // TODO do something here\n                        session.logger.warn(\"there was a problem\");\n                      } else {\n                        session.logger.warn('invalid description');\n                        session.logger.warn(e);\n                        session.acceptAndTerminate(response, 488, 'Invalid session description');\n                        session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                      }\n                    });\n                  }\n                } else if (this.hasAnswer) {\n                  if (this.renderbody) {\n                    extraHeaders.push('Content-Type: ' + session.rendertype);\n                    options.extraHeaders = extraHeaders;\n                    options.body = this.renderbody;\n                  }\n\n                  this.sendRequest(SIP.C.ACK, options);\n                } else {\n                  if (!this.mediaHandler.hasDescription(response)) {\n                    this.acceptAndTerminate(response, 400, 'Missing session description');\n                    this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                    break;\n                  }\n\n                  if (!this.createDialog(response, 'UAC')) {\n                    break;\n                  }\n\n                  this.hasAnswer = true;\n                  this.mediaHandler.setDescription(response).then(function onSuccess() {\n                    var options = {}; //,localMedia;\n\n                    session.status = C.STATUS_CONFIRMED;\n                    session.unmute();\n                    /*localMedia = session.mediaHandler.localMedia;\n                    if (localMedia.getAudioTracks().length > 0) {\n                      localMedia.getAudioTracks()[0].enabled = true;\n                    }\n                    if (localMedia.getVideoTracks().length > 0) {\n                      localMedia.getVideoTracks()[0].enabled = true;\n                    }*/\n\n                    if (session.renderbody) {\n                      extraHeaders.push('Content-Type: ' + session.rendertype);\n                      options.extraHeaders = extraHeaders;\n                      options.body = session.renderbody;\n                    }\n\n                    options.cseq = response.cseq;\n                    session.sendRequest(SIP.C.ACK, options);\n                    session.accepted(response);\n                  }, function onFailure(e) {\n                    session.logger.warn(e);\n                    session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                    session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                  });\n                }\n\n                break;\n\n              default:\n                cause = SIP.Utils.sipErrorCause(response.status_code);\n                this.rejected(response, cause);\n                this.failed(response, cause);\n                this.terminated(response, cause);\n            }\n          },\n          cancel: function (options) {\n            options = options || {};\n            options.extraHeaders = (options.extraHeaders || []).slice(); // Check Session Status\n\n            if (this.status === C.STATUS_TERMINATED || this.status === C.STATUS_CONFIRMED) {\n              throw new SIP.Exceptions.InvalidStateError(this.status);\n            }\n\n            this.logger.log('canceling RTCSession');\n            var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase); // Check Session Status\n\n            if (this.status === C.STATUS_NULL || this.status === C.STATUS_INVITE_SENT && !this.received_100) {\n              this.isCanceled = true;\n              this.cancelReason = cancel_reason;\n            } else if (this.status === C.STATUS_INVITE_SENT || this.status === C.STATUS_1XX_RECEIVED || this.status === C.STATUS_EARLY_MEDIA) {\n              this.request.cancel(cancel_reason, options.extraHeaders);\n            }\n\n            return this.canceled();\n          },\n          terminate: function (options) {\n            if (this.status === C.STATUS_TERMINATED) {\n              return this;\n            }\n\n            if (this.status === C.STATUS_WAITING_FOR_ACK || this.status === C.STATUS_CONFIRMED) {\n              this.bye(options);\n            } else {\n              this.cancel(options);\n            }\n\n            return this;\n          },\n          receiveRequest: function (request) {\n            // ICC RECEIVE REQUEST\n            // Reject CANCELs\n            if (request.method === SIP.C.CANCEL) {// TODO; make this a switch when it gets added\n            }\n\n            if (request.method === SIP.C.ACK && this.status === C.STATUS_WAITING_FOR_ACK) {\n              SIP.Timers.clearTimeout(this.timers.ackTimer);\n              SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n              this.status = C.STATUS_CONFIRMED;\n              this.unmute();\n              this.accepted();\n            }\n\n            return Session.prototype.receiveRequest.apply(this, [request]);\n          },\n          onTransportError: function () {\n            if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n              this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n            }\n          },\n          onRequestTimeout: function () {\n            if (this.status === C.STATUS_CONFIRMED) {\n              this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            } else if (this.status !== C.STATUS_TERMINATED) {\n              this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n              this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n            }\n          }\n        };\n        SIP.InviteClientContext = InviteClientContext;\n      };\n    }, {\n      \"./Session/DTMF\": 24\n    }],\n    24: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview DTMF\n       */\n\n      /**\n       * @class DTMF\n       * @param {SIP.Session} session\n       */\n\n      module.exports = function (SIP) {\n        var DTMF,\n            C = {\n          MIN_DURATION: 70,\n          MAX_DURATION: 6000,\n          DEFAULT_DURATION: 100,\n          MIN_INTER_TONE_GAP: 50,\n          DEFAULT_INTER_TONE_GAP: 500\n        };\n\n        DTMF = function (session, tone, options) {\n          var duration, interToneGap;\n\n          if (tone === undefined) {\n            throw new TypeError('Not enough arguments');\n          }\n\n          this.logger = session.ua.getLogger('sip.invitecontext.dtmf', session.id);\n          this.owner = session;\n          this.direction = null;\n          options = options || {};\n          duration = options.duration || null;\n          interToneGap = options.interToneGap || null; // Check tone type\n\n          if (typeof tone === 'string') {\n            tone = tone.toUpperCase();\n          } else if (typeof tone === 'number') {\n            tone = tone.toString();\n          } else {\n            throw new TypeError('Invalid tone: ' + tone);\n          } // Check tone value\n\n\n          if (!tone.match(/^[0-9A-D#*]$/)) {\n            throw new TypeError('Invalid tone: ' + tone);\n          } else {\n            this.tone = tone;\n          } // Check duration\n\n\n          if (duration && !SIP.Utils.isDecimal(duration)) {\n            throw new TypeError('Invalid tone duration: ' + duration);\n          } else if (!duration) {\n            duration = DTMF.C.DEFAULT_DURATION;\n          } else if (duration < DTMF.C.MIN_DURATION) {\n            this.logger.warn('\"duration\" value is lower than the minimum allowed, setting it to ' + DTMF.C.MIN_DURATION + ' milliseconds');\n            duration = DTMF.C.MIN_DURATION;\n          } else if (duration > DTMF.C.MAX_DURATION) {\n            this.logger.warn('\"duration\" value is greater than the maximum allowed, setting it to ' + DTMF.C.MAX_DURATION + ' milliseconds');\n            duration = DTMF.C.MAX_DURATION;\n          } else {\n            duration = Math.abs(duration);\n          }\n\n          this.duration = duration; // Check interToneGap\n\n          if (interToneGap && !SIP.Utils.isDecimal(interToneGap)) {\n            throw new TypeError('Invalid interToneGap: ' + interToneGap);\n          } else if (!interToneGap) {\n            interToneGap = DTMF.C.DEFAULT_INTER_TONE_GAP;\n          } else if (interToneGap < DTMF.C.MIN_INTER_TONE_GAP) {\n            this.logger.warn('\"interToneGap\" value is lower than the minimum allowed, setting it to ' + DTMF.C.MIN_INTER_TONE_GAP + ' milliseconds');\n            interToneGap = DTMF.C.MIN_INTER_TONE_GAP;\n          } else {\n            interToneGap = Math.abs(interToneGap);\n          }\n\n          this.interToneGap = interToneGap;\n        };\n\n        DTMF.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        DTMF.prototype.send = function (options) {\n          var extraHeaders,\n              body = {};\n          this.direction = 'outgoing'; // Check RTCSession Status\n\n          if (this.owner.status !== SIP.Session.C.STATUS_CONFIRMED && this.owner.status !== SIP.Session.C.STATUS_WAITING_FOR_ACK) {\n            throw new SIP.Exceptions.InvalidStateError(this.owner.status);\n          } // Get DTMF options\n\n\n          options = options || {};\n          extraHeaders = options.extraHeaders ? options.extraHeaders.slice() : [];\n          body.contentType = 'application/dtmf-relay';\n          body.body = \"Signal= \" + this.tone + \"\\r\\n\";\n          body.body += \"Duration= \" + this.duration;\n          this.request = this.owner.dialog.sendRequest(this, SIP.C.INFO, {\n            extraHeaders: extraHeaders,\n            body: body\n          });\n          this.owner.emit('dtmf', this.request, this);\n        };\n        /**\n         * @private\n         */\n\n\n        DTMF.prototype.receiveResponse = function (response) {\n          var cause;\n\n          switch (true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n              // Ignore provisional responses.\n              break;\n\n            case /^2[0-9]{2}$/.test(response.status_code):\n              this.emit('succeeded', {\n                originator: 'remote',\n                response: response\n              });\n              break;\n\n            default:\n              cause = SIP.Utils.sipErrorCause(response.status_code);\n              this.emit('failed', response, cause);\n              break;\n          }\n        };\n        /**\n         * @private\n         */\n\n\n        DTMF.prototype.onRequestTimeout = function () {\n          this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n          this.owner.onRequestTimeout();\n        };\n        /**\n         * @private\n         */\n\n\n        DTMF.prototype.onTransportError = function () {\n          this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n          this.owner.onTransportError();\n        };\n        /**\n         * @private\n         */\n\n\n        DTMF.prototype.onDialogError = function (response) {\n          this.emit('failed', response, SIP.C.causes.DIALOG_ERROR);\n          this.owner.onDialogError(response);\n        };\n        /**\n         * @private\n         */\n\n\n        DTMF.prototype.init_incoming = function (request) {\n          this.direction = 'incoming';\n          this.request = request;\n          request.reply(200);\n\n          if (!this.tone || !this.duration) {\n            this.logger.warn('invalid INFO DTMF received, discarded');\n          } else {\n            this.owner.emit('dtmf', request, this);\n          }\n        };\n\n        DTMF.C = C;\n        return DTMF;\n      };\n    }, {}],\n    25: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Subscriber (SIP-Specific Event Notifications RFC6665)\n       */\n\n      /**\n       * @augments SIP\n       * @class Class creating a SIP Subscription.\n       */\n\n      module.exports = function (SIP) {\n        SIP.Subscription = function (ua, target, event, options) {\n          options = Object.create(options || Object.prototype);\n          this.extraHeaders = options.extraHeaders = (options.extraHeaders || []).slice();\n          this.id = null;\n          this.state = 'init';\n\n          if (!event) {\n            throw new TypeError('Event necessary to create a subscription.');\n          } else {\n            //TODO: check for valid events here probably make a list in SIP.C; or leave it up to app to check?\n            //The check may need to/should probably occur on the other side,\n            this.event = event;\n          }\n\n          if (typeof options.expires !== 'number') {\n            ua.logger.warn('expires must be a number. Using default of 3600.');\n            this.expires = 3600;\n          } else {\n            this.expires = options.expires;\n          }\n\n          options.extraHeaders.push('Event: ' + this.event);\n          options.extraHeaders.push('Expires: ' + this.expires);\n\n          if (options.body) {\n            this.body = options.body;\n          }\n\n          this.contact = ua.contact.toString();\n          options.extraHeaders.push('Contact: ' + this.contact);\n          options.extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n          SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.SUBSCRIBE, target, options]);\n          this.logger = ua.getLogger('sip.subscription');\n          this.dialog = null;\n          this.timers = {\n            N: null,\n            sub_duration: null\n          };\n          this.errorCodes = [404, 405, 410, 416, 480, 481, 482, 483, 484, 485, 489, 501, 604];\n        };\n\n        SIP.Subscription.prototype = {\n          subscribe: function () {\n            var sub = this; //these states point to an existing subscription, no subscribe is necessary\n\n            if (this.state === 'active') {\n              this.refresh();\n              return this;\n            } else if (this.state === 'notify_wait') {\n              return this;\n            }\n\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n            this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event] = this;\n            this.send();\n            this.state = 'notify_wait';\n            return this;\n          },\n          refresh: function () {\n            if (this.state === 'terminated' || this.state === 'pending' || this.state === 'notify_wait') {\n              return;\n            }\n\n            this.dialog.sendRequest(this, SIP.C.SUBSCRIBE, {\n              extraHeaders: this.extraHeaders,\n              body: this.body\n            });\n          },\n          receiveResponse: function (response) {\n            var expires,\n                sub = this,\n                cause = SIP.Utils.getReasonPhrase(response.status_code);\n\n            if (this.state === 'notify_wait' && response.status_code >= 300 || this.state !== 'notify_wait' && this.errorCodes.indexOf(response.status_code) !== -1) {\n              this.failed(response, null);\n            } else if (/^2[0-9]{2}$/.test(response.status_code)) {\n              this.emit('accepted', response, cause); //As we don't support RFC 5839 or other extensions where the NOTIFY is optional, timer N will not be cleared\n              //SIP.Timers.clearTimeout(this.timers.N);\n\n              expires = response.getHeader('Expires');\n\n              if (expires && expires <= this.expires) {\n                // Preserve new expires value for subsequent requests\n                this.expires = expires;\n                this.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), expires * 900);\n              } else {\n                if (!expires) {\n                  this.logger.warn('Expires header missing in a 200-class response to SUBSCRIBE');\n                  this.failed(response, SIP.C.EXPIRES_HEADER_MISSING);\n                } else {\n                  this.logger.warn('Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request');\n                  this.failed(response, SIP.C.INVALID_EXPIRES_HEADER);\n                }\n              }\n            } else if (response.statusCode > 300) {\n              this.emit('failed', response, cause);\n              this.emit('rejected', response, cause);\n            }\n          },\n          unsubscribe: function () {\n            var extraHeaders = [],\n                sub = this;\n            this.state = 'terminated';\n            extraHeaders.push('Event: ' + this.event);\n            extraHeaders.push('Expires: 0');\n            extraHeaders.push('Contact: ' + this.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString()); //makes sure expires isn't set, and other typical resubscribe behavior\n\n            this.receiveResponse = function () {};\n\n            this.dialog.sendRequest(this, this.method, {\n              extraHeaders: extraHeaders,\n              body: this.body\n            });\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n          },\n\n          /**\n          * @private\n          */\n          timer_fire: function () {\n            if (this.state === 'terminated') {\n              this.terminateDialog();\n              SIP.Timers.clearTimeout(this.timers.N);\n              SIP.Timers.clearTimeout(this.timers.sub_duration);\n              delete this.ua.subscriptions[this.id];\n            } else if (this.state === 'notify_wait' || this.state === 'pending') {\n              this.close();\n            } else {\n              this.refresh();\n            }\n          },\n\n          /**\n          * @private\n          */\n          close: function () {\n            if (this.state === 'notify_wait') {\n              this.state = 'terminated';\n              SIP.Timers.clearTimeout(this.timers.N);\n              SIP.Timers.clearTimeout(this.timers.sub_duration);\n\n              this.receiveResponse = function () {};\n\n              delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n            } else if (this.state !== 'terminated') {\n              this.unsubscribe();\n            }\n          },\n\n          /**\n          * @private\n          */\n          createConfirmedDialog: function (message, type) {\n            var dialog;\n            this.terminateDialog();\n            dialog = new SIP.Dialog(this, message, type);\n            dialog.invite_seqnum = this.request.cseq;\n            dialog.local_seqnum = this.request.cseq;\n\n            if (!dialog.error) {\n              this.dialog = dialog;\n              return true;\n            } // Dialog not created due to an error\n            else {\n              return false;\n            }\n          },\n\n          /**\n          * @private\n          */\n          terminateDialog: function () {\n            if (this.dialog) {\n              delete this.ua.subscriptions[this.id];\n              this.dialog.terminate();\n              delete this.dialog;\n            }\n          },\n\n          /**\n          * @private\n          */\n          receiveRequest: function (request) {\n            var sub_state,\n                sub = this;\n\n            function setExpiresTimeout() {\n              if (sub_state.expires) {\n                SIP.Timers.clearTimeout(sub.timers.sub_duration);\n                sub_state.expires = Math.min(sub.expires, Math.max(sub_state.expires, 0));\n                sub.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), sub_state.expires * 900);\n              }\n            }\n\n            if (!this.matchEvent(request)) {\n              //checks event and subscription_state headers\n              request.reply(489);\n              return;\n            }\n\n            if (!this.dialog) {\n              if (this.createConfirmedDialog(request, 'UAS')) {\n                this.id = this.dialog.id.toString();\n                delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n                this.ua.subscriptions[this.id] = this; // UPDATE ROUTE SET TO BE BACKWARDS COMPATIBLE?\n              }\n            }\n\n            sub_state = request.parseHeader('Subscription-State');\n            request.reply(200, SIP.C.REASON_200);\n            SIP.Timers.clearTimeout(this.timers.N);\n            this.emit('notify', {\n              request: request\n            }); // if we've set state to terminated, no further processing should take place\n            // and we are only interested in cleaning up after the appropriate NOTIFY\n\n            if (this.state === 'terminated') {\n              if (sub_state.state === 'terminated') {\n                this.terminateDialog();\n                SIP.Timers.clearTimeout(this.timers.N);\n                SIP.Timers.clearTimeout(this.timers.sub_duration);\n                delete this.ua.subscriptions[this.id];\n              }\n\n              return;\n            }\n\n            switch (sub_state.state) {\n              case 'active':\n                this.state = 'active';\n                setExpiresTimeout();\n                break;\n\n              case 'pending':\n                if (this.state === 'notify_wait') {\n                  setExpiresTimeout();\n                }\n\n                this.state = 'pending';\n                break;\n\n              case 'terminated':\n                SIP.Timers.clearTimeout(this.timers.sub_duration);\n\n                if (sub_state.reason) {\n                  this.logger.log('terminating subscription with reason ' + sub_state.reason);\n\n                  switch (sub_state.reason) {\n                    case 'deactivated':\n                    case 'timeout':\n                      this.subscribe();\n                      return;\n\n                    case 'probation':\n                    case 'giveup':\n                      if (sub_state.params && sub_state.params['retry-after']) {\n                        this.timers.sub_duration = SIP.Timers.setTimeout(sub.subscribe.bind(sub), sub_state.params['retry-after']);\n                      } else {\n                        this.subscribe();\n                      }\n\n                      return;\n\n                    case 'rejected':\n                    case 'noresource':\n                    case 'invariant':\n                      break;\n                  }\n                }\n\n                this.close();\n                break;\n            }\n          },\n          failed: function (response, cause) {\n            this.close();\n            this.emit('failed', response, cause);\n            this.emit('rejected', response, cause);\n            return this;\n          },\n          onDialogError: function (response) {\n            this.failed(response, SIP.C.causes.DIALOG_ERROR);\n          },\n\n          /**\n          * @private\n          */\n          matchEvent: function (request) {\n            var event; // Check mandatory header Event\n\n            if (!request.hasHeader('Event')) {\n              this.logger.warn('missing Event header');\n              return false;\n            } // Check mandatory header Subscription-State\n\n\n            if (!request.hasHeader('Subscription-State')) {\n              this.logger.warn('missing Subscription-State header');\n              return false;\n            } // Check whether the event in NOTIFY matches the event in SUBSCRIBE\n\n\n            event = request.parseHeader('event').event;\n\n            if (this.event !== event) {\n              this.logger.warn('event match failed');\n              request.reply(481, 'Event Match Failed');\n              return false;\n            } else {\n              return true;\n            }\n          }\n        };\n      };\n    }, {}],\n    26: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP TIMERS\n       */\n\n      /**\n       * @augments SIP\n       */\n\n      var T1 = 500,\n          T2 = 4000,\n          T4 = 5000;\n\n      module.exports = function (timers) {\n        var Timers = {\n          T1: T1,\n          T2: T2,\n          T4: T4,\n          TIMER_B: 64 * T1,\n          TIMER_D: 0 * T1,\n          TIMER_F: 64 * T1,\n          TIMER_H: 64 * T1,\n          TIMER_I: 0 * T1,\n          TIMER_J: 0 * T1,\n          TIMER_K: 0 * T4,\n          TIMER_L: 64 * T1,\n          TIMER_M: 64 * T1,\n          TIMER_N: 64 * T1,\n          PROVISIONAL_RESPONSE_INTERVAL: 60000 // See RFC 3261 Section 13.3.1.1\n\n        };\n        ['setTimeout', 'clearTimeout', 'setInterval', 'clearInterval'].forEach(function (name) {\n          // can't just use timers[name].bind(timers) since it bypasses jasmine's\n          // clock-mocking\n          Timers[name] = function () {\n            return timers[name].apply(timers, arguments);\n          };\n        });\n        return Timers;\n      };\n    }, {}],\n    27: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP Transactions\n       */\n\n      /**\n       * SIP Transactions module.\n       * @augments SIP\n       */\n\n      module.exports = function (SIP) {\n        var C = {\n          // Transaction states\n          STATUS_TRYING: 1,\n          STATUS_PROCEEDING: 2,\n          STATUS_CALLING: 3,\n          STATUS_ACCEPTED: 4,\n          STATUS_COMPLETED: 5,\n          STATUS_TERMINATED: 6,\n          STATUS_CONFIRMED: 7,\n          // Transaction types\n          NON_INVITE_CLIENT: 'nict',\n          NON_INVITE_SERVER: 'nist',\n          INVITE_CLIENT: 'ict',\n          INVITE_SERVER: 'ist'\n        };\n\n        function buildViaHeader(request_sender, transport, id) {\n          var via;\n          via = 'SIP/2.0/' + (request_sender.ua.configuration.hackViaTcp ? 'TCP' : transport.server.scheme);\n          via += ' ' + request_sender.ua.configuration.viaHost + ';branch=' + id;\n\n          if (request_sender.ua.configuration.forceRport) {\n            via += ';rport';\n          }\n\n          return via;\n        }\n        /**\n        * @augments SIP.Transactions\n        * @class Non Invite Client Transaction\n        * @param {SIP.RequestSender} request_sender\n        * @param {SIP.OutgoingRequest} request\n        * @param {SIP.Transport} transport\n        */\n\n\n        var NonInviteClientTransaction = function (request_sender, request, transport) {\n          var via;\n          this.type = C.NON_INVITE_CLIENT;\n          this.transport = transport;\n          this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n          this.request_sender = request_sender;\n          this.request = request;\n          this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n          via = buildViaHeader(request_sender, transport, this.id);\n          this.request.setHeader('via', via);\n          this.request_sender.ua.newTransaction(this);\n        };\n\n        NonInviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        NonInviteClientTransaction.prototype.stateChanged = function (state) {\n          this.state = state;\n          this.emit('stateChanged');\n        };\n\n        NonInviteClientTransaction.prototype.send = function () {\n          var tr = this;\n          this.stateChanged(C.STATUS_TRYING);\n          this.F = SIP.Timers.setTimeout(tr.timer_F.bind(tr), SIP.Timers.TIMER_F);\n\n          if (!this.transport.send(this.request)) {\n            this.onTransportError();\n          }\n        };\n\n        NonInviteClientTransaction.prototype.onTransportError = function () {\n          this.logger.log('transport error occurred, deleting non-INVITE client transaction ' + this.id);\n          SIP.Timers.clearTimeout(this.F);\n          SIP.Timers.clearTimeout(this.K);\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.request_sender.ua.destroyTransaction(this);\n          this.request_sender.onTransportError();\n        };\n\n        NonInviteClientTransaction.prototype.timer_F = function () {\n          this.logger.log('Timer F expired for non-INVITE client transaction ' + this.id);\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.request_sender.ua.destroyTransaction(this);\n          this.request_sender.onRequestTimeout();\n        };\n\n        NonInviteClientTransaction.prototype.timer_K = function () {\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.request_sender.ua.destroyTransaction(this);\n        };\n\n        NonInviteClientTransaction.prototype.receiveResponse = function (response) {\n          var tr = this,\n              status_code = response.status_code;\n\n          if (status_code < 200) {\n            switch (this.state) {\n              case C.STATUS_TRYING:\n              case C.STATUS_PROCEEDING:\n                this.stateChanged(C.STATUS_PROCEEDING);\n                this.request_sender.receiveResponse(response);\n                break;\n            }\n          } else {\n            switch (this.state) {\n              case C.STATUS_TRYING:\n              case C.STATUS_PROCEEDING:\n                this.stateChanged(C.STATUS_COMPLETED);\n                SIP.Timers.clearTimeout(this.F);\n\n                if (status_code === 408) {\n                  this.request_sender.onRequestTimeout();\n                } else {\n                  this.request_sender.receiveResponse(response);\n                }\n\n                this.K = SIP.Timers.setTimeout(tr.timer_K.bind(tr), SIP.Timers.TIMER_K);\n                break;\n\n              case C.STATUS_COMPLETED:\n                break;\n            }\n          }\n        };\n        /**\n        * @augments SIP.Transactions\n        * @class Invite Client Transaction\n        * @param {SIP.RequestSender} request_sender\n        * @param {SIP.OutgoingRequest} request\n        * @param {SIP.Transport} transport\n        */\n\n\n        var InviteClientTransaction = function (request_sender, request, transport) {\n          var via,\n              tr = this;\n          this.type = C.INVITE_CLIENT;\n          this.transport = transport;\n          this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n          this.request_sender = request_sender;\n          this.request = request;\n          this.logger = request_sender.ua.getLogger('sip.transaction.ict', this.id);\n          via = buildViaHeader(request_sender, transport, this.id);\n          this.request.setHeader('via', via);\n          this.request_sender.ua.newTransaction(this); // Add the cancel property to the request.\n          //Will be called from the request instance, not the transaction itself.\n\n          this.request.cancel = function (reason, extraHeaders) {\n            extraHeaders = (extraHeaders || []).slice();\n            var length = extraHeaders.length;\n            var extraHeadersString = null;\n\n            for (var idx = 0; idx < length; idx++) {\n              extraHeadersString = (extraHeadersString || '') + extraHeaders[idx].trim() + '\\r\\n';\n            }\n\n            tr.cancel_request(tr, reason, extraHeadersString);\n          };\n        };\n\n        InviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        InviteClientTransaction.prototype.stateChanged = function (state) {\n          this.state = state;\n          this.emit('stateChanged');\n        };\n\n        InviteClientTransaction.prototype.send = function () {\n          var tr = this;\n          this.stateChanged(C.STATUS_CALLING);\n          this.B = SIP.Timers.setTimeout(tr.timer_B.bind(tr), SIP.Timers.TIMER_B);\n\n          if (!this.transport.send(this.request)) {\n            this.onTransportError();\n          }\n        };\n\n        InviteClientTransaction.prototype.onTransportError = function () {\n          this.logger.log('transport error occurred, deleting INVITE client transaction ' + this.id);\n          SIP.Timers.clearTimeout(this.B);\n          SIP.Timers.clearTimeout(this.D);\n          SIP.Timers.clearTimeout(this.M);\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.request_sender.ua.destroyTransaction(this);\n\n          if (this.state !== C.STATUS_ACCEPTED) {\n            this.request_sender.onTransportError();\n          }\n        }; // RFC 6026 7.2\n\n\n        InviteClientTransaction.prototype.timer_M = function () {\n          this.logger.log('Timer M expired for INVITE client transaction ' + this.id);\n\n          if (this.state === C.STATUS_ACCEPTED) {\n            SIP.Timers.clearTimeout(this.B);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.request_sender.ua.destroyTransaction(this);\n          }\n        }; // RFC 3261 17.1.1\n\n\n        InviteClientTransaction.prototype.timer_B = function () {\n          this.logger.log('Timer B expired for INVITE client transaction ' + this.id);\n\n          if (this.state === C.STATUS_CALLING) {\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.request_sender.ua.destroyTransaction(this);\n            this.request_sender.onRequestTimeout();\n          }\n        };\n\n        InviteClientTransaction.prototype.timer_D = function () {\n          this.logger.log('Timer D expired for INVITE client transaction ' + this.id);\n          SIP.Timers.clearTimeout(this.B);\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.request_sender.ua.destroyTransaction(this);\n        };\n\n        InviteClientTransaction.prototype.sendACK = function (response) {\n          var tr = this;\n          this.ack = 'ACK ' + this.request.ruri + ' SIP/2.0\\r\\n';\n          this.ack += 'Via: ' + this.request.headers['Via'].toString() + '\\r\\n';\n\n          if (this.request.headers['Route']) {\n            this.ack += 'Route: ' + this.request.headers['Route'].toString() + '\\r\\n';\n          }\n\n          this.ack += 'To: ' + response.getHeader('to') + '\\r\\n';\n          this.ack += 'From: ' + this.request.headers['From'].toString() + '\\r\\n';\n          this.ack += 'Call-ID: ' + this.request.headers['Call-ID'].toString() + '\\r\\n';\n          this.ack += 'Content-Length: 0\\r\\n';\n          this.ack += 'CSeq: ' + this.request.headers['CSeq'].toString().split(' ')[0];\n          this.ack += ' ACK\\r\\n\\r\\n';\n          this.D = SIP.Timers.setTimeout(tr.timer_D.bind(tr), SIP.Timers.TIMER_D);\n          this.transport.send(this.ack);\n        };\n\n        InviteClientTransaction.prototype.cancel_request = function (tr, reason, extraHeaders) {\n          var request = tr.request;\n          this.cancel = SIP.C.CANCEL + ' ' + request.ruri + ' SIP/2.0\\r\\n';\n          this.cancel += 'Via: ' + request.headers['Via'].toString() + '\\r\\n';\n\n          if (this.request.headers['Route']) {\n            this.cancel += 'Route: ' + request.headers['Route'].toString() + '\\r\\n';\n          }\n\n          this.cancel += 'To: ' + request.headers['To'].toString() + '\\r\\n';\n          this.cancel += 'From: ' + request.headers['From'].toString() + '\\r\\n';\n          this.cancel += 'Call-ID: ' + request.headers['Call-ID'].toString() + '\\r\\n';\n          this.cancel += 'CSeq: ' + request.headers['CSeq'].toString().split(' ')[0] + ' CANCEL\\r\\n';\n\n          if (reason) {\n            this.cancel += 'Reason: ' + reason + '\\r\\n';\n          }\n\n          if (extraHeaders) {\n            this.cancel += extraHeaders;\n          }\n\n          this.cancel += 'Content-Length: 0\\r\\n\\r\\n'; // Send only if a provisional response (>100) has been received.\n\n          if (this.state === C.STATUS_PROCEEDING) {\n            this.transport.send(this.cancel);\n          }\n        };\n\n        InviteClientTransaction.prototype.receiveResponse = function (response) {\n          var tr = this,\n              status_code = response.status_code;\n\n          if (status_code >= 100 && status_code <= 199) {\n            switch (this.state) {\n              case C.STATUS_CALLING:\n                this.stateChanged(C.STATUS_PROCEEDING);\n                this.request_sender.receiveResponse(response);\n\n                if (this.cancel) {\n                  this.transport.send(this.cancel);\n                }\n\n                break;\n\n              case C.STATUS_PROCEEDING:\n                this.request_sender.receiveResponse(response);\n                break;\n            }\n          } else if (status_code >= 200 && status_code <= 299) {\n            switch (this.state) {\n              case C.STATUS_CALLING:\n              case C.STATUS_PROCEEDING:\n                this.stateChanged(C.STATUS_ACCEPTED);\n                this.M = SIP.Timers.setTimeout(tr.timer_M.bind(tr), SIP.Timers.TIMER_M);\n                this.request_sender.receiveResponse(response);\n                break;\n\n              case C.STATUS_ACCEPTED:\n                this.request_sender.receiveResponse(response);\n                break;\n            }\n          } else if (status_code >= 300 && status_code <= 699) {\n            switch (this.state) {\n              case C.STATUS_CALLING:\n              case C.STATUS_PROCEEDING:\n                this.stateChanged(C.STATUS_COMPLETED);\n                this.sendACK(response);\n                this.request_sender.receiveResponse(response);\n                break;\n\n              case C.STATUS_COMPLETED:\n                this.sendACK(response);\n                break;\n            }\n          }\n        };\n        /**\n         * @augments SIP.Transactions\n         * @class ACK Client Transaction\n         * @param {SIP.RequestSender} request_sender\n         * @param {SIP.OutgoingRequest} request\n         * @param {SIP.Transport} transport\n         */\n\n\n        var AckClientTransaction = function (request_sender, request, transport) {\n          var via;\n          this.transport = transport;\n          this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n          this.request_sender = request_sender;\n          this.request = request;\n          this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n          via = buildViaHeader(request_sender, transport, this.id);\n          this.request.setHeader('via', via);\n        };\n\n        AckClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        AckClientTransaction.prototype.send = function () {\n          if (!this.transport.send(this.request)) {\n            this.onTransportError();\n          }\n        };\n\n        AckClientTransaction.prototype.onTransportError = function () {\n          this.logger.log('transport error occurred, for an ACK client transaction ' + this.id);\n          this.request_sender.onTransportError();\n        };\n        /**\n        * @augments SIP.Transactions\n        * @class Non Invite Server Transaction\n        * @param {SIP.IncomingRequest} request\n        * @param {SIP.UA} ua\n        */\n\n\n        var NonInviteServerTransaction = function (request, ua) {\n          this.type = C.NON_INVITE_SERVER;\n          this.id = request.via_branch;\n          this.request = request;\n          this.transport = request.transport;\n          this.ua = ua;\n          this.last_response = '';\n          request.server_transaction = this;\n          this.logger = ua.getLogger('sip.transaction.nist', this.id);\n          this.state = C.STATUS_TRYING;\n          ua.newTransaction(this);\n        };\n\n        NonInviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        NonInviteServerTransaction.prototype.stateChanged = function (state) {\n          this.state = state;\n          this.emit('stateChanged');\n        };\n\n        NonInviteServerTransaction.prototype.timer_J = function () {\n          this.logger.log('Timer J expired for non-INVITE server transaction ' + this.id);\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.ua.destroyTransaction(this);\n        };\n\n        NonInviteServerTransaction.prototype.onTransportError = function () {\n          if (!this.transportError) {\n            this.transportError = true;\n            this.logger.log('transport error occurred, deleting non-INVITE server transaction ' + this.id);\n            SIP.Timers.clearTimeout(this.J);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n          }\n        };\n\n        NonInviteServerTransaction.prototype.receiveResponse = function (status_code, response) {\n          var tr = this;\n          var deferred = SIP.Utils.defer();\n\n          if (status_code === 100) {\n            /* RFC 4320 4.1\n             * 'A SIP element MUST NOT\n             * send any provisional response with a\n             * Status-Code other than 100 to a non-INVITE request.'\n             */\n            switch (this.state) {\n              case C.STATUS_TRYING:\n                this.stateChanged(C.STATUS_PROCEEDING);\n\n                if (!this.transport.send(response)) {\n                  this.onTransportError();\n                }\n\n                break;\n\n              case C.STATUS_PROCEEDING:\n                this.last_response = response;\n\n                if (!this.transport.send(response)) {\n                  this.onTransportError();\n                  deferred.reject();\n                } else {\n                  deferred.resolve();\n                }\n\n                break;\n            }\n          } else if (status_code >= 200 && status_code <= 699) {\n            switch (this.state) {\n              case C.STATUS_TRYING:\n              case C.STATUS_PROCEEDING:\n                this.stateChanged(C.STATUS_COMPLETED);\n                this.last_response = response;\n                this.J = SIP.Timers.setTimeout(tr.timer_J.bind(tr), SIP.Timers.TIMER_J);\n\n                if (!this.transport.send(response)) {\n                  this.onTransportError();\n                  deferred.reject();\n                } else {\n                  deferred.resolve();\n                }\n\n                break;\n\n              case C.STATUS_COMPLETED:\n                break;\n            }\n          }\n\n          return deferred.promise;\n        };\n        /**\n        * @augments SIP.Transactions\n        * @class Invite Server Transaction\n        * @param {SIP.IncomingRequest} request\n        * @param {SIP.UA} ua\n        */\n\n\n        var InviteServerTransaction = function (request, ua) {\n          this.type = C.INVITE_SERVER;\n          this.id = request.via_branch;\n          this.request = request;\n          this.transport = request.transport;\n          this.ua = ua;\n          this.last_response = '';\n          request.server_transaction = this;\n          this.logger = ua.getLogger('sip.transaction.ist', this.id);\n          this.state = C.STATUS_PROCEEDING;\n          ua.newTransaction(this);\n          this.resendProvisionalTimer = null;\n          request.reply(100);\n        };\n\n        InviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n\n        InviteServerTransaction.prototype.stateChanged = function (state) {\n          this.state = state;\n          this.emit('stateChanged');\n        };\n\n        InviteServerTransaction.prototype.timer_H = function () {\n          this.logger.log('Timer H expired for INVITE server transaction ' + this.id);\n\n          if (this.state === C.STATUS_COMPLETED) {\n            this.logger.warn('transactions', 'ACK for INVITE server transaction was never received, call will be terminated');\n          }\n\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.ua.destroyTransaction(this);\n        };\n\n        InviteServerTransaction.prototype.timer_I = function () {\n          this.stateChanged(C.STATUS_TERMINATED);\n          this.ua.destroyTransaction(this);\n        }; // RFC 6026 7.1\n\n\n        InviteServerTransaction.prototype.timer_L = function () {\n          this.logger.log('Timer L expired for INVITE server transaction ' + this.id);\n\n          if (this.state === C.STATUS_ACCEPTED) {\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n          }\n        };\n\n        InviteServerTransaction.prototype.onTransportError = function () {\n          if (!this.transportError) {\n            this.transportError = true;\n            this.logger.log('transport error occurred, deleting INVITE server transaction ' + this.id);\n\n            if (this.resendProvisionalTimer !== null) {\n              SIP.Timers.clearInterval(this.resendProvisionalTimer);\n              this.resendProvisionalTimer = null;\n            }\n\n            SIP.Timers.clearTimeout(this.L);\n            SIP.Timers.clearTimeout(this.H);\n            SIP.Timers.clearTimeout(this.I);\n            this.stateChanged(C.STATUS_TERMINATED);\n            this.ua.destroyTransaction(this);\n          }\n        };\n\n        InviteServerTransaction.prototype.resend_provisional = function () {\n          if (!this.transport.send(this.last_response)) {\n            this.onTransportError();\n          }\n        }; // INVITE Server Transaction RFC 3261 17.2.1\n\n\n        InviteServerTransaction.prototype.receiveResponse = function (status_code, response) {\n          var tr = this;\n          var deferred = SIP.Utils.defer();\n\n          if (status_code >= 100 && status_code <= 199) {\n            switch (this.state) {\n              case C.STATUS_PROCEEDING:\n                if (!this.transport.send(response)) {\n                  this.onTransportError();\n                }\n\n                this.last_response = response;\n                break;\n            }\n          }\n\n          if (status_code > 100 && status_code <= 199 && this.state === C.STATUS_PROCEEDING) {\n            // Trigger the resendProvisionalTimer only for the first non 100 provisional response.\n            if (this.resendProvisionalTimer === null) {\n              this.resendProvisionalTimer = SIP.Timers.setInterval(tr.resend_provisional.bind(tr), SIP.Timers.PROVISIONAL_RESPONSE_INTERVAL);\n            }\n          } else if (status_code >= 200 && status_code <= 299) {\n            switch (this.state) {\n              case C.STATUS_PROCEEDING:\n                this.stateChanged(C.STATUS_ACCEPTED);\n                this.last_response = response;\n                this.L = SIP.Timers.setTimeout(tr.timer_L.bind(tr), SIP.Timers.TIMER_L);\n\n                if (this.resendProvisionalTimer !== null) {\n                  SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                  this.resendProvisionalTimer = null;\n                }\n\n              /* falls through */\n\n              case C.STATUS_ACCEPTED:\n                // Note that this point will be reached for proceeding tr.state also.\n                if (!this.transport.send(response)) {\n                  this.onTransportError();\n                  deferred.reject();\n                } else {\n                  deferred.resolve();\n                }\n\n                break;\n            }\n          } else if (status_code >= 300 && status_code <= 699) {\n            switch (this.state) {\n              case C.STATUS_PROCEEDING:\n                if (this.resendProvisionalTimer !== null) {\n                  SIP.Timers.clearInterval(this.resendProvisionalTimer);\n                  this.resendProvisionalTimer = null;\n                }\n\n                if (!this.transport.send(response)) {\n                  this.onTransportError();\n                  deferred.reject();\n                } else {\n                  this.stateChanged(C.STATUS_COMPLETED);\n                  this.H = SIP.Timers.setTimeout(tr.timer_H.bind(tr), SIP.Timers.TIMER_H);\n                  deferred.resolve();\n                }\n\n                break;\n            }\n          }\n\n          return deferred.promise;\n        };\n        /**\n         * @function\n         * @param {SIP.UA} ua\n         * @param {SIP.IncomingRequest} request\n         *\n         * @return {boolean}\n         * INVITE:\n         *  _true_ if retransmission\n         *  _false_ new request\n         *\n         * ACK:\n         *  _true_  ACK to non2xx response\n         *  _false_ ACK must be passed to TU (accepted state)\n         *          ACK to 2xx response\n         *\n         * CANCEL:\n         *  _true_  no matching invite transaction\n         *  _false_ matching invite transaction and no final response sent\n         *\n         * OTHER:\n         *  _true_  retransmission\n         *  _false_ new request\n         */\n\n\n        var checkTransaction = function (ua, request) {\n          var tr;\n\n          switch (request.method) {\n            case SIP.C.INVITE:\n              tr = ua.transactions.ist[request.via_branch];\n\n              if (tr) {\n                switch (tr.state) {\n                  case C.STATUS_PROCEEDING:\n                    tr.transport.send(tr.last_response);\n                    break;\n                  // RFC 6026 7.1 Invite retransmission\n                  //received while in C.STATUS_ACCEPTED state. Absorb it.\n\n                  case C.STATUS_ACCEPTED:\n                    break;\n                }\n\n                return true;\n              }\n\n              break;\n\n            case SIP.C.ACK:\n              tr = ua.transactions.ist[request.via_branch]; // RFC 6026 7.1\n\n              if (tr) {\n                if (tr.state === C.STATUS_ACCEPTED) {\n                  return false;\n                } else if (tr.state === C.STATUS_COMPLETED) {\n                  tr.stateChanged(C.STATUS_CONFIRMED);\n                  tr.I = SIP.Timers.setTimeout(tr.timer_I.bind(tr), SIP.Timers.TIMER_I);\n                  return true;\n                }\n              } // ACK to 2XX Response.\n              else {\n                return false;\n              }\n\n              break;\n\n            case SIP.C.CANCEL:\n              tr = ua.transactions.ist[request.via_branch];\n\n              if (tr) {\n                request.reply_sl(200);\n\n                if (tr.state === C.STATUS_PROCEEDING) {\n                  return false;\n                } else {\n                  return true;\n                }\n              } else {\n                request.reply_sl(481);\n                return true;\n              }\n\n              break;\n\n            default:\n              // Non-INVITE Server Transaction RFC 3261 17.2.2\n              tr = ua.transactions.nist[request.via_branch];\n\n              if (tr) {\n                switch (tr.state) {\n                  case C.STATUS_TRYING:\n                    break;\n\n                  case C.STATUS_PROCEEDING:\n                  case C.STATUS_COMPLETED:\n                    tr.transport.send(tr.last_response);\n                    break;\n                }\n\n                return true;\n              }\n\n              break;\n          }\n        };\n\n        SIP.Transactions = {\n          C: C,\n          checkTransaction: checkTransaction,\n          NonInviteClientTransaction: NonInviteClientTransaction,\n          InviteClientTransaction: InviteClientTransaction,\n          AckClientTransaction: AckClientTransaction,\n          NonInviteServerTransaction: NonInviteServerTransaction,\n          InviteServerTransaction: InviteServerTransaction\n        };\n      };\n    }, {}],\n    28: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview Transport\n       */\n\n      /**\n       * @augments SIP\n       * @class Transport\n       * @param {SIP.UA} ua\n       * @param {Object} server ws_server Object\n       */\n\n      module.exports = function (SIP, WebSocket) {\n        var Transport,\n            C = {\n          // Transport status codes\n          STATUS_READY: 0,\n          STATUS_DISCONNECTED: 1,\n          STATUS_ERROR: 2\n        };\n        /**\n         * Compute an amount of time in seconds to wait before sending another\n         * keep-alive.\n         * @returns {Number}\n         */\n\n        function computeKeepAliveTimeout(upperBound) {\n          var lowerBound = upperBound * 0.8;\n          return 1000 * (Math.random() * (upperBound - lowerBound) + lowerBound);\n        }\n\n        Transport = function (ua, server) {\n          this.logger = ua.getLogger('sip.transport');\n          this.ua = ua;\n          this.ws = null;\n          this.server = server;\n          this.reconnection_attempts = 0;\n          this.closed = false;\n          this.connected = false;\n          this.reconnectTimer = null;\n          this.lastTransportError = {};\n          this.keepAliveInterval = ua.configuration.keepAliveInterval;\n          this.keepAliveTimeout = null;\n          this.keepAliveTimer = null;\n          this.ua.transport = this; // Connect\n\n          this.connect();\n        };\n\n        Transport.prototype = {\n          /**\n           * Send a message.\n           * @param {SIP.OutgoingRequest|String} msg\n           * @returns {Boolean}\n           */\n          send: function (msg) {\n            var message = msg.toString();\n\n            if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n              if (this.ua.configuration.traceSip === true) {\n                this.logger.log('sending WebSocket message:\\n\\n' + message + '\\n');\n              }\n\n              this.ws.send(message);\n              return true;\n            } else {\n              this.logger.warn('unable to send message, WebSocket is not open');\n              return false;\n            }\n          },\n\n          /**\n           * Send a keep-alive (a double-CRLF sequence).\n           * @private\n           * @returns {Boolean}\n           */\n          sendKeepAlive: function () {\n            if (this.keepAliveTimeout) {\n              return;\n            }\n\n            this.keepAliveTimeout = SIP.Timers.setTimeout(function () {\n              this.ua.emit('keepAliveTimeout');\n            }.bind(this), 10000);\n            return this.send('\\r\\n\\r\\n');\n          },\n\n          /**\n           * Start sending keep-alives.\n           * @private\n           */\n          startSendingKeepAlives: function () {\n            if (this.keepAliveInterval && !this.keepAliveTimer) {\n              this.keepAliveTimer = SIP.Timers.setTimeout(function () {\n                this.sendKeepAlive();\n                this.keepAliveTimer = null;\n                this.startSendingKeepAlives();\n              }.bind(this), computeKeepAliveTimeout(this.keepAliveInterval));\n            }\n          },\n\n          /**\n           * Stop sending keep-alives.\n           * @private\n           */\n          stopSendingKeepAlives: function () {\n            SIP.Timers.clearTimeout(this.keepAliveTimer);\n            SIP.Timers.clearTimeout(this.keepAliveTimeout);\n            this.keepAliveTimer = null;\n            this.keepAliveTimeout = null;\n          },\n\n          /**\n          * Disconnect socket.\n          */\n          disconnect: function () {\n            if (this.ws) {\n              // Clear reconnectTimer\n              SIP.Timers.clearTimeout(this.reconnectTimer);\n              this.stopSendingKeepAlives();\n              this.closed = true;\n              this.logger.log('closing WebSocket ' + this.server.ws_uri);\n              this.ws.close();\n              this.ws = null;\n            }\n\n            if (this.reconnectTimer !== null) {\n              SIP.Timers.clearTimeout(this.reconnectTimer);\n              this.reconnectTimer = null;\n              this.ua.emit('disconnected', {\n                transport: this,\n                code: this.lastTransportError.code,\n                reason: this.lastTransportError.reason\n              });\n            }\n          },\n\n          /**\n          * Connect socket.\n          */\n          connect: function () {\n            var transport = this;\n\n            if (this.ws && (this.ws.readyState === WebSocket.OPEN || this.ws.readyState === WebSocket.CONNECTING)) {\n              this.logger.log('WebSocket ' + this.server.ws_uri + ' is already connected');\n              return false;\n            }\n\n            if (this.ws) {\n              this.ws.close();\n              this.ws = null;\n            }\n\n            this.logger.log('connecting to WebSocket ' + this.server.ws_uri);\n            this.ua.onTransportConnecting(this, this.reconnection_attempts === 0 ? 1 : this.reconnection_attempts);\n\n            try {\n              this.ws = new WebSocket(this.server.ws_uri, 'sip');\n            } catch (e) {\n              this.logger.warn('error connecting to WebSocket ' + this.server.ws_uri + ': ' + e);\n            }\n\n            this.ws.binaryType = 'arraybuffer';\n\n            this.ws.onopen = function () {\n              transport.onOpen();\n            };\n\n            this.ws.onclose = function (e) {\n              transport.onClose(e); // Always cleanup. Eases GC, prevents potential memory leaks.\n\n              this.onopen = null;\n              this.onclose = null;\n              this.onmessage = null;\n              this.onerror = null;\n            };\n\n            this.ws.onmessage = function (e) {\n              transport.onMessage(e);\n            };\n\n            this.ws.onerror = function (e) {\n              transport.onError(e);\n            };\n          },\n          // Transport Event Handlers\n\n          /**\n          * @event\n          * @param {event} e\n          */\n          onOpen: function () {\n            this.connected = true;\n            this.logger.log('WebSocket ' + this.server.ws_uri + ' connected'); // Clear reconnectTimer since we are not disconnected\n\n            if (this.reconnectTimer !== null) {\n              SIP.Timers.clearTimeout(this.reconnectTimer);\n              this.reconnectTimer = null;\n            } // Reset reconnection_attempts\n\n\n            this.reconnection_attempts = 0; // Disable closed\n\n            this.closed = false; // Trigger onTransportConnected callback\n\n            this.ua.onTransportConnected(this); // Start sending keep-alives\n\n            this.startSendingKeepAlives();\n          },\n\n          /**\n          * @event\n          * @param {event} e\n          */\n          onClose: function (e) {\n            var connected_before = this.connected;\n            this.lastTransportError.code = e.code;\n            this.lastTransportError.reason = e.reason;\n            this.stopSendingKeepAlives();\n\n            if (this.reconnection_attempts > 0) {\n              this.logger.log('Reconnection attempt ' + this.reconnection_attempts + ' failed (code: ' + e.code + (e.reason ? '| reason: ' + e.reason : '') + ')');\n              this.reconnect();\n            } else {\n              this.connected = false;\n              this.logger.log('WebSocket disconnected (code: ' + e.code + (e.reason ? '| reason: ' + e.reason : '') + ')');\n\n              if (e.wasClean === false) {\n                this.logger.warn('WebSocket abrupt disconnection');\n              } // Transport was connected\n\n\n              if (connected_before === true) {\n                this.ua.onTransportClosed(this); // Check whether the user requested to close.\n\n                if (!this.closed) {\n                  this.reconnect();\n                } else {\n                  this.ua.emit('disconnected', {\n                    transport: this,\n                    code: this.lastTransportError.code,\n                    reason: this.lastTransportError.reason\n                  });\n                }\n              } else {\n                // This is the first connection attempt\n                //Network error\n                this.ua.onTransportError(this);\n              }\n            }\n          },\n\n          /**\n          * @event\n          * @param {event} e\n          */\n          onMessage: function (e) {\n            var message,\n                transaction,\n                data = e.data; // CRLF Keep Alive response from server. Ignore it.\n\n            if (data === '\\r\\n') {\n              SIP.Timers.clearTimeout(this.keepAliveTimeout);\n              this.keepAliveTimeout = null;\n\n              if (this.ua.configuration.traceSip === true) {\n                this.logger.log('received WebSocket message with CRLF Keep Alive response');\n              }\n\n              return;\n            } // WebSocket binary message.\n            else if (typeof data !== 'string') {\n              try {\n                data = String.fromCharCode.apply(null, new Uint8Array(data));\n              } catch (evt) {\n                this.logger.warn('received WebSocket binary message failed to be converted into string, message discarded');\n                return;\n              }\n\n              if (this.ua.configuration.traceSip === true) {\n                this.logger.log('received WebSocket binary message:\\n\\n' + data + '\\n');\n              }\n            } // WebSocket text message.\n            else {\n              if (this.ua.configuration.traceSip === true) {\n                this.logger.log('received WebSocket text message:\\n\\n' + data + '\\n');\n              }\n            }\n\n            message = SIP.Parser.parseMessage(data, this.ua);\n\n            if (!message) {\n              return;\n            }\n\n            if (this.ua.status === SIP.UA.C.STATUS_USER_CLOSED && message instanceof SIP.IncomingRequest) {\n              return;\n            } // Do some sanity check\n\n\n            if (SIP.sanityCheck(message, this.ua, this)) {\n              if (message instanceof SIP.IncomingRequest) {\n                message.transport = this;\n                this.ua.receiveRequest(message);\n              } else if (message instanceof SIP.IncomingResponse) {\n                /* Unike stated in 18.1.2, if a response does not match\n                * any transaction, it is discarded here and no passed to the core\n                * in order to be discarded there.\n                */\n                switch (message.method) {\n                  case SIP.C.INVITE:\n                    transaction = this.ua.transactions.ict[message.via_branch];\n\n                    if (transaction) {\n                      transaction.receiveResponse(message);\n                    }\n\n                    break;\n\n                  case SIP.C.ACK:\n                    // Just in case ;-)\n                    break;\n\n                  default:\n                    transaction = this.ua.transactions.nict[message.via_branch];\n\n                    if (transaction) {\n                      transaction.receiveResponse(message);\n                    }\n\n                    break;\n                }\n              }\n            }\n          },\n\n          /**\n          * @event\n          * @param {event} e\n          */\n          onError: function (e) {\n            this.logger.warn('WebSocket connection error: ' + JSON.stringify(e));\n          },\n\n          /**\n          * Reconnection attempt logic.\n          * @private\n          */\n          reconnect: function () {\n            var transport = this;\n            this.reconnection_attempts += 1;\n\n            if (this.reconnection_attempts > this.ua.configuration.wsServerMaxReconnection) {\n              this.logger.warn('maximum reconnection attempts for WebSocket ' + this.server.ws_uri);\n              this.ua.onTransportError(this);\n            } else if (this.reconnection_attempts === 1) {\n              this.logger.log('Connection to WebSocket ' + this.server.ws_uri + ' severed, attempting first reconnect');\n              transport.connect();\n            } else {\n              this.logger.log('trying to reconnect to WebSocket ' + this.server.ws_uri + ' (reconnection attempt ' + this.reconnection_attempts + ')');\n              this.reconnectTimer = SIP.Timers.setTimeout(function () {\n                transport.connect();\n                transport.reconnectTimer = null;\n              }, this.ua.configuration.wsServerReconnectionTimeout * 1000);\n            }\n          }\n        };\n        Transport.C = C;\n        return Transport;\n      };\n    }, {}],\n    29: [function (require, module, exports) {\n      (function (global) {\n        \"use strict\";\n        /**\n         * @augments SIP\n         * @class Class creating a SIP User Agent.\n         * @param {function returning SIP.MediaHandler} [configuration.mediaHandlerFactory]\n         *        A function will be invoked by each of the UA's Sessions to build the MediaHandler for that Session.\n         *        If no (or a falsy) value is provided, each Session will use a default (WebRTC) MediaHandler.\n         *\n         * @param {Object} [configuration.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n         */\n\n        module.exports = function (SIP, environment) {\n          var UA,\n              C = {\n            // UA status codes\n            STATUS_INIT: 0,\n            STATUS_STARTING: 1,\n            STATUS_READY: 2,\n            STATUS_USER_CLOSED: 3,\n            STATUS_NOT_READY: 4,\n            // UA error codes\n            CONFIGURATION_ERROR: 1,\n            NETWORK_ERROR: 2,\n            ALLOWED_METHODS: ['ACK', 'CANCEL', 'INVITE', 'MESSAGE', 'BYE', 'OPTIONS', 'INFO', 'NOTIFY', 'REFER'],\n            ACCEPTED_BODY_TYPES: ['application/sdp', 'application/dtmf-relay'],\n            MAX_FORWARDS: 70,\n            TAG_LENGTH: 10\n          };\n\n          UA = function (configuration) {\n            var self = this; // Helper function for forwarding events\n\n            function selfEmit(type) {\n              //registrationFailed handler is invoked with two arguments. Allow event handlers to be invoked with a variable no. of arguments\n              return self.emit.bind(self, type);\n            } // Set Accepted Body Types\n\n\n            C.ACCEPTED_BODY_TYPES = C.ACCEPTED_BODY_TYPES.toString();\n            this.log = new SIP.LoggerFactory();\n            this.logger = this.getLogger('sip.ua');\n            this.cache = {\n              credentials: {}\n            };\n            this.configuration = {};\n            this.dialogs = {}; //User actions outside any session/dialog (MESSAGE)\n\n            this.applicants = {};\n            this.data = {};\n            this.sessions = {};\n            this.subscriptions = {};\n            this.earlySubscriptions = {};\n            this.transport = null;\n            this.contact = null;\n            this.status = C.STATUS_INIT;\n            this.error = null;\n            this.transactions = {\n              nist: {},\n              nict: {},\n              ist: {},\n              ict: {}\n            };\n            this.transportRecoverAttempts = 0;\n            this.transportRecoveryTimer = null;\n            Object.defineProperties(this, {\n              transactionsCount: {\n                get: function () {\n                  var type,\n                      transactions = ['nist', 'nict', 'ist', 'ict'],\n                      count = 0;\n\n                  for (type in transactions) {\n                    count += Object.keys(this.transactions[transactions[type]]).length;\n                  }\n\n                  return count;\n                }\n              },\n              nictTransactionsCount: {\n                get: function () {\n                  return Object.keys(this.transactions['nict']).length;\n                }\n              },\n              nistTransactionsCount: {\n                get: function () {\n                  return Object.keys(this.transactions['nist']).length;\n                }\n              },\n              ictTransactionsCount: {\n                get: function () {\n                  return Object.keys(this.transactions['ict']).length;\n                }\n              },\n              istTransactionsCount: {\n                get: function () {\n                  return Object.keys(this.transactions['ist']).length;\n                }\n              }\n            });\n            /**\n             * Load configuration\n             *\n             * @throws {SIP.Exceptions.ConfigurationError}\n             * @throws {TypeError}\n             */\n\n            if (configuration === undefined) {\n              configuration = {};\n            } else if (typeof configuration === 'string' || configuration instanceof String) {\n              configuration = {\n                uri: configuration\n              };\n            } // Apply log configuration if present\n\n\n            if (configuration.log) {\n              if (configuration.log.hasOwnProperty('builtinEnabled')) {\n                this.log.builtinEnabled = configuration.log.builtinEnabled;\n              }\n\n              if (configuration.log.hasOwnProperty('level')) {\n                this.log.level = configuration.log.level;\n              }\n\n              if (configuration.log.hasOwnProperty('connector')) {\n                this.log.connector = configuration.log.connector;\n              }\n            }\n\n            try {\n              this.loadConfig(configuration);\n            } catch (e) {\n              this.status = C.STATUS_NOT_READY;\n              this.error = C.CONFIGURATION_ERROR;\n              throw e;\n            } // Initialize registerContext\n\n\n            this.registerContext = new SIP.RegisterContext(this);\n            this.registerContext.on('failed', selfEmit('registrationFailed'));\n            this.registerContext.on('registered', selfEmit('registered'));\n            this.registerContext.on('unregistered', selfEmit('unregistered'));\n\n            if (this.configuration.autostart) {\n              this.start();\n            }\n          };\n\n          UA.prototype = Object.create(SIP.EventEmitter.prototype); //=================\n          //  High Level API\n          //=================\n\n          UA.prototype.register = function (options) {\n            this.configuration.register = true;\n            this.registerContext.register(options);\n            return this;\n          };\n          /**\n           * Unregister.\n           *\n           * @param {Boolean} [all] unregister all user bindings.\n           *\n           */\n\n\n          UA.prototype.unregister = function (options) {\n            this.configuration.register = false;\n            var context = this.registerContext;\n            this.afterConnected(context.unregister.bind(context, options));\n            return this;\n          };\n\n          UA.prototype.isRegistered = function () {\n            return this.registerContext.registered;\n          };\n          /**\n           * Connection state.\n           * @param {Boolean}\n           */\n\n\n          UA.prototype.isConnected = function () {\n            return this.transport ? this.transport.connected : false;\n          };\n\n          UA.prototype.afterConnected = function afterConnected(callback) {\n            if (this.isConnected()) {\n              callback();\n            } else {\n              this.once('connected', callback);\n            }\n          };\n          /**\n           * Make an outgoing call.\n           *\n           * @param {String} target\n           * @param {Object} views\n           * @param {Object} [options.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n           *\n           * @throws {TypeError}\n           *\n           */\n\n\n          UA.prototype.invite = function (target, options) {\n            var context = new SIP.InviteClientContext(this, target, options);\n            this.afterConnected(context.invite.bind(context));\n            this.emit('inviteSent', context);\n            return context;\n          };\n\n          UA.prototype.subscribe = function (target, event, options) {\n            var sub = new SIP.Subscription(this, target, event, options);\n            this.afterConnected(sub.subscribe.bind(sub));\n            return sub;\n          };\n          /**\n           * Send a message.\n           *\n           * @param {String} target\n           * @param {String} body\n           * @param {Object} [options]\n           *\n           * @throws {TypeError}\n           *\n           */\n\n\n          UA.prototype.message = function (target, body, options) {\n            if (body === undefined) {\n              throw new TypeError('Not enough arguments');\n            } // There is no Message module, so it is okay that the UA handles defaults here.\n\n\n            options = Object.create(options || Object.prototype);\n            options.contentType || (options.contentType = 'text/plain');\n            options.body = body;\n            return this.request(SIP.C.MESSAGE, target, options);\n          };\n\n          UA.prototype.request = function (method, target, options) {\n            var req = new SIP.ClientContext(this, method, target, options);\n            this.afterConnected(req.send.bind(req));\n            return req;\n          };\n          /**\n           * Gracefully close.\n           *\n           */\n\n\n          UA.prototype.stop = function () {\n            var session,\n                subscription,\n                applicant,\n                ua = this;\n\n            function transactionsListener() {\n              if (ua.nistTransactionsCount === 0 && ua.nictTransactionsCount === 0) {\n                ua.removeListener('transactionDestroyed', transactionsListener);\n                ua.transport.disconnect();\n              }\n            }\n\n            this.logger.log('user requested closure...');\n\n            if (this.status === C.STATUS_USER_CLOSED) {\n              this.logger.warn('UA already closed');\n              return this;\n            } // Clear transportRecoveryTimer\n\n\n            SIP.Timers.clearTimeout(this.transportRecoveryTimer); // Close registerContext\n\n            this.logger.log('closing registerContext');\n            this.registerContext.close(); // Run  _terminate_ on every Session\n\n            for (session in this.sessions) {\n              this.logger.log('closing session ' + session);\n              this.sessions[session].terminate();\n            } //Run _close_ on every confirmed Subscription\n\n\n            for (subscription in this.subscriptions) {\n              this.logger.log('unsubscribing from subscription ' + subscription);\n              this.subscriptions[subscription].close();\n            } //Run _close_ on every early Subscription\n\n\n            for (subscription in this.earlySubscriptions) {\n              this.logger.log('unsubscribing from early subscription ' + subscription);\n              this.earlySubscriptions[subscription].close();\n            } // Run  _close_ on every applicant\n\n\n            for (applicant in this.applicants) {\n              this.applicants[applicant].close();\n            }\n\n            this.status = C.STATUS_USER_CLOSED;\n            /*\n             * If the remaining transactions are all INVITE transactions, there is no need to\n             * wait anymore because every session has already been closed by this method.\n             * - locally originated sessions where terminated (CANCEL or BYE)\n             * - remotely originated sessions where rejected (4XX) or terminated (BYE)\n             * Remaining INVITE transactions belong tho sessions that where answered. This are in\n             * 'accepted' state due to timers 'L' and 'M' defined in [RFC 6026]\n             */\n\n            if (this.nistTransactionsCount === 0 && this.nictTransactionsCount === 0) {\n              this.transport.disconnect();\n            } else {\n              this.on('transactionDestroyed', transactionsListener);\n            }\n\n            if (typeof environment.removeEventListener === 'function') {\n              // Google Chrome Packaged Apps don't allow 'unload' listeners:\n              // unload is not available in packaged apps\n              if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n                environment.removeEventListener('unload', this.environListener);\n              }\n            }\n\n            return this;\n          };\n          /**\n           * Connect to the WS server if status = STATUS_INIT.\n           * Resume UA after being closed.\n           *\n           */\n\n\n          UA.prototype.start = function () {\n            var server;\n            this.logger.log('user requested startup...');\n\n            if (this.status === C.STATUS_INIT) {\n              server = this.getNextWsServer();\n              this.status = C.STATUS_STARTING;\n              new SIP.Transport(this, server);\n            } else if (this.status === C.STATUS_USER_CLOSED) {\n              this.logger.log('resuming');\n              this.status = C.STATUS_READY;\n              this.transport.connect();\n            } else if (this.status === C.STATUS_STARTING) {\n              this.logger.log('UA is in STARTING status, not opening new connection');\n            } else if (this.status === C.STATUS_READY) {\n              this.logger.log('UA is in READY status, not resuming');\n            } else {\n              this.logger.error('Connection is down. Auto-Recovery system is trying to connect');\n            }\n\n            if (this.configuration.autostop && typeof environment.addEventListener === 'function') {\n              // Google Chrome Packaged Apps don't allow 'unload' listeners:\n              // unload is not available in packaged apps\n              if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n                this.environListener = this.stop.bind(this);\n                environment.addEventListener('unload', this.environListener);\n              }\n            }\n\n            return this;\n          };\n          /**\n           * Normalize a string into a valid SIP request URI\n           *\n           * @param {String} target\n           *\n           * @returns {SIP.URI|undefined}\n           */\n\n\n          UA.prototype.normalizeTarget = function (target) {\n            return SIP.Utils.normalizeTarget(target, this.configuration.hostportParams);\n          }; //===============================\n          //  Private (For internal use)\n          //===============================\n\n\n          UA.prototype.saveCredentials = function (credentials) {\n            this.cache.credentials[credentials.realm] = this.cache.credentials[credentials.realm] || {};\n            this.cache.credentials[credentials.realm][credentials.uri] = credentials;\n            return this;\n          };\n\n          UA.prototype.getCredentials = function (request) {\n            var realm, credentials;\n            realm = request.ruri.host;\n\n            if (this.cache.credentials[realm] && this.cache.credentials[realm][request.ruri]) {\n              credentials = this.cache.credentials[realm][request.ruri];\n              credentials.method = request.method;\n            }\n\n            return credentials;\n          };\n\n          UA.prototype.getLogger = function (category, label) {\n            return this.log.getLogger(category, label);\n          }; //==============================\n          // Event Handlers\n          //==============================\n\n          /**\n           * Transport Close event\n           * @private\n           * @event\n           * @param {SIP.Transport} transport.\n           */\n\n\n          UA.prototype.onTransportClosed = function (transport) {\n            // Run _onTransportError_ callback on every client transaction using _transport_\n            var type,\n                idx,\n                length,\n                client_transactions = ['nict', 'ict', 'nist', 'ist'];\n            transport.server.status = SIP.Transport.C.STATUS_DISCONNECTED;\n            this.logger.log('connection state set to ' + SIP.Transport.C.STATUS_DISCONNECTED);\n            length = client_transactions.length;\n\n            for (type = 0; type < length; type++) {\n              for (idx in this.transactions[client_transactions[type]]) {\n                this.transactions[client_transactions[type]][idx].onTransportError();\n              }\n            } // Close sessions if GRUU is not being used\n\n\n            if (!this.contact.pub_gruu) {\n              this.closeSessionsOnTransportError();\n            }\n          };\n          /**\n           * Unrecoverable transport event.\n           * Connection reattempt logic has been done and didn't success.\n           * @private\n           * @event\n           * @param {SIP.Transport} transport.\n           */\n\n\n          UA.prototype.onTransportError = function (transport) {\n            var server;\n            this.logger.log('transport ' + transport.server.ws_uri + ' failed | connection state set to ' + SIP.Transport.C.STATUS_ERROR); // Close sessions.\n            //Mark this transport as 'down'\n\n            transport.server.status = SIP.Transport.C.STATUS_ERROR;\n            this.emit('disconnected', {\n              transport: transport\n            }); // try the next transport if the UA isn't closed\n\n            if (this.status === C.STATUS_USER_CLOSED) {\n              return;\n            }\n\n            server = this.getNextWsServer();\n\n            if (server) {\n              new SIP.Transport(this, server);\n            } else {\n              this.closeSessionsOnTransportError();\n\n              if (!this.error || this.error !== C.NETWORK_ERROR) {\n                this.status = C.STATUS_NOT_READY;\n                this.error = C.NETWORK_ERROR;\n              } // Transport Recovery process\n\n\n              this.recoverTransport();\n            }\n          };\n          /**\n           * Transport connection event.\n           * @private\n           * @event\n           * @param {SIP.Transport} transport.\n           */\n\n\n          UA.prototype.onTransportConnected = function (transport) {\n            this.transport = transport; // Reset transport recovery counter\n\n            this.transportRecoverAttempts = 0;\n            transport.server.status = SIP.Transport.C.STATUS_READY;\n            this.logger.log('connection state set to ' + SIP.Transport.C.STATUS_READY);\n\n            if (this.status === C.STATUS_USER_CLOSED) {\n              return;\n            }\n\n            this.status = C.STATUS_READY;\n            this.error = null;\n\n            if (this.configuration.register) {\n              this.configuration.authenticationFactory.initialize().then(function () {\n                this.registerContext.onTransportConnected();\n              }.bind(this));\n            }\n\n            this.emit('connected', {\n              transport: transport\n            });\n          };\n          /**\n           * Transport connecting event\n           * @private\n           * @param {SIP.Transport} transport.\n           * #param {Integer} attempts.\n           */\n\n\n          UA.prototype.onTransportConnecting = function (transport, attempts) {\n            this.emit('connecting', {\n              transport: transport,\n              attempts: attempts\n            });\n          };\n          /**\n           * new Transaction\n           * @private\n           * @param {SIP.Transaction} transaction.\n           */\n\n\n          UA.prototype.newTransaction = function (transaction) {\n            this.transactions[transaction.type][transaction.id] = transaction;\n            this.emit('newTransaction', {\n              transaction: transaction\n            });\n          };\n          /**\n           * destroy Transaction\n           * @private\n           * @param {SIP.Transaction} transaction.\n           */\n\n\n          UA.prototype.destroyTransaction = function (transaction) {\n            delete this.transactions[transaction.type][transaction.id];\n            this.emit('transactionDestroyed', {\n              transaction: transaction\n            });\n          }; //=========================\n          // receiveRequest\n          //=========================\n\n          /**\n           * Request reception\n           * @private\n           * @param {SIP.IncomingRequest} request.\n           */\n\n\n          UA.prototype.receiveRequest = function (request) {\n            var dialog,\n                session,\n                message,\n                earlySubscription,\n                method = request.method,\n                transaction,\n                replaces,\n                replacedDialog,\n                self = this;\n\n            function ruriMatches(uri) {\n              return uri && uri.user === request.ruri.user;\n            } // Check that request URI points to us\n\n\n            if (!(ruriMatches(this.configuration.uri) || ruriMatches(this.contact.uri) || ruriMatches(this.contact.pub_gruu) || ruriMatches(this.contact.temp_gruu))) {\n              this.logger.warn('Request-URI does not point to us');\n\n              if (request.method !== SIP.C.ACK) {\n                request.reply_sl(404);\n              }\n\n              return;\n            } // Check request URI scheme\n\n\n            if (request.ruri.scheme === SIP.C.SIPS) {\n              request.reply_sl(416);\n              return;\n            } // Check transaction\n\n\n            if (SIP.Transactions.checkTransaction(this, request)) {\n              return;\n            }\n            /* RFC3261 12.2.2\n             * Requests that do not change in any way the state of a dialog may be\n             * received within a dialog (for example, an OPTIONS request).\n             * They are processed as if they had been received outside the dialog.\n             */\n\n\n            if (method === SIP.C.OPTIONS) {\n              new SIP.Transactions.NonInviteServerTransaction(request, this);\n              request.reply(200, null, ['Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString(), 'Accept: ' + C.ACCEPTED_BODY_TYPES]);\n            } else if (method === SIP.C.MESSAGE) {\n              message = new SIP.ServerContext(this, request);\n              message.body = request.body;\n              message.content_type = request.getHeader('Content-Type') || 'text/plain';\n              request.reply(200, null);\n              this.emit('message', message);\n            } else if (method !== SIP.C.INVITE && method !== SIP.C.ACK) {\n              // Let those methods pass through to normal processing for now.\n              transaction = new SIP.ServerContext(this, request);\n            } // Initial Request\n\n\n            if (!request.to_tag) {\n              switch (method) {\n                case SIP.C.INVITE:\n                  replaces = this.configuration.replaces !== SIP.C.supported.UNSUPPORTED && request.parseHeader('replaces');\n\n                  if (replaces) {\n                    replacedDialog = this.dialogs[replaces.call_id + replaces.replaces_to_tag + replaces.replaces_from_tag];\n\n                    if (!replacedDialog) {\n                      //Replaced header without a matching dialog, reject\n                      request.reply_sl(481, null);\n                      return;\n                    } else if (replacedDialog.owner.status === SIP.Session.C.STATUS_TERMINATED) {\n                      request.reply_sl(603, null);\n                      return;\n                    } else if (replacedDialog.state === SIP.Dialog.C.STATUS_CONFIRMED && replaces.early_only) {\n                      request.reply_sl(486, null);\n                      return;\n                    }\n                  }\n\n                  var isMediaSupported = this.configuration.mediaHandlerFactory.isSupported;\n\n                  if (!isMediaSupported || isMediaSupported()) {\n                    session = new SIP.InviteServerContext(this, request);\n                    session.replacee = replacedDialog && replacedDialog.owner;\n                    session.on('invite', function () {\n                      self.emit('invite', this);\n                    });\n                  } else {\n                    this.logger.warn('INVITE received but WebRTC is not supported');\n                    request.reply(488);\n                  }\n\n                  break;\n\n                case SIP.C.BYE:\n                  // Out of dialog BYE received\n                  request.reply(481);\n                  break;\n\n                case SIP.C.CANCEL:\n                  session = this.findSession(request);\n\n                  if (session) {\n                    session.receiveRequest(request);\n                  } else {\n                    this.logger.warn('received CANCEL request for a non existent session');\n                  }\n\n                  break;\n\n                case SIP.C.ACK:\n                  /* Absorb it.\n                   * ACK request without a corresponding Invite Transaction\n                   * and without To tag.\n                   */\n                  break;\n\n                case SIP.C.NOTIFY:\n                  if (this.configuration.allowLegacyNotifications && this.listeners('notify').length > 0) {\n                    request.reply(200, null);\n                    self.emit('notify', {\n                      request: request\n                    });\n                  } else {\n                    request.reply(481, 'Subscription does not exist');\n                  }\n\n                  break;\n\n                default:\n                  request.reply(405);\n                  break;\n              }\n            } // In-dialog request\n            else {\n              dialog = this.findDialog(request);\n\n              if (dialog) {\n                if (method === SIP.C.INVITE) {\n                  new SIP.Transactions.InviteServerTransaction(request, this);\n                }\n\n                dialog.receiveRequest(request);\n              } else if (method === SIP.C.NOTIFY) {\n                session = this.findSession(request);\n                earlySubscription = this.findEarlySubscription(request);\n\n                if (session) {\n                  session.receiveRequest(request);\n                } else if (earlySubscription) {\n                  earlySubscription.receiveRequest(request);\n                } else {\n                  this.logger.warn('received NOTIFY request for a non existent session or subscription');\n                  request.reply(481, 'Subscription does not exist');\n                }\n              }\n              /* RFC3261 12.2.2\n               * Request with to tag, but no matching dialog found.\n               * Exception: ACK for an Invite request for which a dialog has not\n               * been created.\n               */\n              else {\n                if (method !== SIP.C.ACK) {\n                  request.reply(481);\n                }\n              }\n            }\n          }; //=================\n          // Utils\n          //=================\n\n          /**\n           * Get the session to which the request belongs to, if any.\n           * @private\n           * @param {SIP.IncomingRequest} request.\n           * @returns {SIP.OutgoingSession|SIP.IncomingSession|null}\n           */\n\n\n          UA.prototype.findSession = function (request) {\n            return this.sessions[request.call_id + request.from_tag] || this.sessions[request.call_id + request.to_tag] || null;\n          };\n          /**\n           * Get the dialog to which the request belongs to, if any.\n           * @private\n           * @param {SIP.IncomingRequest}\n           * @returns {SIP.Dialog|null}\n           */\n\n\n          UA.prototype.findDialog = function (request) {\n            return this.dialogs[request.call_id + request.from_tag + request.to_tag] || this.dialogs[request.call_id + request.to_tag + request.from_tag] || null;\n          };\n          /**\n           * Get the subscription which has not been confirmed to which the request belongs to, if any\n           * @private\n           * @param {SIP.IncomingRequest}\n           * @returns {SIP.Subscription|null}\n           */\n\n\n          UA.prototype.findEarlySubscription = function (request) {\n            return this.earlySubscriptions[request.call_id + request.to_tag + request.getHeader('event')] || null;\n          };\n          /**\n           * Retrieve the next server to which connect.\n           * @private\n           * @returns {Object} ws_server\n           */\n\n\n          UA.prototype.getNextWsServer = function () {\n            // Order servers by weight\n            var idx,\n                length,\n                ws_server,\n                candidates = [];\n            length = this.configuration.wsServers.length;\n\n            for (idx = 0; idx < length; idx++) {\n              ws_server = this.configuration.wsServers[idx];\n\n              if (ws_server.status === SIP.Transport.C.STATUS_ERROR) {\n                continue;\n              } else if (candidates.length === 0) {\n                candidates.push(ws_server);\n              } else if (ws_server.weight > candidates[0].weight) {\n                candidates = [ws_server];\n              } else if (ws_server.weight === candidates[0].weight) {\n                candidates.push(ws_server);\n              }\n            }\n\n            idx = Math.floor(Math.random() * candidates.length);\n            return candidates[idx];\n          };\n          /**\n           * Close all sessions on transport error.\n           * @private\n           */\n\n\n          UA.prototype.closeSessionsOnTransportError = function () {\n            var idx; // Run _transportError_ for every Session\n\n            for (idx in this.sessions) {\n              this.sessions[idx].onTransportError();\n            } // Call registerContext _onTransportClosed_\n\n\n            this.registerContext.onTransportClosed();\n          };\n\n          UA.prototype.recoverTransport = function (ua) {\n            var idx, length, k, nextRetry, count, server;\n            ua = ua || this;\n            count = ua.transportRecoverAttempts;\n            length = ua.configuration.wsServers.length;\n\n            for (idx = 0; idx < length; idx++) {\n              ua.configuration.wsServers[idx].status = 0;\n            }\n\n            server = ua.getNextWsServer();\n            k = Math.floor(Math.random() * Math.pow(2, count) + 1);\n            nextRetry = k * ua.configuration.connectionRecoveryMinInterval;\n\n            if (nextRetry > ua.configuration.connectionRecoveryMaxInterval) {\n              this.logger.log('time for next connection attempt exceeds connectionRecoveryMaxInterval, resetting counter');\n              nextRetry = ua.configuration.connectionRecoveryMinInterval;\n              count = 0;\n            }\n\n            this.logger.log('next connection attempt in ' + nextRetry + ' seconds');\n            this.transportRecoveryTimer = SIP.Timers.setTimeout(function () {\n              ua.transportRecoverAttempts = count + 1;\n              new SIP.Transport(ua, server);\n            }, nextRetry * 1000);\n          };\n\n          function checkAuthenticationFactory(authenticationFactory) {\n            if (!(authenticationFactory instanceof Function)) {\n              return;\n            }\n\n            if (!authenticationFactory.initialize) {\n              authenticationFactory.initialize = function initialize() {\n                return SIP.Utils.Promise.resolve();\n              };\n            }\n\n            return authenticationFactory;\n          }\n          /**\n           * Configuration load.\n           * @private\n           * returns {Boolean}\n           */\n\n\n          UA.prototype.loadConfig = function (configuration) {\n            // Settings and default values\n            var parameter,\n                value,\n                checked_value,\n                hostportParams,\n                registrarServer,\n                settings = {\n              /* Host address\n              * Value to be set in Via sent_by and host part of Contact FQDN\n              */\n              viaHost: SIP.Utils.createRandomToken(12) + '.invalid',\n              uri: new SIP.URI('sip', 'anonymous.' + SIP.Utils.createRandomToken(6), 'anonymous.invalid', null, null),\n              wsServers: [{\n                scheme: 'WSS',\n                sip_uri: '<sip:edge.sip.onsip.com;transport=ws;lr>',\n                status: 0,\n                weight: 0,\n                ws_uri: 'wss://edge.sip.onsip.com'\n              }],\n              //Custom Configuration Settings\n              custom: {},\n              //Display name\n              displayName: '',\n              // Password\n              password: null,\n              // Registration parameters\n              registerExpires: 600,\n              register: true,\n              registrarServer: null,\n              // Transport related parameters\n              wsServerMaxReconnection: 3,\n              wsServerReconnectionTimeout: 4,\n              connectionRecoveryMinInterval: 2,\n              connectionRecoveryMaxInterval: 30,\n              keepAliveInterval: 0,\n              extraSupported: [],\n              usePreloadedRoute: false,\n              //string to be inserted into User-Agent request header\n              userAgentString: SIP.C.USER_AGENT,\n              // Session parameters\n              iceCheckingTimeout: 5000,\n              noAnswerTimeout: 60,\n              stunServers: ['stun:stun.l.google.com:19302'],\n              turnServers: [],\n              // Logging parameters\n              traceSip: false,\n              // Hacks\n              hackViaTcp: false,\n              hackIpInContact: false,\n              hackWssInTransport: false,\n              hackAllowUnregisteredOptionTags: false,\n              hackCleanJitsiSdpImageattr: false,\n              hackStripTcp: false,\n              contactTransport: 'ws',\n              forceRport: false,\n              //autostarting\n              autostart: true,\n              autostop: true,\n              //Reliable Provisional Responses\n              rel100: SIP.C.supported.UNSUPPORTED,\n              // Replaces header (RFC 3891)\n              // http://tools.ietf.org/html/rfc3891\n              replaces: SIP.C.supported.UNSUPPORTED,\n              mediaHandlerFactory: SIP.WebRTC.MediaHandler.defaultFactory,\n              authenticationFactory: checkAuthenticationFactory(function authenticationFactory(ua) {\n                return new SIP.DigestAuthentication(ua);\n              }),\n              allowLegacyNotifications: false\n            }; // Pre-Configuration\n\n            function aliasUnderscored(parameter, logger) {\n              var underscored = parameter.replace(/([a-z][A-Z])/g, function (m) {\n                return m[0] + '_' + m[1].toLowerCase();\n              });\n\n              if (parameter === underscored) {\n                return;\n              }\n\n              var hasParameter = configuration.hasOwnProperty(parameter);\n\n              if (configuration.hasOwnProperty(underscored)) {\n                logger.warn(underscored + ' is deprecated, please use ' + parameter);\n\n                if (hasParameter) {\n                  logger.warn(parameter + ' overriding ' + underscored);\n                }\n              }\n\n              configuration[parameter] = hasParameter ? configuration[parameter] : configuration[underscored];\n            }\n\n            var configCheck = this.getConfigurationCheck(); // Check Mandatory parameters\n\n            for (parameter in configCheck.mandatory) {\n              aliasUnderscored(parameter, this.logger);\n\n              if (!configuration.hasOwnProperty(parameter)) {\n                throw new SIP.Exceptions.ConfigurationError(parameter);\n              } else {\n                value = configuration[parameter];\n                checked_value = configCheck.mandatory[parameter](value);\n\n                if (checked_value !== undefined) {\n                  settings[parameter] = checked_value;\n                } else {\n                  throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                }\n              }\n            }\n\n            SIP.Utils.optionsOverride(configuration, 'rel100', 'reliable', true, this.logger, SIP.C.supported.UNSUPPORTED);\n            var emptyArraysAllowed = ['stunServers', 'turnServers']; // Check Optional parameters\n\n            for (parameter in configCheck.optional) {\n              aliasUnderscored(parameter, this.logger);\n\n              if (configuration.hasOwnProperty(parameter)) {\n                value = configuration[parameter]; // If the parameter value is an empty array, but shouldn't be, apply its default value.\n\n                if (value instanceof Array && value.length === 0 && emptyArraysAllowed.indexOf(parameter) < 0) {\n                  continue;\n                } // If the parameter value is null, empty string, or undefined then apply its default value.\n\n\n                if (value === null || value === \"\" || value === undefined) {\n                  continue;\n                } // If it's a number with NaN value then also apply its default value.\n                // NOTE: JS does not allow \"value === NaN\", the following does the work:\n                else if (typeof value === 'number' && isNaN(value)) {\n                  continue;\n                }\n\n                checked_value = configCheck.optional[parameter](value);\n\n                if (checked_value !== undefined) {\n                  settings[parameter] = checked_value;\n                } else {\n                  throw new SIP.Exceptions.ConfigurationError(parameter, value);\n                }\n              }\n            } // Sanity Checks\n            // Connection recovery intervals\n\n\n            if (settings.connectionRecoveryMaxInterval < settings.connectionRecoveryMinInterval) {\n              throw new SIP.Exceptions.ConfigurationError('connectionRecoveryMaxInterval', settings.connectionRecoveryMaxInterval);\n            } // Post Configuration Process\n            // Allow passing 0 number as displayName.\n\n\n            if (settings.displayName === 0) {\n              settings.displayName = '0';\n            } // Instance-id for GRUU\n\n\n            if (!settings.instanceId) {\n              settings.instanceId = SIP.Utils.newUUID();\n            } // sipjsId instance parameter. Static random tag of length 5\n\n\n            settings.sipjsId = SIP.Utils.createRandomToken(5); // String containing settings.uri without scheme and user.\n\n            hostportParams = settings.uri.clone();\n            hostportParams.user = null;\n            settings.hostportParams = hostportParams.toRaw().replace(/^sip:/i, '');\n            /* Check whether authorizationUser is explicitly defined.\n             * Take 'settings.uri.user' value if not.\n             */\n\n            if (!settings.authorizationUser) {\n              settings.authorizationUser = settings.uri.user;\n            }\n            /* If no 'registrarServer' is set use the 'uri' value without user portion. */\n\n\n            if (!settings.registrarServer) {\n              registrarServer = settings.uri.clone();\n              registrarServer.user = null;\n              settings.registrarServer = registrarServer;\n            } // User noAnswerTimeout\n\n\n            settings.noAnswerTimeout = settings.noAnswerTimeout * 1000; // Via Host\n\n            if (settings.hackIpInContact) {\n              if (typeof settings.hackIpInContact === 'boolean') {\n                settings.viaHost = SIP.Utils.getRandomTestNetIP();\n              } else if (typeof settings.hackIpInContact === 'string') {\n                settings.viaHost = settings.hackIpInContact;\n              }\n            } // Contact transport parameter\n\n\n            if (settings.hackWssInTransport) {\n              settings.contactTransport = 'wss';\n            }\n\n            this.contact = {\n              pub_gruu: null,\n              temp_gruu: null,\n              uri: new SIP.URI('sip', SIP.Utils.createRandomToken(8), settings.viaHost, null, {\n                transport: settings.contactTransport\n              }),\n              toString: function (options) {\n                options = options || {};\n                var anonymous = options.anonymous || null,\n                    outbound = options.outbound || null,\n                    contact = '<';\n\n                if (anonymous) {\n                  contact += (this.temp_gruu || 'sip:anonymous@anonymous.invalid;transport=' + settings.contactTransport).toString();\n                } else {\n                  contact += (this.pub_gruu || this.uri).toString();\n                }\n\n                if (outbound) {\n                  contact += ';ob';\n                }\n\n                contact += '>';\n                return contact;\n              }\n            }; // media overrides mediaConstraints\n\n            SIP.Utils.optionsOverride(settings, 'media', 'mediaConstraints', true, this.logger);\n            var skeleton = {}; // Fill the value of the configuration_skeleton\n\n            for (parameter in settings) {\n              skeleton[parameter] = {\n                value: settings[parameter],\n                writable: parameter === 'register' || parameter === 'custom',\n                configurable: false\n              };\n            }\n\n            Object.defineProperties(this.configuration, skeleton);\n            this.logger.log('configuration parameters after validation:');\n\n            for (parameter in settings) {\n              switch (parameter) {\n                case 'uri':\n                case 'registrarServer':\n                case 'mediaHandlerFactory':\n                  this.logger.log('· ' + parameter + ': ' + settings[parameter]);\n                  break;\n\n                case 'password':\n                  this.logger.log('· ' + parameter + ': ' + 'NOT SHOWN');\n                  break;\n\n                default:\n                  this.logger.log('· ' + parameter + ': ' + JSON.stringify(settings[parameter]));\n              }\n            }\n\n            return;\n          };\n          /**\n           * Configuration checker.\n           * @private\n           * @return {Boolean}\n           */\n\n\n          UA.prototype.getConfigurationCheck = function () {\n            return {\n              mandatory: {},\n              optional: {\n                uri: function (uri) {\n                  var parsed;\n\n                  if (!/^sip:/i.test(uri)) {\n                    uri = SIP.C.SIP + ':' + uri;\n                  }\n\n                  parsed = SIP.URI.parse(uri);\n\n                  if (!parsed) {\n                    return;\n                  } else if (!parsed.user) {\n                    return;\n                  } else {\n                    return parsed;\n                  }\n                },\n                //Note: this function used to call 'this.logger.error' but calling 'this' with anything here is invalid\n                wsServers: function (wsServers) {\n                  var idx, length, url;\n                  /* Allow defining wsServers parameter as:\n                   *  String: \"host\"\n                   *  Array of Strings: [\"host1\", \"host2\"]\n                   *  Array of Objects: [{ws_uri:\"host1\", weight:1}, {ws_uri:\"host2\", weight:0}]\n                   *  Array of Objects and Strings: [{ws_uri:\"host1\"}, \"host2\"]\n                   */\n\n                  if (typeof wsServers === 'string') {\n                    wsServers = [{\n                      ws_uri: wsServers\n                    }];\n                  } else if (wsServers instanceof Array) {\n                    length = wsServers.length;\n\n                    for (idx = 0; idx < length; idx++) {\n                      if (typeof wsServers[idx] === 'string') {\n                        wsServers[idx] = {\n                          ws_uri: wsServers[idx]\n                        };\n                      }\n                    }\n                  } else {\n                    return;\n                  }\n\n                  if (wsServers.length === 0) {\n                    return false;\n                  }\n\n                  length = wsServers.length;\n\n                  for (idx = 0; idx < length; idx++) {\n                    if (!wsServers[idx].ws_uri) {\n                      return;\n                    }\n\n                    if (wsServers[idx].weight && !Number(wsServers[idx].weight)) {\n                      return;\n                    }\n\n                    url = SIP.Grammar.parse(wsServers[idx].ws_uri, 'absoluteURI');\n\n                    if (url === -1) {\n                      return;\n                    } else if (['wss', 'ws', 'udp'].indexOf(url.scheme) < 0) {\n                      return;\n                    } else {\n                      wsServers[idx].sip_uri = '<sip:' + url.host + (url.port ? ':' + url.port : '') + ';transport=' + url.scheme.replace(/^wss$/i, 'ws') + ';lr>';\n\n                      if (!wsServers[idx].weight) {\n                        wsServers[idx].weight = 0;\n                      }\n\n                      wsServers[idx].status = 0;\n                      wsServers[idx].scheme = url.scheme.toUpperCase();\n                    }\n                  }\n\n                  return wsServers;\n                },\n                authorizationUser: function (authorizationUser) {\n                  if (SIP.Grammar.parse('\"' + authorizationUser + '\"', 'quoted_string') === -1) {\n                    return;\n                  } else {\n                    return authorizationUser;\n                  }\n                },\n                connectionRecoveryMaxInterval: function (connectionRecoveryMaxInterval) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(connectionRecoveryMaxInterval)) {\n                    value = Number(connectionRecoveryMaxInterval);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                connectionRecoveryMinInterval: function (connectionRecoveryMinInterval) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(connectionRecoveryMinInterval)) {\n                    value = Number(connectionRecoveryMinInterval);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                displayName: function (displayName) {\n                  if (SIP.Grammar.parse('\"' + displayName + '\"', 'displayName') === -1) {\n                    return;\n                  } else {\n                    return displayName;\n                  }\n                },\n                hackViaTcp: function (hackViaTcp) {\n                  if (typeof hackViaTcp === 'boolean') {\n                    return hackViaTcp;\n                  }\n                },\n                hackIpInContact: function (hackIpInContact) {\n                  if (typeof hackIpInContact === 'boolean') {\n                    return hackIpInContact;\n                  } else if (typeof hackIpInContact === 'string' && SIP.Grammar.parse(hackIpInContact, 'host') !== -1) {\n                    return hackIpInContact;\n                  }\n                },\n                iceCheckingTimeout: function (iceCheckingTimeout) {\n                  if (SIP.Utils.isDecimal(iceCheckingTimeout)) {\n                    return Math.max(500, iceCheckingTimeout);\n                  }\n                },\n                hackWssInTransport: function (hackWssInTransport) {\n                  if (typeof hackWssInTransport === 'boolean') {\n                    return hackWssInTransport;\n                  }\n                },\n                hackAllowUnregisteredOptionTags: function (hackAllowUnregisteredOptionTags) {\n                  if (typeof hackAllowUnregisteredOptionTags === 'boolean') {\n                    return hackAllowUnregisteredOptionTags;\n                  }\n                },\n                hackCleanJitsiSdpImageattr: function (hackCleanJitsiSdpImageattr) {\n                  if (typeof hackCleanJitsiSdpImageattr === 'boolean') {\n                    return hackCleanJitsiSdpImageattr;\n                  }\n                },\n                hackStripTcp: function (hackStripTcp) {\n                  if (typeof hackStripTcp === 'boolean') {\n                    return hackStripTcp;\n                  }\n                },\n                contactTransport: function (contactTransport) {\n                  if (typeof contactTransport === 'string') {\n                    return contactTransport;\n                  }\n                },\n                forceRport: function (forceRport) {\n                  if (typeof forceRport === 'boolean') {\n                    return forceRport;\n                  }\n                },\n                instanceId: function (instanceId) {\n                  if (typeof instanceId !== 'string') {\n                    return;\n                  }\n\n                  if (/^uuid:/i.test(instanceId)) {\n                    instanceId = instanceId.substr(5);\n                  }\n\n                  if (SIP.Grammar.parse(instanceId, 'uuid') === -1) {\n                    return;\n                  } else {\n                    return instanceId;\n                  }\n                },\n                keepAliveInterval: function (keepAliveInterval) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(keepAliveInterval)) {\n                    value = Number(keepAliveInterval);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                extraSupported: function (optionTags) {\n                  var idx, length;\n\n                  if (!(optionTags instanceof Array)) {\n                    return;\n                  }\n\n                  length = optionTags.length;\n\n                  for (idx = 0; idx < length; idx++) {\n                    if (typeof optionTags[idx] !== 'string') {\n                      return;\n                    }\n                  }\n\n                  return optionTags;\n                },\n                noAnswerTimeout: function (noAnswerTimeout) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(noAnswerTimeout)) {\n                    value = Number(noAnswerTimeout);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                password: function (password) {\n                  return String(password);\n                },\n                rel100: function (rel100) {\n                  if (rel100 === SIP.C.supported.REQUIRED) {\n                    return SIP.C.supported.REQUIRED;\n                  } else if (rel100 === SIP.C.supported.SUPPORTED) {\n                    return SIP.C.supported.SUPPORTED;\n                  } else {\n                    return SIP.C.supported.UNSUPPORTED;\n                  }\n                },\n                replaces: function (replaces) {\n                  if (replaces === SIP.C.supported.REQUIRED) {\n                    return SIP.C.supported.REQUIRED;\n                  } else if (replaces === SIP.C.supported.SUPPORTED) {\n                    return SIP.C.supported.SUPPORTED;\n                  } else {\n                    return SIP.C.supported.UNSUPPORTED;\n                  }\n                },\n                register: function (register) {\n                  if (typeof register === 'boolean') {\n                    return register;\n                  }\n                },\n                registerExpires: function (registerExpires) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(registerExpires)) {\n                    value = Number(registerExpires);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                registrarServer: function (registrarServer) {\n                  var parsed;\n\n                  if (typeof registrarServer !== 'string') {\n                    return;\n                  }\n\n                  if (!/^sip:/i.test(registrarServer)) {\n                    registrarServer = SIP.C.SIP + ':' + registrarServer;\n                  }\n\n                  parsed = SIP.URI.parse(registrarServer);\n\n                  if (!parsed) {\n                    return;\n                  } else if (parsed.user) {\n                    return;\n                  } else {\n                    return parsed;\n                  }\n                },\n                stunServers: function (stunServers) {\n                  var idx, length, stun_server;\n\n                  if (typeof stunServers === 'string') {\n                    stunServers = [stunServers];\n                  } else if (!(stunServers instanceof Array)) {\n                    return;\n                  }\n\n                  length = stunServers.length;\n\n                  for (idx = 0; idx < length; idx++) {\n                    stun_server = stunServers[idx];\n\n                    if (!/^stuns?:/.test(stun_server)) {\n                      stun_server = 'stun:' + stun_server;\n                    }\n\n                    if (SIP.Grammar.parse(stun_server, 'stun_URI') === -1) {\n                      return;\n                    } else {\n                      stunServers[idx] = stun_server;\n                    }\n                  }\n\n                  return stunServers;\n                },\n                traceSip: function (traceSip) {\n                  if (typeof traceSip === 'boolean') {\n                    return traceSip;\n                  }\n                },\n                turnServers: function (turnServers) {\n                  var idx, jdx, length, turn_server, num_turn_server_urls, url;\n\n                  if (turnServers instanceof Array) {// Do nothing\n                  } else {\n                    turnServers = [turnServers];\n                  }\n\n                  length = turnServers.length;\n\n                  for (idx = 0; idx < length; idx++) {\n                    turn_server = turnServers[idx]; //Backwards compatibility: Allow defining the turn_server url with the 'server' property.\n\n                    if (turn_server.server) {\n                      turn_server.urls = [turn_server.server];\n                    }\n\n                    if (!turn_server.urls) {\n                      return;\n                    }\n\n                    if (turn_server.urls instanceof Array) {\n                      num_turn_server_urls = turn_server.urls.length;\n                    } else {\n                      turn_server.urls = [turn_server.urls];\n                      num_turn_server_urls = 1;\n                    }\n\n                    for (jdx = 0; jdx < num_turn_server_urls; jdx++) {\n                      url = turn_server.urls[jdx];\n\n                      if (!/^turns?:/.test(url)) {\n                        url = 'turn:' + url;\n                      }\n\n                      if (SIP.Grammar.parse(url, 'turn_URI') === -1) {\n                        return;\n                      }\n                    }\n                  }\n\n                  return turnServers;\n                },\n                rtcpMuxPolicy: function (rtcpMuxPolicy) {\n                  if (typeof rtcpMuxPolicy === 'string') {\n                    return rtcpMuxPolicy;\n                  }\n                },\n                userAgentString: function (userAgentString) {\n                  if (typeof userAgentString === 'string') {\n                    return userAgentString;\n                  }\n                },\n                usePreloadedRoute: function (usePreloadedRoute) {\n                  if (typeof usePreloadedRoute === 'boolean') {\n                    return usePreloadedRoute;\n                  }\n                },\n                wsServerMaxReconnection: function (wsServerMaxReconnection) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(wsServerMaxReconnection)) {\n                    value = Number(wsServerMaxReconnection);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                wsServerReconnectionTimeout: function (wsServerReconnectionTimeout) {\n                  var value;\n\n                  if (SIP.Utils.isDecimal(wsServerReconnectionTimeout)) {\n                    value = Number(wsServerReconnectionTimeout);\n\n                    if (value > 0) {\n                      return value;\n                    }\n                  }\n                },\n                autostart: function (autostart) {\n                  if (typeof autostart === 'boolean') {\n                    return autostart;\n                  }\n                },\n                autostop: function (autostop) {\n                  if (typeof autostop === 'boolean') {\n                    return autostop;\n                  }\n                },\n                mediaHandlerFactory: function (mediaHandlerFactory) {\n                  if (mediaHandlerFactory instanceof Function) {\n                    var promisifiedFactory = function promisifiedFactory() {\n                      var mediaHandler = mediaHandlerFactory.apply(this, arguments);\n\n                      function patchMethod(methodName) {\n                        var method = mediaHandler[methodName];\n\n                        if (method.length > 1) {\n                          var callbacksFirst = methodName === 'getDescription';\n                          mediaHandler[methodName] = SIP.Utils.promisify(mediaHandler, methodName, callbacksFirst);\n                        }\n                      }\n\n                      patchMethod('getDescription');\n                      patchMethod('setDescription');\n                      return mediaHandler;\n                    };\n\n                    promisifiedFactory.isSupported = mediaHandlerFactory.isSupported;\n                    return promisifiedFactory;\n                  }\n                },\n                authenticationFactory: checkAuthenticationFactory,\n                allowLegacyNotifications: function (allowLegacyNotifications) {\n                  if (typeof allowLegacyNotifications === 'boolean') {\n                    return allowLegacyNotifications;\n                  }\n                },\n                custom: function (custom) {\n                  if (typeof custom === 'object') {\n                    return custom;\n                  }\n                }\n              }\n            };\n          };\n\n          UA.C = C;\n          SIP.UA = UA;\n        };\n      }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n    }, {}],\n    30: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview SIP URI\n       */\n\n      /**\n       * @augments SIP\n       * @class Class creating a SIP URI.\n       *\n       * @param {String} [scheme]\n       * @param {String} [user]\n       * @param {String} host\n       * @param {String} [port]\n       * @param {Object} [parameters]\n       * @param {Object} [headers]\n       *\n       */\n\n      module.exports = function (SIP) {\n        var URI;\n\n        URI = function (scheme, user, host, port, parameters, headers) {\n          var param, header, raw, normal; // Checks\n\n          if (!host) {\n            throw new TypeError('missing or invalid \"host\" parameter');\n          } // Initialize parameters\n\n\n          scheme = scheme || SIP.C.SIP;\n          this.parameters = {};\n          this.headers = {};\n\n          for (param in parameters) {\n            this.setParam(param, parameters[param]);\n          }\n\n          for (header in headers) {\n            this.setHeader(header, headers[header]);\n          } // Raw URI\n\n\n          raw = {\n            scheme: scheme,\n            user: user,\n            host: host,\n            port: port\n          }; // Normalized URI\n\n          normal = {\n            scheme: scheme.toLowerCase(),\n            user: user,\n            host: host.toLowerCase(),\n            port: port\n          };\n          Object.defineProperties(this, {\n            _normal: {\n              get: function () {\n                return normal;\n              }\n            },\n            _raw: {\n              get: function () {\n                return raw;\n              }\n            },\n            scheme: {\n              get: function () {\n                return normal.scheme;\n              },\n              set: function (value) {\n                raw.scheme = value;\n                normal.scheme = value.toLowerCase();\n              }\n            },\n            user: {\n              get: function () {\n                return normal.user;\n              },\n              set: function (value) {\n                normal.user = raw.user = value;\n              }\n            },\n            host: {\n              get: function () {\n                return normal.host;\n              },\n              set: function (value) {\n                raw.host = value;\n                normal.host = value.toLowerCase();\n              }\n            },\n            aor: {\n              get: function () {\n                return normal.user + '@' + normal.host;\n              }\n            },\n            port: {\n              get: function () {\n                return normal.port;\n              },\n              set: function (value) {\n                normal.port = raw.port = value === 0 ? value : parseInt(value, 10) || null;\n              }\n            }\n          });\n        };\n\n        URI.prototype = {\n          setParam: function (key, value) {\n            if (key) {\n              this.parameters[key.toLowerCase()] = typeof value === 'undefined' || value === null ? null : value.toString().toLowerCase();\n            }\n          },\n          getParam: function (key) {\n            if (key) {\n              return this.parameters[key.toLowerCase()];\n            }\n          },\n          hasParam: function (key) {\n            if (key) {\n              return this.parameters.hasOwnProperty(key.toLowerCase()) && true || false;\n            }\n          },\n          deleteParam: function (parameter) {\n            var value;\n            parameter = parameter.toLowerCase();\n\n            if (this.parameters.hasOwnProperty(parameter)) {\n              value = this.parameters[parameter];\n              delete this.parameters[parameter];\n              return value;\n            }\n          },\n          clearParams: function () {\n            this.parameters = {};\n          },\n          setHeader: function (name, value) {\n            this.headers[SIP.Utils.headerize(name)] = value instanceof Array ? value : [value];\n          },\n          getHeader: function (name) {\n            if (name) {\n              return this.headers[SIP.Utils.headerize(name)];\n            }\n          },\n          hasHeader: function (name) {\n            if (name) {\n              return this.headers.hasOwnProperty(SIP.Utils.headerize(name)) && true || false;\n            }\n          },\n          deleteHeader: function (header) {\n            var value;\n            header = SIP.Utils.headerize(header);\n\n            if (this.headers.hasOwnProperty(header)) {\n              value = this.headers[header];\n              delete this.headers[header];\n              return value;\n            }\n          },\n          clearHeaders: function () {\n            this.headers = {};\n          },\n          clone: function () {\n            return new URI(this._raw.scheme, this._raw.user, this._raw.host, this._raw.port, JSON.parse(JSON.stringify(this.parameters)), JSON.parse(JSON.stringify(this.headers)));\n          },\n          toRaw: function () {\n            return this._toString(this._raw);\n          },\n          toString: function () {\n            return this._toString(this._normal);\n          },\n          _toString: function (uri) {\n            var header,\n                parameter,\n                idx,\n                uriString,\n                headers = [];\n            uriString = uri.scheme + ':'; // add slashes if it's not a sip(s) URI\n\n            if (!uri.scheme.toLowerCase().match(\"^sips?$\")) {\n              uriString += \"//\";\n            }\n\n            if (uri.user) {\n              uriString += SIP.Utils.escapeUser(uri.user) + '@';\n            }\n\n            uriString += uri.host;\n\n            if (uri.port || uri.port === 0) {\n              uriString += ':' + uri.port;\n            }\n\n            for (parameter in this.parameters) {\n              uriString += ';' + parameter;\n\n              if (this.parameters[parameter] !== null) {\n                uriString += '=' + this.parameters[parameter];\n              }\n            }\n\n            for (header in this.headers) {\n              for (idx in this.headers[header]) {\n                headers.push(header + '=' + this.headers[header][idx]);\n              }\n            }\n\n            if (headers.length > 0) {\n              uriString += '?' + headers.join('&');\n            }\n\n            return uriString;\n          }\n        };\n        /**\n          * Parse the given string and returns a SIP.URI instance or undefined if\n          * it is an invalid URI.\n          * @public\n          * @param {String} uri\n          */\n\n        URI.parse = function (uri) {\n          uri = SIP.Grammar.parse(uri, 'SIP_URI');\n\n          if (uri !== -1) {\n            return uri;\n          } else {\n            return undefined;\n          }\n        };\n\n        SIP.URI = URI;\n      };\n    }, {}],\n    31: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview Utils\n       */\n\n      module.exports = function (SIP, environment) {\n        var Utils;\n        Utils = {\n          Promise: environment.Promise,\n          defer: function defer() {\n            var deferred = {};\n            deferred.promise = new Utils.Promise(function (resolve, reject) {\n              deferred.resolve = resolve;\n              deferred.reject = reject;\n            });\n            return deferred;\n          },\n          promisify: function promisify(object, methodName, callbacksFirst) {\n            var oldMethod = object[methodName];\n            return function promisifiedMethod(arg, onSuccess, onFailure) {\n              return new Utils.Promise(function (resolve, reject) {\n                var oldArgs = [arg, resolve, reject];\n\n                if (callbacksFirst) {\n                  oldArgs = [resolve, reject, arg];\n                }\n\n                oldMethod.apply(object, oldArgs);\n              }).then(onSuccess, onFailure);\n            };\n          },\n          augment: function (object, constructor, args, override) {\n            var idx, proto; // Add public properties from constructor's prototype onto object\n\n            proto = constructor.prototype;\n\n            for (idx in proto) {\n              if (override || object[idx] === undefined) {\n                object[idx] = proto[idx];\n              }\n            } // Construct the object as though it were just created by constructor\n\n\n            constructor.apply(object, args);\n          },\n          optionsOverride: function (options, winner, loser, isDeprecated, logger, defaultValue) {\n            if (isDeprecated && options[loser]) {\n              logger.warn(loser + ' is deprecated, please use ' + winner + ' instead');\n            }\n\n            if (options[winner] && options[loser]) {\n              logger.warn(winner + ' overriding ' + loser);\n            }\n\n            options[winner] = options[winner] || options[loser] || defaultValue;\n          },\n          str_utf8_length: function (string) {\n            return encodeURIComponent(string).replace(/%[A-F\\d]{2}/g, 'U').length;\n          },\n          generateFakeSDP: function (body) {\n            if (!body) {\n              return;\n            }\n\n            var start = body.indexOf('o=');\n            var end = body.indexOf('\\r\\n', start);\n            return 'v=0\\r\\n' + body.slice(start, end) + '\\r\\ns=-\\r\\nt=0 0\\r\\nc=IN IP4 0.0.0.0';\n          },\n          isFunction: function (fn) {\n            if (fn !== undefined) {\n              return Object.prototype.toString.call(fn) === '[object Function]';\n            } else {\n              return false;\n            }\n          },\n          isDecimal: function (num) {\n            return !isNaN(num) && parseFloat(num) === parseInt(num, 10);\n          },\n          createRandomToken: function (size, base) {\n            var i,\n                r,\n                token = '';\n            base = base || 32;\n\n            for (i = 0; i < size; i++) {\n              r = Math.random() * base | 0;\n              token += r.toString(base);\n            }\n\n            return token;\n          },\n          newTag: function () {\n            return SIP.Utils.createRandomToken(SIP.UA.C.TAG_LENGTH);\n          },\n          // http://stackoverflow.com/users/109538/broofa\n          newUUID: function () {\n            var UUID = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n              var r = Math.random() * 16 | 0,\n                  v = c === 'x' ? r : r & 0x3 | 0x8;\n              return v.toString(16);\n            });\n            return UUID;\n          },\n          hostType: function (host) {\n            if (!host) {\n              return;\n            } else {\n              host = SIP.Grammar.parse(host, 'host');\n\n              if (host !== -1) {\n                return host.host_type;\n              }\n            }\n          },\n\n          /**\n          * Normalize SIP URI.\n          * NOTE: It does not allow a SIP URI without username.\n          * Accepts 'sip', 'sips' and 'tel' URIs and convert them into 'sip'.\n          * Detects the domain part (if given) and properly hex-escapes the user portion.\n          * If the user portion has only 'tel' number symbols the user portion is clean of 'tel' visual separators.\n          * @private\n          * @param {String} target\n          * @param {String} [domain]\n          */\n          normalizeTarget: function (target, domain) {\n            var uri, target_array, target_user, target_domain; // If no target is given then raise an error.\n\n            if (!target) {\n              return; // If a SIP.URI instance is given then return it.\n            } else if (target instanceof SIP.URI) {\n              return target; // If a string is given split it by '@':\n              // - Last fragment is the desired domain.\n              // - Otherwise append the given domain argument.\n            } else if (typeof target === 'string') {\n              target_array = target.split('@');\n\n              switch (target_array.length) {\n                case 1:\n                  if (!domain) {\n                    return;\n                  }\n\n                  target_user = target;\n                  target_domain = domain;\n                  break;\n\n                case 2:\n                  target_user = target_array[0];\n                  target_domain = target_array[1];\n                  break;\n\n                default:\n                  target_user = target_array.slice(0, target_array.length - 1).join('@');\n                  target_domain = target_array[target_array.length - 1];\n              } // Remove the URI scheme (if present).\n\n\n              target_user = target_user.replace(/^(sips?|tel):/i, ''); // Remove 'tel' visual separators if the user portion just contains 'tel' number symbols.\n\n              if (/^[\\-\\.\\(\\)]*\\+?[0-9\\-\\.\\(\\)]+$/.test(target_user)) {\n                target_user = target_user.replace(/[\\-\\.\\(\\)]/g, '');\n              } // Build the complete SIP URI.\n\n\n              target = SIP.C.SIP + ':' + SIP.Utils.escapeUser(target_user) + '@' + target_domain; // Finally parse the resulting URI.\n\n              if (uri = SIP.URI.parse(target)) {\n                return uri;\n              } else {\n                return;\n              }\n            } else {\n              return;\n            }\n          },\n\n          /**\n          * Hex-escape a SIP URI user.\n          * @private\n          * @param {String} user\n          */\n          escapeUser: function (user) {\n            // Don't hex-escape ':' (%3A), '+' (%2B), '?' (%3F\"), '/' (%2F).\n            return encodeURIComponent(decodeURIComponent(user)).replace(/%3A/ig, ':').replace(/%2B/ig, '+').replace(/%3F/ig, '?').replace(/%2F/ig, '/');\n          },\n          headerize: function (string) {\n            var exceptions = {\n              'Call-Id': 'Call-ID',\n              'Cseq': 'CSeq',\n              'Min-Se': 'Min-SE',\n              'Rack': 'RAck',\n              'Rseq': 'RSeq',\n              'Www-Authenticate': 'WWW-Authenticate'\n            },\n                name = string.toLowerCase().replace(/_/g, '-').split('-'),\n                hname = '',\n                parts = name.length,\n                part;\n\n            for (part = 0; part < parts; part++) {\n              if (part !== 0) {\n                hname += '-';\n              }\n\n              hname += name[part].charAt(0).toUpperCase() + name[part].substring(1);\n            }\n\n            if (exceptions[hname]) {\n              hname = exceptions[hname];\n            }\n\n            return hname;\n          },\n          sipErrorCause: function (status_code) {\n            var cause;\n\n            for (cause in SIP.C.SIP_ERROR_CAUSES) {\n              if (SIP.C.SIP_ERROR_CAUSES[cause].indexOf(status_code) !== -1) {\n                return SIP.C.causes[cause];\n              }\n            }\n\n            return SIP.C.causes.SIP_FAILURE_CODE;\n          },\n          getReasonPhrase: function getReasonPhrase(code, specific) {\n            return specific || SIP.C.REASON_PHRASE[code] || '';\n          },\n          getReasonHeaderValue: function getReasonHeaderValue(code, reason) {\n            reason = SIP.Utils.getReasonPhrase(code, reason);\n            return 'SIP ;cause=' + code + ' ;text=\"' + reason + '\"';\n          },\n          getCancelReason: function getCancelReason(code, reason) {\n            if (code && code < 200 || code > 699) {\n              throw new TypeError('Invalid status_code: ' + code);\n            } else if (code) {\n              return SIP.Utils.getReasonHeaderValue(code, reason);\n            }\n          },\n          buildStatusLine: function buildStatusLine(code, reason) {\n            code = code || null;\n            reason = reason || null; // Validate code and reason values\n\n            if (!code || code < 100 || code > 699) {\n              throw new TypeError('Invalid status_code: ' + code);\n            } else if (reason && typeof reason !== 'string' && !(reason instanceof String)) {\n              throw new TypeError('Invalid reason_phrase: ' + reason);\n            }\n\n            reason = Utils.getReasonPhrase(code, reason);\n            return 'SIP/2.0 ' + code + ' ' + reason + '\\r\\n';\n          },\n\n          /**\n          * Generate a random Test-Net IP (http://tools.ietf.org/html/rfc5735)\n          * @private\n          */\n          getRandomTestNetIP: function () {\n            function getOctet(from, to) {\n              return Math.floor(Math.random() * (to - from + 1) + from);\n            }\n\n            return '192.0.2.' + getOctet(1, 254);\n          },\n          // MD5 (Message-Digest Algorithm) http://www.webtoolkit.info\n          calculateMD5: function (string) {\n            function RotateLeft(lValue, iShiftBits) {\n              return lValue << iShiftBits | lValue >>> 32 - iShiftBits;\n            }\n\n            function AddUnsigned(lX, lY) {\n              var lX4, lY4, lX8, lY8, lResult;\n              lX8 = lX & 0x80000000;\n              lY8 = lY & 0x80000000;\n              lX4 = lX & 0x40000000;\n              lY4 = lY & 0x40000000;\n              lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);\n\n              if (lX4 & lY4) {\n                return lResult ^ 0x80000000 ^ lX8 ^ lY8;\n              }\n\n              if (lX4 | lY4) {\n                if (lResult & 0x40000000) {\n                  return lResult ^ 0xC0000000 ^ lX8 ^ lY8;\n                } else {\n                  return lResult ^ 0x40000000 ^ lX8 ^ lY8;\n                }\n              } else {\n                return lResult ^ lX8 ^ lY8;\n              }\n            }\n\n            function F(x, y, z) {\n              return x & y | ~x & z;\n            }\n\n            function G(x, y, z) {\n              return x & z | y & ~z;\n            }\n\n            function H(x, y, z) {\n              return x ^ y ^ z;\n            }\n\n            function I(x, y, z) {\n              return y ^ (x | ~z);\n            }\n\n            function FF(a, b, c, d, x, s, ac) {\n              a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n              return AddUnsigned(RotateLeft(a, s), b);\n            }\n\n            function GG(a, b, c, d, x, s, ac) {\n              a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n              return AddUnsigned(RotateLeft(a, s), b);\n            }\n\n            function HH(a, b, c, d, x, s, ac) {\n              a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n              return AddUnsigned(RotateLeft(a, s), b);\n            }\n\n            function II(a, b, c, d, x, s, ac) {\n              a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n              return AddUnsigned(RotateLeft(a, s), b);\n            }\n\n            function ConvertToWordArray(string) {\n              var lWordCount;\n              var lMessageLength = string.length;\n              var lNumberOfWords_temp1 = lMessageLength + 8;\n              var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;\n              var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;\n              var lWordArray = Array(lNumberOfWords - 1);\n              var lBytePosition = 0;\n              var lByteCount = 0;\n\n              while (lByteCount < lMessageLength) {\n                lWordCount = (lByteCount - lByteCount % 4) / 4;\n                lBytePosition = lByteCount % 4 * 8;\n                lWordArray[lWordCount] = lWordArray[lWordCount] | string.charCodeAt(lByteCount) << lBytePosition;\n                lByteCount++;\n              }\n\n              lWordCount = (lByteCount - lByteCount % 4) / 4;\n              lBytePosition = lByteCount % 4 * 8;\n              lWordArray[lWordCount] = lWordArray[lWordCount] | 0x80 << lBytePosition;\n              lWordArray[lNumberOfWords - 2] = lMessageLength << 3;\n              lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;\n              return lWordArray;\n            }\n\n            function WordToHex(lValue) {\n              var WordToHexValue = \"\",\n                  WordToHexValue_temp = \"\",\n                  lByte,\n                  lCount;\n\n              for (lCount = 0; lCount <= 3; lCount++) {\n                lByte = lValue >>> lCount * 8 & 255;\n                WordToHexValue_temp = \"0\" + lByte.toString(16);\n                WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);\n              }\n\n              return WordToHexValue;\n            }\n\n            function Utf8Encode(string) {\n              string = string.replace(/\\r\\n/g, \"\\n\");\n              var utftext = \"\";\n\n              for (var n = 0; n < string.length; n++) {\n                var c = string.charCodeAt(n);\n\n                if (c < 128) {\n                  utftext += String.fromCharCode(c);\n                } else if (c > 127 && c < 2048) {\n                  utftext += String.fromCharCode(c >> 6 | 192);\n                  utftext += String.fromCharCode(c & 63 | 128);\n                } else {\n                  utftext += String.fromCharCode(c >> 12 | 224);\n                  utftext += String.fromCharCode(c >> 6 & 63 | 128);\n                  utftext += String.fromCharCode(c & 63 | 128);\n                }\n              }\n\n              return utftext;\n            }\n\n            var x = [];\n            var k, AA, BB, CC, DD, a, b, c, d;\n            var S11 = 7,\n                S12 = 12,\n                S13 = 17,\n                S14 = 22;\n            var S21 = 5,\n                S22 = 9,\n                S23 = 14,\n                S24 = 20;\n            var S31 = 4,\n                S32 = 11,\n                S33 = 16,\n                S34 = 23;\n            var S41 = 6,\n                S42 = 10,\n                S43 = 15,\n                S44 = 21;\n            string = Utf8Encode(string);\n            x = ConvertToWordArray(string);\n            a = 0x67452301;\n            b = 0xEFCDAB89;\n            c = 0x98BADCFE;\n            d = 0x10325476;\n\n            for (k = 0; k < x.length; k += 16) {\n              AA = a;\n              BB = b;\n              CC = c;\n              DD = d;\n              a = FF(a, b, c, d, x[k + 0], S11, 0xD76AA478);\n              d = FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756);\n              c = FF(c, d, a, b, x[k + 2], S13, 0x242070DB);\n              b = FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE);\n              a = FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF);\n              d = FF(d, a, b, c, x[k + 5], S12, 0x4787C62A);\n              c = FF(c, d, a, b, x[k + 6], S13, 0xA8304613);\n              b = FF(b, c, d, a, x[k + 7], S14, 0xFD469501);\n              a = FF(a, b, c, d, x[k + 8], S11, 0x698098D8);\n              d = FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF);\n              c = FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1);\n              b = FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE);\n              a = FF(a, b, c, d, x[k + 12], S11, 0x6B901122);\n              d = FF(d, a, b, c, x[k + 13], S12, 0xFD987193);\n              c = FF(c, d, a, b, x[k + 14], S13, 0xA679438E);\n              b = FF(b, c, d, a, x[k + 15], S14, 0x49B40821);\n              a = GG(a, b, c, d, x[k + 1], S21, 0xF61E2562);\n              d = GG(d, a, b, c, x[k + 6], S22, 0xC040B340);\n              c = GG(c, d, a, b, x[k + 11], S23, 0x265E5A51);\n              b = GG(b, c, d, a, x[k + 0], S24, 0xE9B6C7AA);\n              a = GG(a, b, c, d, x[k + 5], S21, 0xD62F105D);\n              d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);\n              c = GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681);\n              b = GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8);\n              a = GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6);\n              d = GG(d, a, b, c, x[k + 14], S22, 0xC33707D6);\n              c = GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87);\n              b = GG(b, c, d, a, x[k + 8], S24, 0x455A14ED);\n              a = GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905);\n              d = GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8);\n              c = GG(c, d, a, b, x[k + 7], S23, 0x676F02D9);\n              b = GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A);\n              a = HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942);\n              d = HH(d, a, b, c, x[k + 8], S32, 0x8771F681);\n              c = HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122);\n              b = HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C);\n              a = HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44);\n              d = HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9);\n              c = HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60);\n              b = HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70);\n              a = HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6);\n              d = HH(d, a, b, c, x[k + 0], S32, 0xEAA127FA);\n              c = HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085);\n              b = HH(b, c, d, a, x[k + 6], S34, 0x4881D05);\n              a = HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039);\n              d = HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5);\n              c = HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8);\n              b = HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665);\n              a = II(a, b, c, d, x[k + 0], S41, 0xF4292244);\n              d = II(d, a, b, c, x[k + 7], S42, 0x432AFF97);\n              c = II(c, d, a, b, x[k + 14], S43, 0xAB9423A7);\n              b = II(b, c, d, a, x[k + 5], S44, 0xFC93A039);\n              a = II(a, b, c, d, x[k + 12], S41, 0x655B59C3);\n              d = II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92);\n              c = II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D);\n              b = II(b, c, d, a, x[k + 1], S44, 0x85845DD1);\n              a = II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F);\n              d = II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0);\n              c = II(c, d, a, b, x[k + 6], S43, 0xA3014314);\n              b = II(b, c, d, a, x[k + 13], S44, 0x4E0811A1);\n              a = II(a, b, c, d, x[k + 4], S41, 0xF7537E82);\n              d = II(d, a, b, c, x[k + 11], S42, 0xBD3AF235);\n              c = II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB);\n              b = II(b, c, d, a, x[k + 9], S44, 0xEB86D391);\n              a = AddUnsigned(a, AA);\n              b = AddUnsigned(b, BB);\n              c = AddUnsigned(c, CC);\n              d = AddUnsigned(d, DD);\n            }\n\n            var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);\n            return temp.toLowerCase();\n          }\n        };\n        SIP.Utils = Utils;\n      };\n    }, {}],\n    32: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview WebRTC\n       */\n\n      module.exports = function (SIP, environment) {\n        var WebRTC;\n        WebRTC = {};\n        WebRTC.MediaHandler = require('./WebRTC/MediaHandler')(SIP);\n        WebRTC.MediaStreamManager = require('./WebRTC/MediaStreamManager')(SIP, environment);\n\n        var _isSupported;\n\n        WebRTC.isSupported = function () {\n          if (_isSupported !== undefined) {\n            return _isSupported;\n          }\n\n          WebRTC.MediaStream = environment.MediaStream;\n          WebRTC.getUserMedia = environment.getUserMedia;\n          WebRTC.RTCPeerConnection = environment.RTCPeerConnection;\n          WebRTC.RTCSessionDescription = environment.RTCSessionDescription;\n\n          if (WebRTC.RTCPeerConnection && WebRTC.RTCSessionDescription) {\n            if (WebRTC.getUserMedia) {\n              WebRTC.getUserMedia = SIP.Utils.promisify(environment, 'getUserMedia');\n            }\n\n            _isSupported = true;\n          } else {\n            _isSupported = false;\n          }\n\n          return _isSupported;\n        };\n\n        return WebRTC;\n      };\n    }, {\n      \"./WebRTC/MediaHandler\": 33,\n      \"./WebRTC/MediaStreamManager\": 34\n    }],\n    33: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview MediaHandler\n       */\n\n      /* MediaHandler\n       * @class PeerConnection helper Class.\n       * @param {SIP.Session} session\n       * @param {Object} [options]\n       * @param {SIP.WebRTC.MediaStreamManager} [options.mediaStreamManager]\n       *        The MediaStreamManager to acquire/release streams from/to.\n       *        If not provided, a default MediaStreamManager will be used.\n       */\n\n      module.exports = function (SIP) {\n        var MediaHandler = function (session, options) {\n          options = options || {};\n          this.logger = session.ua.getLogger('sip.invitecontext.mediahandler', session.id);\n          this.session = session;\n          this.localMedia = null;\n          this.ready = true;\n          this.mediaStreamManager = options.mediaStreamManager || new SIP.WebRTC.MediaStreamManager(this.logger);\n          this.audioMuted = false;\n          this.videoMuted = false;\n          this.local_hold = false;\n          this.remote_hold = false; // old init() from here on\n\n          var servers = this.prepareIceServers(options.stunServers, options.turnServers);\n          this.RTCConstraints = options.RTCConstraints || {};\n          this.initPeerConnection(servers);\n\n          function selfEmit(mh, event) {\n            if (mh.mediaStreamManager.on) {\n              mh.mediaStreamManager.on(event, function () {\n                mh.emit.apply(mh, [event].concat(Array.prototype.slice.call(arguments)));\n              });\n            }\n          }\n\n          selfEmit(this, 'userMediaRequest');\n          selfEmit(this, 'userMedia');\n          selfEmit(this, 'userMediaFailed');\n        };\n\n        MediaHandler.defaultFactory = function defaultFactory(session, options) {\n          return new MediaHandler(session, options);\n        };\n\n        MediaHandler.defaultFactory.isSupported = function () {\n          return SIP.WebRTC.isSupported();\n        };\n\n        MediaHandler.prototype = Object.create(SIP.MediaHandler.prototype, {\n          // Functions the session can use\n          isReady: {\n            writable: true,\n            value: function isReady() {\n              return this.ready;\n            }\n          },\n          close: {\n            writable: true,\n            value: function close() {\n              this.logger.log('closing PeerConnection');\n              this._remoteStreams = []; // have to check signalingState since this.close() gets called multiple times\n              // TODO figure out why that happens\n\n              if (this.peerConnection && this.peerConnection.signalingState !== 'closed') {\n                this.peerConnection.close();\n\n                if (this.localMedia) {\n                  this.mediaStreamManager.release(this.localMedia);\n                }\n              }\n            }\n          },\n\n          /**\n           * @param {SIP.WebRTC.MediaStream | (getUserMedia constraints)} [mediaHint]\n           *        the MediaStream (or the constraints describing it) to be used for the session\n           */\n          getDescription: {\n            writable: true,\n            value: function getDescription(mediaHint) {\n              var self = this;\n              var acquire = self.mediaStreamManager.acquire;\n\n              if (acquire.length > 1) {\n                acquire = SIP.Utils.promisify(this.mediaStreamManager, 'acquire', true);\n              }\n\n              mediaHint = mediaHint || {};\n\n              if (mediaHint.dataChannel === true) {\n                mediaHint.dataChannel = {};\n              }\n\n              this.mediaHint = mediaHint;\n              /*\n               * 1. acquire streams (skip if MediaStreams passed in)\n               * 2. addStreams\n               * 3. createOffer/createAnswer\n               */\n\n              var streamPromise;\n\n              if (self.localMedia) {\n                self.logger.log('already have local media');\n                streamPromise = SIP.Utils.Promise.resolve(self.localMedia);\n              } else {\n                self.logger.log('acquiring local media');\n                streamPromise = acquire.call(self.mediaStreamManager, mediaHint).then(function acquireSucceeded(streams) {\n                  self.logger.log('acquired local media streams');\n                  self.localMedia = streams;\n                  self.session.connecting();\n                  return streams;\n                }, function acquireFailed(err) {\n                  self.logger.error('unable to acquire streams');\n                  self.logger.error(err);\n                  self.session.connecting();\n                  throw err;\n                }).then(this.addStreams.bind(this));\n              }\n\n              return streamPromise.then(function streamAdditionSucceeded() {\n                if (self.hasOffer('remote')) {\n                  self.peerConnection.ondatachannel = function (evt) {\n                    self.dataChannel = evt.channel;\n                    self.emit('dataChannel', self.dataChannel);\n                  };\n                } else if (mediaHint.dataChannel && self.peerConnection.createDataChannel) {\n                  self.dataChannel = self.peerConnection.createDataChannel('sipjs', mediaHint.dataChannel);\n                  self.emit('dataChannel', self.dataChannel);\n                }\n\n                self.render();\n                return self.createOfferOrAnswer(self.RTCConstraints);\n              }).then(function (sdp) {\n                sdp = SIP.Hacks.Firefox.hasMissingCLineInSDP(sdp);\n\n                if (self.local_hold) {\n                  // Don't receive media\n                  // TODO - This will break for media streams with different directions.\n                  if (!/a=(sendrecv|sendonly|recvonly|inactive)/.test(sdp)) {\n                    sdp = sdp.replace(/(m=[^\\r]*\\r\\n)/g, '$1a=sendonly\\r\\n');\n                  } else {\n                    sdp = sdp.replace(/a=sendrecv\\r\\n/g, 'a=sendonly\\r\\n');\n                    sdp = sdp.replace(/a=recvonly\\r\\n/g, 'a=inactive\\r\\n');\n                  }\n                }\n\n                return {\n                  body: sdp,\n                  contentType: 'application/sdp'\n                };\n              });\n            }\n          },\n\n          /**\n           * Check if a SIP message contains a session description.\n           * @param {SIP.SIPMessage} message\n           * @returns {boolean}\n           */\n          hasDescription: {\n            writeable: true,\n            value: function hasDescription(message) {\n              return message.getHeader('Content-Type') === 'application/sdp' && !!message.body;\n            }\n          },\n\n          /**\n           * Set the session description contained in a SIP message.\n           * @param {SIP.SIPMessage} message\n           * @returns {Promise}\n           */\n          setDescription: {\n            writable: true,\n            value: function setDescription(message) {\n              var self = this;\n              var sdp = message.body;\n              this.remote_hold = /a=(sendonly|inactive)/.test(sdp);\n              sdp = SIP.Hacks.Firefox.cannotHandleExtraWhitespace(sdp);\n              sdp = SIP.Hacks.AllBrowsers.maskDtls(sdp);\n              var rawDescription = {\n                type: this.hasOffer('local') ? 'answer' : 'offer',\n                sdp: sdp\n              };\n              this.emit('setDescription', rawDescription);\n              var description = new SIP.WebRTC.RTCSessionDescription(rawDescription);\n              return SIP.Utils.promisify(this.peerConnection, 'setRemoteDescription')(description).catch(function setRemoteDescriptionError(e) {\n                self.emit('peerConnection-setRemoteDescriptionFailed', e);\n                throw e;\n              });\n            }\n          },\n\n          /**\n           * If the Session associated with this MediaHandler were to be referred,\n           * what mediaHint should be provided to the UA's invite method?\n           */\n          getReferMedia: {\n            writable: true,\n            value: function getReferMedia() {\n              function hasTracks(trackGetter, stream) {\n                return stream[trackGetter]().length > 0;\n              }\n\n              function bothHaveTracks(trackGetter) {\n                /* jshint validthis:true */\n                return this.getLocalStreams().some(hasTracks.bind(null, trackGetter)) && this.getRemoteStreams().some(hasTracks.bind(null, trackGetter));\n              }\n\n              return {\n                constraints: {\n                  audio: bothHaveTracks.call(this, 'getAudioTracks'),\n                  video: bothHaveTracks.call(this, 'getVideoTracks')\n                }\n              };\n            }\n          },\n          updateIceServers: {\n            writeable: true,\n            value: function (options) {\n              var servers = this.prepareIceServers(options.stunServers, options.turnServers);\n              this.RTCConstraints = options.RTCConstraints || this.RTCConstraints;\n              this.initPeerConnection(servers);\n              /* once updateIce is implemented correctly, this is better than above\n              //no op if browser does not support this\n              if (!this.peerConnection.updateIce) {\n                return;\n              }\n                   this.peerConnection.updateIce({'iceServers': servers}, this.RTCConstraints);\n              */\n            }\n          },\n          // Functions the session can use, but only because it's convenient for the application\n          isMuted: {\n            writable: true,\n            value: function isMuted() {\n              return {\n                audio: this.audioMuted,\n                video: this.videoMuted\n              };\n            }\n          },\n          mute: {\n            writable: true,\n            value: function mute(options) {\n              if (this.getLocalStreams().length === 0) {\n                return;\n              }\n\n              options = options || {\n                audio: this.getLocalStreams()[0].getAudioTracks().length > 0,\n                video: this.getLocalStreams()[0].getVideoTracks().length > 0\n              };\n              var audioMuted = false,\n                  videoMuted = false;\n\n              if (options.audio && !this.audioMuted) {\n                audioMuted = true;\n                this.audioMuted = true;\n                this.toggleMuteAudio(true);\n              }\n\n              if (options.video && !this.videoMuted) {\n                videoMuted = true;\n                this.videoMuted = true;\n                this.toggleMuteVideo(true);\n              } //REVISIT\n\n\n              if (audioMuted || videoMuted) {\n                return {\n                  audio: audioMuted,\n                  video: videoMuted\n                };\n                /*this.session.onmute({\n                  audio: audioMuted,\n                  video: videoMuted\n                });*/\n              }\n            }\n          },\n          unmute: {\n            writable: true,\n            value: function unmute(options) {\n              if (this.getLocalStreams().length === 0) {\n                return;\n              }\n\n              options = options || {\n                audio: this.getLocalStreams()[0].getAudioTracks().length > 0,\n                video: this.getLocalStreams()[0].getVideoTracks().length > 0\n              };\n              var audioUnMuted = false,\n                  videoUnMuted = false;\n\n              if (options.audio && this.audioMuted) {\n                audioUnMuted = true;\n                this.audioMuted = false;\n                this.toggleMuteAudio(false);\n              }\n\n              if (options.video && this.videoMuted) {\n                videoUnMuted = true;\n                this.videoMuted = false;\n                this.toggleMuteVideo(false);\n              } //REVISIT\n\n\n              if (audioUnMuted || videoUnMuted) {\n                return {\n                  audio: audioUnMuted,\n                  video: videoUnMuted\n                };\n                /*this.session.onunmute({\n                  audio: audioUnMuted,\n                  video: videoUnMuted\n                });*/\n              }\n            }\n          },\n          hold: {\n            writable: true,\n            value: function hold() {\n              this.local_hold = true;\n              this.toggleMuteAudio(true);\n              this.toggleMuteVideo(true);\n            }\n          },\n          unhold: {\n            writable: true,\n            value: function unhold() {\n              this.local_hold = false;\n\n              if (!this.audioMuted) {\n                this.toggleMuteAudio(false);\n              }\n\n              if (!this.videoMuted) {\n                this.toggleMuteVideo(false);\n              }\n            }\n          },\n          // Functions the application can use, but not the session\n          getLocalStreams: {\n            writable: true,\n            value: function getLocalStreams() {\n              var pc = this.peerConnection;\n\n              if (pc && pc.signalingState === 'closed') {\n                this.logger.warn('peerConnection is closed, getLocalStreams returning []');\n                return [];\n              }\n\n              return pc.getLocalStreams && pc.getLocalStreams() || pc.localStreams || [];\n            }\n          },\n          getRemoteStreams: {\n            writable: true,\n            value: function getRemoteStreams() {\n              var pc = this.peerConnection;\n\n              if (pc && pc.signalingState === 'closed') {\n                this.logger.warn('peerConnection is closed, getRemoteStreams returning this._remoteStreams');\n                return this._remoteStreams;\n              }\n\n              return pc.getRemoteStreams && pc.getRemoteStreams() || pc.remoteStreams || [];\n            }\n          },\n          render: {\n            writable: true,\n            value: function render(renderHint) {\n              renderHint = renderHint || this.mediaHint && this.mediaHint.render;\n\n              if (!renderHint) {\n                return false;\n              }\n\n              var streamGetters = {\n                local: 'getLocalStreams',\n                remote: 'getRemoteStreams'\n              };\n              Object.keys(streamGetters).forEach(function (loc) {\n                var streamGetter = streamGetters[loc];\n                var streams = this[streamGetter]();\n                SIP.WebRTC.MediaStreamManager.render(streams, renderHint[loc]);\n              }.bind(this));\n            }\n          },\n          // Internal functions\n          hasOffer: {\n            writable: true,\n            value: function hasOffer(where) {\n              var offerState = 'have-' + where + '-offer';\n              return this.peerConnection.signalingState === offerState; // TODO consider signalingStates with 'pranswer'?\n            }\n          },\n          prepareIceServers: {\n            writable: true,\n            value: function prepareIceServers(stunServers, turnServers) {\n              var servers = [],\n                  config = this.session.ua.configuration;\n              stunServers = stunServers || config.stunServers;\n              turnServers = turnServers || config.turnServers;\n              [].concat(stunServers).forEach(function (server) {\n                servers.push({\n                  'urls': server\n                });\n              });\n              [].concat(turnServers).forEach(function (server) {\n                var turnServer = {\n                  'urls': server.urls\n                };\n\n                if (server.username) {\n                  turnServer.username = server.username;\n                }\n\n                if (server.password) {\n                  turnServer.credential = server.password;\n                }\n\n                servers.push(turnServer);\n              });\n              return servers;\n            }\n          },\n          initPeerConnection: {\n            writable: true,\n            value: function initPeerConnection(servers) {\n              var self = this,\n                  config = this.session.ua.configuration;\n              this.onIceCompleted = SIP.Utils.defer();\n              this.onIceCompleted.promise.then(function (pc) {\n                self.emit('iceGatheringComplete', pc);\n\n                if (self.iceCheckingTimer) {\n                  SIP.Timers.clearTimeout(self.iceCheckingTimer);\n                  self.iceCheckingTimer = null;\n                }\n              });\n\n              if (this.peerConnection) {\n                this.peerConnection.close();\n              }\n\n              var connConfig = {\n                iceServers: servers\n              };\n\n              if (config.rtcpMuxPolicy) {\n                connConfig.rtcpMuxPolicy = config.rtcpMuxPolicy;\n              }\n\n              this.peerConnection = new SIP.WebRTC.RTCPeerConnection(connConfig); // Firefox (35.0.1) sometimes throws on calls to peerConnection.getRemoteStreams\n              // even if peerConnection.onaddstream was just called. In order to make\n              // MediaHandler.prototype.getRemoteStreams work, keep track of them manually\n\n              this._remoteStreams = [];\n\n              this.peerConnection.onaddstream = function (e) {\n                self.logger.log('stream added: ' + e.stream.id);\n\n                self._remoteStreams.push(e.stream);\n\n                self.render();\n                self.emit('addStream', e);\n              };\n\n              this.peerConnection.onremovestream = function (e) {\n                self.logger.log('stream removed: ' + e.stream.id);\n              };\n\n              this.startIceCheckingTimer = function () {\n                if (!self.iceCheckingTimer) {\n                  self.iceCheckingTimer = SIP.Timers.setTimeout(function () {\n                    self.logger.log('RTCIceChecking Timeout Triggered after ' + config.iceCheckingTimeout + ' milliseconds');\n                    self.onIceCompleted.resolve(this);\n                  }.bind(this.peerConnection), config.iceCheckingTimeout);\n                }\n              };\n\n              this.peerConnection.onicecandidate = function (e) {\n                self.emit('iceCandidate', e);\n\n                if (e.candidate) {\n                  self.logger.log('ICE candidate received: ' + (e.candidate.candidate === null ? null : e.candidate.candidate.trim()));\n                  self.startIceCheckingTimer();\n                } else {\n                  self.onIceCompleted.resolve(this);\n                }\n              };\n\n              this.peerConnection.onicegatheringstatechange = function () {\n                self.logger.log('RTCIceGatheringState changed: ' + this.iceGatheringState);\n\n                if (this.iceGatheringState === 'gathering') {\n                  self.emit('iceGathering', this);\n                }\n\n                if (this.iceGatheringState === 'complete') {\n                  self.onIceCompleted.resolve(this);\n                }\n              };\n\n              this.peerConnection.oniceconnectionstatechange = function () {\n                //need e for commented out case\n                var stateEvent;\n\n                if (this.iceConnectionState === 'checking') {\n                  self.startIceCheckingTimer();\n                }\n\n                switch (this.iceConnectionState) {\n                  case 'new':\n                    stateEvent = 'iceConnection';\n                    break;\n\n                  case 'checking':\n                    stateEvent = 'iceConnectionChecking';\n                    break;\n\n                  case 'connected':\n                    stateEvent = 'iceConnectionConnected';\n                    break;\n\n                  case 'completed':\n                    stateEvent = 'iceConnectionCompleted';\n                    break;\n\n                  case 'failed':\n                    stateEvent = 'iceConnectionFailed';\n                    break;\n\n                  case 'disconnected':\n                    stateEvent = 'iceConnectionDisconnected';\n                    break;\n\n                  case 'closed':\n                    stateEvent = 'iceConnectionClosed';\n                    break;\n\n                  default:\n                    self.logger.warn('Unknown iceConnection state:', this.iceConnectionState);\n                    return;\n                }\n\n                self.emit(stateEvent, this); //Bria state changes are always connected -> disconnected -> connected on accept, so session gets terminated\n                //normal calls switch from failed to connected in some cases, so checking for failed and terminated\n\n                /*if (this.iceConnectionState === 'failed') {\n                  self.session.terminate({\n                  cause: SIP.C.causes.RTP_TIMEOUT,\n                  status_code: 200,\n                  reason_phrase: SIP.C.causes.RTP_TIMEOUT\n                });\n                } else if (e.currentTarget.iceGatheringState === 'complete' && this.iceConnectionState !== 'closed') {\n                self.onIceCompleted(this);\n                }*/\n              };\n\n              this.peerConnection.onstatechange = function () {\n                self.logger.log('PeerConnection state changed to \"' + this.readyState + '\"');\n              };\n            }\n          },\n          createOfferOrAnswer: {\n            writable: true,\n            value: function createOfferOrAnswer(constraints) {\n              var self = this;\n              var methodName;\n              var pc = self.peerConnection;\n              self.ready = false;\n              methodName = self.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n              return SIP.Utils.promisify(pc, methodName, true)(constraints).catch(function methodError(e) {\n                self.emit('peerConnection-' + methodName + 'Failed', e);\n                throw e;\n              }).then(SIP.Utils.promisify(pc, 'setLocalDescription')).catch(function localDescError(e) {\n                self.emit('peerConnection-selLocalDescriptionFailed', e);\n                throw e;\n              }).then(function onSetLocalDescriptionSuccess() {\n                var deferred = SIP.Utils.defer();\n\n                if (pc.iceGatheringState === 'complete' && (pc.iceConnectionState === 'connected' || pc.iceConnectionState === 'completed')) {\n                  deferred.resolve();\n                } else {\n                  self.onIceCompleted.promise.then(deferred.resolve);\n                }\n\n                return deferred.promise;\n              }).then(function readySuccess() {\n                var sdp = pc.localDescription.sdp;\n                sdp = SIP.Hacks.Chrome.needsExplicitlyInactiveSDP(sdp);\n                sdp = SIP.Hacks.AllBrowsers.unmaskDtls(sdp);\n                var sdpWrapper = {\n                  type: methodName === 'createOffer' ? 'offer' : 'answer',\n                  sdp: sdp\n                };\n                self.emit('getDescription', sdpWrapper);\n\n                if (self.session.ua.configuration.hackStripTcp) {\n                  sdpWrapper.sdp = sdpWrapper.sdp.replace(/^a=candidate:\\d+ \\d+ tcp .*?\\r\\n/img, \"\");\n                }\n\n                self.ready = true;\n                return sdpWrapper.sdp;\n              }).catch(function createOfferAnswerError(e) {\n                self.logger.error(e);\n                self.ready = true;\n                throw new SIP.Exceptions.GetDescriptionError(e);\n              });\n            }\n          },\n          addStreams: {\n            writable: true,\n            value: function addStreams(streams) {\n              try {\n                streams = [].concat(streams);\n                streams.forEach(function (stream) {\n                  this.peerConnection.addStream(stream);\n                }, this);\n              } catch (e) {\n                this.logger.error('error adding stream');\n                this.logger.error(e);\n                return SIP.Utils.Promise.reject(e);\n              }\n\n              return SIP.Utils.Promise.resolve();\n            }\n          },\n          toggleMuteHelper: {\n            writable: true,\n            value: function toggleMuteHelper(trackGetter, mute) {\n              this.getLocalStreams().forEach(function (stream) {\n                stream[trackGetter]().forEach(function (track) {\n                  track.enabled = !mute;\n                });\n              });\n            }\n          },\n          toggleMuteAudio: {\n            writable: true,\n            value: function toggleMuteAudio(mute) {\n              this.toggleMuteHelper('getAudioTracks', mute);\n            }\n          },\n          toggleMuteVideo: {\n            writable: true,\n            value: function toggleMuteVideo(mute) {\n              this.toggleMuteHelper('getVideoTracks', mute);\n            }\n          }\n        }); // Return since it will be assigned to a variable.\n\n        return MediaHandler;\n      };\n    }, {}],\n    34: [function (require, module, exports) {\n      \"use strict\";\n      /**\n       * @fileoverview MediaStreamManager\n       */\n\n      /* MediaStreamManager\n       * @class Manages the acquisition and release of MediaStreams.\n       * @param {mediaHint} [defaultMediaHint] The mediaHint to use if none is provided to acquire()\n       */\n\n      module.exports = function (SIP, environment) {\n        // Default MediaStreamManager provides single-use streams created with getUserMedia\n        var MediaStreamManager = function MediaStreamManager(logger, defaultMediaHint) {\n          if (!SIP.WebRTC.isSupported()) {\n            throw new SIP.Exceptions.NotSupportedError('Media not supported');\n          }\n\n          this.mediaHint = defaultMediaHint || {\n            constraints: {\n              audio: true,\n              video: true\n            }\n          }; // map of streams to acquisition manner:\n          // true -> passed in as mediaHint.stream\n          // false -> getUserMedia\n\n          this.acquisitions = {};\n        };\n\n        MediaStreamManager.streamId = function (stream) {\n          return stream.getAudioTracks().concat(stream.getVideoTracks()).map(function trackId(track) {\n            return track.id;\n          }).join('');\n        };\n        /**\n         * @param {(Array of) MediaStream} streams - The streams to render\n         *\n         * @param {(Array of) HTMLMediaElement} elements\n         *        - The <audio>/<video> element(s) that should render the streams\n         *\n         * Each stream in streams renders to the corresponding element in elements,\n         * wrapping around elements if needed.\n         */\n\n\n        MediaStreamManager.render = function render(streams, elements) {\n          if (!elements) {\n            return false;\n          }\n\n          if (Array.isArray(elements) && !elements.length) {\n            throw new TypeError('elements must not be empty');\n          }\n\n          function attachMediaStream(element, stream) {\n            element.srcObject = stream;\n          }\n\n          function ensureMediaPlaying(mediaElement) {\n            var interval = 100;\n            mediaElement.ensurePlayingIntervalId = SIP.Timers.setInterval(function () {\n              if (mediaElement.paused && mediaElement.srcObject) {\n                mediaElement.play();\n              } else {\n                SIP.Timers.clearInterval(mediaElement.ensurePlayingIntervalId);\n              }\n            }, interval);\n          }\n\n          function attachAndPlay(elements, stream, index) {\n            var element = elements[index % elements.length];\n\n            if (typeof element === 'function') {\n              element = element();\n            }\n\n            (environment.attachMediaStream || attachMediaStream)(element, stream);\n            ensureMediaPlaying(element);\n          } // [].concat \"casts\" `elements` into an array\n          // so forEach works even if `elements` was a single element\n\n\n          elements = [].concat(elements);\n          [].concat(streams).forEach(attachAndPlay.bind(null, elements));\n        };\n\n        MediaStreamManager.prototype = Object.create(SIP.EventEmitter.prototype, {\n          'acquire': {\n            writable: true,\n            value: function acquire(mediaHint) {\n              mediaHint = Object.keys(mediaHint || {}).length ? mediaHint : this.mediaHint;\n\n              var saveSuccess = function (isHintStream, streams) {\n                streams = [].concat(streams);\n                streams.forEach(function (stream) {\n                  var streamId = MediaStreamManager.streamId(stream);\n                  this.acquisitions[streamId] = !!isHintStream;\n                }, this);\n                return SIP.Utils.Promise.resolve(streams);\n              }.bind(this);\n\n              if (mediaHint.stream) {\n                return saveSuccess(true, mediaHint.stream);\n              } else {\n                // Fallback to audio/video enabled if no mediaHint can be found.\n                var constraints = mediaHint.constraints || this.mediaHint && this.mediaHint.constraints || {\n                  audio: true,\n                  video: true\n                };\n                var deferred = SIP.Utils.defer();\n                /*\n                 * Make the call asynchronous, so that ICCs have a chance\n                 * to define callbacks to `userMediaRequest`\n                 */\n\n                SIP.Timers.setTimeout(function () {\n                  this.emit('userMediaRequest', constraints);\n\n                  var emitThenCall = function (eventName, callback) {\n                    var callbackArgs = Array.prototype.slice.call(arguments, 2); // Emit with all of the arguments from the real callback.\n\n                    var newArgs = [eventName].concat(callbackArgs);\n                    this.emit.apply(this, newArgs);\n                    return callback.apply(null, callbackArgs);\n                  }.bind(this);\n\n                  if (constraints.audio || constraints.video) {\n                    deferred.resolve(SIP.WebRTC.getUserMedia(constraints).then(emitThenCall.bind(this, 'userMedia', saveSuccess.bind(null, false)), emitThenCall.bind(this, 'userMediaFailed', function (e) {\n                      throw e;\n                    })));\n                  } else {\n                    // Local streams were explicitly excluded.\n                    deferred.resolve([]);\n                  }\n                }.bind(this), 0);\n                return deferred.promise;\n              }\n            }\n          },\n          'release': {\n            writable: true,\n            value: function release(streams) {\n              streams = [].concat(streams);\n              streams.forEach(function (stream) {\n                var streamId = MediaStreamManager.streamId(stream);\n\n                if (this.acquisitions[streamId] === false) {\n                  stream.getTracks().forEach(function (track) {\n                    track.stop();\n                  });\n                }\n\n                delete this.acquisitions[streamId];\n              }, this);\n            }\n          }\n        }); // Return since it will be assigned to a variable.\n\n        return MediaStreamManager;\n      };\n    }, {}],\n    35: [function (require, module, exports) {\n      (function (global) {\n        \"use strict\";\n\n        var toplevel = global.window || global;\n\n        function getPrefixedProperty(object, name) {\n          if (object == null) {\n            return;\n          }\n\n          var capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n          var prefixedNames = [name, 'webkit' + capitalizedName, 'moz' + capitalizedName];\n\n          for (var i in prefixedNames) {\n            var property = object[prefixedNames[i]];\n\n            if (property) {\n              return property.bind(object);\n            }\n          }\n        }\n\n        module.exports = {\n          WebSocket: toplevel.WebSocket,\n          Transport: require('./Transport'),\n          open: toplevel.open,\n          Promise: toplevel.Promise,\n          timers: toplevel,\n          // Console is not defined in ECMAScript, so just in case...\n          console: toplevel.console || {\n            debug: function () {},\n            log: function () {},\n            warn: function () {},\n            error: function () {}\n          },\n          MediaStream: getPrefixedProperty(toplevel, 'MediaStream'),\n          getUserMedia: getPrefixedProperty(toplevel.navigator, 'getUserMedia'),\n          RTCPeerConnection: getPrefixedProperty(toplevel, 'RTCPeerConnection'),\n          RTCSessionDescription: getPrefixedProperty(toplevel, 'RTCSessionDescription'),\n          addEventListener: getPrefixedProperty(toplevel, 'addEventListener'),\n          removeEventListener: getPrefixedProperty(toplevel, 'removeEventListener'),\n          HTMLMediaElement: toplevel.HTMLMediaElement,\n          attachMediaStream: toplevel.attachMediaStream,\n          createObjectURL: toplevel.URL && toplevel.URL.createObjectURL,\n          revokeObjectURL: toplevel.URL && toplevel.URL.revokeObjectURL\n        };\n      }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n    }, {\n      \"./Transport\": 28\n    }],\n    36: [function (require, module, exports) {\n      \"use strict\";\n\n      module.exports = require('./SIP')(require('./environment'));\n    }, {\n      \"./SIP\": 19,\n      \"./environment\": 35\n    }]\n  }, {}, [36])(36);\n});","map":{"version":3,"names":["f","exports","module","define","amd","g","window","global","self","SIP","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","EventEmitter","_events","_maxListeners","undefined","prototype","defaultMaxListeners","setMaxListeners","isNumber","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","isObject","arguments","isUndefined","isFunction","Array","apply","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","fired","removeListener","list","position","splice","removeAllListeners","key","ret","listenerCount","emitter","arg","ClientContext","ua","method","target","options","originalTarget","logger","getLogger","normalizeTarget","Object","create","extraHeaders","request","OutgoingRequest","params","body","contentType","localIdentity","from","remoteIdentity","to","data","send","RequestSender","cancel","cancel_reason","Utils","getCancelReason","status_code","reason_phrase","receiveResponse","response","cause","getReasonPhrase","test","applicants","onRequestTimeout","C","causes","REQUEST_TIMEOUT","onTransportError","CONNECTION_ERROR","name","version","USER_AGENT","SIPS","SIP_FAILURE_CODE","INTERNAL_ERROR","BUSY","REJECTED","REDIRECTED","UNAVAILABLE","NOT_FOUND","ADDRESS_INCOMPLETE","INCOMPATIBLE_SDP","AUTHENTICATION_ERROR","DIALOG_ERROR","WEBRTC_NOT_SUPPORTED","WEBRTC_ERROR","CANCELED","NO_ANSWER","EXPIRES","NO_ACK","NO_PRACK","USER_DENIED_MEDIA_ACCESS","BAD_MEDIA_DESCRIPTION","RTP_TIMEOUT","supported","UNSUPPORTED","SUPPORTED","REQUIRED","SIP_ERROR_CAUSES","ACK","BYE","CANCEL","INFO","INVITE","MESSAGE","NOTIFY","OPTIONS","REGISTER","UPDATE","SUBSCRIBE","REFER","PRACK","REASON_PHRASE","OPTION_TAGS","answermode","eventlist","explicitsub","gin","gruu","histinfo","ice","join","norefersub","nosub","outbound","path","policy","precondition","pref","privacy","replaces","tdialog","timer","uui","dialog","applicant","reattempt","reattemptTimer","request_sender","owner","clientTransaction","state","Transactions","STATUS_TERMINATED","uac_pending_reply","stateChanged","STATUS_ACCEPTED","STATUS_COMPLETED","uas_pending_reply","onReadyToReinvite","onDialogError","cseq","value","local_seqnum","Timers","setTimeout","status","Session","getReattemptTimeout","Dialog","STATUS_EARLY","STATUS_CONFIRMED","message","contact","hasHeader","IncomingResponse","parseHeader","id","call_id","local_tag","to_tag","remote_tag","from_tag","toString","remote_seqnum","local_uri","uri","remote_uri","remote_target","route_set","getHeaders","invite_seqnum","pracked","reverse","hasOffer","mediaHandler","mediaHandlerFactory","dialogs","log","update","terminate","peerConnection","close","createRequest","Math","floor","random","checkInDialogRequest","reply","retryAfter","server_transaction","sendRequest","receiveRequest","DigestAuthentication","username","configuration","authorizationUser","password","cnonce","nc","ncHex","authenticate","challenge","algorithm","realm","nonce","opaque","stale","warn","qop","indexOf","ruri","createRandomToken","updateNcHex","calculateResponse","ha1","ha2","calculateMD5","auth_params","hex","Number","substr","NodeEventEmitter","constructor","enumerable","writable","configurable","off","eventName","warning","ConfigurationError","exception","parameter","JSON","stringify","InvalidStateError","NotSupportedError","GetDescriptionError","Grammar","parse","parseCustom","input","startRule","peg$subclass","child","parent","ctor","SyntaxError","expected","found","offset","line","column","peg$FAILED","peg$startRuleIndices","Contact","Name_Addr_Header","Record_Route","Request_Response","SIP_URI","Subscription_State","Supported","Require","Via","absoluteURI","Call_ID","Content_Disposition","Content_Length","Content_Type","CSeq","displayName","Event","From","host","Max_Forwards","Min_SE","Proxy_Authenticate","quoted_string","Refer_To","Replaces","Session_Expires","stun_URI","To","turn_URI","uuid","WWW_Authenticate","peg$startRuleIndex","peg$consts","description","contents","URI","scheme","user","port","host_type","uri_params","uri_headers","uri_scheme","decodeURIComponent","text","parseInt","transport","toLowerCase","ttl","maddr","param","hname","hvalue","sip_version","idx","multi_header","parsed","header","NameAddrHeader","peg$currPos","trim","substring","q","expires","delta_seconds","parseFloat","cseq_value","event_type","event","tag","setParam","forwards","min_expires","toUpperCase","qop_value","rack_value","replaces_from_tag","replaces_to_tag","early_only","first","rest","rseq_value","reason","retry_after","via_ttl_value","via_maddr","via_received","received","via_branch","branch","response_port","rport","via_protocol","protocol","via_transport","via_sent_by_port","deltaSeconds","endpoint","refresher","peg$bytecode","peg$decode","peg$reportedPos","peg$cachedPos","peg$cachedPosDetails","seenCR","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","peg$result","peg$computePosDetails","peg$buildException","pos","advance","details","startPos","endPos","p","ch","charAt","peg$fail","cleanupExpected","sort","b","buildMessage","stringEscape","charCodeAt","replace","expectedDescs","expectedDesc","foundDesc","posDetails","bc","peg$parseRule","index","ip","ips","end","ends","stack","protect","object","pop","concat","Hacks","AllBrowsers","maskDtls","sdp","unmaskDtls","Firefox","isFirefox","mozRTCPeerConnection","cannotHandleExtraWhitespace","hasMissingCLineInSDP","insertAt","mlines","match","search","Chrome","needsExplicitlyInactiveSDP","sub","getsConfusedAboutGUM","session","levels","LoggerFactory","level","builtinEnabled","connector","loggers","defineProperties","get","set","hasOwnProperty","print","category","label","content","prefix","Date","Logger","keys","forEach","targetName","MediaHandler","isReady","getDescription","mediaHint","hasDescription","setDescription","parameters","friendlyName","aor","getParam","hasParam","deleteParam","clearParams","clone","name_addr_header","Parser","getHeader","headerStart","start","partialEnd","headerEnd","hcolonIndex","headerName","headerValue","addHeader","via","setHeader","headers","refer_to","parseMessage","firstLine","contentLength","bodyStart","IncomingRequest","RegisterContext","regId","registrar","registrarServer","registerExpires","instanceId","to_uri","to_displayName","augment","registrationTimer","registrationExpiredTimer","registered","register","UA","ALLOWED_METHODS","closeHeaders","closeWithHeaders","contacts","clearTimeout","unregistered","temp_gruu","pub_gruu","registrationFailure","sipErrorCause","onTransportClosed","registered_before","onTransportConnected","all","unregister","credentials","challenged","staled","STATUS_USER_CLOSED","InviteClientTransaction","AckClientTransaction","NonInviteClientTransaction","authorization_header_name","authenticationFactory","environment","pkg","title","Exceptions","timers","Transport","WebSocket","WebRTC","IncomingMessage","getSupportedHeader","allowUnregistered","hackAllowUnregisteredOptionTags","optionTags","optionTagSet","rel100","extraSupported","filter","optionTag","unique","from_uri","statusCode","reasonPhrase","usePreloadedRoute","server","sip_uri","MAX_FORWARDS","toRaw","from_displayName","newTag","sipjsId","headerize","regexp","RegExp","result","msg","userAgentString","str_utf8_length","raw","onSuccess","onFailure","rr","vias","v","buildStatusLine","then","reply_sl","sanityCheck","requests","responses","rfc3261_8_2_2_1","rfc3261_16_3_4","rfc3261_18_3_request","rfc3261_8_2_2_2","tr","fromTag","transactions","ist","nist","rfc3261_8_1_3_3","rfc3261_18_1_2","viaHost","rfc3261_18_3_response","minimumHeaders","mandatoryHeaders","pass","ServerContext","transaction","InviteServerTransaction","NonInviteServerTransaction","progress","minCode","maxCode","events","accept","reject","DTMF","InviteServerContext","InviteClientContext","STATUS_NULL","STATUS_INVITE_SENT","STATUS_1XX_RECEIVED","STATUS_INVITE_RECEIVED","STATUS_WAITING_FOR_ANSWER","STATUS_ANSWERED","STATUS_WAITING_FOR_PRACK","STATUS_WAITING_FOR_ACK","STATUS_CANCELED","STATUS_ANSWERED_WAITING_FOR_PRACK","STATUS_EARLY_MEDIA","earlyDialogs","defaultFactory","hasAnswer","ackTimer","expiresTimer","invite2xxTimer","userNoAnswerTimer","rel1xxTimer","prackTimer","startTime","endTime","tones","local_hold","remote_hold","pending_actions","actions","isPending","shift","early_sdp","dtmf","tone","dtmfs","split","sendDTMF","timeout","duration","interToneGap","bye","terminated","refer","withReplaces","debug","bind","followRefer","callback","referListener","referTo","targetString","open","clearHeaders","getReferMedia","referSession","invite","media","receiveNonInviteResponse","sessions","createDialog","early","early_dialog","failed","dia","isReadyToReinvite","mute","onmute","unmute","onunmute","hold","onhold","sendReinvite","unhold","onunhold","isOnHold","local","remote","receiveReinvite","setInvite2xxTimer","setACKTimer","catch","eventHandlers","succeeded","reinviteSucceeded","reinviteFailed","receiveReinviteResponse","onInfo","reg_tone","reg_duration","init_incoming","hasReferListener","notifyBody","acceptAndTerminate","getReasonHeaderValue","T1","invite2xxRetransmission","min","T2","TIMER_H","action","originator","audio","video","rejected","canceled","accepted","replacee","connecting","desugar","HTMLMediaElement","constraints","tagName","render","contentDisp","RTCConstraints","renderbody","rendertype","set100rel","h","c","getRemoteStreams","getLocalStreams","fireNewSession","noAnswerTimeout","iceServers","stunServers","turnServers","isCanceled","getConfigurationCheck","optional","updateIceServers","do100rel","rel1xxRetransmission","normalReply","optionsOverride","descriptionCreationSucceeded","replySucceeded","replyFailed","descriptionCreationFailed","confirmSession","isMediaSupported","isSupported","inviteWithoutSdp","anonymous","received_100","receiveInviteResponse","generateFakeSDP","cancelReason","earlyDialog","earlyMedia","localMedia","MIN_DURATION","MAX_DURATION","DEFAULT_DURATION","MIN_INTER_TONE_GAP","DEFAULT_INTER_TONE_GAP","direction","isDecimal","abs","Subscription","N","sub_duration","errorCodes","subscribe","refresh","timer_fire","TIMER_N","earlySubscriptions","EXPIRES_HEADER_MISSING","INVALID_EXPIRES_HEADER","unsubscribe","terminateDialog","subscriptions","createConfirmedDialog","sub_state","setExpiresTimeout","max","matchEvent","REASON_200","T4","TIMER_B","TIMER_D","TIMER_F","TIMER_I","TIMER_J","TIMER_K","TIMER_L","TIMER_M","PROVISIONAL_RESPONSE_INTERVAL","STATUS_TRYING","STATUS_PROCEEDING","STATUS_CALLING","NON_INVITE_CLIENT","NON_INVITE_SERVER","INVITE_CLIENT","INVITE_SERVER","buildViaHeader","hackViaTcp","forceRport","newTransaction","F","timer_F","K","destroyTransaction","timer_K","extraHeadersString","cancel_request","B","timer_B","D","M","timer_M","timer_D","sendACK","ack","last_response","timer_J","transportError","J","deferred","defer","resolve","promise","resendProvisionalTimer","timer_H","timer_I","timer_L","clearInterval","L","H","I","resend_provisional","setInterval","checkTransaction","STATUS_READY","STATUS_DISCONNECTED","STATUS_ERROR","computeKeepAliveTimeout","upperBound","lowerBound","ws","reconnection_attempts","closed","connected","reconnectTimer","lastTransportError","keepAliveInterval","keepAliveTimeout","keepAliveTimer","connect","readyState","OPEN","traceSip","sendKeepAlive","startSendingKeepAlives","stopSendingKeepAlives","disconnect","ws_uri","CONNECTING","onTransportConnecting","binaryType","onopen","onOpen","onclose","onClose","onmessage","onerror","onMessage","onError","connected_before","reconnect","wasClean","String","fromCharCode","Uint8Array","evt","ict","nict","wsServerMaxReconnection","wsServerReconnectionTimeout","STATUS_INIT","STATUS_STARTING","STATUS_NOT_READY","CONFIGURATION_ERROR","NETWORK_ERROR","ACCEPTED_BODY_TYPES","TAG_LENGTH","selfEmit","cache","transportRecoverAttempts","transportRecoveryTimer","transactionsCount","count","nictTransactionsCount","nistTransactionsCount","ictTransactionsCount","istTransactionsCount","loadConfig","registerContext","autostart","context","afterConnected","isRegistered","isConnected","req","stop","subscription","transactionsListener","removeEventListener","chrome","app","runtime","environListener","getNextWsServer","autostop","addEventListener","hostportParams","saveCredentials","getCredentials","client_transactions","closeSessionsOnTransportError","recoverTransport","initialize","attempts","earlySubscription","replacedDialog","ruriMatches","content_type","findSession","allowLegacyNotifications","findDialog","findEarlySubscription","ws_server","candidates","wsServers","weight","k","nextRetry","pow","connectionRecoveryMinInterval","connectionRecoveryMaxInterval","checkAuthenticationFactory","Function","Promise","checked_value","settings","custom","iceCheckingTimeout","hackIpInContact","hackWssInTransport","hackCleanJitsiSdpImageattr","hackStripTcp","contactTransport","aliasUnderscored","underscored","hasParameter","configCheck","mandatory","emptyArraysAllowed","newUUID","getRandomTestNetIP","skeleton","url","stun_server","jdx","turn_server","num_turn_server_urls","urls","rtcpMuxPolicy","promisifiedFactory","patchMethod","methodName","callbacksFirst","promisify","normal","_normal","_raw","deleteHeader","_toString","uriString","escapeUser","oldMethod","promisifiedMethod","oldArgs","override","proto","winner","loser","isDeprecated","defaultValue","string","encodeURIComponent","fn","num","size","base","token","UUID","hostType","domain","target_array","target_user","target_domain","exceptions","parts","part","specific","getOctet","RotateLeft","lValue","iShiftBits","AddUnsigned","lX","lY","lX4","lY4","lX8","lY8","lResult","x","y","z","G","FF","d","ac","GG","HH","II","ConvertToWordArray","lWordCount","lMessageLength","lNumberOfWords_temp1","lNumberOfWords_temp2","lNumberOfWords","lWordArray","lBytePosition","lByteCount","WordToHex","WordToHexValue","WordToHexValue_temp","lByte","lCount","Utf8Encode","utftext","AA","BB","CC","DD","S11","S12","S13","S14","S21","S22","S23","S24","S31","S32","S33","S34","S41","S42","S43","S44","temp","MediaStreamManager","_isSupported","MediaStream","getUserMedia","RTCPeerConnection","RTCSessionDescription","ready","mediaStreamManager","audioMuted","videoMuted","servers","prepareIceServers","initPeerConnection","mh","_remoteStreams","signalingState","release","acquire","dataChannel","streamPromise","acquireSucceeded","streams","acquireFailed","err","addStreams","streamAdditionSucceeded","ondatachannel","channel","createDataChannel","createOfferOrAnswer","writeable","rawDescription","setRemoteDescriptionError","hasTracks","trackGetter","stream","bothHaveTracks","some","isMuted","getAudioTracks","getVideoTracks","toggleMuteAudio","toggleMuteVideo","audioUnMuted","videoUnMuted","pc","localStreams","remoteStreams","renderHint","streamGetters","loc","streamGetter","where","offerState","config","turnServer","credential","onIceCompleted","iceCheckingTimer","connConfig","onaddstream","onremovestream","startIceCheckingTimer","onicecandidate","candidate","onicegatheringstatechange","iceGatheringState","oniceconnectionstatechange","stateEvent","iceConnectionState","onstatechange","methodError","localDescError","onSetLocalDescriptionSuccess","readySuccess","localDescription","sdpWrapper","createOfferAnswerError","addStream","toggleMuteHelper","track","enabled","defaultMediaHint","acquisitions","streamId","map","trackId","elements","isArray","attachMediaStream","element","srcObject","ensureMediaPlaying","mediaElement","interval","ensurePlayingIntervalId","paused","play","attachAndPlay","saveSuccess","isHintStream","emitThenCall","callbackArgs","newArgs","getTracks","toplevel","getPrefixedProperty","capitalizedName","prefixedNames","property","navigator","createObjectURL","URL","revokeObjectURL"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/utils/sip.js"],"sourcesContent":["/*\n * SIP version 0.7.8\n * Copyright (c) 2014-2017 Junction Networks, Inc <http://www.onsip.com>\n * Homepage: http://sipjs.com\n * License: http://sipjs.com/license/\n *\n *\n * ~~~SIP.js contains substantial portions of JsSIP under the following license~~~\n * Homepage: http://jssip.net\n * Copyright (c) 2012-2013 José Luis Millán - Versatica <http://www.versatica.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * ~~~ end JsSIP license ~~~\n */\n\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.SIP = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n    // Copyright Joyent, Inc. and other Node contributors.\n    //\n    // Permission is hereby granted, free of charge, to any person obtaining a\n    // copy of this software and associated documentation files (the\n    // \"Software\"), to deal in the Software without restriction, including\n    // without limitation the rights to use, copy, modify, merge, publish,\n    // distribute, sublicense, and/or sell copies of the Software, and to permit\n    // persons to whom the Software is furnished to do so, subject to the\n    // following conditions:\n    //\n    // The above copyright notice and this permission notice shall be included\n    // in all copies or substantial portions of the Software.\n    //\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n    // OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n    // MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n    // NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n    // DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n    // OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n    // USE OR OTHER DEALINGS IN THE SOFTWARE.\n    \n    function EventEmitter() {\n      this._events = this._events || {};\n      this._maxListeners = this._maxListeners || undefined;\n    }\n    module.exports = EventEmitter;\n    \n    // Backwards-compat with node 0.10.x\n    EventEmitter.EventEmitter = EventEmitter;\n    \n    EventEmitter.prototype._events = undefined;\n    EventEmitter.prototype._maxListeners = undefined;\n    \n    // By default EventEmitters will print a warning if more than 10 listeners are\n    // added to it. This is a useful default which helps finding memory leaks.\n    EventEmitter.defaultMaxListeners = 10;\n    \n    // Obviously not all Emitters should be limited to 10. This function allows\n    // that to be increased. Set to zero for unlimited.\n    EventEmitter.prototype.setMaxListeners = function(n) {\n      if (!isNumber(n) || n < 0 || isNaN(n))\n        throw TypeError('n must be a positive number');\n      this._maxListeners = n;\n      return this;\n    };\n    \n    EventEmitter.prototype.emit = function(type) {\n      var er, handler, len, args, i, listeners;\n    \n      if (!this._events)\n        this._events = {};\n    \n      // If there is no 'error' event listener then throw.\n      if (type === 'error') {\n        if (!this._events.error ||\n            (isObject(this._events.error) && !this._events.error.length)) {\n          er = arguments[1];\n          if (er instanceof Error) {\n            throw er; // Unhandled 'error' event\n          }\n          throw TypeError('Uncaught, unspecified \"error\" event.');\n        }\n      }\n    \n      handler = this._events[type];\n    \n      if (isUndefined(handler))\n        return false;\n    \n      if (isFunction(handler)) {\n        switch (arguments.length) {\n          // fast cases\n          case 1:\n            handler.call(this);\n            break;\n          case 2:\n            handler.call(this, arguments[1]);\n            break;\n          case 3:\n            handler.call(this, arguments[1], arguments[2]);\n            break;\n          // slower\n          default:\n            len = arguments.length;\n            args = new Array(len - 1);\n            for (i = 1; i < len; i++)\n              args[i - 1] = arguments[i];\n            handler.apply(this, args);\n        }\n      } else if (isObject(handler)) {\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n    \n        listeners = handler.slice();\n        len = listeners.length;\n        for (i = 0; i < len; i++)\n          listeners[i].apply(this, args);\n      }\n    \n      return true;\n    };\n    \n    EventEmitter.prototype.addListener = function(type, listener) {\n      var m;\n    \n      if (!isFunction(listener))\n        throw TypeError('listener must be a function');\n    \n      if (!this._events)\n        this._events = {};\n    \n      // To avoid recursion in the case that type === \"newListener\"! Before\n      // adding it to the listeners, first emit \"newListener\".\n      if (this._events.newListener)\n        this.emit('newListener', type,\n                  isFunction(listener.listener) ?\n                  listener.listener : listener);\n    \n      if (!this._events[type])\n        // Optimize the case of one listener. Don't need the extra array object.\n        this._events[type] = listener;\n      else if (isObject(this._events[type]))\n        // If we've already got an array, just append.\n        this._events[type].push(listener);\n      else\n        // Adding the second element, need to change to array.\n        this._events[type] = [this._events[type], listener];\n    \n      // Check for listener leak\n      if (isObject(this._events[type]) && !this._events[type].warned) {\n        var m;\n        if (!isUndefined(this._maxListeners)) {\n          m = this._maxListeners;\n        } else {\n          m = EventEmitter.defaultMaxListeners;\n        }\n    \n        if (m && m > 0 && this._events[type].length > m) {\n          this._events[type].warned = true;\n          console.error('(node) warning: possible EventEmitter memory ' +\n                        'leak detected. %d listeners added. ' +\n                        'Use emitter.setMaxListeners() to increase limit.',\n                        this._events[type].length);\n          if (typeof console.trace === 'function') {\n            // not supported in IE 10\n            console.trace();\n          }\n        }\n      }\n    \n      return this;\n    };\n    \n    EventEmitter.prototype.on = EventEmitter.prototype.addListener;\n    \n    EventEmitter.prototype.once = function(type, listener) {\n      if (!isFunction(listener))\n        throw TypeError('listener must be a function');\n    \n      var fired = false;\n    \n      function g() {\n        this.removeListener(type, g);\n    \n        if (!fired) {\n          fired = true;\n          listener.apply(this, arguments);\n        }\n      }\n    \n      g.listener = listener;\n      this.on(type, g);\n    \n      return this;\n    };\n    \n    // emits a 'removeListener' event iff the listener was removed\n    EventEmitter.prototype.removeListener = function(type, listener) {\n      var list, position, length, i;\n    \n      if (!isFunction(listener))\n        throw TypeError('listener must be a function');\n    \n      if (!this._events || !this._events[type])\n        return this;\n    \n      list = this._events[type];\n      length = list.length;\n      position = -1;\n    \n      if (list === listener ||\n          (isFunction(list.listener) && list.listener === listener)) {\n        delete this._events[type];\n        if (this._events.removeListener)\n          this.emit('removeListener', type, listener);\n    \n      } else if (isObject(list)) {\n        for (i = length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            position = i;\n            break;\n          }\n        }\n    \n        if (position < 0)\n          return this;\n    \n        if (list.length === 1) {\n          list.length = 0;\n          delete this._events[type];\n        } else {\n          list.splice(position, 1);\n        }\n    \n        if (this._events.removeListener)\n          this.emit('removeListener', type, listener);\n      }\n    \n      return this;\n    };\n    \n    EventEmitter.prototype.removeAllListeners = function(type) {\n      var key, listeners;\n    \n      if (!this._events)\n        return this;\n    \n      // not listening for removeListener, no need to emit\n      if (!this._events.removeListener) {\n        if (arguments.length === 0)\n          this._events = {};\n        else if (this._events[type])\n          delete this._events[type];\n        return this;\n      }\n    \n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        for (key in this._events) {\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = {};\n        return this;\n      }\n    \n      listeners = this._events[type];\n    \n      if (isFunction(listeners)) {\n        this.removeListener(type, listeners);\n      } else {\n        // LIFO order\n        while (listeners.length)\n          this.removeListener(type, listeners[listeners.length - 1]);\n      }\n      delete this._events[type];\n    \n      return this;\n    };\n    \n    EventEmitter.prototype.listeners = function(type) {\n      var ret;\n      if (!this._events || !this._events[type])\n        ret = [];\n      else if (isFunction(this._events[type]))\n        ret = [this._events[type]];\n      else\n        ret = this._events[type].slice();\n      return ret;\n    };\n    \n    EventEmitter.listenerCount = function(emitter, type) {\n      var ret;\n      if (!emitter._events || !emitter._events[type])\n        ret = 0;\n      else if (isFunction(emitter._events[type]))\n        ret = 1;\n      else\n        ret = emitter._events[type].length;\n      return ret;\n    };\n    \n    function isFunction(arg) {\n      return typeof arg === 'function';\n    }\n    \n    function isNumber(arg) {\n      return typeof arg === 'number';\n    }\n    \n    function isObject(arg) {\n      return typeof arg === 'object' && arg !== null;\n    }\n    \n    function isUndefined(arg) {\n      return arg === void 0;\n    }\n    \n    },{}],2:[function(require,module,exports){\n    module.exports={\n      \"name\": \"sip.js\",\n      \"title\": \"SIP.js\",\n      \"description\": \"A simple, intuitive, and powerful JavaScript signaling library\",\n      \"version\": \"0.7.8\",\n      \"main\": \"src/index.js\",\n      \"browser\": {\n        \"./src/environment.js\": \"./src/environment_browser.js\"\n      },\n      \"homepage\": \"http://sipjs.com\",\n      \"author\": \"OnSIP <developer@onsip.com> (http://sipjs.com/authors/)\",\n      \"contributors\": [\n        {\n          \"url\": \"https://github.com/onsip/SIP.js/blob/master/THANKS.md\"\n        }\n      ],\n      \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"https://github.com/onsip/SIP.js.git\"\n      },\n      \"keywords\": [\n        \"sip\",\n        \"websocket\",\n        \"webrtc\",\n        \"library\",\n        \"javascript\"\n      ],\n      \"devDependencies\": {\n        \"beefy\": \"^2.1.5\",\n        \"browserify\": \"^4.1.8\",\n        \"grunt\": \"~0.4.0\",\n        \"grunt-browserify\": \"^4.0.1\",\n        \"grunt-cli\": \"~0.1.6\",\n        \"grunt-contrib-copy\": \"^0.5.0\",\n        \"grunt-contrib-jasmine\": \"^1.0.3\",\n        \"grunt-contrib-jshint\": \">0.5.0\",\n        \"grunt-contrib-uglify\": \"~0.2.0\",\n        \"grunt-peg\": \"~1.3.1\",\n        \"grunt-trimtrailingspaces\": \"^0.4.0\",\n        \"pegjs\": \"^0.8.0\"\n      },\n      \"engines\": {\n        \"node\": \">=0.12\"\n      },\n      \"license\": \"MIT\",\n      \"scripts\": {\n        \"repl\": \"beefy test/repl.js --open\",\n        \"build\": \"grunt build\",\n        \"prepublish\": \"cd src/Grammar && mkdir -p dist && pegjs --extra-options-file peg.json src/Grammar.pegjs dist/Grammar.js\",\n        \"test\": \"grunt travis --verbose\"\n      },\n      \"dependencies\": {\n        \"ws\": \"^1.0.1\"\n      },\n      \"optionalDependencies\": {\n        \"promiscuous\": \"^0.6.0\"\n      }\n    }\n    \n    },{}],3:[function(require,module,exports){\n    \"use strict\";\n    module.exports = function (SIP) {\n    var ClientContext;\n    \n    ClientContext = function (ua, method, target, options) {\n      var originalTarget = target;\n    \n      // Validate arguments\n      if (target === undefined) {\n        throw new TypeError('Not enough arguments');\n      }\n    \n      this.ua = ua;\n      this.logger = ua.getLogger('sip.clientcontext');\n      this.method = method;\n      target = ua.normalizeTarget(target);\n      if (!target) {\n        throw new TypeError('Invalid target: ' + originalTarget);\n      }\n    \n      /* Options\n       * - extraHeaders\n       * - params\n       * - contentType\n       * - body\n       */\n      options = Object.create(options || Object.prototype);\n      options.extraHeaders = (options.extraHeaders || []).slice();\n    \n      // Build the request\n      this.request = new SIP.OutgoingRequest(this.method,\n                                             target,\n                                             this.ua,\n                                             options.params,\n                                             options.extraHeaders);\n      if (options.body) {\n        this.body = {};\n        this.body.body = options.body;\n        if (options.contentType) {\n          this.body.contentType = options.contentType;\n        }\n        this.request.body = this.body;\n      }\n    \n      /* Set other properties from the request */\n      this.localIdentity = this.request.from;\n      this.remoteIdentity = this.request.to;\n    \n      this.data = {};\n    };\n    ClientContext.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    ClientContext.prototype.send = function () {\n      (new SIP.RequestSender(this, this.ua)).send();\n      return this;\n    };\n    \n    ClientContext.prototype.cancel = function (options) {\n      options = options || {};\n    \n      options.extraHeaders = (options.extraHeaders || []).slice();\n    \n      var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n      this.request.cancel(cancel_reason, options.extraHeaders);\n    \n      this.emit('cancel');\n    };\n    \n    ClientContext.prototype.receiveResponse = function (response) {\n      var cause = SIP.Utils.getReasonPhrase(response.status_code);\n    \n      switch(true) {\n        case /^1[0-9]{2}$/.test(response.status_code):\n          this.emit('progress', response, cause);\n          break;\n    \n        case /^2[0-9]{2}$/.test(response.status_code):\n          if(this.ua.applicants[this]) {\n            delete this.ua.applicants[this];\n          }\n          this.emit('accepted', response, cause);\n          break;\n    \n        default:\n          if(this.ua.applicants[this]) {\n            delete this.ua.applicants[this];\n          }\n          this.emit('rejected', response, cause);\n          this.emit('failed', response, cause);\n          break;\n      }\n    \n    };\n    \n    ClientContext.prototype.onRequestTimeout = function () {\n      this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    \n    ClientContext.prototype.onTransportError = function () {\n      this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    \n    SIP.ClientContext = ClientContext;\n    };\n    \n    },{}],4:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP Constants\n     */\n    \n    /**\n     * SIP Constants.\n     * @augments SIP\n     */\n    \n    module.exports = function (name, version) {\n    return {\n      USER_AGENT: name +'/'+ version,\n    \n      // SIP scheme\n      SIP:  'sip',\n      SIPS: 'sips',\n    \n      // End and Failure causes\n      causes: {\n        // Generic error causes\n        CONNECTION_ERROR:         'Connection Error',\n        REQUEST_TIMEOUT:          'Request Timeout',\n        SIP_FAILURE_CODE:         'SIP Failure Code',\n        INTERNAL_ERROR:           'Internal Error',\n    \n        // SIP error causes\n        BUSY:                     'Busy',\n        REJECTED:                 'Rejected',\n        REDIRECTED:               'Redirected',\n        UNAVAILABLE:              'Unavailable',\n        NOT_FOUND:                'Not Found',\n        ADDRESS_INCOMPLETE:       'Address Incomplete',\n        INCOMPATIBLE_SDP:         'Incompatible SDP',\n        AUTHENTICATION_ERROR:     'Authentication Error',\n        DIALOG_ERROR:             'Dialog Error',\n    \n        // Session error causes\n        WEBRTC_NOT_SUPPORTED:     'WebRTC Not Supported',\n        WEBRTC_ERROR:             'WebRTC Error',\n        CANCELED:                 'Canceled',\n        NO_ANSWER:                'No Answer',\n        EXPIRES:                  'Expires',\n        NO_ACK:                   'No ACK',\n        NO_PRACK:                 'No PRACK',\n        USER_DENIED_MEDIA_ACCESS: 'User Denied Media Access',\n        BAD_MEDIA_DESCRIPTION:    'Bad Media Description',\n        RTP_TIMEOUT:              'RTP Timeout'\n      },\n    \n      supported: {\n        UNSUPPORTED:        'none',\n        SUPPORTED:          'supported',\n        REQUIRED:           'required'\n      },\n    \n      SIP_ERROR_CAUSES: {\n        REDIRECTED: [300,301,302,305,380],\n        BUSY: [486,600],\n        REJECTED: [403,603],\n        NOT_FOUND: [404,604],\n        UNAVAILABLE: [480,410,408,430],\n        ADDRESS_INCOMPLETE: [484],\n        INCOMPATIBLE_SDP: [488,606],\n        AUTHENTICATION_ERROR:[401,407]\n      },\n    \n      // SIP Methods\n      ACK:        'ACK',\n      BYE:        'BYE',\n      CANCEL:     'CANCEL',\n      INFO:       'INFO',\n      INVITE:     'INVITE',\n      MESSAGE:    'MESSAGE',\n      NOTIFY:     'NOTIFY',\n      OPTIONS:    'OPTIONS',\n      REGISTER:   'REGISTER',\n      UPDATE:     'UPDATE',\n      SUBSCRIBE:  'SUBSCRIBE',\n      REFER:      'REFER',\n      PRACK:      'PRACK',\n    \n      /* SIP Response Reasons\n       * DOC: http://www.iana.org/assignments/sip-parameters\n       * Copied from https://github.com/versatica/OverSIP/blob/master/lib/oversip/sip/constants.rb#L7\n       */\n      REASON_PHRASE: {\n        100: 'Trying',\n        180: 'Ringing',\n        181: 'Call Is Being Forwarded',\n        182: 'Queued',\n        183: 'Session Progress',\n        199: 'Early Dialog Terminated',  // draft-ietf-sipcore-199\n        200: 'OK',\n        202: 'Accepted',  // RFC 3265\n        204: 'No Notification',  //RFC 5839\n        300: 'Multiple Choices',\n        301: 'Moved Permanently',\n        302: 'Moved Temporarily',\n        305: 'Use Proxy',\n        380: 'Alternative Service',\n        400: 'Bad Request',\n        401: 'Unauthorized',\n        402: 'Payment Required',\n        403: 'Forbidden',\n        404: 'Not Found',\n        405: 'Method Not Allowed',\n        406: 'Not Acceptable',\n        407: 'Proxy Authentication Required',\n        408: 'Request Timeout',\n        410: 'Gone',\n        412: 'Conditional Request Failed',  // RFC 3903\n        413: 'Request Entity Too Large',\n        414: 'Request-URI Too Long',\n        415: 'Unsupported Media Type',\n        416: 'Unsupported URI Scheme',\n        417: 'Unknown Resource-Priority',  // RFC 4412\n        420: 'Bad Extension',\n        421: 'Extension Required',\n        422: 'Session Interval Too Small',  // RFC 4028\n        423: 'Interval Too Brief',\n        428: 'Use Identity Header',  // RFC 4474\n        429: 'Provide Referrer Identity',  // RFC 3892\n        430: 'Flow Failed',  // RFC 5626\n        433: 'Anonymity Disallowed',  // RFC 5079\n        436: 'Bad Identity-Info',  // RFC 4474\n        437: 'Unsupported Certificate',  // RFC 4744\n        438: 'Invalid Identity Header',  // RFC 4744\n        439: 'First Hop Lacks Outbound Support',  // RFC 5626\n        440: 'Max-Breadth Exceeded',  // RFC 5393\n        469: 'Bad Info Package',  // draft-ietf-sipcore-info-events\n        470: 'Consent Needed',  // RFC 5360\n        478: 'Unresolvable Destination',  // Custom code copied from Kamailio.\n        480: 'Temporarily Unavailable',\n        481: 'Call/Transaction Does Not Exist',\n        482: 'Loop Detected',\n        483: 'Too Many Hops',\n        484: 'Address Incomplete',\n        485: 'Ambiguous',\n        486: 'Busy Here',\n        487: 'Request Terminated',\n        488: 'Not Acceptable Here',\n        489: 'Bad Event',  // RFC 3265\n        491: 'Request Pending',\n        493: 'Undecipherable',\n        494: 'Security Agreement Required',  // RFC 3329\n        500: 'Internal Server Error',\n        501: 'Not Implemented',\n        502: 'Bad Gateway',\n        503: 'Service Unavailable',\n        504: 'Server Time-out',\n        505: 'Version Not Supported',\n        513: 'Message Too Large',\n        580: 'Precondition Failure',  // RFC 3312\n        600: 'Busy Everywhere',\n        603: 'Decline',\n        604: 'Does Not Exist Anywhere',\n        606: 'Not Acceptable'\n      },\n    \n      /* SIP Option Tags\n       * DOC: http://www.iana.org/assignments/sip-parameters/sip-parameters.xhtml#sip-parameters-4\n       */\n      OPTION_TAGS: {\n        '100rel':                   true,  // RFC 3262\n        199:                        true,  // RFC 6228\n        answermode:                 true,  // RFC 5373\n        'early-session':            true,  // RFC 3959\n        eventlist:                  true,  // RFC 4662\n        explicitsub:                true,  // RFC-ietf-sipcore-refer-explicit-subscription-03\n        'from-change':              true,  // RFC 4916\n        'geolocation-http':         true,  // RFC 6442\n        'geolocation-sip':          true,  // RFC 6442\n        gin:                        true,  // RFC 6140\n        gruu:                       true,  // RFC 5627\n        histinfo:                   true,  // RFC 7044\n        ice:                        true,  // RFC 5768\n        join:                       true,  // RFC 3911\n        'multiple-refer':           true,  // RFC 5368\n        norefersub:                 true,  // RFC 4488\n        nosub:                      true,  // RFC-ietf-sipcore-refer-explicit-subscription-03\n        outbound:                   true,  // RFC 5626\n        path:                       true,  // RFC 3327\n        policy:                     true,  // RFC 6794\n        precondition:               true,  // RFC 3312\n        pref:                       true,  // RFC 3840\n        privacy:                    true,  // RFC 3323\n        'recipient-list-invite':    true,  // RFC 5366\n        'recipient-list-message':   true,  // RFC 5365\n        'recipient-list-subscribe': true,  // RFC 5367\n        replaces:                   true,  // RFC 3891\n        'resource-priority':        true,  // RFC 4412\n        'sdp-anat':                 true,  // RFC 4092\n        'sec-agree':                true,  // RFC 3329\n        tdialog:                    true,  // RFC 4538\n        timer:                      true,  // RFC 4028\n        uui:                        true   // RFC 7433\n      }\n    };\n    };\n    \n    },{}],5:[function(require,module,exports){\n    \"use strict\";\n    \n    /**\n     * @fileoverview In-Dialog Request Sender\n     */\n    \n    /**\n     * @augments SIP.Dialog\n     * @class Class creating an In-dialog request sender.\n     * @param {SIP.Dialog} dialog\n     * @param {Object} applicant\n     * @param {SIP.OutgoingRequest} request\n     */\n    /**\n     * @fileoverview in-Dialog Request Sender\n     */\n    \n    module.exports = function (SIP) {\n    var RequestSender;\n    \n    RequestSender = function(dialog, applicant, request) {\n    \n      this.dialog = dialog;\n      this.applicant = applicant;\n      this.request = request;\n    \n      // RFC3261 14.1 Modifying an Existing Session. UAC Behavior.\n      this.reattempt = false;\n      this.reattemptTimer = null;\n    };\n    \n    RequestSender.prototype = {\n      send: function() {\n        var self = this,\n          request_sender = new SIP.RequestSender(this, this.dialog.owner.ua);\n    \n          request_sender.send();\n    \n        // RFC3261 14.2 Modifying an Existing Session -UAC BEHAVIOR-\n        if (this.request.method === SIP.C.INVITE && request_sender.clientTransaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n          this.dialog.uac_pending_reply = true;\n          request_sender.clientTransaction.on('stateChanged', function stateChanged(){\n            if (this.state === SIP.Transactions.C.STATUS_ACCEPTED ||\n                this.state === SIP.Transactions.C.STATUS_COMPLETED ||\n                this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n    \n              this.removeListener('stateChanged', stateChanged);\n              self.dialog.uac_pending_reply = false;\n    \n              if (self.dialog.uas_pending_reply === false) {\n                self.dialog.owner.onReadyToReinvite();\n              }\n            }\n          });\n        }\n      },\n    \n      onRequestTimeout: function() {\n        this.applicant.onRequestTimeout();\n      },\n    \n      onTransportError: function() {\n        this.applicant.onTransportError();\n      },\n    \n      receiveResponse: function(response) {\n        var self = this;\n    \n        // RFC3261 12.2.1.2 408 or 481 is received for a request within a dialog.\n        if (response.status_code === 408 || response.status_code === 481) {\n          this.applicant.onDialogError(response);\n        } else if (response.method === SIP.C.INVITE && response.status_code === 491) {\n          if (this.reattempt) {\n            this.applicant.receiveResponse(response);\n          } else {\n            this.request.cseq.value = this.dialog.local_seqnum += 1;\n            this.reattemptTimer = SIP.Timers.setTimeout(\n              function() {\n                if (self.applicant.owner.status !== SIP.Session.C.STATUS_TERMINATED) {\n                  self.reattempt = true;\n                  self.request_sender.send();\n                }\n              },\n              this.getReattemptTimeout()\n            );\n          }\n        } else {\n          this.applicant.receiveResponse(response);\n        }\n      }\n    };\n    \n    return RequestSender;\n    };\n    \n    },{}],6:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP Dialog\n     */\n    \n    /**\n     * @augments SIP\n     * @class Class creating a SIP dialog.\n     * @param {SIP.RTCSession} owner\n     * @param {SIP.IncomingRequest|SIP.IncomingResponse} message\n     * @param {Enum} type UAC / UAS\n     * @param {Enum} state SIP.Dialog.C.STATUS_EARLY / SIP.Dialog.C.STATUS_CONFIRMED\n     */\n    module.exports = function (SIP) {\n    \n    var RequestSender = require('./Dialog/RequestSender')(SIP);\n    \n    var Dialog,\n      C = {\n        // Dialog states\n        STATUS_EARLY:       1,\n        STATUS_CONFIRMED:   2\n      };\n    \n    // RFC 3261 12.1\n    Dialog = function(owner, message, type, state) {\n      var contact;\n    \n      this.uac_pending_reply = false;\n      this.uas_pending_reply = false;\n    \n      if(!message.hasHeader('contact')) {\n        return {\n          error: 'unable to create a Dialog without Contact header field'\n        };\n      }\n    \n      if(message instanceof SIP.IncomingResponse) {\n        state = (message.status_code < 200) ? C.STATUS_EARLY : C.STATUS_CONFIRMED;\n      } else {\n        // Create confirmed dialog if state is not defined\n        state = state || C.STATUS_CONFIRMED;\n      }\n    \n      contact = message.parseHeader('contact');\n    \n      // RFC 3261 12.1.1\n      if(type === 'UAS') {\n        this.id = {\n          call_id: message.call_id,\n          local_tag: message.to_tag,\n          remote_tag: message.from_tag,\n          toString: function() {\n            return this.call_id + this.local_tag + this.remote_tag;\n          }\n        };\n        this.state = state;\n        this.remote_seqnum = message.cseq;\n        this.local_uri = message.parseHeader('to').uri;\n        this.remote_uri = message.parseHeader('from').uri;\n        this.remote_target = contact.uri;\n        this.route_set = message.getHeaders('record-route');\n        this.invite_seqnum = message.cseq;\n        this.local_seqnum = message.cseq;\n      }\n      // RFC 3261 12.1.2\n      else if(type === 'UAC') {\n        this.id = {\n          call_id: message.call_id,\n          local_tag: message.from_tag,\n          remote_tag: message.to_tag,\n          toString: function() {\n            return this.call_id + this.local_tag + this.remote_tag;\n          }\n        };\n        this.state = state;\n        this.invite_seqnum = message.cseq;\n        this.local_seqnum = message.cseq;\n        this.local_uri = message.parseHeader('from').uri;\n        this.pracked = [];\n        this.remote_uri = message.parseHeader('to').uri;\n        this.remote_target = contact.uri;\n        this.route_set = message.getHeaders('record-route').reverse();\n    \n        //RENDERBODY\n        if (this.state === C.STATUS_EARLY && (!owner.hasOffer)) {\n          this.mediaHandler = owner.mediaHandlerFactory(owner);\n        }\n      }\n    \n      this.logger = owner.ua.getLogger('sip.dialog', this.id.toString());\n      this.owner = owner;\n      owner.ua.dialogs[this.id.toString()] = this;\n      this.logger.log('new ' + type + ' dialog created with status ' + (this.state === C.STATUS_EARLY ? 'EARLY': 'CONFIRMED'));\n      owner.emit('dialog', this);\n    };\n    \n    Dialog.prototype = {\n      /**\n       * @param {SIP.IncomingMessage} message\n       * @param {Enum} UAC/UAS\n       */\n      update: function(message, type) {\n        this.state = C.STATUS_CONFIRMED;\n    \n        this.logger.log('dialog '+ this.id.toString() +'  changed to CONFIRMED state');\n    \n        if(type === 'UAC') {\n          // RFC 3261 13.2.2.4\n          this.route_set = message.getHeaders('record-route').reverse();\n        }\n      },\n    \n      terminate: function() {\n        this.logger.log('dialog ' + this.id.toString() + ' deleted');\n        if (this.mediaHandler && this.state !== C.STATUS_CONFIRMED) {\n          this.mediaHandler.peerConnection.close();\n        }\n        delete this.owner.ua.dialogs[this.id.toString()];\n      },\n    \n      /**\n      * @param {String} method request method\n      * @param {Object} extraHeaders extra headers\n      * @returns {SIP.OutgoingRequest}\n      */\n    \n      // RFC 3261 12.2.1.1\n      createRequest: function(method, extraHeaders, body) {\n        var cseq, request;\n        extraHeaders = (extraHeaders || []).slice();\n    \n        if(!this.local_seqnum) { this.local_seqnum = Math.floor(Math.random() * 10000); }\n    \n        cseq = (method === SIP.C.CANCEL || method === SIP.C.ACK) ? this.invite_seqnum : this.local_seqnum += 1;\n    \n        request = new SIP.OutgoingRequest(\n          method,\n          this.remote_target,\n          this.owner.ua, {\n            'cseq': cseq,\n            'call_id': this.id.call_id,\n            'from_uri': this.local_uri,\n            'from_tag': this.id.local_tag,\n            'to_uri': this.remote_uri,\n            'to_tag': this.id.remote_tag,\n            'route_set': this.route_set\n          }, extraHeaders, body);\n    \n        request.dialog = this;\n    \n        return request;\n      },\n    \n      /**\n      * @param {SIP.IncomingRequest} request\n      * @returns {Boolean}\n      */\n    \n      // RFC 3261 12.2.2\n      checkInDialogRequest: function(request) {\n        var self = this;\n    \n        if(!this.remote_seqnum) {\n          this.remote_seqnum = request.cseq;\n        } else if(request.cseq < this.remote_seqnum) {\n            //Do not try to reply to an ACK request.\n            if (request.method !== SIP.C.ACK) {\n              request.reply(500);\n            }\n            if (request.cseq === this.invite_seqnum) {\n              return true;\n            }\n            return false;\n        } else if(request.cseq > this.remote_seqnum) {\n          this.remote_seqnum = request.cseq;\n        }\n    \n        switch(request.method) {\n          // RFC3261 14.2 Modifying an Existing Session -UAS BEHAVIOR-\n          case SIP.C.INVITE:\n            if (this.uac_pending_reply === true) {\n              request.reply(491);\n            } else if (this.uas_pending_reply === true) {\n              var retryAfter = (Math.random() * 10 | 0) + 1;\n              request.reply(500, null, ['Retry-After:' + retryAfter]);\n              return false;\n            } else {\n              this.uas_pending_reply = true;\n              request.server_transaction.on('stateChanged', function stateChanged(){\n                if (this.state === SIP.Transactions.C.STATUS_ACCEPTED ||\n                    this.state === SIP.Transactions.C.STATUS_COMPLETED ||\n                    this.state === SIP.Transactions.C.STATUS_TERMINATED) {\n    \n                  this.removeListener('stateChanged', stateChanged);\n                  self.uas_pending_reply = false;\n    \n                  if (self.uac_pending_reply === false) {\n                    self.owner.onReadyToReinvite();\n                  }\n                }\n              });\n            }\n    \n            // RFC3261 12.2.2 Replace the dialog`s remote target URI if the request is accepted\n            if(request.hasHeader('contact')) {\n              request.server_transaction.on('stateChanged', function(){\n                if (this.state === SIP.Transactions.C.STATUS_ACCEPTED) {\n                  self.remote_target = request.parseHeader('contact').uri;\n                }\n              });\n            }\n            break;\n          case SIP.C.NOTIFY:\n            // RFC6665 3.2 Replace the dialog`s remote target URI if the request is accepted\n            if(request.hasHeader('contact')) {\n              request.server_transaction.on('stateChanged', function(){\n                if (this.state === SIP.Transactions.C.STATUS_COMPLETED) {\n                  self.remote_target = request.parseHeader('contact').uri;\n                }\n              });\n            }\n            break;\n        }\n    \n        return true;\n      },\n    \n      sendRequest: function(applicant, method, options) {\n        options = options || {};\n    \n        var extraHeaders = (options.extraHeaders || []).slice();\n    \n        var body = null;\n        if (options.body) {\n          if (options.body.body) {\n            body = options.body;\n          } else {\n            body = {};\n            body.body = options.body;\n            if (options.contentType) {\n              body.contentType = options.contentType;\n            }\n          }\n        }\n    \n        var request = this.createRequest(method, extraHeaders, body),\n          request_sender = new RequestSender(this, applicant, request);\n    \n        request_sender.send();\n    \n        return request;\n      },\n    \n      /**\n      * @param {SIP.IncomingRequest} request\n      */\n      receiveRequest: function(request) {\n        //Check in-dialog request\n        if(!this.checkInDialogRequest(request)) {\n          return;\n        }\n    \n        this.owner.receiveRequest(request);\n      }\n    };\n    \n    Dialog.C = C;\n    SIP.Dialog = Dialog;\n    };\n    \n    },{\"./Dialog/RequestSender\":5}],7:[function(require,module,exports){\n    \"use strict\";\n    \n    /**\n     * @fileoverview SIP Digest Authentication\n     */\n    \n    /**\n     * SIP Digest Authentication.\n     * @augments SIP.\n     * @function Digest Authentication\n     * @param {SIP.UA} ua\n     */\n    module.exports = function (Utils) {\n    var DigestAuthentication;\n    \n    DigestAuthentication = function(ua) {\n      this.logger = ua.getLogger('sipjs.digestauthentication');\n      this.username = ua.configuration.authorizationUser;\n      this.password = ua.configuration.password;\n      this.cnonce = null;\n      this.nc = 0;\n      this.ncHex = '00000000';\n      this.response = null;\n    };\n    \n    \n    /**\n    * Performs Digest authentication given a SIP request and the challenge\n    * received in a response to that request.\n    * Returns true if credentials were successfully generated, false otherwise.\n    *\n    * @param {SIP.OutgoingRequest} request\n    * @param {Object} challenge\n    */\n    DigestAuthentication.prototype.authenticate = function(request, challenge) {\n      // Inspect and validate the challenge.\n    \n      this.algorithm = challenge.algorithm;\n      this.realm = challenge.realm;\n      this.nonce = challenge.nonce;\n      this.opaque = challenge.opaque;\n      this.stale = challenge.stale;\n    \n      if (this.algorithm) {\n        if (this.algorithm !== 'MD5') {\n          this.logger.warn('challenge with Digest algorithm different than \"MD5\", authentication aborted');\n          return false;\n        }\n      } else {\n        this.algorithm = 'MD5';\n      }\n    \n      if (! this.realm) {\n        this.logger.warn('challenge without Digest realm, authentication aborted');\n        return false;\n      }\n    \n      if (! this.nonce) {\n        this.logger.warn('challenge without Digest nonce, authentication aborted');\n        return false;\n      }\n    \n      // 'qop' can contain a list of values (Array). Let's choose just one.\n      if (challenge.qop) {\n        if (challenge.qop.indexOf('auth') > -1) {\n          this.qop = 'auth';\n        } else if (challenge.qop.indexOf('auth-int') > -1) {\n          this.qop = 'auth-int';\n        } else {\n          // Otherwise 'qop' is present but does not contain 'auth' or 'auth-int', so abort here.\n          this.logger.warn('challenge without Digest qop different than \"auth\" or \"auth-int\", authentication aborted');\n          return false;\n        }\n      } else {\n        this.qop = null;\n      }\n    \n      // Fill other attributes.\n    \n      this.method = request.method;\n      this.uri = request.ruri;\n      this.cnonce = Utils.createRandomToken(12);\n      this.nc += 1;\n      this.updateNcHex();\n    \n      // nc-value = 8LHEX. Max value = 'FFFFFFFF'.\n      if (this.nc === 4294967296) {\n        this.nc = 1;\n        this.ncHex = '00000001';\n      }\n    \n      // Calculate the Digest \"response\" value.\n      this.calculateResponse();\n    \n      return true;\n    };\n    \n    \n    /**\n    * Generate Digest 'response' value.\n    * @private\n    */\n    DigestAuthentication.prototype.calculateResponse = function() {\n      var ha1, ha2;\n    \n      // HA1 = MD5(A1) = MD5(username:realm:password)\n      ha1 = Utils.calculateMD5(this.username + \":\" + this.realm + \":\" + this.password);\n    \n      if (this.qop === 'auth') {\n        // HA2 = MD5(A2) = MD5(method:digestURI)\n        ha2 = Utils.calculateMD5(this.method + \":\" + this.uri);\n        // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n        this.response = Utils.calculateMD5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth:\" + ha2);\n    \n      } else if (this.qop === 'auth-int') {\n        // HA2 = MD5(A2) = MD5(method:digestURI:MD5(entityBody))\n        ha2 = Utils.calculateMD5(this.method + \":\" + this.uri + \":\" + Utils.calculateMD5(this.body ? this.body : \"\"));\n        // response = MD5(HA1:nonce:nonceCount:credentialsNonce:qop:HA2)\n        this.response = Utils.calculateMD5(ha1 + \":\" + this.nonce + \":\" + this.ncHex + \":\" + this.cnonce + \":auth-int:\" + ha2);\n    \n      } else if (this.qop === null) {\n        // HA2 = MD5(A2) = MD5(method:digestURI)\n        ha2 = Utils.calculateMD5(this.method + \":\" + this.uri);\n        // response = MD5(HA1:nonce:HA2)\n        this.response = Utils.calculateMD5(ha1 + \":\" + this.nonce + \":\" + ha2);\n      }\n    };\n    \n    \n    /**\n    * Return the Proxy-Authorization or WWW-Authorization header value.\n    */\n    DigestAuthentication.prototype.toString = function() {\n      var auth_params = [];\n    \n      if (! this.response) {\n        throw new Error('response field does not exist, cannot generate Authorization header');\n      }\n    \n      auth_params.push('algorithm=' + this.algorithm);\n      auth_params.push('username=\"' + this.username + '\"');\n      auth_params.push('realm=\"' + this.realm + '\"');\n      auth_params.push('nonce=\"' + this.nonce + '\"');\n      auth_params.push('uri=\"' + this.uri + '\"');\n      auth_params.push('response=\"' + this.response + '\"');\n      if (this.opaque) {\n        auth_params.push('opaque=\"' + this.opaque + '\"');\n      }\n      if (this.qop) {\n        auth_params.push('qop=' + this.qop);\n        auth_params.push('cnonce=\"' + this.cnonce + '\"');\n        auth_params.push('nc=' + this.ncHex);\n      }\n    \n      return 'Digest ' + auth_params.join(', ');\n    };\n    \n    \n    /**\n    * Generate the 'nc' value as required by Digest in this.ncHex by reading this.nc.\n    * @private\n    */\n    DigestAuthentication.prototype.updateNcHex = function() {\n      var hex = Number(this.nc).toString(16);\n      this.ncHex = '00000000'.substr(0, 8-hex.length) + hex;\n    };\n    \n    return DigestAuthentication;\n    };\n    \n    },{}],8:[function(require,module,exports){\n    \"use strict\";\n    var NodeEventEmitter = require('events').EventEmitter;\n    \n    module.exports = function (console) {\n    \n    // Don't use `new SIP.EventEmitter()` for inheriting.\n    // Use Object.create(SIP.EventEmitter.prototoype);\n    function EventEmitter () {\n      NodeEventEmitter.call(this);\n    }\n    \n    EventEmitter.prototype = Object.create(NodeEventEmitter.prototype, {\n      constructor: {\n        value: EventEmitter,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    \n    EventEmitter.prototype.off = function off (eventName, listener) {\n      var warning = '';\n      warning += 'SIP.EventEmitter#off is deprecated and may be removed in future SIP.js versions.\\n';\n      warning += 'Please use removeListener or removeAllListeners instead.\\n';\n      warning += 'See here for more details:\\n';\n      warning += 'http://nodejs.org/api/events.html#events_emitter_removelistener_event_listener';\n      console.warn(warning);\n    \n      if (arguments.length < 2) {\n        return this.removeAllListeners.apply(this, arguments);\n      } else {\n        return this.removeListener(eventName, listener);\n      }\n    };\n    \n    return EventEmitter;\n    \n    };\n    \n    },{\"events\":1}],9:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview Exceptions\n     */\n    \n    /**\n     * SIP Exceptions.\n     * @augments SIP\n     */\n    module.exports = {\n      ConfigurationError: (function(){\n        var exception = function(parameter, value) {\n          this.code = 1;\n          this.name = 'CONFIGURATION_ERROR';\n          this.parameter = parameter;\n          this.value = value;\n          this.message = (!this.value)? 'Missing parameter: '+ this.parameter : 'Invalid value '+ JSON.stringify(this.value) +' for parameter \"'+ this.parameter +'\"';\n        };\n        exception.prototype = new Error();\n        return exception;\n      }()),\n    \n      InvalidStateError: (function(){\n        var exception = function(status) {\n          this.code = 2;\n          this.name = 'INVALID_STATE_ERROR';\n          this.status = status;\n          this.message = 'Invalid status: ' + status;\n        };\n        exception.prototype = new Error();\n        return exception;\n      }()),\n    \n      NotSupportedError: (function(){\n        var exception = function(message) {\n          this.code = 3;\n          this.name = 'NOT_SUPPORTED_ERROR';\n          this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n      }()),\n    \n      GetDescriptionError: (function(){\n        var exception = function(message) {\n          this.code = 4;\n          this.name = 'GET_DESCRIPTION_ERROR';\n          this.message = message;\n        };\n        exception.prototype = new Error();\n        return exception;\n      }())\n    };\n    \n    },{}],10:[function(require,module,exports){\n    \"use strict\";\n    var Grammar = require('./Grammar/dist/Grammar');\n    \n    module.exports = function (SIP) {\n    \n    return {\n      parse: function parseCustom (input, startRule) {\n        var options = {startRule: startRule, SIP: SIP};\n        try {\n          Grammar.parse(input, options);\n        } catch (e) {\n          options.data = -1;\n        }\n        return options.data;\n      }\n    };\n    \n    };\n    \n    },{\"./Grammar/dist/Grammar\":11}],11:[function(require,module,exports){\n    module.exports = (function() {\n      /*\n       * Generated by PEG.js 0.8.0.\n       *\n       * http://pegjs.majda.cz/\n       */\n    \n      function peg$subclass(child, parent) {\n        function ctor() { this.constructor = child; }\n        ctor.prototype = parent.prototype;\n        child.prototype = new ctor();\n      }\n    \n      function SyntaxError(message, expected, found, offset, line, column) {\n        this.message  = message;\n        this.expected = expected;\n        this.found    = found;\n        this.offset   = offset;\n        this.line     = line;\n        this.column   = column;\n    \n        this.name     = \"SyntaxError\";\n      }\n    \n      peg$subclass(SyntaxError, Error);\n    \n      function parse(input) {\n        var options = arguments.length > 1 ? arguments[1] : {},\n    \n            peg$FAILED = {},\n    \n            peg$startRuleIndices = { Contact: 118, Name_Addr_Header: 155, Record_Route: 175, Request_Response: 81, SIP_URI: 45, Subscription_State: 185, Supported: 190, Require: 181, Via: 193, absoluteURI: 84, Call_ID: 117, Content_Disposition: 129, Content_Length: 134, Content_Type: 135, CSeq: 145, displayName: 121, Event: 148, From: 150, host: 52, Max_Forwards: 153, Min_SE: 212, Proxy_Authenticate: 156, quoted_string: 40, Refer_To: 177, Replaces: 178, Session_Expires: 209, stun_URI: 216, To: 191, turn_URI: 223, uuid: 226, WWW_Authenticate: 208, challenge: 157 },\n            peg$startRuleIndex   = 118,\n    \n            peg$consts = [\n              \"\\r\\n\",\n              { type: \"literal\", value: \"\\r\\n\", description: \"\\\"\\\\r\\\\n\\\"\" },\n              /^[0-9]/,\n              { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n              /^[a-zA-Z]/,\n              { type: \"class\", value: \"[a-zA-Z]\", description: \"[a-zA-Z]\" },\n              /^[0-9a-fA-F]/,\n              { type: \"class\", value: \"[0-9a-fA-F]\", description: \"[0-9a-fA-F]\" },\n              /^[\\0-\\xFF]/,\n              { type: \"class\", value: \"[\\\\0-\\\\xFF]\", description: \"[\\\\0-\\\\xFF]\" },\n              /^[\"]/,\n              { type: \"class\", value: \"[\\\"]\", description: \"[\\\"]\" },\n              \" \",\n              { type: \"literal\", value: \" \", description: \"\\\" \\\"\" },\n              \"\\t\",\n              { type: \"literal\", value: \"\\t\", description: \"\\\"\\\\t\\\"\" },\n              /^[a-zA-Z0-9]/,\n              { type: \"class\", value: \"[a-zA-Z0-9]\", description: \"[a-zA-Z0-9]\" },\n              \";\",\n              { type: \"literal\", value: \";\", description: \"\\\";\\\"\" },\n              \"/\",\n              { type: \"literal\", value: \"/\", description: \"\\\"/\\\"\" },\n              \"?\",\n              { type: \"literal\", value: \"?\", description: \"\\\"?\\\"\" },\n              \":\",\n              { type: \"literal\", value: \":\", description: \"\\\":\\\"\" },\n              \"@\",\n              { type: \"literal\", value: \"@\", description: \"\\\"@\\\"\" },\n              \"&\",\n              { type: \"literal\", value: \"&\", description: \"\\\"&\\\"\" },\n              \"=\",\n              { type: \"literal\", value: \"=\", description: \"\\\"=\\\"\" },\n              \"+\",\n              { type: \"literal\", value: \"+\", description: \"\\\"+\\\"\" },\n              \"$\",\n              { type: \"literal\", value: \"$\", description: \"\\\"$\\\"\" },\n              \",\",\n              { type: \"literal\", value: \",\", description: \"\\\",\\\"\" },\n              \"-\",\n              { type: \"literal\", value: \"-\", description: \"\\\"-\\\"\" },\n              \"_\",\n              { type: \"literal\", value: \"_\", description: \"\\\"_\\\"\" },\n              \".\",\n              { type: \"literal\", value: \".\", description: \"\\\".\\\"\" },\n              \"!\",\n              { type: \"literal\", value: \"!\", description: \"\\\"!\\\"\" },\n              \"~\",\n              { type: \"literal\", value: \"~\", description: \"\\\"~\\\"\" },\n              \"*\",\n              { type: \"literal\", value: \"*\", description: \"\\\"*\\\"\" },\n              \"'\",\n              { type: \"literal\", value: \"'\", description: \"\\\"'\\\"\" },\n              \"(\",\n              { type: \"literal\", value: \"(\", description: \"\\\"(\\\"\" },\n              \")\",\n              { type: \"literal\", value: \")\", description: \"\\\")\\\"\" },\n              peg$FAILED,\n              \"%\",\n              { type: \"literal\", value: \"%\", description: \"\\\"%\\\"\" },\n              null,\n              [],\n              function() {return \" \"; },\n              function() {return ':'; },\n              /^[!-~]/,\n              { type: \"class\", value: \"[!-~]\", description: \"[!-~]\" },\n              /^[\\x80-\\uFFFF]/,\n              { type: \"class\", value: \"[\\\\x80-\\\\uFFFF]\", description: \"[\\\\x80-\\\\uFFFF]\" },\n              /^[\\x80-\\xBF]/,\n              { type: \"class\", value: \"[\\\\x80-\\\\xBF]\", description: \"[\\\\x80-\\\\xBF]\" },\n              /^[a-f]/,\n              { type: \"class\", value: \"[a-f]\", description: \"[a-f]\" },\n              \"`\",\n              { type: \"literal\", value: \"`\", description: \"\\\"`\\\"\" },\n              \"<\",\n              { type: \"literal\", value: \"<\", description: \"\\\"<\\\"\" },\n              \">\",\n              { type: \"literal\", value: \">\", description: \"\\\">\\\"\" },\n              \"\\\\\",\n              { type: \"literal\", value: \"\\\\\", description: \"\\\"\\\\\\\\\\\"\" },\n              \"[\",\n              { type: \"literal\", value: \"[\", description: \"\\\"[\\\"\" },\n              \"]\",\n              { type: \"literal\", value: \"]\", description: \"\\\"]\\\"\" },\n              \"{\",\n              { type: \"literal\", value: \"{\", description: \"\\\"{\\\"\" },\n              \"}\",\n              { type: \"literal\", value: \"}\", description: \"\\\"}\\\"\" },\n              function() {return \"*\"; },\n              function() {return \"/\"; },\n              function() {return \"=\"; },\n              function() {return \"(\"; },\n              function() {return \")\"; },\n              function() {return \">\"; },\n              function() {return \"<\"; },\n              function() {return \",\"; },\n              function() {return \";\"; },\n              function() {return \":\"; },\n              function() {return \"\\\"\"; },\n              /^[!-']/,\n              { type: \"class\", value: \"[!-']\", description: \"[!-']\" },\n              /^[*-[]/,\n              { type: \"class\", value: \"[*-[]\", description: \"[*-[]\" },\n              /^[\\]-~]/,\n              { type: \"class\", value: \"[\\\\]-~]\", description: \"[\\\\]-~]\" },\n              function(contents) {\n                                      return contents; },\n              /^[#-[]/,\n              { type: \"class\", value: \"[#-[]\", description: \"[#-[]\" },\n              /^[\\0-\\t]/,\n              { type: \"class\", value: \"[\\\\0-\\\\t]\", description: \"[\\\\0-\\\\t]\" },\n              /^[\\x0B-\\f]/,\n              { type: \"class\", value: \"[\\\\x0B-\\\\f]\", description: \"[\\\\x0B-\\\\f]\" },\n              /^[\\x0E-]/,\n              { type: \"class\", value: \"[\\\\x0E-]\", description: \"[\\\\x0E-]\" },\n              function() {\n                                      options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port);\n                                      delete options.data.scheme;\n                                      delete options.data.user;\n                                      delete options.data.host;\n                                      delete options.data.host_type;\n                                      delete options.data.port;\n                                    },\n              function() {\n                                      options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                                      delete options.data.scheme;\n                                      delete options.data.user;\n                                      delete options.data.host;\n                                      delete options.data.host_type;\n                                      delete options.data.port;\n                                      delete options.data.uri_params;\n    \n                                      if (options.startRule === 'SIP_URI') { options.data = options.data.uri;}\n                                    },\n              \"sips\",\n              { type: \"literal\", value: \"sips\", description: \"\\\"sips\\\"\" },\n              \"sip\",\n              { type: \"literal\", value: \"sip\", description: \"\\\"sip\\\"\" },\n              function(uri_scheme) {\n                                  options.data.scheme = uri_scheme; },\n              function() {\n                                  options.data.user = decodeURIComponent(text().slice(0, -1));},\n              function() {\n                                  options.data.password = text(); },\n              function() {\n                                  options.data.host = text();\n                                  return options.data.host; },\n              function() {\n                                options.data.host_type = 'domain';\n                                return text(); },\n              /^[a-zA-Z0-9_\\-]/,\n              { type: \"class\", value: \"[a-zA-Z0-9_\\\\-]\", description: \"[a-zA-Z0-9_\\\\-]\" },\n              /^[a-zA-Z0-9\\-]/,\n              { type: \"class\", value: \"[a-zA-Z0-9\\\\-]\", description: \"[a-zA-Z0-9\\\\-]\" },\n              function() {\n                                  options.data.host_type = 'IPv6';\n                                  return text(); },\n              \"::\",\n              { type: \"literal\", value: \"::\", description: \"\\\"::\\\"\" },\n              function() {\n                                options.data.host_type = 'IPv6';\n                                return text(); },\n              function() {\n                                  options.data.host_type = 'IPv4';\n                                  return text(); },\n              \"25\",\n              { type: \"literal\", value: \"25\", description: \"\\\"25\\\"\" },\n              /^[0-5]/,\n              { type: \"class\", value: \"[0-5]\", description: \"[0-5]\" },\n              \"2\",\n              { type: \"literal\", value: \"2\", description: \"\\\"2\\\"\" },\n              /^[0-4]/,\n              { type: \"class\", value: \"[0-4]\", description: \"[0-4]\" },\n              \"1\",\n              { type: \"literal\", value: \"1\", description: \"\\\"1\\\"\" },\n              /^[1-9]/,\n              { type: \"class\", value: \"[1-9]\", description: \"[1-9]\" },\n              function(port) {\n                                  port = parseInt(port.join(''));\n                                  options.data.port = port;\n                                  return port; },\n              \"transport=\",\n              { type: \"literal\", value: \"transport=\", description: \"\\\"transport=\\\"\" },\n              \"udp\",\n              { type: \"literal\", value: \"udp\", description: \"\\\"udp\\\"\" },\n              \"tcp\",\n              { type: \"literal\", value: \"tcp\", description: \"\\\"tcp\\\"\" },\n              \"sctp\",\n              { type: \"literal\", value: \"sctp\", description: \"\\\"sctp\\\"\" },\n              \"tls\",\n              { type: \"literal\", value: \"tls\", description: \"\\\"tls\\\"\" },\n              function(transport) {\n                                    if(!options.data.uri_params) options.data.uri_params={};\n                                    options.data.uri_params['transport'] = transport.toLowerCase(); },\n              \"user=\",\n              { type: \"literal\", value: \"user=\", description: \"\\\"user=\\\"\" },\n              \"phone\",\n              { type: \"literal\", value: \"phone\", description: \"\\\"phone\\\"\" },\n              \"ip\",\n              { type: \"literal\", value: \"ip\", description: \"\\\"ip\\\"\" },\n              function(user) {\n                                    if(!options.data.uri_params) options.data.uri_params={};\n                                    options.data.uri_params['user'] = user.toLowerCase(); },\n              \"method=\",\n              { type: \"literal\", value: \"method=\", description: \"\\\"method=\\\"\" },\n              function(method) {\n                                    if(!options.data.uri_params) options.data.uri_params={};\n                                    options.data.uri_params['method'] = method; },\n              \"ttl=\",\n              { type: \"literal\", value: \"ttl=\", description: \"\\\"ttl=\\\"\" },\n              function(ttl) {\n                                    if(!options.data.params) options.data.params={};\n                                    options.data.params['ttl'] = ttl; },\n              \"maddr=\",\n              { type: \"literal\", value: \"maddr=\", description: \"\\\"maddr=\\\"\" },\n              function(maddr) {\n                                    if(!options.data.uri_params) options.data.uri_params={};\n                                    options.data.uri_params['maddr'] = maddr; },\n              \"lr\",\n              { type: \"literal\", value: \"lr\", description: \"\\\"lr\\\"\" },\n              function() {\n                                    if(!options.data.uri_params) options.data.uri_params={};\n                                    options.data.uri_params['lr'] = undefined; },\n              function(param, value) {\n                                    if(!options.data.uri_params) options.data.uri_params = {};\n                                    if (value === null){\n                                      value = undefined;\n                                    }\n                                    else {\n                                      value = value[1];\n                                    }\n                                    options.data.uri_params[param.toLowerCase()] = value && value.toLowerCase();},\n              function(hname, hvalue) {\n                                    hname = hname.join('').toLowerCase();\n                                    hvalue = hvalue.join('');\n                                    if(!options.data.uri_headers) options.data.uri_headers = {};\n                                    if (!options.data.uri_headers[hname]) {\n                                      options.data.uri_headers[hname] = [hvalue];\n                                    } else {\n                                      options.data.uri_headers[hname].push(hvalue);\n                                    }},\n              function() {\n                                    // lots of tests fail if this isn't guarded...\n                                    if (options.startRule === 'Refer_To') {\n                                      options.data.uri = new options.SIP.URI(options.data.scheme, options.data.user, options.data.host, options.data.port, options.data.uri_params, options.data.uri_headers);\n                                      delete options.data.scheme;\n                                      delete options.data.user;\n                                      delete options.data.host;\n                                      delete options.data.host_type;\n                                      delete options.data.port;\n                                      delete options.data.uri_params;\n                                    }\n                                  },\n              \"//\",\n              { type: \"literal\", value: \"//\", description: \"\\\"//\\\"\" },\n              function() {\n                                  options.data.scheme= text(); },\n              { type: \"literal\", value: \"SIP\", description: \"\\\"SIP\\\"\" },\n              function() {\n                                  options.data.sip_version = text(); },\n              \"INVITE\",\n              { type: \"literal\", value: \"INVITE\", description: \"\\\"INVITE\\\"\" },\n              \"ACK\",\n              { type: \"literal\", value: \"ACK\", description: \"\\\"ACK\\\"\" },\n              \"VXACH\",\n              { type: \"literal\", value: \"VXACH\", description: \"\\\"VXACH\\\"\" },\n              \"OPTIONS\",\n              { type: \"literal\", value: \"OPTIONS\", description: \"\\\"OPTIONS\\\"\" },\n              \"BYE\",\n              { type: \"literal\", value: \"BYE\", description: \"\\\"BYE\\\"\" },\n              \"CANCEL\",\n              { type: \"literal\", value: \"CANCEL\", description: \"\\\"CANCEL\\\"\" },\n              \"REGISTER\",\n              { type: \"literal\", value: \"REGISTER\", description: \"\\\"REGISTER\\\"\" },\n              \"SUBSCRIBE\",\n              { type: \"literal\", value: \"SUBSCRIBE\", description: \"\\\"SUBSCRIBE\\\"\" },\n              \"NOTIFY\",\n              { type: \"literal\", value: \"NOTIFY\", description: \"\\\"NOTIFY\\\"\" },\n              \"REFER\",\n              { type: \"literal\", value: \"REFER\", description: \"\\\"REFER\\\"\" },\n              function() {\n    \n                                  options.data.method = text();\n                                  return options.data.method; },\n              function(status_code) {\n                                options.data.status_code = parseInt(status_code.join('')); },\n              function() {\n                                options.data.reason_phrase = text(); },\n              function() {\n                            options.data = text(); },\n              function() {\n                                      var idx, length;\n                                      length = options.data.multi_header.length;\n                                      for (idx = 0; idx < length; idx++) {\n                                        if (options.data.multi_header[idx].parsed === null) {\n                                          options.data = null;\n                                          break;\n                                        }\n                                      }\n                                      if (options.data !== null) {\n                                        options.data = options.data.multi_header;\n                                      } else {\n                                        options.data = -1;\n                                      }},\n              function() {\n                                      var header;\n                                      if(!options.data.multi_header) options.data.multi_header = [];\n                                      try {\n                                        header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                                        delete options.data.uri;\n                                        delete options.data.displayName;\n                                        delete options.data.params;\n                                      } catch(e) {\n                                        header = null;\n                                      }\n                                      options.data.multi_header.push( { 'position': peg$currPos,\n                                                                'offset': offset(),\n                                                                'parsed': header\n                                                              });},\n              function(displayName) {\n                                      displayName = text().trim();\n                                      if (displayName[0] === '\\\"') {\n                                        displayName = displayName.substring(1, displayName.length-1);\n                                      }\n                                      options.data.displayName = displayName; },\n              \"q\",\n              { type: \"literal\", value: \"q\", description: \"\\\"q\\\"\" },\n              function(q) {\n                                      if(!options.data.params) options.data.params = {};\n                                      options.data.params['q'] = q; },\n              \"expires\",\n              { type: \"literal\", value: \"expires\", description: \"\\\"expires\\\"\" },\n              function(expires) {\n                                      if(!options.data.params) options.data.params = {};\n                                      options.data.params['expires'] = expires; },\n              function(delta_seconds) {\n                                      return parseInt(delta_seconds.join('')); },\n              \"0\",\n              { type: \"literal\", value: \"0\", description: \"\\\"0\\\"\" },\n              function() {\n                                      return parseFloat(text()); },\n              function(param, value) {\n                                      if(!options.data.params) options.data.params = {};\n                                      if (value === null){\n                                        value = undefined;\n                                      }\n                                      else {\n                                        value = value[1];\n                                      }\n                                      options.data.params[param.toLowerCase()] = value;},\n              \"render\",\n              { type: \"literal\", value: \"render\", description: \"\\\"render\\\"\" },\n              \"session\",\n              { type: \"literal\", value: \"session\", description: \"\\\"session\\\"\" },\n              \"icon\",\n              { type: \"literal\", value: \"icon\", description: \"\\\"icon\\\"\" },\n              \"alert\",\n              { type: \"literal\", value: \"alert\", description: \"\\\"alert\\\"\" },\n              function() {\n                                          if (options.startRule === 'Content_Disposition') {\n                                            options.data.type = text().toLowerCase();\n                                          }\n                                        },\n              \"handling\",\n              { type: \"literal\", value: \"handling\", description: \"\\\"handling\\\"\" },\n              \"optional\",\n              { type: \"literal\", value: \"optional\", description: \"\\\"optional\\\"\" },\n              \"required\",\n              { type: \"literal\", value: \"required\", description: \"\\\"required\\\"\" },\n              function(length) {\n                                      options.data = parseInt(length.join('')); },\n              function() {\n                                      options.data = text(); },\n              \"text\",\n              { type: \"literal\", value: \"text\", description: \"\\\"text\\\"\" },\n              \"image\",\n              { type: \"literal\", value: \"image\", description: \"\\\"image\\\"\" },\n              \"audio\",\n              { type: \"literal\", value: \"audio\", description: \"\\\"audio\\\"\" },\n              \"video\",\n              { type: \"literal\", value: \"video\", description: \"\\\"video\\\"\" },\n              \"application\",\n              { type: \"literal\", value: \"application\", description: \"\\\"application\\\"\" },\n              \"message\",\n              { type: \"literal\", value: \"message\", description: \"\\\"message\\\"\" },\n              \"multipart\",\n              { type: \"literal\", value: \"multipart\", description: \"\\\"multipart\\\"\" },\n              \"x-\",\n              { type: \"literal\", value: \"x-\", description: \"\\\"x-\\\"\" },\n              function(cseq_value) {\n                                options.data.value=parseInt(cseq_value.join('')); },\n              function(expires) {options.data = expires; },\n              function(event_type) {\n                                     options.data.event = event_type.toLowerCase(); },\n              function() {\n                              var tag = options.data.tag;\n                                options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                                if (tag) {options.data.setParam('tag',tag)}\n                              },\n              \"tag\",\n              { type: \"literal\", value: \"tag\", description: \"\\\"tag\\\"\" },\n              function(tag) {options.data.tag = tag; },\n              function(forwards) {\n                                options.data = parseInt(forwards.join('')); },\n              function(min_expires) {options.data = min_expires; },\n              function() {\n                                      options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                                    },\n              \"digest\",\n              { type: \"literal\", value: \"Digest\", description: \"\\\"Digest\\\"\" },\n              \"realm\",\n              { type: \"literal\", value: \"realm\", description: \"\\\"realm\\\"\" },\n              function(realm) { options.data.realm = realm; },\n              \"domain\",\n              { type: \"literal\", value: \"domain\", description: \"\\\"domain\\\"\" },\n              \"nonce\",\n              { type: \"literal\", value: \"nonce\", description: \"\\\"nonce\\\"\" },\n              function(nonce) { options.data.nonce=nonce; },\n              \"opaque\",\n              { type: \"literal\", value: \"opaque\", description: \"\\\"opaque\\\"\" },\n              function(opaque) { options.data.opaque=opaque; },\n              \"stale\",\n              { type: \"literal\", value: \"stale\", description: \"\\\"stale\\\"\" },\n              \"true\",\n              { type: \"literal\", value: \"true\", description: \"\\\"true\\\"\" },\n              function() { options.data.stale=true; },\n              \"false\",\n              { type: \"literal\", value: \"false\", description: \"\\\"false\\\"\" },\n              function() { options.data.stale=false; },\n              \"algorithm\",\n              { type: \"literal\", value: \"algorithm\", description: \"\\\"algorithm\\\"\" },\n              \"md5\",\n              { type: \"literal\", value: \"MD5\", description: \"\\\"MD5\\\"\" },\n              \"md5-sess\",\n              { type: \"literal\", value: \"MD5-sess\", description: \"\\\"MD5-sess\\\"\" },\n              function(algorithm) {\n                                    options.data.algorithm=algorithm.toUpperCase(); },\n              \"qop\",\n              { type: \"literal\", value: \"qop\", description: \"\\\"qop\\\"\" },\n              \"auth-int\",\n              { type: \"literal\", value: \"auth-int\", description: \"\\\"auth-int\\\"\" },\n              \"auth\",\n              { type: \"literal\", value: \"auth\", description: \"\\\"auth\\\"\" },\n              function(qop_value) {\n                                      options.data.qop || (options.data.qop=[]);\n                                      options.data.qop.push(qop_value.toLowerCase()); },\n              function(rack_value) {\n                                options.data.value=parseInt(rack_value.join('')); },\n              function() {\n                                var idx, length;\n                                length = options.data.multi_header.length;\n                                for (idx = 0; idx < length; idx++) {\n                                  if (options.data.multi_header[idx].parsed === null) {\n                                    options.data = null;\n                                    break;\n                                  }\n                                }\n                                if (options.data !== null) {\n                                  options.data = options.data.multi_header;\n                                } else {\n                                  options.data = -1;\n                                }},\n              function() {\n                                var header;\n                                if(!options.data.multi_header) options.data.multi_header = [];\n                                try {\n                                  header = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                                  delete options.data.uri;\n                                  delete options.data.displayName;\n                                  delete options.data.params;\n                                } catch(e) {\n                                  header = null;\n                                }\n                                options.data.multi_header.push( { 'position': peg$currPos,\n                                                          'offset': offset(),\n                                                          'parsed': header\n                                                        });},\n              function() {\n                            options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                          },\n              function() {\n                                    if (!(options.data.replaces_from_tag && options.data.replaces_to_tag)) {\n                                      options.data = -1;\n                                    }\n                                  },\n              function() {\n                                    options.data = {\n                                      call_id: options.data\n                                    };\n                                  },\n              \"from-tag\",\n              { type: \"literal\", value: \"from-tag\", description: \"\\\"from-tag\\\"\" },\n              function(from_tag) {\n                                    options.data.replaces_from_tag = from_tag;\n                                  },\n              \"to-tag\",\n              { type: \"literal\", value: \"to-tag\", description: \"\\\"to-tag\\\"\" },\n              function(to_tag) {\n                                    options.data.replaces_to_tag = to_tag;\n                                  },\n              \"early-only\",\n              { type: \"literal\", value: \"early-only\", description: \"\\\"early-only\\\"\" },\n              function() {\n                                    options.data.early_only = true;\n                                  },\n              function(r) {return r;},\n              function(first, rest) { return list(first, rest); },\n              function(value) {\n                              if (options.startRule === 'Require') {\n                                options.data = value || [];\n                              }\n                            },\n              function(rseq_value) {\n                                options.data.value=parseInt(rseq_value.join('')); },\n              \"active\",\n              { type: \"literal\", value: \"active\", description: \"\\\"active\\\"\" },\n              \"pending\",\n              { type: \"literal\", value: \"pending\", description: \"\\\"pending\\\"\" },\n              \"terminated\",\n              { type: \"literal\", value: \"terminated\", description: \"\\\"terminated\\\"\" },\n              function() {\n                                      options.data.state = text(); },\n              \"reason\",\n              { type: \"literal\", value: \"reason\", description: \"\\\"reason\\\"\" },\n              function(reason) {\n                                      if (typeof reason !== 'undefined') options.data.reason = reason; },\n              function(expires) {\n                                      if (typeof expires !== 'undefined') options.data.expires = expires; },\n              \"retry_after\",\n              { type: \"literal\", value: \"retry_after\", description: \"\\\"retry_after\\\"\" },\n              function(retry_after) {\n                                      if (typeof retry_after !== 'undefined') options.data.retry_after = retry_after; },\n              \"deactivated\",\n              { type: \"literal\", value: \"deactivated\", description: \"\\\"deactivated\\\"\" },\n              \"probation\",\n              { type: \"literal\", value: \"probation\", description: \"\\\"probation\\\"\" },\n              \"rejected\",\n              { type: \"literal\", value: \"rejected\", description: \"\\\"rejected\\\"\" },\n              \"timeout\",\n              { type: \"literal\", value: \"timeout\", description: \"\\\"timeout\\\"\" },\n              \"giveup\",\n              { type: \"literal\", value: \"giveup\", description: \"\\\"giveup\\\"\" },\n              \"noresource\",\n              { type: \"literal\", value: \"noresource\", description: \"\\\"noresource\\\"\" },\n              \"invariant\",\n              { type: \"literal\", value: \"invariant\", description: \"\\\"invariant\\\"\" },\n              function(value) {\n                              if (options.startRule === 'Supported') {\n                                options.data = value || [];\n                              }\n                            },\n              function() {\n                            var tag = options.data.tag;\n                              options.data = new options.SIP.NameAddrHeader(options.data.uri, options.data.displayName, options.data.params);\n                              if (tag) {options.data.setParam('tag',tag)}\n                            },\n              \"ttl\",\n              { type: \"literal\", value: \"ttl\", description: \"\\\"ttl\\\"\" },\n              function(via_ttl_value) {\n                                    options.data.ttl = via_ttl_value; },\n              \"maddr\",\n              { type: \"literal\", value: \"maddr\", description: \"\\\"maddr\\\"\" },\n              function(via_maddr) {\n                                    options.data.maddr = via_maddr; },\n              \"received\",\n              { type: \"literal\", value: \"received\", description: \"\\\"received\\\"\" },\n              function(via_received) {\n                                    options.data.received = via_received; },\n              \"branch\",\n              { type: \"literal\", value: \"branch\", description: \"\\\"branch\\\"\" },\n              function(via_branch) {\n                                    options.data.branch = via_branch; },\n              \"rport\",\n              { type: \"literal\", value: \"rport\", description: \"\\\"rport\\\"\" },\n              function() {\n                                    if(typeof response_port !== 'undefined')\n                                      options.data.rport = response_port.join(''); },\n              function(via_protocol) {\n                                    options.data.protocol = via_protocol; },\n              { type: \"literal\", value: \"UDP\", description: \"\\\"UDP\\\"\" },\n              { type: \"literal\", value: \"TCP\", description: \"\\\"TCP\\\"\" },\n              { type: \"literal\", value: \"TLS\", description: \"\\\"TLS\\\"\" },\n              { type: \"literal\", value: \"SCTP\", description: \"\\\"SCTP\\\"\" },\n              function(via_transport) {\n                                    options.data.transport = via_transport; },\n              function() {\n                                    options.data.host = text(); },\n              function(via_sent_by_port) {\n                                    options.data.port = parseInt(via_sent_by_port.join('')); },\n              function(ttl) {\n                                    return parseInt(ttl.join('')); },\n              function(deltaSeconds) {\n                                    if (options.startRule === 'Session_Expires') {\n                                      options.data.deltaSeconds = deltaSeconds;\n                                    }\n                                  },\n              \"refresher\",\n              { type: \"literal\", value: \"refresher\", description: \"\\\"refresher\\\"\" },\n              \"uas\",\n              { type: \"literal\", value: \"uas\", description: \"\\\"uas\\\"\" },\n              \"uac\",\n              { type: \"literal\", value: \"uac\", description: \"\\\"uac\\\"\" },\n              function(endpoint) {\n                                    if (options.startRule === 'Session_Expires') {\n                                      options.data.refresher = endpoint;\n                                    }\n                                  },\n              function(deltaSeconds) {\n                                    if (options.startRule === 'Min_SE') {\n                                      options.data = deltaSeconds;\n                                    }\n                                  },\n              \"stuns\",\n              { type: \"literal\", value: \"stuns\", description: \"\\\"stuns\\\"\" },\n              \"stun\",\n              { type: \"literal\", value: \"stun\", description: \"\\\"stun\\\"\" },\n              function(scheme) {\n                                    options.data.scheme = scheme; },\n              function(host) {\n                                    options.data.host = host; },\n              \"?transport=\",\n              { type: \"literal\", value: \"?transport=\", description: \"\\\"?transport=\\\"\" },\n              \"turns\",\n              { type: \"literal\", value: \"turns\", description: \"\\\"turns\\\"\" },\n              \"turn\",\n              { type: \"literal\", value: \"turn\", description: \"\\\"turn\\\"\" },\n              function() {\n                                    options.data.transport = transport; },\n              function() {\n                                options.data = text(); }\n            ],\n    \n            peg$bytecode = [\n              peg$decode(\". \\\"\\\"2 3!\"),\n              peg$decode(\"0\\\"\\\"\\\"1!3#\"),\n              peg$decode(\"0$\\\"\\\"1!3%\"),\n              peg$decode(\"0&\\\"\\\"1!3'\"),\n              peg$decode(\"7'*# \\\"7(\"),\n              peg$decode(\"0(\\\"\\\"1!3)\"),\n              peg$decode(\"0*\\\"\\\"1!3+\"),\n              peg$decode(\".,\\\"\\\"2,3-\"),\n              peg$decode(\"..\\\"\\\"2.3/\"),\n              peg$decode(\"00\\\"\\\"1!31\"),\n              peg$decode(\".2\\\"\\\"2233*\\x89 \\\".4\\\"\\\"2435*} \\\".6\\\"\\\"2637*q \\\".8\\\"\\\"2839*e \\\".:\\\"\\\"2:3;*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\"),\n              peg$decode(\"7)*# \\\"7,\"),\n              peg$decode(\".F\\\"\\\"2F3G*} \\\".H\\\"\\\"2H3I*q \\\".J\\\"\\\"2J3K*e \\\".L\\\"\\\"2L3M*Y \\\".N\\\"\\\"2N3O*M \\\".P\\\"\\\"2P3Q*A \\\".R\\\"\\\"2R3S*5 \\\".T\\\"\\\"2T3U*) \\\".V\\\"\\\"2V3W\"),\n              peg$decode(\"!!.Y\\\"\\\"2Y3Z+7$7#+-%7#+#%'#%$## X$\\\"# X\\\"# X+! (%\"),\n              peg$decode(\"!! \\\\7$,#&7$\\\"+-$7 +#%'\\\"%$\\\"# X\\\"# X*# \\\" [+@$ \\\\7$+&$,#&7$\\\"\\\"\\\" X+'%4\\\"6]\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"7.*# \\\" [\"),\n              peg$decode(\"! \\\\7'*# \\\"7(,)&7'*# \\\"7(\\\"+A$.8\\\"\\\"2839+1%7/+'%4#6^# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!! \\\\72+&$,#&72\\\"\\\"\\\" X+o$ \\\\! \\\\7.,#&7.\\\"+-$72+#%'\\\"%$\\\"# X\\\"# X,@&! \\\\7.,#&7.\\\"+-$72+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+! (%\"),\n              peg$decode(\"0_\\\"\\\"1!3`*# \\\"73\"),\n              peg$decode(\"0a\\\"\\\"1!3b\"),\n              peg$decode(\"0c\\\"\\\"1!3d\"),\n              peg$decode(\"7!*) \\\"0e\\\"\\\"1!3f\"),\n              peg$decode(\"! \\\\7)*\\x95 \\\".F\\\"\\\"2F3G*\\x89 \\\".J\\\"\\\"2J3K*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O+\\x9E$,\\x9B&7)*\\x95 \\\".F\\\"\\\"2F3G*\\x89 \\\".J\\\"\\\"2J3K*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O\\\"\\\"\\\" X+! (%\"),\n              peg$decode(\"! \\\\7)*\\x89 \\\".F\\\"\\\"2F3G*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O+\\x92$,\\x8F&7)*\\x89 \\\".F\\\"\\\"2F3G*} \\\".L\\\"\\\"2L3M*q \\\".Y\\\"\\\"2Y3Z*e \\\".P\\\"\\\"2P3Q*Y \\\".H\\\"\\\"2H3I*M \\\".@\\\"\\\"2@3A*A \\\".g\\\"\\\"2g3h*5 \\\".R\\\"\\\"2R3S*) \\\".N\\\"\\\"2N3O\\\"\\\"\\\" X+! (%\"),\n              peg$decode(\".T\\\"\\\"2T3U*\\xE3 \\\".V\\\"\\\"2V3W*\\xD7 \\\".i\\\"\\\"2i3j*\\xCB \\\".k\\\"\\\"2k3l*\\xBF \\\".:\\\"\\\"2:3;*\\xB3 \\\".D\\\"\\\"2D3E*\\xA7 \\\".2\\\"\\\"2233*\\x9B \\\".8\\\"\\\"2839*\\x8F \\\".m\\\"\\\"2m3n*\\x83 \\\"7&*} \\\".4\\\"\\\"2435*q \\\".o\\\"\\\"2o3p*e \\\".q\\\"\\\"2q3r*Y \\\".6\\\"\\\"2637*M \\\".>\\\"\\\"2>3?*A \\\".s\\\"\\\"2s3t*5 \\\".u\\\"\\\"2u3v*) \\\"7'*# \\\"7(\"),\n              peg$decode(\"! \\\\7)*\\u012B \\\".F\\\"\\\"2F3G*\\u011F \\\".J\\\"\\\"2J3K*\\u0113 \\\".L\\\"\\\"2L3M*\\u0107 \\\".Y\\\"\\\"2Y3Z*\\xFB \\\".P\\\"\\\"2P3Q*\\xEF \\\".H\\\"\\\"2H3I*\\xE3 \\\".@\\\"\\\"2@3A*\\xD7 \\\".g\\\"\\\"2g3h*\\xCB \\\".R\\\"\\\"2R3S*\\xBF \\\".N\\\"\\\"2N3O*\\xB3 \\\".T\\\"\\\"2T3U*\\xA7 \\\".V\\\"\\\"2V3W*\\x9B \\\".i\\\"\\\"2i3j*\\x8F \\\".k\\\"\\\"2k3l*\\x83 \\\".8\\\"\\\"2839*w \\\".m\\\"\\\"2m3n*k \\\"7&*e \\\".4\\\"\\\"2435*Y \\\".o\\\"\\\"2o3p*M \\\".q\\\"\\\"2q3r*A \\\".6\\\"\\\"2637*5 \\\".s\\\"\\\"2s3t*) \\\".u\\\"\\\"2u3v+\\u0134$,\\u0131&7)*\\u012B \\\".F\\\"\\\"2F3G*\\u011F \\\".J\\\"\\\"2J3K*\\u0113 \\\".L\\\"\\\"2L3M*\\u0107 \\\".Y\\\"\\\"2Y3Z*\\xFB \\\".P\\\"\\\"2P3Q*\\xEF \\\".H\\\"\\\"2H3I*\\xE3 \\\".@\\\"\\\"2@3A*\\xD7 \\\".g\\\"\\\"2g3h*\\xCB \\\".R\\\"\\\"2R3S*\\xBF \\\".N\\\"\\\"2N3O*\\xB3 \\\".T\\\"\\\"2T3U*\\xA7 \\\".V\\\"\\\"2V3W*\\x9B \\\".i\\\"\\\"2i3j*\\x8F \\\".k\\\"\\\"2k3l*\\x83 \\\".8\\\"\\\"2839*w \\\".m\\\"\\\"2m3n*k \\\"7&*e \\\".4\\\"\\\"2435*Y \\\".o\\\"\\\"2o3p*M \\\".q\\\"\\\"2q3r*A \\\".6\\\"\\\"2637*5 \\\".s\\\"\\\"2s3t*) \\\".u\\\"\\\"2u3v\\\"\\\"\\\" X+! (%\"),\n              peg$decode(\"!7/+A$.P\\\"\\\"2P3Q+1%7/+'%4#6w# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.4\\\"\\\"2435+1%7/+'%4#6x# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.>\\\"\\\"2>3?+1%7/+'%4#6y# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.T\\\"\\\"2T3U+1%7/+'%4#6z# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.V\\\"\\\"2V3W+1%7/+'%4#6{# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!.k\\\"\\\"2k3l+1$7/+'%4\\\"6|\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+7$.i\\\"\\\"2i3j+'%4\\\"6}\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.D\\\"\\\"2D3E+1%7/+'%4#6~# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.2\\\"\\\"2233+1%7/+'%4#6# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+A$.8\\\"\\\"2839+1%7/+'%4#6\\x80# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7/+1$7&+'%4\\\"6\\x81\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7&+1$7/+'%4\\\"6\\x81\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7=+W$ \\\\7G*) \\\"7K*# \\\"7F,/&7G*) \\\"7K*# \\\"7F\\\"+-%7>+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"0\\x82\\\"\\\"1!3\\x83*A \\\"0\\x84\\\"\\\"1!3\\x85*5 \\\"0\\x86\\\"\\\"1!3\\x87*) \\\"73*# \\\"7.\"),\n              peg$decode(\"!!7/+U$7&+K% \\\\7J*# \\\"7K,)&7J*# \\\"7K\\\"+-%7&+#%'$%$$# X$## X$\\\"# X\\\"# X+! (%\"),\n              peg$decode(\"!7/+`$7&+V%! \\\\7J*# \\\"7K,)&7J*# \\\"7K\\\"+! (%+2%7&+(%4$6\\x88$!!%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7.*G \\\".L\\\"\\\"2L3M*; \\\"0\\x89\\\"\\\"1!3\\x8A*/ \\\"0\\x86\\\"\\\"1!3\\x87*# \\\"73\"),\n              peg$decode(\"!.m\\\"\\\"2m3n+K$0\\x8B\\\"\\\"1!3\\x8C*5 \\\"0\\x8D\\\"\\\"1!3\\x8E*) \\\"0\\x8F\\\"\\\"1!3\\x90+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7N+Q$.8\\\"\\\"2839+A%7O*# \\\" [+1%7S+'%4$6\\x91$ %$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7N+k$.8\\\"\\\"2839+[%7O*# \\\" [+K%7S+A%7_+7%7l*# \\\" [+'%4&6\\x92& %$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\x93\\\"\\\"1$3\\x94*) \\\"/\\x95\\\"\\\"1#3\\x96+' 4!6\\x97!! %\"),\n              peg$decode(\"!7P+b$!.8\\\"\\\"2839+-$7R+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+7%.:\\\"\\\"2:3;+'%4#6\\x98# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\" \\\\7+*) \\\"7-*# \\\"7Q+2$,/&7+*) \\\"7-*# \\\"7Q\\\"\\\"\\\" X\"),\n              peg$decode(\".<\\\"\\\"2<3=*q \\\".>\\\"\\\"2>3?*e \\\".@\\\"\\\"2@3A*Y \\\".B\\\"\\\"2B3C*M \\\".D\\\"\\\"2D3E*A \\\".2\\\"\\\"2233*5 \\\".6\\\"\\\"2637*) \\\".4\\\"\\\"2435\"),\n              peg$decode(\"! \\\\7+*_ \\\"7-*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E,e&7+*_ \\\"7-*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\\\"+& 4!6\\x99! %\"),\n              peg$decode(\"!7T+N$!.8\\\"\\\"2839+-$7^+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7U*) \\\"7\\\\*# \\\"7X+& 4!6\\x9A! %\"),\n              peg$decode(\"! \\\\!7V+3$.J\\\"\\\"2J3K+#%'\\\"%$\\\"# X\\\"# X,>&!7V+3$.J\\\"\\\"2J3K+#%'\\\"%$\\\"# X\\\"# X\\\"+G$7W+=%.J\\\"\\\"2J3K*# \\\" [+'%4#6\\x9B# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\" \\\\0\\x9C\\\"\\\"1!3\\x9D+,$,)&0\\x9C\\\"\\\"1!3\\x9D\\\"\\\"\\\" X\"),\n              peg$decode(\"!0$\\\"\\\"1!3%+A$ \\\\0\\x9E\\\"\\\"1!3\\x9F,)&0\\x9E\\\"\\\"1!3\\x9F\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!.o\\\"\\\"2o3p+A$7Y+7%.q\\\"\\\"2q3r+'%4#6\\xA0# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!!7Z+\\xBF$.8\\\"\\\"2839+\\xAF%7Z+\\xA5%.8\\\"\\\"2839+\\x95%7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'-%$-# X$,# X$+# X$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0838 \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+\\xAF$7Z+\\xA5%.8\\\"\\\"2839+\\x95%7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%',%$,# X$+# X$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0795 \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+\\x95$7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'*%$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u070C \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+{$7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u069D \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+a$7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'&%$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0648 \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+G$7Z+=%.8\\\"\\\"2839+-%7[+#%'$%$$# X$## X$\\\"# X\\\"# X*\\u060D \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+-$7[+#%'\\\"%$\\\"# X\\\"# X*\\u05EC \\\"!.\\xA1\\\"\\\"2\\xA13\\xA2+-$7Z+#%'\\\"%$\\\"# X\\\"# X*\\u05CB \\\"!7Z+\\xA5$.\\xA1\\\"\\\"2\\xA13\\xA2+\\x95%7Z+\\x8B%.8\\\"\\\"2839+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'+%$+# X$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0538 \\\"!7Z+\\xB6$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x8B%.\\xA1\\\"\\\"2\\xA13\\xA2+{%7Z+q%.8\\\"\\\"2839+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'*%$*# X$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0494 \\\"!7Z+\\xC7$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x9C%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+q%.\\xA1\\\"\\\"2\\xA13\\xA2+a%7Z+W%.8\\\"\\\"2839+G%7Z+=%.8\\\"\\\"2839+-%7[+#%')%$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u03DF \\\"!7Z+\\xD8$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xAD%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x82%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+W%.\\xA1\\\"\\\"2\\xA13\\xA2+G%7Z+=%.8\\\"\\\"2839+-%7[+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0319 \\\"!7Z+\\xE9$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xBE%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x93%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+h%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+=%.\\xA1\\\"\\\"2\\xA13\\xA2+-%7[+#%''%$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0242 \\\"!7Z+\\u0114$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xE9%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xBE%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x93%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+h%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+=%.\\xA1\\\"\\\"2\\xA13\\xA2+-%7Z+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X*\\u0140 \\\"!7Z+\\u0135$!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\u010A%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xDF%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\xB4%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+\\x89%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+^%!.8\\\"\\\"2839+-$7Z+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+3%.\\xA1\\\"\\\"2\\xA13\\xA2+#%'(%$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X+& 4!6\\xA3! %\"),\n              peg$decode(\"!7#+S$7#*# \\\" [+C%7#*# \\\" [+3%7#*# \\\" [+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7Z+=$.8\\\"\\\"2839+-%7Z+#%'#%$## X$\\\"# X\\\"# X*# \\\"7\\\\\"),\n              peg$decode(\"!7]+u$.J\\\"\\\"2J3K+e%7]+[%.J\\\"\\\"2J3K+K%7]+A%.J\\\"\\\"2J3K+1%7]+'%4'6\\xA4' %$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!.\\xA5\\\"\\\"2\\xA53\\xA6+3$0\\xA7\\\"\\\"1!3\\xA8+#%'\\\"%$\\\"# X\\\"# X*\\xA0 \\\"!.\\xA9\\\"\\\"2\\xA93\\xAA+=$0\\xAB\\\"\\\"1!3\\xAC+-%7!+#%'#%$## X$\\\"# X\\\"# X*o \\\"!.\\xAD\\\"\\\"2\\xAD3\\xAE+7$7!+-%7!+#%'#%$## X$\\\"# X\\\"# X*D \\\"!0\\xAF\\\"\\\"1!3\\xB0+-$7!+#%'\\\"%$\\\"# X\\\"# X*# \\\"7!\"),\n              peg$decode(\"!!7!*# \\\" [+c$7!*# \\\" [+S%7!*# \\\" [+C%7!*# \\\" [+3%7!*# \\\" [+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X+' 4!6\\xB1!! %\"),\n              peg$decode(\" \\\\!.2\\\"\\\"2233+-$7`+#%'\\\"%$\\\"# X\\\"# X,>&!.2\\\"\\\"2233+-$7`+#%'\\\"%$\\\"# X\\\"# X\\\"\"),\n              peg$decode(\"7a*A \\\"7b*; \\\"7c*5 \\\"7d*/ \\\"7e*) \\\"7f*# \\\"7g\"),\n              peg$decode(\"!/\\xB2\\\"\\\"1*3\\xB3+b$/\\xB4\\\"\\\"1#3\\xB5*G \\\"/\\xB6\\\"\\\"1#3\\xB7*; \\\"/\\xB8\\\"\\\"1$3\\xB9*/ \\\"/\\xBA\\\"\\\"1#3\\xBB*# \\\"76+(%4\\\"6\\xBC\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xBD\\\"\\\"1%3\\xBE+J$/\\xBF\\\"\\\"1%3\\xC0*/ \\\"/\\xC1\\\"\\\"1\\\"3\\xC2*# \\\"76+(%4\\\"6\\xC3\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xC4\\\"\\\"1'3\\xC5+2$7\\x8F+(%4\\\"6\\xC6\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xC7\\\"\\\"1$3\\xC8+2$7\\xEF+(%4\\\"6\\xC9\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xCA\\\"\\\"1&3\\xCB+2$7T+(%4\\\"6\\xCC\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xCD\\\"\\\"1\\\"3\\xCE+R$!.>\\\"\\\"2>3?+-$76+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\xCF\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7h+T$!.>\\\"\\\"2>3?+-$7i+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+)%4\\\"6\\xD0\\\"\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7j+&$,#&7j\\\"\\\"\\\" X+! (%\"),\n              peg$decode(\"! \\\\7j+&$,#&7j\\\"\\\"\\\" X+! (%\"),\n              peg$decode(\"7k*) \\\"7+*# \\\"7-\"),\n              peg$decode(\".o\\\"\\\"2o3p*e \\\".q\\\"\\\"2q3r*Y \\\".4\\\"\\\"2435*M \\\".8\\\"\\\"2839*A \\\".<\\\"\\\"2<3=*5 \\\".@\\\"\\\"2@3A*) \\\".B\\\"\\\"2B3C\"),\n              peg$decode(\"!.6\\\"\\\"2637+u$7m+k% \\\\!.<\\\"\\\"2<3=+-$7m+#%'\\\"%$\\\"# X\\\"# X,>&!.<\\\"\\\"2<3=+-$7m+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7n+C$.>\\\"\\\"2>3?+3%7o+)%4#6\\xD1#\\\"\\\" %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\" \\\\7p*) \\\"7+*# \\\"7-+2$,/&7p*) \\\"7+*# \\\"7-\\\"\\\"\\\" X\"),\n              peg$decode(\" \\\\7p*) \\\"7+*# \\\"7-,/&7p*) \\\"7+*# \\\"7-\\\"\"),\n              peg$decode(\".o\\\"\\\"2o3p*e \\\".q\\\"\\\"2q3r*Y \\\".4\\\"\\\"2435*M \\\".6\\\"\\\"2637*A \\\".8\\\"\\\"2839*5 \\\".@\\\"\\\"2@3A*) \\\".B\\\"\\\"2B3C\"),\n              peg$decode(\"7\\x90*# \\\"7r\"),\n              peg$decode(\"!7\\x8F+K$7'+A%7s+7%7'+-%7\\x84+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7M*# \\\"7t\"),\n              peg$decode(\"!7+G$.8\\\"\\\"2839+7%7u*# \\\"7x+'%4#6\\xD2# %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7v*# \\\"7w+N$!.6\\\"\\\"2637+-$7\\x83+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!.\\xD3\\\"\\\"2\\xD33\\xD4+=$7\\x80+3%7w*# \\\" [+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!.4\\\"\\\"2435+-$7{+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7z+5$ \\\\7y,#&7y\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"7**) \\\"7+*# \\\"7-\"),\n              peg$decode(\"7+*\\x8F \\\"7-*\\x89 \\\".2\\\"\\\"2233*} \\\".6\\\"\\\"2637*q \\\".8\\\"\\\"2839*e \\\".:\\\"\\\"2:3;*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\"),\n              peg$decode(\"!7|+k$ \\\\!.4\\\"\\\"2435+-$7|+#%'\\\"%$\\\"# X\\\"# X,>&!.4\\\"\\\"2435+-$7|+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7~,#&7~\\\"+k$ \\\\!.2\\\"\\\"2233+-$7}+#%'\\\"%$\\\"# X\\\"# X,>&!.2\\\"\\\"2233+-$7}+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\" \\\\7~,#&7~\\\"\"),\n              peg$decode(\"7+*w \\\"7-*q \\\".8\\\"\\\"2839*e \\\".:\\\"\\\"2:3;*Y \\\".<\\\"\\\"2<3=*M \\\".>\\\"\\\"2>3?*A \\\".@\\\"\\\"2@3A*5 \\\".B\\\"\\\"2B3C*) \\\".D\\\"\\\"2D3E\"),\n              peg$decode(\"!7\\\"+\\x8D$ \\\\7\\\"*G \\\"7!*A \\\".@\\\"\\\"2@3A*5 \\\".F\\\"\\\"2F3G*) \\\".J\\\"\\\"2J3K,M&7\\\"*G \\\"7!*A \\\".@\\\"\\\"2@3A*5 \\\".F\\\"\\\"2F3G*) \\\".J\\\"\\\"2J3K\\\"+'%4\\\"6\\xD5\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\x81*# \\\"7\\x82\"),\n              peg$decode(\"!!7O+3$.:\\\"\\\"2:3;+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+-$7S+#%'\\\"%$\\\"# X\\\"# X*# \\\" [\"),\n              peg$decode(\" \\\\7+*\\x83 \\\"7-*} \\\".B\\\"\\\"2B3C*q \\\".D\\\"\\\"2D3E*e \\\".2\\\"\\\"2233*Y \\\".8\\\"\\\"2839*M \\\".:\\\"\\\"2:3;*A \\\".<\\\"\\\"2<3=*5 \\\".>\\\"\\\"2>3?*) \\\".@\\\"\\\"2@3A+\\x8C$,\\x89&7+*\\x83 \\\"7-*} \\\".B\\\"\\\"2B3C*q \\\".D\\\"\\\"2D3E*e \\\".2\\\"\\\"2233*Y \\\".8\\\"\\\"2839*M \\\".:\\\"\\\"2:3;*A \\\".<\\\"\\\"2<3=*5 \\\".>\\\"\\\"2>3?*) \\\".@\\\"\\\"2@3A\\\"\\\"\\\" X\"),\n              peg$decode(\" \\\\7y,#&7y\\\"\"),\n              peg$decode(\"!/\\x95\\\"\\\"1#3\\xD6+y$.4\\\"\\\"2435+i% \\\\7!+&$,#&7!\\\"\\\"\\\" X+P%.J\\\"\\\"2J3K+@% \\\\7!+&$,#&7!\\\"\\\"\\\" X+'%4%6\\xD7% %$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\".\\xD8\\\"\\\"2\\xD83\\xD9\"),\n              peg$decode(\".\\xDA\\\"\\\"2\\xDA3\\xDB\"),\n              peg$decode(\".\\xDC\\\"\\\"2\\xDC3\\xDD\"),\n              peg$decode(\".\\xDE\\\"\\\"2\\xDE3\\xDF\"),\n              peg$decode(\".\\xE0\\\"\\\"2\\xE03\\xE1\"),\n              peg$decode(\".\\xE2\\\"\\\"2\\xE23\\xE3\"),\n              peg$decode(\".\\xE4\\\"\\\"2\\xE43\\xE5\"),\n              peg$decode(\".\\xE6\\\"\\\"2\\xE63\\xE7\"),\n              peg$decode(\".\\xE8\\\"\\\"2\\xE83\\xE9\"),\n              peg$decode(\".\\xEA\\\"\\\"2\\xEA3\\xEB\"),\n              peg$decode(\"!7\\x85*S \\\"7\\x86*M \\\"7\\x88*G \\\"7\\x89*A \\\"7\\x8A*; \\\"7\\x8B*5 \\\"7\\x8C*/ \\\"7\\x8D*) \\\"7\\x8E*# \\\"76+& 4!6\\xEC! %\"),\n              peg$decode(\"!7\\x84+K$7'+A%7\\x91+7%7'+-%7\\x93+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\x92+' 4!6\\xED!! %\"),\n              peg$decode(\"!7!+7$7!+-%7!+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7**A \\\"7+*; \\\"7-*5 \\\"73*/ \\\"74*) \\\"7'*# \\\"7(,G&7**A \\\"7+*; \\\"7-*5 \\\"73*/ \\\"74*) \\\"7'*# \\\"7(\\\"+& 4!6\\xEE! %\"),\n              peg$decode(\"!7\\xB5+_$ \\\\!7A+-$7\\xB5+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xB5+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!79+R$!.:\\\"\\\"2:3;+-$79+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\xEF\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7:*j \\\"!7\\x97+_$ \\\\!7A+-$7\\x97+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\x97+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+& 4!6\\xF0! %\"),\n              peg$decode(\"!7L*# \\\"7\\x98+c$ \\\\!7B+-$7\\x9A+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9A+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\xF1\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\x99*# \\\" [+A$7@+7%7M+-%7?+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!!76+_$ \\\\!7.+-$76+#%'\\\"%$\\\"# X\\\"# X,8&!7.+-$76+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X*# \\\"7H+' 4!6\\xF2!! %\"),\n              peg$decode(\"7\\x9B*) \\\"7\\x9C*# \\\"7\\x9F\"),\n              peg$decode(\"!/\\xF3\\\"\\\"1!3\\xF4+<$7<+2%7\\x9E+(%4#6\\xF5#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xF6\\\"\\\"1'3\\xF7+<$7<+2%7\\x9D+(%4#6\\xF8#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\xF9!! %\"),\n              peg$decode(\"!.\\xFA\\\"\\\"2\\xFA3\\xFB+x$!.J\\\"\\\"2J3K+S$7!*# \\\" [+C%7!*# \\\" [+3%7!*# \\\" [+#%'$%$$# X$## X$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\xFC\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!76+N$!7<+-$7\\xA0+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+)%4\\\"6\\xFD\\\"\\\"! %$\\\"# X\\\"# X\"),\n              peg$decode(\"76*) \\\"7T*# \\\"7H\"),\n              peg$decode(\"!7\\xA2+_$ \\\\!7B+-$7\\xA3+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xA3+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\xFE\\\"\\\"1&3\\xFF*G \\\"/\\u0100\\\"\\\"1'3\\u0101*; \\\"/\\u0102\\\"\\\"1$3\\u0103*/ \\\"/\\u0104\\\"\\\"1%3\\u0105*# \\\"76+& 4!6\\u0106! %\"),\n              peg$decode(\"7\\xA4*# \\\"7\\x9F\"),\n              peg$decode(\"!/\\u0107\\\"\\\"1(3\\u0108+O$7<+E%/\\u0109\\\"\\\"1(3\\u010A*/ \\\"/\\u010B\\\"\\\"1(3\\u010C*# \\\"76+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!76+_$ \\\\!7A+-$76+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$76+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u010D!! %\"),\n              peg$decode(\"!7\\xA8+& 4!6\\u010E! %\"),\n              peg$decode(\"!7\\xA9+s$7;+i%7\\xAE+_% \\\\!7B+-$7\\xAF+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xAF+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xAA*# \\\"7\\xAB\"),\n              peg$decode(\"/\\u010F\\\"\\\"1$3\\u0110*S \\\"/\\u0111\\\"\\\"1%3\\u0112*G \\\"/\\u0113\\\"\\\"1%3\\u0114*; \\\"/\\u0115\\\"\\\"1%3\\u0116*/ \\\"/\\u0117\\\"\\\"1+3\\u0118*# \\\"7\\xAC\"),\n              peg$decode(\"/\\u0119\\\"\\\"1'3\\u011A*/ \\\"/\\u011B\\\"\\\"1)3\\u011C*# \\\"7\\xAC\"),\n              peg$decode(\"76*# \\\"7\\xAD\"),\n              peg$decode(\"!/\\u011D\\\"\\\"1\\\"3\\u011E+-$76+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xAC*# \\\"76\"),\n              peg$decode(\"!76+7$7<+-%7\\xB0+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"76*# \\\"7H\"),\n              peg$decode(\"!7\\xB2+7$7.+-%7\\x8F+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u011F!! %\"),\n              peg$decode(\"!7\\x9D+' 4!6\\u0120!! %\"),\n              peg$decode(\"!7\\xB5+d$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+(%4\\\"6\\u0121\\\"!!%$\\\"# X\\\"# X\"),\n              peg$decode(\"!!77+k$ \\\\!.J\\\"\\\"2J3K+-$77+#%'\\\"%$\\\"# X\\\"# X,>&!.J\\\"\\\"2J3K+-$77+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+! (%\"),\n              peg$decode(\"!7L*# \\\"7\\x98+c$ \\\\!7B+-$7\\xB7+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xB7+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u0122\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xB8*# \\\"7\\x9F\"),\n              peg$decode(\"!/\\u0123\\\"\\\"1#3\\u0124+<$7<+2%76+(%4#6\\u0125#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u0126!! %\"),\n              peg$decode(\"!7\\x9D+' 4!6\\u0127!! %\"),\n              peg$decode(\"! \\\\7\\x99,#&7\\x99\\\"+\\x81$7@+w%7M+m%7?+c% \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4%6\\u0128% %$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xBD\"),\n              peg$decode(\"!/\\u0129\\\"\\\"1&3\\u012A+s$7.+i%7\\xC0+_% \\\\!7A+-$7\\xC0+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xC0+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X*# \\\"7\\xBE\"),\n              peg$decode(\"!76+s$7.+i%7\\xBF+_% \\\\!7A+-$7\\xBF+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xBF+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!76+=$7<+3%76*# \\\"7H+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xC1*G \\\"7\\xC3*A \\\"7\\xC5*; \\\"7\\xC7*5 \\\"7\\xC8*/ \\\"7\\xC9*) \\\"7\\xCA*# \\\"7\\xBF\"),\n              peg$decode(\"!/\\u012B\\\"\\\"1%3\\u012C+7$7<+-%7\\xC2+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7I+' 4!6\\u012D!! %\"),\n              peg$decode(\"!/\\u012E\\\"\\\"1&3\\u012F+\\xA5$7<+\\x9B%7D+\\x91%7\\xC4+\\x87% \\\\! \\\\7'+&$,#&7'\\\"\\\"\\\" X+-$7\\xC4+#%'\\\"%$\\\"# X\\\"# X,G&! \\\\7'+&$,#&7'\\\"\\\"\\\" X+-$7\\xC4+#%'\\\"%$\\\"# X\\\"# X\\\"+-%7E+#%'&%$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7t*# \\\"7w\"),\n              peg$decode(\"!/\\u0130\\\"\\\"1%3\\u0131+7$7<+-%7\\xC6+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7I+' 4!6\\u0132!! %\"),\n              peg$decode(\"!/\\u0133\\\"\\\"1&3\\u0134+<$7<+2%7I+(%4#6\\u0135#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0136\\\"\\\"1%3\\u0137+_$7<+U%!/\\u0138\\\"\\\"1$3\\u0139+& 4!6\\u013A! %*4 \\\"!/\\u013B\\\"\\\"1%3\\u013C+& 4!6\\u013D! %+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u013E\\\"\\\"1)3\\u013F+T$7<+J%/\\u0140\\\"\\\"1#3\\u0141*/ \\\"/\\u0142\\\"\\\"1(3\\u0143*# \\\"76+(%4#6\\u0144#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0145\\\"\\\"1#3\\u0146+\\x9E$7<+\\x94%7D+\\x8A%!7\\xCB+k$ \\\\!.D\\\"\\\"2D3E+-$7\\xCB+#%'\\\"%$\\\"# X\\\"# X,>&!.D\\\"\\\"2D3E+-$7\\xCB+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X+-%7E+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0147\\\"\\\"1(3\\u0148*/ \\\"/\\u0149\\\"\\\"1$3\\u014A*# \\\"76+' 4!6\\u014B!! %\"),\n              peg$decode(\"!76+_$ \\\\!7A+-$76+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$76+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\xCE+K$7.+A%7\\xCE+7%7.+-%7\\x8F+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u014C!! %\"),\n              peg$decode(\"!7\\xD0+c$ \\\\!7A+-$7\\xD0+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xD0+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u014D\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\x98+c$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u014E\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7L*T \\\"7\\x98*N \\\"!7@*# \\\" [+=$7t+3%7?*# \\\" [+#%'#%$## X$\\\"# X\\\"# X+c$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u014F\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\xD3+c$ \\\\!7B+-$7\\xD4+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xD4+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u0150\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\x95+& 4!6\\u0151! %\"),\n              peg$decode(\"!/\\u0152\\\"\\\"1(3\\u0153+<$7<+2%76+(%4#6\\u0154#! %$## X$\\\"# X\\\"# X*j \\\"!/\\u0155\\\"\\\"1&3\\u0156+<$7<+2%76+(%4#6\\u0157#! %$## X$\\\"# X\\\"# X*: \\\"!/\\u0158\\\"\\\"1*3\\u0159+& 4!6\\u015A! %*# \\\"7\\x9F\"),\n              peg$decode(\"!!76+o$ \\\\!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X,=&!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X\\\"+)%4\\\"6\\u015C\\\"\\\"! %$\\\"# X\\\"# X*# \\\" [+' 4!6\\u015D!! %\"),\n              peg$decode(\"!7\\xD7+_$ \\\\!7A+-$7\\xD7+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xD7+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\x98+_$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"! \\\\7!+&$,#&7!\\\"\\\"\\\" X+' 4!6\\u015E!! %\"),\n              peg$decode(\"!7\\xDA+_$ \\\\!7B+-$7\\xDB+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xDB+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u015F\\\"\\\"1&3\\u0160*; \\\"/\\u0161\\\"\\\"1'3\\u0162*/ \\\"/\\u0163\\\"\\\"1*3\\u0164*# \\\"76+& 4!6\\u0165! %\"),\n              peg$decode(\"!/\\u0166\\\"\\\"1&3\\u0167+<$7<+2%7\\xDC+(%4#6\\u0168#! %$## X$\\\"# X\\\"# X*\\x83 \\\"!/\\xF6\\\"\\\"1'3\\xF7+<$7<+2%7\\x9D+(%4#6\\u0169#! %$## X$\\\"# X\\\"# X*S \\\"!/\\u016A\\\"\\\"1+3\\u016B+<$7<+2%7\\x9D+(%4#6\\u016C#! %$## X$\\\"# X\\\"# X*# \\\"7\\x9F\"),\n              peg$decode(\"/\\u016D\\\"\\\"1+3\\u016E*k \\\"/\\u016F\\\"\\\"1)3\\u0170*_ \\\"/\\u0171\\\"\\\"1(3\\u0172*S \\\"/\\u0173\\\"\\\"1'3\\u0174*G \\\"/\\u0175\\\"\\\"1&3\\u0176*; \\\"/\\u0177\\\"\\\"1*3\\u0178*/ \\\"/\\u0179\\\"\\\"1)3\\u017A*# \\\"76\"),\n              peg$decode(\"71*# \\\" [\"),\n              peg$decode(\"!!76+o$ \\\\!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X,=&!7A+2$76+(%4\\\"6\\u015B\\\"! %$\\\"# X\\\"# X\\\"+)%4\\\"6\\u015C\\\"\\\"! %$\\\"# X\\\"# X*# \\\" [+' 4!6\\u017B!! %\"),\n              peg$decode(\"!7L*# \\\"7\\x98+c$ \\\\!7B+-$7\\xE0+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xE0+#%'\\\"%$\\\"# X\\\"# X\\\"+'%4\\\"6\\u017C\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xB8*# \\\"7\\x9F\"),\n              peg$decode(\"!7\\xE2+_$ \\\\!7A+-$7\\xE2+#%'\\\"%$\\\"# X\\\"# X,8&!7A+-$7\\xE2+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\xE9+s$7.+i%7\\xEC+_% \\\\!7B+-$7\\xE3+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xE3+#%'\\\"%$\\\"# X\\\"# X\\\"+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xE4*; \\\"7\\xE5*5 \\\"7\\xE6*/ \\\"7\\xE7*) \\\"7\\xE8*# \\\"7\\x9F\"),\n              peg$decode(\"!/\\u017D\\\"\\\"1#3\\u017E+<$7<+2%7\\xEF+(%4#6\\u017F#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0180\\\"\\\"1%3\\u0181+<$7<+2%7T+(%4#6\\u0182#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0183\\\"\\\"1(3\\u0184+B$7<+8%7\\\\*# \\\"7Y+(%4#6\\u0185#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0186\\\"\\\"1&3\\u0187+<$7<+2%76+(%4#6\\u0188#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u0189\\\"\\\"1%3\\u018A+T$!7<+5$ \\\\7!,#&7!\\\"+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+'%4\\\"6\\u018B\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\xEA+K$7;+A%76+7%7;+-%7\\xEB+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\x95\\\"\\\"1#3\\xD6*# \\\"76+' 4!6\\u018C!! %\"),\n              peg$decode(\"!/\\xB4\\\"\\\"1#3\\u018D*G \\\"/\\xB6\\\"\\\"1#3\\u018E*; \\\"/\\xBA\\\"\\\"1#3\\u018F*/ \\\"/\\xB8\\\"\\\"1$3\\u0190*# \\\"76+' 4!6\\u0191!! %\"),\n              peg$decode(\"!7\\xED+H$!7C+-$7\\xEE+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7U*) \\\"7\\\\*# \\\"7X+& 4!6\\u0192! %\"),\n              peg$decode(\"!!7!*# \\\" [+c$7!*# \\\" [+S%7!*# \\\" [+C%7!*# \\\" [+3%7!*# \\\" [+#%'%%$%# X$$# X$## X$\\\"# X\\\"# X+' 4!6\\u0193!! %\"),\n              peg$decode(\"!!7!+C$7!*# \\\" [+3%7!*# \\\" [+#%'#%$## X$\\\"# X\\\"# X+' 4!6\\u0194!! %\"),\n              peg$decode(\"7\\xBD\"),\n              peg$decode(\"!7\\x9D+d$ \\\\!7B+-$7\\xF2+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\xF2+#%'\\\"%$\\\"# X\\\"# X\\\"+(%4\\\"6\\u0195\\\"!!%$\\\"# X\\\"# X\"),\n              peg$decode(\"7\\xF3*# \\\"7\\x9F\"),\n              peg$decode(\"!.\\u0196\\\"\\\"2\\u01963\\u0197+N$7<+D%.\\u0198\\\"\\\"2\\u01983\\u0199*) \\\".\\u019A\\\"\\\"2\\u019A3\\u019B+(%4#6\\u019C#! %$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\x9D+d$ \\\\!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X,8&!7B+-$7\\x9F+#%'\\\"%$\\\"# X\\\"# X\\\"+(%4\\\"6\\u019D\\\"!!%$\\\"# X\\\"# X\"),\n              peg$decode(\"!76+7$70+-%7\\xF6+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\" \\\\72*) \\\"74*# \\\"7.,/&72*) \\\"74*# \\\"7.\\\"\"),\n              peg$decode(\" \\\\7%,#&7%\\\"\"),\n              peg$decode(\"!7\\xF9+=$.8\\\"\\\"2839+-%7\\xFA+#%'#%$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u019E\\\"\\\"1%3\\u019F*) \\\"/\\u01A0\\\"\\\"1$3\\u01A1+' 4!6\\u01A2!! %\"),\n              peg$decode(\"!7\\xFB+N$!.8\\\"\\\"2839+-$7^+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\\\*) \\\"7X*# \\\"7\\x82+' 4!6\\u01A3!! %\"),\n              peg$decode(\"! \\\\7\\xFD*) \\\"7-*# \\\"7\\xFE,/&7\\xFD*) \\\"7-*# \\\"7\\xFE\\\"+! (%\"),\n              peg$decode(\"7\\\"*S \\\"7!*M \\\".F\\\"\\\"2F3G*A \\\".J\\\"\\\"2J3K*5 \\\".H\\\"\\\"2H3I*) \\\".N\\\"\\\"2N3O\"),\n              peg$decode(\".L\\\"\\\"2L3M*\\x95 \\\".B\\\"\\\"2B3C*\\x89 \\\".<\\\"\\\"2<3=*} \\\".R\\\"\\\"2R3S*q \\\".T\\\"\\\"2T3U*e \\\".V\\\"\\\"2V3W*Y \\\".P\\\"\\\"2P3Q*M \\\".@\\\"\\\"2@3A*A \\\".D\\\"\\\"2D3E*5 \\\".2\\\"\\\"2233*) \\\".>\\\"\\\"2>3?\"),\n              peg$decode(\"!7\\u0100+h$.8\\\"\\\"2839+X%7\\xFA+N%!.\\u01A4\\\"\\\"2\\u01A43\\u01A5+-$7\\xEB+#%'\\\"%$\\\"# X\\\"# X*# \\\" [+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!/\\u01A6\\\"\\\"1%3\\u01A7*) \\\"/\\u01A8\\\"\\\"1$3\\u01A9+' 4!6\\u01A2!! %\"),\n              peg$decode(\"!7\\xEB+Q$/\\xB4\\\"\\\"1#3\\xB5*7 \\\"/\\xB6\\\"\\\"1#3\\xB7*+ \\\" \\\\7+,#&7+\\\"+'%4\\\"6\\u01AA\\\" %$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\u0104+\\x8F$.F\\\"\\\"2F3G+%7\\u0103+u%.F\\\"\\\"2F3G+e%7\\u0103+[%.F\\\"\\\"2F3G+K%7\\u0103+A%.F\\\"\\\"2F3G+1%7\\u0105+'%4)6\\u01AB) %$)# X$(# X$'# X$&# X$%# X$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7#+A$7#+7%7#+-%7#+#%'$%$$# X$## X$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\u0103+-$7\\u0103+#%'\\\"%$\\\"# X\\\"# X\"),\n              peg$decode(\"!7\\u0103+7$7\\u0103+-%7\\u0103+#%'#%$## X$\\\"# X\\\"# X\")\n            ],\n    \n            peg$currPos          = 0,\n            peg$reportedPos      = 0,\n            peg$cachedPos        = 0,\n            peg$cachedPosDetails = { line: 1, column: 1, seenCR: false },\n            peg$maxFailPos       = 0,\n            peg$maxFailExpected  = [],\n            peg$silentFails      = 0,\n    \n            peg$result;\n    \n        if (\"startRule\" in options) {\n          if (!(options.startRule in peg$startRuleIndices)) {\n            throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n          }\n    \n          peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n        }\n    \n        function text() {\n          return input.substring(peg$reportedPos, peg$currPos);\n        }\n    \n        function offset() {\n          return peg$reportedPos;\n        }\n    \n        function line() {\n          return peg$computePosDetails(peg$reportedPos).line;\n        }\n    \n        function column() {\n          return peg$computePosDetails(peg$reportedPos).column;\n        }\n    \n        function expected(description) {\n          throw peg$buildException(\n            null,\n            [{ type: \"other\", description: description }],\n            peg$reportedPos\n          );\n        }\n    \n        function error(message) {\n          throw peg$buildException(message, null, peg$reportedPos);\n        }\n    \n        function peg$computePosDetails(pos) {\n          function advance(details, startPos, endPos) {\n            var p, ch;\n    \n            for (p = startPos; p < endPos; p++) {\n              ch = input.charAt(p);\n              if (ch === \"\\n\") {\n                if (!details.seenCR) { details.line++; }\n                details.column = 1;\n                details.seenCR = false;\n              } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n                details.line++;\n                details.column = 1;\n                details.seenCR = true;\n              } else {\n                details.column++;\n                details.seenCR = false;\n              }\n            }\n          }\n    \n          if (peg$cachedPos !== pos) {\n            if (peg$cachedPos > pos) {\n              peg$cachedPos = 0;\n              peg$cachedPosDetails = { line: 1, column: 1, seenCR: false };\n            }\n            advance(peg$cachedPosDetails, peg$cachedPos, pos);\n            peg$cachedPos = pos;\n          }\n    \n          return peg$cachedPosDetails;\n        }\n    \n        function peg$fail(expected) {\n          if (peg$currPos < peg$maxFailPos) { return; }\n    \n          if (peg$currPos > peg$maxFailPos) {\n            peg$maxFailPos = peg$currPos;\n            peg$maxFailExpected = [];\n          }\n    \n          peg$maxFailExpected.push(expected);\n        }\n    \n        function peg$buildException(message, expected, pos) {\n          function cleanupExpected(expected) {\n            var i = 1;\n    \n            expected.sort(function(a, b) {\n              if (a.description < b.description) {\n                return -1;\n              } else if (a.description > b.description) {\n                return 1;\n              } else {\n                return 0;\n              }\n            });\n    \n            while (i < expected.length) {\n              if (expected[i - 1] === expected[i]) {\n                expected.splice(i, 1);\n              } else {\n                i++;\n              }\n            }\n          }\n    \n          function buildMessage(expected, found) {\n            function stringEscape(s) {\n              function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n    \n              return s\n                .replace(/\\\\/g,   '\\\\\\\\')\n                .replace(/\"/g,    '\\\\\"')\n                .replace(/\\x08/g, '\\\\b')\n                .replace(/\\t/g,   '\\\\t')\n                .replace(/\\n/g,   '\\\\n')\n                .replace(/\\f/g,   '\\\\f')\n                .replace(/\\r/g,   '\\\\r')\n                .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n                .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n                .replace(/[\\u0180-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n                .replace(/[\\u1080-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n            }\n    \n            var expectedDescs = new Array(expected.length),\n                expectedDesc, foundDesc, i;\n    \n            for (i = 0; i < expected.length; i++) {\n              expectedDescs[i] = expected[i].description;\n            }\n    \n            expectedDesc = expected.length > 1\n              ? expectedDescs.slice(0, -1).join(\", \")\n                  + \" or \"\n                  + expectedDescs[expected.length - 1]\n              : expectedDescs[0];\n    \n            foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n    \n            return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n          }\n    \n          var posDetails = peg$computePosDetails(pos),\n              found      = pos < input.length ? input.charAt(pos) : null;\n    \n          if (expected !== null) {\n            cleanupExpected(expected);\n          }\n    \n          return new SyntaxError(\n            message !== null ? message : buildMessage(expected, found),\n            expected,\n            found,\n            pos,\n            posDetails.line,\n            posDetails.column\n          );\n        }\n    \n        function peg$decode(s) {\n          var bc = new Array(s.length), i;\n    \n          for (i = 0; i < s.length; i++) {\n            bc[i] = s.charCodeAt(i) - 32;\n          }\n    \n          return bc;\n        }\n    \n        function peg$parseRule(index) {\n          var bc    = peg$bytecode[index],\n              ip    = 0,\n              ips   = [],\n              end   = bc.length,\n              ends  = [],\n              stack = [],\n              params, i;\n    \n          function protect(object) {\n            return Object.prototype.toString.apply(object) === \"[object Array]\" ? [] : object;\n          }\n    \n          while (true) {\n            while (ip < end) {\n              switch (bc[ip]) {\n                case 0:\n                  stack.push(protect(peg$consts[bc[ip + 1]]));\n                  ip += 2;\n                  break;\n    \n                case 1:\n                  stack.push(peg$currPos);\n                  ip++;\n                  break;\n    \n                case 2:\n                  stack.pop();\n                  ip++;\n                  break;\n    \n                case 3:\n                  peg$currPos = stack.pop();\n                  ip++;\n                  break;\n    \n                case 4:\n                  stack.length -= bc[ip + 1];\n                  ip += 2;\n                  break;\n    \n                case 5:\n                  stack.splice(-2, 1);\n                  ip++;\n                  break;\n    \n                case 6:\n                  stack[stack.length - 2].push(stack.pop());\n                  ip++;\n                  break;\n    \n                case 7:\n                  stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n                  ip += 2;\n                  break;\n    \n                case 8:\n                  stack.pop();\n                  stack.push(input.substring(stack[stack.length - 1], peg$currPos));\n                  ip++;\n                  break;\n    \n                case 9:\n                  ends.push(end);\n                  ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n    \n                  if (stack[stack.length - 1]) {\n                    end = ip + 3 + bc[ip + 1];\n                    ip += 3;\n                  } else {\n                    end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                    ip += 3 + bc[ip + 1];\n                  }\n    \n                  break;\n    \n                case 10:\n                  ends.push(end);\n                  ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n    \n                  if (stack[stack.length - 1] === peg$FAILED) {\n                    end = ip + 3 + bc[ip + 1];\n                    ip += 3;\n                  } else {\n                    end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                    ip += 3 + bc[ip + 1];\n                  }\n    \n                  break;\n    \n                case 11:\n                  ends.push(end);\n                  ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n    \n                  if (stack[stack.length - 1] !== peg$FAILED) {\n                    end = ip + 3 + bc[ip + 1];\n                    ip += 3;\n                  } else {\n                    end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                    ip += 3 + bc[ip + 1];\n                  }\n    \n                  break;\n    \n                case 12:\n                  if (stack[stack.length - 1] !== peg$FAILED) {\n                    ends.push(end);\n                    ips.push(ip);\n    \n                    end = ip + 2 + bc[ip + 1];\n                    ip += 2;\n                  } else {\n                    ip += 2 + bc[ip + 1];\n                  }\n    \n                  break;\n    \n                case 13:\n                  ends.push(end);\n                  ips.push(ip + 3 + bc[ip + 1] + bc[ip + 2]);\n    \n                  if (input.length > peg$currPos) {\n                    end = ip + 3 + bc[ip + 1];\n                    ip += 3;\n                  } else {\n                    end = ip + 3 + bc[ip + 1] + bc[ip + 2];\n                    ip += 3 + bc[ip + 1];\n                  }\n    \n                  break;\n    \n                case 14:\n                  ends.push(end);\n                  ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n    \n                  if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]) {\n                    end = ip + 4 + bc[ip + 2];\n                    ip += 4;\n                  } else {\n                    end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                    ip += 4 + bc[ip + 2];\n                  }\n    \n                  break;\n    \n                case 15:\n                  ends.push(end);\n                  ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n    \n                  if (input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]) {\n                    end = ip + 4 + bc[ip + 2];\n                    ip += 4;\n                  } else {\n                    end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                    ip += 4 + bc[ip + 2];\n                  }\n    \n                  break;\n    \n                case 16:\n                  ends.push(end);\n                  ips.push(ip + 4 + bc[ip + 2] + bc[ip + 3]);\n    \n                  if (peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))) {\n                    end = ip + 4 + bc[ip + 2];\n                    ip += 4;\n                  } else {\n                    end = ip + 4 + bc[ip + 2] + bc[ip + 3];\n                    ip += 4 + bc[ip + 2];\n                  }\n    \n                  break;\n    \n                case 17:\n                  stack.push(input.substr(peg$currPos, bc[ip + 1]));\n                  peg$currPos += bc[ip + 1];\n                  ip += 2;\n                  break;\n    \n                case 18:\n                  stack.push(peg$consts[bc[ip + 1]]);\n                  peg$currPos += peg$consts[bc[ip + 1]].length;\n                  ip += 2;\n                  break;\n    \n                case 19:\n                  stack.push(peg$FAILED);\n                  if (peg$silentFails === 0) {\n                    peg$fail(peg$consts[bc[ip + 1]]);\n                  }\n                  ip += 2;\n                  break;\n    \n                case 20:\n                  peg$reportedPos = stack[stack.length - 1 - bc[ip + 1]];\n                  ip += 2;\n                  break;\n    \n                case 21:\n                  peg$reportedPos = peg$currPos;\n                  ip++;\n                  break;\n    \n                case 22:\n                  params = bc.slice(ip + 4, ip + 4 + bc[ip + 3]);\n                  for (i = 0; i < bc[ip + 3]; i++) {\n                    params[i] = stack[stack.length - 1 - params[i]];\n                  }\n    \n                  stack.splice(\n                    stack.length - bc[ip + 2],\n                    bc[ip + 2],\n                    peg$consts[bc[ip + 1]].apply(null, params)\n                  );\n    \n                  ip += 4 + bc[ip + 3];\n                  break;\n    \n                case 23:\n                  stack.push(peg$parseRule(bc[ip + 1]));\n                  ip += 2;\n                  break;\n    \n                case 24:\n                  peg$silentFails++;\n                  ip++;\n                  break;\n    \n                case 25:\n                  peg$silentFails--;\n                  ip++;\n                  break;\n    \n                default:\n                  throw new Error(\"Invalid opcode: \" + bc[ip] + \".\");\n              }\n            }\n    \n            if (ends.length > 0) {\n              end = ends.pop();\n              ip = ips.pop();\n            } else {\n              break;\n            }\n          }\n    \n          return stack[0];\n        }\n    \n    \n          options.data = {}; // Object to which header attributes will be assigned during parsing\n    \n          function list (first, rest) {\n            return [first].concat(rest);\n          }\n    \n    \n        peg$result = peg$parseRule(peg$startRuleIndex);\n    \n        if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n          return peg$result;\n        } else {\n          if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n            peg$fail({ type: \"end\", description: \"end of input\" });\n          }\n    \n          throw peg$buildException(null, peg$maxFailExpected, peg$maxFailPos);\n        }\n      }\n    \n      return {\n        SyntaxError: SyntaxError,\n        parse:       parse\n      };\n    })();\n    },{}],12:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview Hacks - This file contains all of the things we\n     * wish we didn't have to do, just for interop.  It is similar to\n     * Utils, which provides actually useful and relevant functions for\n     * a SIP library. Methods in this file are grouped by vendor, so\n     * as to most easily track when particular hacks may not be necessary anymore.\n     */\n    \n    module.exports = function (SIP) {\n    \n    //keep to quiet jshint, and remain consistent with other files\n    SIP = SIP;\n    \n    var Hacks = {\n      AllBrowsers: {\n        maskDtls: function (sdp) {\n          if (sdp) {\n            sdp = sdp.replace(/ UDP\\/TLS\\/RTP\\/SAVP/gmi, \" RTP/SAVP\");\n          }\n          return sdp;\n        },\n        unmaskDtls: function (sdp) {\n          /**\n           * Chrome does not handle DTLS correctly (Canaray does, but not production)\n           * keeping Chrome as SDES until DTLS is fixed (comment out 'is_opera' condition)\n           *\n           * UPDATE: May 21, 2014\n           * Chrome 35 now properly defaults to DTLS.  Only Opera remains using SDES\n           *\n           * UPDATE: 2014-09-24\n           * Opera now supports DTLS by default as well.\n           *\n           **/\n          return sdp.replace(/ RTP\\/SAVP/gmi, \" UDP/TLS/RTP/SAVP\");\n        }\n      },\n      Firefox: {\n        /* Condition to detect if hacks are applicable */\n        isFirefox: function () {\n          return typeof mozRTCPeerConnection !== 'undefined';\n        },\n    \n        cannotHandleExtraWhitespace: function (sdp) {\n          if (this.isFirefox() && sdp) {\n            sdp = sdp.replace(/ \\r\\n/g, \"\\r\\n\");\n          }\n          return sdp;\n        },\n    \n        hasMissingCLineInSDP: function (sdp) {\n          /*\n           * This is a Firefox hack to insert valid sdp when getDescription is\n           * called with the constraint offerToReceiveVideo = false.\n           * We search for either a c-line at the top of the sdp above all\n           * m-lines. If that does not exist then we search for a c-line\n           * beneath each m-line. If it is missing a c-line, we insert\n           * a fake c-line with the ip address 0.0.0.0. This is then valid\n           * sdp and no media will be sent for that m-line.\n           *\n           * Valid SDP is:\n           * m=\n           * i=\n           * c=\n           */\n          var insertAt, mlines;\n          if (sdp.indexOf('c=') > sdp.indexOf('m=')) {\n    \n            // Find all m= lines\n            mlines = sdp.match(/m=.*\\r\\n.*/g);\n            for (var i=0; i<mlines.length; i++) {\n    \n              // If it has an i= line, check if the next line is the c= line\n              if (mlines[i].toString().search(/i=.*/) >= 0) {\n                insertAt = sdp.indexOf(mlines[i].toString())+mlines[i].toString().length;\n                if (sdp.substr(insertAt,2)!=='c=') {\n                  sdp = sdp.substr(0,insertAt) + '\\r\\nc=IN IP4 0.0.0.0' + sdp.substr(insertAt);\n                }\n    \n              // else add the C line if it's missing\n              } else if (mlines[i].toString().search(/c=.*/) < 0) {\n                insertAt = sdp.indexOf(mlines[i].toString().match(/.*/))+mlines[i].toString().match(/.*/).toString().length;\n                sdp = sdp.substr(0,insertAt) + '\\r\\nc=IN IP4 0.0.0.0' + sdp.substr(insertAt);\n              }\n            }\n          }\n          return sdp;\n        },\n      },\n    \n      Chrome: {\n        needsExplicitlyInactiveSDP: function (sdp) {\n          var sub, index;\n    \n          if (Hacks.Firefox.isFirefox()) { // Fix this in Firefox before sending\n            index = sdp.indexOf('m=video 0');\n            if (index !== -1) {\n              sub = sdp.substr(index);\n              sub = sub.replace(/\\r\\nc=IN IP4.*\\r\\n$/,\n                                '\\r\\nc=IN IP4 0.0.0.0\\r\\na=inactive\\r\\n');\n              return sdp.substr(0, index) + sub;\n            }\n          }\n          return sdp;\n        },\n    \n        getsConfusedAboutGUM: function (session) {\n          if (session.mediaHandler) {\n            session.mediaHandler.close();\n          }\n        }\n      }\n    };\n    return Hacks;\n    };\n    \n    },{}],13:[function(require,module,exports){\n    \"use strict\";\n    var levels = {\n      'error': 0,\n      'warn': 1,\n      'log': 2,\n      'debug': 3\n    };\n    \n    module.exports = function (console) {\n    \n    var LoggerFactory = function () {\n      var logger,\n        level = 2,\n        builtinEnabled = true,\n        connector = null;\n    \n        this.loggers = {};\n    \n        logger = this.getLogger('sip.loggerfactory');\n    \n    \n      Object.defineProperties(this, {\n        builtinEnabled: {\n          get: function(){ return builtinEnabled; },\n          set: function(value){\n            if (typeof value === 'boolean') {\n              builtinEnabled = value;\n            } else {\n              logger.error('invalid \"builtinEnabled\" parameter value: '+ JSON.stringify(value));\n            }\n          }\n        },\n    \n        level: {\n          get: function() {return level; },\n          set: function(value) {\n            if (value >= 0 && value <=3) {\n              level = value;\n            } else if (value > 3) {\n              level = 3;\n            } else if (levels.hasOwnProperty(value)) {\n              level = levels[value];\n            } else {\n              logger.error('invalid \"level\" parameter value: '+ JSON.stringify(value));\n            }\n          }\n        },\n    \n        connector: {\n          get: function() {return connector; },\n          set: function(value){\n            if(value === null || value === \"\" || value === undefined) {\n              connector = null;\n            } else if (typeof value === 'function') {\n              connector = value;\n            } else {\n              logger.error('invalid \"connector\" parameter value: '+ JSON.stringify(value));\n            }\n          }\n        }\n      });\n    };\n    \n    LoggerFactory.prototype.print = function(target, category, label, content) {\n      if (typeof content === 'string') {\n        var prefix = [new Date(), category];\n        if (label) {\n          prefix.push(label);\n        }\n        content = prefix.concat(content).join(' | ');\n      }\n      target.call(console, content);\n    };\n    \n    function Logger (logger, category, label) {\n      this.logger = logger;\n      this.category = category;\n      this.label = label;\n    }\n    \n    Object.keys(levels).forEach(function (targetName) {\n      Logger.prototype[targetName] = function (content) {\n        this.logger[targetName](this.category, this.label, content);\n      };\n    \n      LoggerFactory.prototype[targetName] = function (category, label, content) {\n        if (this.level >= levels[targetName]) {\n          if (this.builtinEnabled) {\n            this.print(console[targetName], category, label, content);\n          }\n    \n          if (this.connector) {\n            this.connector(targetName, category, label, content);\n          }\n        }\n      };\n    });\n    \n    LoggerFactory.prototype.getLogger = function(category, label) {\n      var logger;\n    \n      if (label && this.level === 3) {\n        return new Logger(this, category, label);\n      } else if (this.loggers[category]) {\n        return this.loggers[category];\n      } else {\n        logger = new Logger(this, category);\n        this.loggers[category] = logger;\n        return logger;\n      }\n    };\n    \n    return LoggerFactory;\n    };\n    \n    },{}],14:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview MediaHandler\n     */\n    \n    /* MediaHandler\n     * @class PeerConnection helper Class.\n     * @param {SIP.Session} session\n     * @param {Object} [options]\n     */\n    module.exports = function (EventEmitter) {\n    var MediaHandler = function(session, options) {\n      // keep jshint happy\n      session = session;\n      options = options;\n    };\n    \n    MediaHandler.prototype = Object.create(EventEmitter.prototype, {\n      isReady: {value: function isReady () {}},\n    \n      close: {value: function close () {}},\n    \n      /**\n       * @param {Object} [mediaHint] A custom object describing the media to be used during this session.\n       */\n      getDescription: {value: function getDescription (mediaHint) {\n        // keep jshint happy\n        mediaHint = mediaHint;\n      }},\n    \n      /**\n       * Check if a SIP message contains a session description.\n       * @param {SIP.SIPMessage} message\n       * @returns {boolean}\n       */\n      hasDescription: {value: function hasDescription (message) {\n        // keep jshint happy\n        message = message;\n      }},\n    \n      /**\n       * Set the session description contained in a SIP message.\n       * @param {SIP.SIPMessage} message\n       * @returns {Promise}\n       */\n      setDescription: {value: function setDescription (message) {\n        // keep jshint happy\n        message = message;\n      }}\n    });\n    \n    return MediaHandler;\n    };\n    \n    },{}],15:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP NameAddrHeader\n     */\n    \n    /**\n     * @augments SIP\n     * @class Class creating a Name Address SIP header.\n     *\n     * @param {SIP.URI} uri\n     * @param {String} [displayName]\n     * @param {Object} [parameters]\n     *\n     */\n    module.exports = function (SIP) {\n    var NameAddrHeader;\n    \n    NameAddrHeader = function(uri, displayName, parameters) {\n      var param;\n    \n      // Checks\n      if(!uri || !(uri instanceof SIP.URI)) {\n        throw new TypeError('missing or invalid \"uri\" parameter');\n      }\n    \n      // Initialize parameters\n      this.uri = uri;\n      this.parameters = {};\n    \n      for (param in parameters) {\n        this.setParam(param, parameters[param]);\n      }\n    \n      Object.defineProperties(this, {\n        friendlyName: {\n          get: function() { return this.displayName || uri.aor; }\n        },\n    \n        displayName: {\n          get: function() { return displayName; },\n          set: function(value) {\n            displayName = (value === 0) ? '0' : value;\n          }\n        }\n      });\n    };\n    NameAddrHeader.prototype = {\n      setParam: function (key, value) {\n        if(key) {\n          this.parameters[key.toLowerCase()] = (typeof value === 'undefined' || value === null) ? null : value.toString();\n        }\n      },\n      getParam: SIP.URI.prototype.getParam,\n      hasParam: SIP.URI.prototype.hasParam,\n      deleteParam: SIP.URI.prototype.deleteParam,\n      clearParams: SIP.URI.prototype.clearParams,\n    \n      clone: function() {\n        return new NameAddrHeader(\n          this.uri.clone(),\n          this.displayName,\n          JSON.parse(JSON.stringify(this.parameters)));\n      },\n    \n      toString: function() {\n        var body, parameter;\n    \n        body  = (this.displayName || this.displayName === 0) ? '\"' + this.displayName + '\" ' : '';\n        body += '<' + this.uri.toString() + '>';\n    \n        for (parameter in this.parameters) {\n          body += ';' + parameter;\n    \n          if (this.parameters[parameter] !== null) {\n            body += '='+ this.parameters[parameter];\n          }\n        }\n    \n        return body;\n      }\n    };\n    \n    \n    /**\n      * Parse the given string and returns a SIP.NameAddrHeader instance or undefined if\n      * it is an invalid NameAddrHeader.\n      * @public\n      * @param {String} name_addr_header\n      */\n    NameAddrHeader.parse = function(name_addr_header) {\n      name_addr_header = SIP.Grammar.parse(name_addr_header,'Name_Addr_Header');\n    \n      if (name_addr_header !== -1) {\n        return name_addr_header;\n      } else {\n        return undefined;\n      }\n    };\n    \n    SIP.NameAddrHeader = NameAddrHeader;\n    };\n    \n    },{}],16:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP Message Parser\n     */\n    \n    /**\n     * Extract and parse every header of a SIP message.\n     * @augments SIP\n     * @namespace\n     */\n    module.exports = function (SIP) {\n    var Parser;\n    \n    function getHeader(data, headerStart) {\n      var\n        // 'start' position of the header.\n        start = headerStart,\n        // 'end' position of the header.\n        end = 0,\n        // 'partial end' position of the header.\n        partialEnd = 0;\n    \n      //End of message.\n      if (data.substring(start, start + 2).match(/(^\\r\\n)/)) {\n        return -2;\n      }\n    \n      while(end === 0) {\n        // Partial End of Header.\n        partialEnd = data.indexOf('\\r\\n', start);\n    \n        // 'indexOf' returns -1 if the value to be found never occurs.\n        if (partialEnd === -1) {\n          return partialEnd;\n        }\n    \n        if(!data.substring(partialEnd + 2, partialEnd + 4).match(/(^\\r\\n)/) && data.charAt(partialEnd + 2).match(/(^\\s+)/)) {\n          // Not the end of the message. Continue from the next position.\n          start = partialEnd + 2;\n        } else {\n          end = partialEnd;\n        }\n      }\n    \n      return end;\n    }\n    \n    function parseHeader(message, data, headerStart, headerEnd) {\n      var header, idx, length, parsed,\n        hcolonIndex = data.indexOf(':', headerStart),\n        headerName = data.substring(headerStart, hcolonIndex).trim(),\n        headerValue = data.substring(hcolonIndex + 1, headerEnd).trim();\n    \n      // If header-field is well-known, parse it.\n      switch(headerName.toLowerCase()) {\n        case 'via':\n        case 'v':\n          message.addHeader('via', headerValue);\n          if(message.getHeaders('via').length === 1) {\n            parsed = message.parseHeader('Via');\n            if(parsed) {\n              message.via = parsed;\n              message.via_branch = parsed.branch;\n            }\n          } else {\n            parsed = 0;\n          }\n          break;\n        case 'from':\n        case 'f':\n          message.setHeader('from', headerValue);\n          parsed = message.parseHeader('from');\n          if(parsed) {\n            message.from = parsed;\n            message.from_tag = parsed.getParam('tag');\n          }\n          break;\n        case 'to':\n        case 't':\n          message.setHeader('to', headerValue);\n          parsed = message.parseHeader('to');\n          if(parsed) {\n            message.to = parsed;\n            message.to_tag = parsed.getParam('tag');\n          }\n          break;\n        case 'record-route':\n          parsed = SIP.Grammar.parse(headerValue, 'Record_Route');\n    \n          if (parsed === -1) {\n            parsed = undefined;\n            break;\n          }\n    \n          length = parsed.length;\n          for (idx = 0; idx < length; idx++) {\n            header = parsed[idx];\n            message.addHeader('record-route', headerValue.substring(header.position, header.offset));\n            message.headers['Record-Route'][message.getHeaders('record-route').length - 1].parsed = header.parsed;\n          }\n          break;\n        case 'call-id':\n        case 'i':\n          message.setHeader('call-id', headerValue);\n          parsed = message.parseHeader('call-id');\n          if(parsed) {\n            message.call_id = headerValue;\n          }\n          break;\n        case 'contact':\n        case 'm':\n          parsed = SIP.Grammar.parse(headerValue, 'Contact');\n    \n          if (parsed === -1) {\n            parsed = undefined;\n            break;\n          }\n    \n          length = parsed.length;\n          for (idx = 0; idx < length; idx++) {\n            header = parsed[idx];\n            message.addHeader('contact', headerValue.substring(header.position, header.offset));\n            message.headers['Contact'][message.getHeaders('contact').length - 1].parsed = header.parsed;\n          }\n          break;\n        case 'content-length':\n        case 'l':\n          message.setHeader('content-length', headerValue);\n          parsed = message.parseHeader('content-length');\n          break;\n        case 'content-type':\n        case 'c':\n          message.setHeader('content-type', headerValue);\n          parsed = message.parseHeader('content-type');\n          break;\n        case 'cseq':\n          message.setHeader('cseq', headerValue);\n          parsed = message.parseHeader('cseq');\n          if(parsed) {\n            message.cseq = parsed.value;\n          }\n          if(message instanceof SIP.IncomingResponse) {\n            message.method = parsed.method;\n          }\n          break;\n        case 'max-forwards':\n          message.setHeader('max-forwards', headerValue);\n          parsed = message.parseHeader('max-forwards');\n          break;\n        case 'www-authenticate':\n          message.setHeader('www-authenticate', headerValue);\n          parsed = message.parseHeader('www-authenticate');\n          break;\n        case 'proxy-authenticate':\n          message.setHeader('proxy-authenticate', headerValue);\n          parsed = message.parseHeader('proxy-authenticate');\n          break;\n        case 'refer-to':\n        case 'r':\n          message.setHeader('refer-to', headerValue);\n          parsed = message.parseHeader('refer-to');\n          if (parsed) {\n            message.refer_to = parsed;\n          }\n          break;\n        default:\n          // Do not parse this header.\n          message.setHeader(headerName, headerValue);\n          parsed = 0;\n      }\n    \n      if (parsed === undefined) {\n        return {\n          error: 'error parsing header \"'+ headerName +'\"'\n        };\n      } else {\n        return true;\n      }\n    }\n    \n    /** Parse SIP Message\n     * @function\n     * @param {String} message SIP message.\n     * @param {Object} logger object.\n     * @returns {SIP.IncomingRequest|SIP.IncomingResponse|undefined}\n     */\n    Parser = {};\n    Parser.parseMessage = function(data, ua) {\n      var message, firstLine, contentLength, bodyStart, parsed,\n        headerStart = 0,\n        headerEnd = data.indexOf('\\r\\n'),\n        logger = ua.getLogger('sip.parser');\n    \n      if(headerEnd === -1) {\n        logger.warn('no CRLF found, not a SIP message, discarded');\n        return;\n      }\n    \n      // Parse first line. Check if it is a Request or a Reply.\n      firstLine = data.substring(0, headerEnd);\n      parsed = SIP.Grammar.parse(firstLine, 'Request_Response');\n    \n      if(parsed === -1) {\n        logger.warn('error parsing first line of SIP message: \"' + firstLine + '\"');\n        return;\n      } else if(!parsed.status_code) {\n        message = new SIP.IncomingRequest(ua);\n        message.method = parsed.method;\n        message.ruri = parsed.uri;\n      } else {\n        message = new SIP.IncomingResponse(ua);\n        message.status_code = parsed.status_code;\n        message.reason_phrase = parsed.reason_phrase;\n      }\n    \n      message.data = data;\n      headerStart = headerEnd + 2;\n    \n      /* Loop over every line in data. Detect the end of each header and parse\n      * it or simply add to the headers collection.\n      */\n      while(true) {\n        headerEnd = getHeader(data, headerStart);\n    \n        // The SIP message has normally finished.\n        if(headerEnd === -2) {\n          bodyStart = headerStart + 2;\n          break;\n        }\n        // data.indexOf returned -1 due to a malformed message.\n        else if(headerEnd === -1) {\n          logger.error('malformed message');\n          return;\n        }\n    \n        parsed = parseHeader(message, data, headerStart, headerEnd);\n    \n        if(parsed !== true) {\n          logger.error(parsed.error);\n          return;\n        }\n    \n        headerStart = headerEnd + 2;\n      }\n    \n      /* RFC3261 18.3.\n       * If there are additional bytes in the transport packet\n       * beyond the end of the body, they MUST be discarded.\n       */\n      if(message.hasHeader('content-length')) {\n        contentLength = message.getHeader('content-length');\n        message.body = data.substr(bodyStart, contentLength);\n      } else {\n        message.body = data.substring(bodyStart);\n      }\n    \n      return message;\n    };\n    \n    SIP.Parser = Parser;\n    };\n    \n    },{}],17:[function(require,module,exports){\n    \"use strict\";\n    module.exports = function (SIP) {\n    \n    var RegisterContext;\n    \n    RegisterContext = function (ua) {\n      var params = {},\n          regId = 1;\n    \n      this.registrar = ua.configuration.registrarServer;\n      this.expires = ua.configuration.registerExpires;\n    \n    \n      // Contact header\n      this.contact = ua.contact.toString();\n    \n      if(regId) {\n        this.contact += ';reg-id='+ regId;\n        this.contact += ';+sip.instance=\"<urn:uuid:'+ ua.configuration.instanceId+'>\"';\n      }\n    \n      // Call-ID and CSeq values RFC3261 10.2\n      this.call_id = SIP.Utils.createRandomToken(22);\n      this.cseq = 80;\n    \n      this.to_uri = ua.configuration.uri;\n    \n      params.to_uri = this.to_uri;\n      params.to_displayName = ua.configuration.displayName;\n      params.call_id = this.call_id;\n      params.cseq = this.cseq;\n    \n      // Extends ClientContext\n      SIP.Utils.augment(this, SIP.ClientContext, [ua, 'REGISTER', this.registrar, {params: params}]);\n    \n      this.registrationTimer = null;\n      this.registrationExpiredTimer = null;\n    \n      // Set status\n      this.registered = false;\n    \n      this.logger = ua.getLogger('sip.registercontext');\n    };\n    \n    RegisterContext.prototype = {\n      register: function (options) {\n        var self = this, extraHeaders;\n    \n        // Handle Options\n        this.options = options || {};\n        extraHeaders = (this.options.extraHeaders || []).slice();\n        extraHeaders.push('Contact: ' + this.contact + ';expires=' + this.expires);\n        extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n    \n        // Save original extraHeaders to be used in .close\n        this.closeHeaders = this.options.closeWithHeaders ?\n          (this.options.extraHeaders || []).slice() : [];\n    \n        this.receiveResponse = function(response) {\n          var contact, expires,\n            contacts = response.getHeaders('contact').length,\n            cause;\n    \n          // Discard responses to older REGISTER/un-REGISTER requests.\n          if(response.cseq !== this.cseq) {\n            return;\n          }\n    \n          // Clear registration timer\n          if (this.registrationTimer !== null) {\n            SIP.Timers.clearTimeout(this.registrationTimer);\n            this.registrationTimer = null;\n          }\n    \n          switch(true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n              this.emit('progress', response);\n              break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n              this.emit('accepted', response);\n    \n              if(response.hasHeader('expires')) {\n                expires = response.getHeader('expires');\n              }\n    \n              if (this.registrationExpiredTimer !== null) {\n                SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                this.registrationExpiredTimer = null;\n              }\n    \n              // Search the Contact pointing to us and update the expires value accordingly.\n              if (!contacts) {\n                this.logger.warn('no Contact header in response to REGISTER, response ignored');\n                break;\n              }\n    \n              while(contacts--) {\n                contact = response.parseHeader('contact', contacts);\n                if(contact.uri.user === this.ua.contact.uri.user) {\n                  expires = contact.getParam('expires');\n                  break;\n                } else {\n                  contact = null;\n                }\n              }\n    \n              if (!contact) {\n                this.logger.warn('no Contact header pointing to us, response ignored');\n                break;\n              }\n    \n              if(!expires) {\n                expires = this.expires;\n              }\n    \n              // Re-Register before the expiration interval has elapsed.\n              // For that, decrease the expires value. ie: 3 seconds\n              this.registrationTimer = SIP.Timers.setTimeout(function() {\n                self.registrationTimer = null;\n                self.register(self.options);\n              }, (expires * 1000) - 3000);\n              this.registrationExpiredTimer = SIP.Timers.setTimeout(function () {\n                self.logger.warn('registration expired');\n                if (self.registered) {\n                  self.unregistered(null, SIP.C.causes.EXPIRES);\n                }\n              }, expires * 1000);\n    \n              //Save gruu values\n              if (contact.hasParam('temp-gruu')) {\n                this.ua.contact.temp_gruu = SIP.URI.parse(contact.getParam('temp-gruu').replace(/\"/g,''));\n              }\n              if (contact.hasParam('pub-gruu')) {\n                this.ua.contact.pub_gruu = SIP.URI.parse(contact.getParam('pub-gruu').replace(/\"/g,''));\n              }\n    \n              this.registered = true;\n              this.emit('registered', response || null);\n              break;\n            // Interval too brief RFC3261 10.2.8\n            case /^423$/.test(response.status_code):\n              if(response.hasHeader('min-expires')) {\n                // Increase our registration interval to the suggested minimum\n                this.expires = response.getHeader('min-expires');\n                // Attempt the registration again immediately\n                this.register(this.options);\n              } else { //This response MUST contain a Min-Expires header field\n                this.logger.warn('423 response received for REGISTER without Min-Expires');\n                this.registrationFailure(response, SIP.C.causes.SIP_FAILURE_CODE);\n              }\n              break;\n            default:\n              cause = SIP.Utils.sipErrorCause(response.status_code);\n              this.registrationFailure(response, cause);\n          }\n        };\n    \n        this.onRequestTimeout = function() {\n          this.registrationFailure(null, SIP.C.causes.REQUEST_TIMEOUT);\n        };\n    \n        this.onTransportError = function() {\n          this.registrationFailure(null, SIP.C.causes.CONNECTION_ERROR);\n        };\n    \n        this.cseq++;\n        this.request.cseq = this.cseq;\n        this.request.setHeader('cseq', this.cseq + ' REGISTER');\n        this.request.extraHeaders = extraHeaders;\n        this.send();\n      },\n    \n      registrationFailure: function (response, cause) {\n        this.emit('failed', response || null, cause || null);\n      },\n    \n      onTransportClosed: function() {\n        this.registered_before = this.registered;\n        if (this.registrationTimer !== null) {\n          SIP.Timers.clearTimeout(this.registrationTimer);\n          this.registrationTimer = null;\n        }\n    \n        if (this.registrationExpiredTimer !== null) {\n          SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n          this.registrationExpiredTimer = null;\n        }\n    \n        if(this.registered) {\n          this.unregistered(null, SIP.C.causes.CONNECTION_ERROR);\n        }\n      },\n    \n      onTransportConnected: function() {\n        this.register(this.options);\n      },\n    \n      close: function() {\n        var options = {\n          all: false,\n          extraHeaders: this.closeHeaders\n        };\n    \n        this.registered_before = this.registered;\n        this.unregister(options);\n      },\n    \n      unregister: function(options) {\n        var extraHeaders;\n    \n        options = options || {};\n    \n        if(!this.registered && !options.all) {\n          this.logger.warn('already unregistered');\n          return;\n        }\n    \n        extraHeaders = (options.extraHeaders || []).slice();\n    \n        this.registered = false;\n    \n        // Clear the registration timer.\n        if (this.registrationTimer !== null) {\n          SIP.Timers.clearTimeout(this.registrationTimer);\n          this.registrationTimer = null;\n        }\n    \n        if(options.all) {\n          extraHeaders.push('Contact: *');\n          extraHeaders.push('Expires: 0');\n        } else {\n          extraHeaders.push('Contact: '+ this.contact + ';expires=0');\n        }\n    \n    \n        this.receiveResponse = function(response) {\n          var cause;\n    \n          switch(true) {\n            case /^1[0-9]{2}$/.test(response.status_code):\n              this.emit('progress', response);\n              break;\n            case /^2[0-9]{2}$/.test(response.status_code):\n              this.emit('accepted', response);\n              if (this.registrationExpiredTimer !== null) {\n                SIP.Timers.clearTimeout(this.registrationExpiredTimer);\n                this.registrationExpiredTimer = null;\n              }\n              this.unregistered(response);\n              break;\n            default:\n              cause = SIP.Utils.sipErrorCause(response.status_code);\n              this.unregistered(response,cause);\n          }\n        };\n    \n        this.onRequestTimeout = function() {\n          // Not actually unregistered...\n          //this.unregistered(null, SIP.C.causes.REQUEST_TIMEOUT);\n        };\n    \n        this.onTransportError = function() {\n          // Not actually unregistered...\n          //this.unregistered(null, SIP.C.causes.CONNECTION_ERROR);\n        };\n    \n        this.cseq++;\n        this.request.cseq = this.cseq;\n        this.request.setHeader('cseq', this.cseq + ' REGISTER');\n        this.request.extraHeaders = extraHeaders;\n    \n        this.send();\n      },\n    \n      unregistered: function(response, cause) {\n        this.registered = false;\n        this.emit('unregistered', response || null, cause || null);\n      }\n    \n    };\n    \n    \n    SIP.RegisterContext = RegisterContext;\n    };\n    \n    },{}],18:[function(require,module,exports){\n    \"use strict\";\n    \n    /**\n     * @fileoverview Request Sender\n     */\n    \n    /**\n     * @augments SIP\n     * @class Class creating a request sender.\n     * @param {Object} applicant\n     * @param {SIP.UA} ua\n     */\n    module.exports = function (SIP) {\n    var RequestSender;\n    \n    RequestSender = function(applicant, ua) {\n      this.logger = ua.getLogger('sip.requestsender');\n      this.ua = ua;\n      this.applicant = applicant;\n      this.method = applicant.request.method;\n      this.request = applicant.request;\n      this.credentials = null;\n      this.challenged = false;\n      this.staled = false;\n    \n      // If ua is in closing process or even closed just allow sending Bye and ACK\n      if (ua.status === SIP.UA.C.STATUS_USER_CLOSED && (this.method !== SIP.C.BYE || this.method !== SIP.C.ACK)) {\n        this.onTransportError();\n      }\n    };\n    \n    /**\n    * Create the client transaction and send the message.\n    */\n    RequestSender.prototype = {\n      send: function() {\n        switch(this.method) {\n          case \"INVITE\":\n            this.clientTransaction = new SIP.Transactions.InviteClientTransaction(this, this.request, this.ua.transport);\n            break;\n          case \"ACK\":\n            this.clientTransaction = new SIP.Transactions.AckClientTransaction(this, this.request, this.ua.transport);\n            break;\n          default:\n            this.clientTransaction = new SIP.Transactions.NonInviteClientTransaction(this, this.request, this.ua.transport);\n        }\n        this.clientTransaction.send();\n    \n        return this.clientTransaction;\n      },\n    \n      /**\n      * Callback fired when receiving a request timeout error from the client transaction.\n      * To be re-defined by the applicant.\n      * @event\n      */\n      onRequestTimeout: function() {\n        this.applicant.onRequestTimeout();\n      },\n    \n      /**\n      * Callback fired when receiving a transport error from the client transaction.\n      * To be re-defined by the applicant.\n      * @event\n      */\n      onTransportError: function() {\n        this.applicant.onTransportError();\n      },\n    \n      /**\n      * Called from client transaction when receiving a correct response to the request.\n      * Authenticate request if needed or pass the response back to the applicant.\n      * @param {SIP.IncomingResponse} response\n      */\n      receiveResponse: function(response) {\n        var cseq, challenge, authorization_header_name,\n          status_code = response.status_code;\n    \n        /*\n        * Authentication\n        * Authenticate once. _challenged_ flag used to avoid infinite authentications.\n        */\n        if (status_code === 401 || status_code === 407) {\n    \n          // Get and parse the appropriate WWW-Authenticate or Proxy-Authenticate header.\n          if (response.status_code === 401) {\n            challenge = response.parseHeader('www-authenticate');\n            authorization_header_name = 'authorization';\n          } else {\n            challenge = response.parseHeader('proxy-authenticate');\n            authorization_header_name = 'proxy-authorization';\n          }\n    \n          // Verify it seems a valid challenge.\n          if (! challenge) {\n            this.logger.warn(response.status_code + ' with wrong or missing challenge, cannot authenticate');\n            this.applicant.receiveResponse(response);\n            return;\n          }\n    \n          if (!this.challenged || (!this.staled && challenge.stale === true)) {\n            if (!this.credentials) {\n              this.credentials = this.ua.configuration.authenticationFactory(this.ua);\n            }\n    \n            // Verify that the challenge is really valid.\n            if (!this.credentials.authenticate(this.request, challenge)) {\n              this.applicant.receiveResponse(response);\n              return;\n            }\n            this.challenged = true;\n    \n            if (challenge.stale) {\n              this.staled = true;\n            }\n    \n            if (response.method === SIP.C.REGISTER) {\n              cseq = this.applicant.cseq += 1;\n            } else if (this.request.dialog){\n              cseq = this.request.dialog.local_seqnum += 1;\n            } else {\n              cseq = this.request.cseq + 1;\n              this.request.cseq = cseq;\n            }\n            this.request.setHeader('cseq', cseq +' '+ this.method);\n    \n            this.request.setHeader(authorization_header_name, this.credentials.toString());\n            this.send();\n          } else {\n            this.applicant.receiveResponse(response);\n          }\n        } else {\n          this.applicant.receiveResponse(response);\n        }\n      }\n    };\n    \n    SIP.RequestSender = RequestSender;\n    };\n    \n    },{}],19:[function(require,module,exports){\n    /**\n     * @name SIP\n     * @namespace\n     */\n    \"use strict\";\n    \n    module.exports = function (environment) {\n    \n    var pkg = require('../package.json'),\n        version = pkg.version,\n        title = pkg.title;\n    \n    var SIP = Object.defineProperties({}, {\n      version: {\n        get: function(){ return version; }\n      },\n      name: {\n        get: function(){ return title; }\n      }\n    });\n    \n    require('./Utils')(SIP, environment);\n    SIP.LoggerFactory = require('./LoggerFactory')(environment.console);\n    SIP.EventEmitter = require('./EventEmitter')(environment.console);\n    SIP.C = require('./Constants')(SIP.name, SIP.version);\n    SIP.Exceptions = require('./Exceptions');\n    SIP.Timers = require('./Timers')(environment.timers);\n    SIP.Transport = environment.Transport(SIP, environment.WebSocket);\n    require('./Parser')(SIP);\n    require('./SIPMessage')(SIP);\n    require('./URI')(SIP);\n    require('./NameAddrHeader')(SIP);\n    require('./Transactions')(SIP);\n    require('./Dialogs')(SIP);\n    require('./RequestSender')(SIP);\n    require('./RegisterContext')(SIP);\n    SIP.MediaHandler = require('./MediaHandler')(SIP.EventEmitter);\n    require('./ClientContext')(SIP);\n    require('./ServerContext')(SIP);\n    require('./Session')(SIP, environment);\n    require('./Subscription')(SIP);\n    SIP.WebRTC = require('./WebRTC')(SIP, environment);\n    require('./UA')(SIP, environment);\n    SIP.Hacks = require('./Hacks')(SIP);\n    require('./SanityCheck')(SIP);\n    SIP.DigestAuthentication = require('./DigestAuthentication')(SIP.Utils);\n    SIP.Grammar = require('./Grammar')(SIP);\n    \n    return SIP;\n    };\n    \n    },{\"../package.json\":2,\"./ClientContext\":3,\"./Constants\":4,\"./Dialogs\":6,\"./DigestAuthentication\":7,\"./EventEmitter\":8,\"./Exceptions\":9,\"./Grammar\":10,\"./Hacks\":12,\"./LoggerFactory\":13,\"./MediaHandler\":14,\"./NameAddrHeader\":15,\"./Parser\":16,\"./RegisterContext\":17,\"./RequestSender\":18,\"./SIPMessage\":20,\"./SanityCheck\":21,\"./ServerContext\":22,\"./Session\":23,\"./Subscription\":25,\"./Timers\":26,\"./Transactions\":27,\"./UA\":29,\"./URI\":30,\"./Utils\":31,\"./WebRTC\":32}],20:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP Message\n     */\n    \n    module.exports = function (SIP) {\n    var\n      OutgoingRequest,\n      IncomingMessage,\n      IncomingRequest,\n      IncomingResponse;\n    \n    function getSupportedHeader (request) {\n      var allowUnregistered = request.ua.configuration.hackAllowUnregisteredOptionTags;\n      var optionTags = [];\n      var optionTagSet = {};\n    \n      if (request.method === SIP.C.REGISTER) {\n        optionTags.push('path', 'gruu');\n      } else if (request.method === SIP.C.INVITE &&\n                 (request.ua.contact.pub_gruu || request.ua.contact.temp_gruu)) {\n        optionTags.push('gruu');\n      }\n    \n      if (request.ua.configuration.rel100 === SIP.C.supported.SUPPORTED) {\n        optionTags.push('100rel');\n      }\n      if (request.ua.configuration.replaces === SIP.C.supported.SUPPORTED) {\n        optionTags.push('replaces');\n      }\n    \n      optionTags.push('outbound');\n    \n      optionTags = optionTags.concat(request.ua.configuration.extraSupported);\n    \n      optionTags = optionTags.filter(function(optionTag) {\n        var registered = SIP.C.OPTION_TAGS[optionTag];\n        var unique = !optionTagSet[optionTag];\n        optionTagSet[optionTag] = true;\n        return (registered || allowUnregistered) && unique;\n      });\n    \n      return 'Supported: ' + optionTags.join(', ') + '\\r\\n';\n    }\n    \n    /**\n     * @augments SIP\n     * @class Class for outgoing SIP request.\n     * @param {String} method request method\n     * @param {String} ruri request uri\n     * @param {SIP.UA} ua\n     * @param {Object} params parameters that will have priority over ua.configuration parameters:\n     * <br>\n     *  - cseq, call_id, from_tag, from_uri, from_displayName, to_uri, to_tag, route_set\n     * @param {Object} [headers] extra headers\n     * @param {String} [body]\n     */\n    OutgoingRequest = function(method, ruri, ua, params, extraHeaders, body) {\n      var\n        to,\n        from,\n        call_id,\n        cseq,\n        to_uri,\n        from_uri;\n    \n      params = params || {};\n    \n      // Mandatory parameters check\n      if(!method || !ruri || !ua) {\n        return null;\n      }\n    \n      this.logger = ua.getLogger('sip.sipmessage');\n      this.ua = ua;\n      this.headers = {};\n      this.method = method;\n      this.ruri = ruri;\n      this.body = body;\n      this.extraHeaders = (extraHeaders || []).slice();\n      this.statusCode = params.status_code;\n      this.reasonPhrase = params.reason_phrase;\n    \n      // Fill the Common SIP Request Headers\n    \n      // Route\n      if (params.route_set) {\n        this.setHeader('route', params.route_set);\n      } else if (ua.configuration.usePreloadedRoute){\n        this.setHeader('route', ua.transport.server.sip_uri);\n      }\n    \n      // Via\n      // Empty Via header. Will be filled by the client transaction.\n      this.setHeader('via', '');\n    \n      // Max-Forwards\n      this.setHeader('max-forwards', SIP.UA.C.MAX_FORWARDS);\n    \n      // To\n      to_uri = params.to_uri || ruri;\n      to = (params.to_displayName || params.to_displayName === 0) ? '\"' + params.to_displayName + '\" ' : '';\n      to += '<' + (to_uri && to_uri.toRaw ? to_uri.toRaw() : to_uri) + '>';\n      to += params.to_tag ? ';tag=' + params.to_tag : '';\n      this.to = new SIP.NameAddrHeader.parse(to);\n      this.setHeader('to', to);\n    \n      // From\n      from_uri = params.from_uri || ua.configuration.uri;\n      if (params.from_displayName || params.from_displayName === 0) {\n        from = '\"' + params.from_displayName + '\" ';\n      } else if (ua.configuration.displayName) {\n        from = '\"' + ua.configuration.displayName + '\" ';\n      } else {\n        from = '';\n      }\n      from += '<' + (from_uri && from_uri.toRaw ? from_uri.toRaw() : from_uri) + '>;tag=';\n      from += params.from_tag || SIP.Utils.newTag();\n      this.from = new SIP.NameAddrHeader.parse(from);\n      this.setHeader('from', from);\n    \n      // Call-ID\n      call_id = params.call_id || (ua.configuration.sipjsId + SIP.Utils.createRandomToken(15));\n      this.call_id = call_id;\n      this.setHeader('call-id', call_id);\n    \n      // CSeq\n      cseq = params.cseq || Math.floor(Math.random() * 10000);\n      this.cseq = cseq;\n      this.setHeader('cseq', cseq + ' ' + method);\n    };\n    \n    OutgoingRequest.prototype = {\n      /**\n       * Replace the the given header by the given value.\n       * @param {String} name header name\n       * @param {String | Array} value header value\n       */\n      setHeader: function(name, value) {\n        this.headers[SIP.Utils.headerize(name)] = (value instanceof Array) ? value : [value];\n      },\n    \n      /**\n       * Get the value of the given header name at the given position.\n       * @param {String} name header name\n       * @returns {String|undefined} Returns the specified header, undefined if header doesn't exist.\n       */\n      getHeader: function(name) {\n        var regexp, idx,\n          length = this.extraHeaders.length,\n          header = this.headers[SIP.Utils.headerize(name)];\n    \n        if(header) {\n          if(header[0]) {\n            return header[0];\n          }\n        } else {\n          regexp = new RegExp('^\\\\s*' + name + '\\\\s*:','i');\n          for (idx = 0; idx < length; idx++) {\n            header = this.extraHeaders[idx];\n            if (regexp.test(header)) {\n              return header.substring(header.indexOf(':')+1).trim();\n            }\n          }\n        }\n    \n        return;\n      },\n    \n      /**\n       * Get the header/s of the given name.\n       * @param {String} name header name\n       * @returns {Array} Array with all the headers of the specified name.\n       */\n      getHeaders: function(name) {\n        var idx, length, regexp,\n          header = this.headers[SIP.Utils.headerize(name)],\n          result = [];\n    \n        if(header) {\n          length = header.length;\n          for (idx = 0; idx < length; idx++) {\n            result.push(header[idx]);\n          }\n          return result;\n        } else {\n          length = this.extraHeaders.length;\n          regexp = new RegExp('^\\\\s*' + name + '\\\\s*:','i');\n          for (idx = 0; idx < length; idx++) {\n            header = this.extraHeaders[idx];\n            if (regexp.test(header)) {\n              result.push(header.substring(header.indexOf(':')+1).trim());\n            }\n          }\n          return result;\n        }\n      },\n    \n      /**\n       * Verify the existence of the given header.\n       * @param {String} name header name\n       * @returns {boolean} true if header with given name exists, false otherwise\n       */\n      hasHeader: function(name) {\n        var regexp, idx,\n          length = this.extraHeaders.length;\n    \n        if (this.headers[SIP.Utils.headerize(name)]) {\n          return true;\n        } else {\n          regexp = new RegExp('^\\\\s*' + name + '\\\\s*:','i');\n          for (idx = 0; idx < length; idx++) {\n            if (regexp.test(this.extraHeaders[idx])) {\n              return true;\n            }\n          }\n        }\n    \n        return false;\n      },\n    \n      toString: function() {\n        var msg = '', header, length, idx;\n    \n        msg += this.method + ' ' + (this.ruri.toRaw ? this.ruri.toRaw() : this.ruri) + ' SIP/2.0\\r\\n';\n    \n        for (header in this.headers) {\n          length = this.headers[header].length;\n          for (idx = 0; idx < length; idx++) {\n            msg += header + ': ' + this.headers[header][idx] + '\\r\\n';\n          }\n        }\n    \n        length = this.extraHeaders.length;\n        for (idx = 0; idx < length; idx++) {\n          msg += this.extraHeaders[idx].trim() +'\\r\\n';\n        }\n    \n        msg += getSupportedHeader(this);\n        msg += 'User-Agent: ' + this.ua.configuration.userAgentString +'\\r\\n';\n    \n        if (this.body) {\n          if (typeof this.body === 'string') {\n            length = SIP.Utils.str_utf8_length(this.body);\n            msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n            msg += this.body;\n          } else {\n            if (this.body.body && this.body.contentType) {\n              length = SIP.Utils.str_utf8_length(this.body.body);\n              msg += 'Content-Type: ' + this.body.contentType + '\\r\\n';\n              msg += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n              msg += this.body.body;\n            } else {\n              msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n            }\n          }\n        } else {\n          msg += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n        }\n    \n        return msg;\n      }\n    };\n    \n    /**\n     * @augments SIP\n     * @class Class for incoming SIP message.\n     */\n    IncomingMessage = function(){\n      this.data = null;\n      this.headers = null;\n      this.method =  null;\n      this.via = null;\n      this.via_branch = null;\n      this.call_id = null;\n      this.cseq = null;\n      this.from = null;\n      this.from_tag = null;\n      this.to = null;\n      this.to_tag = null;\n      this.body = null;\n    };\n    \n    IncomingMessage.prototype = {\n      /**\n      * Insert a header of the given name and value into the last position of the\n      * header array.\n      * @param {String} name header name\n      * @param {String} value header value\n      */\n      addHeader: function(name, value) {\n        var header = { raw: value };\n    \n        name = SIP.Utils.headerize(name);\n    \n        if(this.headers[name]) {\n          this.headers[name].push(header);\n        } else {\n          this.headers[name] = [header];\n        }\n      },\n    \n      /**\n       * Get the value of the given header name at the given position.\n       * @param {String} name header name\n       * @returns {String|undefined} Returns the specified header, null if header doesn't exist.\n       */\n      getHeader: function(name) {\n        var header = this.headers[SIP.Utils.headerize(name)];\n    \n        if(header) {\n          if(header[0]) {\n            return header[0].raw;\n          }\n        } else {\n          return;\n        }\n      },\n    \n      /**\n       * Get the header/s of the given name.\n       * @param {String} name header name\n       * @returns {Array} Array with all the headers of the specified name.\n       */\n      getHeaders: function(name) {\n        var idx, length,\n          header = this.headers[SIP.Utils.headerize(name)],\n          result = [];\n    \n        if(!header) {\n          return [];\n        }\n    \n        length = header.length;\n        for (idx = 0; idx < length; idx++) {\n          result.push(header[idx].raw);\n        }\n    \n        return result;\n      },\n    \n      /**\n       * Verify the existence of the given header.\n       * @param {String} name header name\n       * @returns {boolean} true if header with given name exists, false otherwise\n       */\n      hasHeader: function(name) {\n        return(this.headers[SIP.Utils.headerize(name)]) ? true : false;\n      },\n    \n      /**\n      * Parse the given header on the given index.\n      * @param {String} name header name\n      * @param {Number} [idx=0] header index\n      * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n      */\n      parseHeader: function(name, idx) {\n        var header, value, parsed;\n    \n        name = SIP.Utils.headerize(name);\n    \n        idx = idx || 0;\n    \n        if(!this.headers[name]) {\n          this.logger.log('header \"' + name + '\" not present');\n          return;\n        } else if(idx >= this.headers[name].length) {\n          this.logger.log('not so many \"' + name + '\" headers present');\n          return;\n        }\n    \n        header = this.headers[name][idx];\n        value = header.raw;\n    \n        if(header.parsed) {\n          return header.parsed;\n        }\n    \n        //substitute '-' by '_' for grammar rule matching.\n        parsed = SIP.Grammar.parse(value, name.replace(/-/g, '_'));\n    \n        if(parsed === -1) {\n          this.headers[name].splice(idx, 1); //delete from headers\n          this.logger.warn('error parsing \"' + name + '\" header field with value \"' + value + '\"');\n          return;\n        } else {\n          header.parsed = parsed;\n          return parsed;\n        }\n      },\n    \n      /**\n       * Message Header attribute selector. Alias of parseHeader.\n       * @param {String} name header name\n       * @param {Number} [idx=0] header index\n       * @returns {Object|undefined} Parsed header object, undefined if the header is not present or in case of a parsing error.\n       *\n       * @example\n       * message.s('via',3).port\n       */\n      s: function(name, idx) {\n        return this.parseHeader(name, idx);\n      },\n    \n      /**\n      * Replace the value of the given header by the value.\n      * @param {String} name header name\n      * @param {String} value header value\n      */\n      setHeader: function(name, value) {\n        var header = { raw: value };\n        this.headers[SIP.Utils.headerize(name)] = [header];\n      },\n    \n      toString: function() {\n        return this.data;\n      }\n    };\n    \n    /**\n     * @augments IncomingMessage\n     * @class Class for incoming SIP request.\n     */\n    IncomingRequest = function(ua) {\n      this.logger = ua.getLogger('sip.sipmessage');\n      this.ua = ua;\n      this.headers = {};\n      this.ruri = null;\n      this.transport = null;\n      this.server_transaction = null;\n    };\n    IncomingRequest.prototype = new IncomingMessage();\n    \n    /**\n    * Stateful reply.\n    * @param {Number} code status code\n    * @param {String} reason reason phrase\n    * @param {Object} headers extra headers\n    * @param {String} body body\n    * @param {Function} [onSuccess] onSuccess callback\n    * @param {Function} [onFailure] onFailure callback\n    */\n    IncomingRequest.prototype.reply = function(code, reason, extraHeaders, body, onSuccess, onFailure) {\n      var rr, vias, length, idx, response,\n        to = this.getHeader('To'),\n        r = 0,\n        v = 0;\n    \n      response = SIP.Utils.buildStatusLine(code, reason);\n      extraHeaders = (extraHeaders || []).slice();\n    \n      if(this.method === SIP.C.INVITE && code > 100 && code <= 200) {\n        rr = this.getHeaders('record-route');\n        length = rr.length;\n    \n        for(r; r < length; r++) {\n          response += 'Record-Route: ' + rr[r] + '\\r\\n';\n        }\n      }\n    \n      vias = this.getHeaders('via');\n      length = vias.length;\n    \n      for(v; v < length; v++) {\n        response += 'Via: ' + vias[v] + '\\r\\n';\n      }\n    \n      if(!this.to_tag && code > 100) {\n        to += ';tag=' + SIP.Utils.newTag();\n      } else if(this.to_tag && !this.s('to').hasParam('tag')) {\n        to += ';tag=' + this.to_tag;\n      }\n    \n      response += 'To: ' + to + '\\r\\n';\n      response += 'From: ' + this.getHeader('From') + '\\r\\n';\n      response += 'Call-ID: ' + this.call_id + '\\r\\n';\n      response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n    \n      length = extraHeaders.length;\n      for (idx = 0; idx < length; idx++) {\n        response += extraHeaders[idx].trim() +'\\r\\n';\n      }\n    \n      response += getSupportedHeader(this);\n      response += 'User-Agent: ' + this.ua.configuration.userAgentString +'\\r\\n';\n    \n      if (body) {\n        if (typeof body === 'string') {\n          length = SIP.Utils.str_utf8_length(body);\n          response += 'Content-Type: application/sdp\\r\\n';\n          response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n          response += body;\n        } else {\n          if (body.body && body.contentType) {\n            length = SIP.Utils.str_utf8_length(body.body);\n            response += 'Content-Type: ' + body.contentType + '\\r\\n';\n            response += 'Content-Length: ' + length + '\\r\\n\\r\\n';\n            response += body.body;\n          } else {\n            response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n          }\n        }\n      } else {\n        response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n      }\n    \n      this.server_transaction.receiveResponse(code, response).then(onSuccess, onFailure);\n    \n      return response;\n    };\n    \n    /**\n    * Stateless reply.\n    * @param {Number} code status code\n    * @param {String} reason reason phrase\n    */\n    IncomingRequest.prototype.reply_sl = function(code, reason) {\n      var to, response,\n        v = 0,\n        vias = this.getHeaders('via'),\n        length = vias.length;\n    \n      response = SIP.Utils.buildStatusLine(code, reason);\n    \n      for(v; v < length; v++) {\n        response += 'Via: ' + vias[v] + '\\r\\n';\n      }\n    \n      to = this.getHeader('To');\n    \n      if(!this.to_tag && code > 100) {\n        to += ';tag=' + SIP.Utils.newTag();\n      } else if(this.to_tag && !this.s('to').hasParam('tag')) {\n        to += ';tag=' + this.to_tag;\n      }\n    \n      response += 'To: ' + to + '\\r\\n';\n      response += 'From: ' + this.getHeader('From') + '\\r\\n';\n      response += 'Call-ID: ' + this.call_id + '\\r\\n';\n      response += 'CSeq: ' + this.cseq + ' ' + this.method + '\\r\\n';\n      response += 'User-Agent: ' + this.ua.configuration.userAgentString +'\\r\\n';\n      response += 'Content-Length: ' + 0 + '\\r\\n\\r\\n';\n    \n      this.transport.send(response);\n    };\n    \n    \n    /**\n     * @augments IncomingMessage\n     * @class Class for incoming SIP response.\n     */\n    IncomingResponse = function(ua) {\n      this.logger = ua.getLogger('sip.sipmessage');\n      this.headers = {};\n      this.status_code = null;\n      this.reason_phrase = null;\n    };\n    IncomingResponse.prototype = new IncomingMessage();\n    \n    SIP.OutgoingRequest = OutgoingRequest;\n    SIP.IncomingRequest = IncomingRequest;\n    SIP.IncomingResponse = IncomingResponse;\n    };\n    \n    },{}],21:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview Incoming SIP Message Sanity Check\n     */\n    \n    /**\n     * SIP message sanity check.\n     * @augments SIP\n     * @function\n     * @param {SIP.IncomingMessage} message\n     * @param {SIP.UA} ua\n     * @param {SIP.Transport} transport\n     * @returns {Boolean}\n     */\n    module.exports = function (SIP) {\n    var sanityCheck,\n     requests = [],\n     responses = [],\n     all = [];\n    \n    // Reply\n    function reply(status_code, message, transport) {\n      var to,\n        response = SIP.Utils.buildStatusLine(status_code),\n        vias = message.getHeaders('via'),\n        length = vias.length,\n        idx = 0;\n    \n      for(idx; idx < length; idx++) {\n        response += \"Via: \" + vias[idx] + \"\\r\\n\";\n      }\n    \n      to = message.getHeader('To');\n    \n      if(!message.to_tag) {\n        to += ';tag=' + SIP.Utils.newTag();\n      }\n    \n      response += \"To: \" + to + \"\\r\\n\";\n      response += \"From: \" + message.getHeader('From') + \"\\r\\n\";\n      response += \"Call-ID: \" + message.call_id + \"\\r\\n\";\n      response += \"CSeq: \" + message.cseq + \" \" + message.method + \"\\r\\n\";\n      response += \"\\r\\n\";\n    \n      transport.send(response);\n    }\n    \n    /*\n     * Sanity Check for incoming Messages\n     *\n     * Requests:\n     *  - _rfc3261_8_2_2_1_ Receive a Request with a non supported URI scheme\n     *  - _rfc3261_16_3_4_ Receive a Request already sent by us\n     *   Does not look at via sent-by but at sipjsId, which is inserted as\n     *   a prefix in all initial requests generated by the ua\n     *  - _rfc3261_18_3_request_ Body Content-Length\n     *  - _rfc3261_8_2_2_2_ Merged Requests\n     *\n     * Responses:\n     *  - _rfc3261_8_1_3_3_ Multiple Via headers\n     *  - _rfc3261_18_1_2_ sent-by mismatch\n     *  - _rfc3261_18_3_response_ Body Content-Length\n     *\n     * All:\n     *  - Minimum headers in a SIP message\n     */\n    \n    // Sanity Check functions for requests\n    function rfc3261_8_2_2_1(message, ua, transport) {\n      if(!message.ruri || message.ruri.scheme !== 'sip') {\n        reply(416, message, transport);\n        return false;\n      }\n    }\n    \n    function rfc3261_16_3_4(message, ua, transport) {\n      if(!message.to_tag) {\n        if(message.call_id.substr(0, 5) === ua.configuration.sipjsId) {\n          reply(482, message, transport);\n          return false;\n        }\n      }\n    }\n    \n    function rfc3261_18_3_request(message, ua, transport) {\n      var len = SIP.Utils.str_utf8_length(message.body),\n      contentLength = message.getHeader('content-length');\n    \n      if(len < contentLength) {\n        reply(400, message, transport);\n        return false;\n      }\n    }\n    \n    function rfc3261_8_2_2_2(message, ua, transport) {\n      var tr, idx,\n        fromTag = message.from_tag,\n        call_id = message.call_id,\n        cseq = message.cseq;\n    \n      if(!message.to_tag) {\n        if(message.method === SIP.C.INVITE) {\n          tr = ua.transactions.ist[message.via_branch];\n          if(tr) {\n            return;\n          } else {\n            for(idx in ua.transactions.ist) {\n              tr = ua.transactions.ist[idx];\n              if(tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                reply(482, message, transport);\n                return false;\n              }\n            }\n          }\n        } else {\n          tr = ua.transactions.nist[message.via_branch];\n          if(tr) {\n            return;\n          } else {\n            for(idx in ua.transactions.nist) {\n              tr = ua.transactions.nist[idx];\n              if(tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n                reply(482, message, transport);\n                return false;\n              }\n            }\n          }\n        }\n      }\n    }\n    \n    // Sanity Check functions for responses\n    function rfc3261_8_1_3_3(message, ua) {\n      if(message.getHeaders('via').length > 1) {\n        ua.getLogger('sip.sanitycheck').warn('More than one Via header field present in the response. Dropping the response');\n        return false;\n      }\n    }\n    \n    function rfc3261_18_1_2(message, ua) {\n      var viaHost = ua.configuration.viaHost;\n      if(message.via.host !== viaHost || message.via.port !== undefined) {\n        ua.getLogger('sip.sanitycheck').warn('Via sent-by in the response does not match UA Via host value. Dropping the response');\n        return false;\n      }\n    }\n    \n    function rfc3261_18_3_response(message, ua) {\n      var\n        len = SIP.Utils.str_utf8_length(message.body),\n        contentLength = message.getHeader('content-length');\n    \n        if(len < contentLength) {\n          ua.getLogger('sip.sanitycheck').warn('Message body length is lower than the value in Content-Length header field. Dropping the response');\n          return false;\n        }\n    }\n    \n    // Sanity Check functions for requests and responses\n    function minimumHeaders(message, ua) {\n      var\n        mandatoryHeaders = ['from', 'to', 'call_id', 'cseq', 'via'],\n        idx = mandatoryHeaders.length;\n    \n      while(idx--) {\n        if(!message.hasHeader(mandatoryHeaders[idx])) {\n          ua.getLogger('sip.sanitycheck').warn('Missing mandatory header field : '+ mandatoryHeaders[idx] +'. Dropping the response');\n          return false;\n        }\n      }\n    }\n    \n    requests.push(rfc3261_8_2_2_1);\n    requests.push(rfc3261_16_3_4);\n    requests.push(rfc3261_18_3_request);\n    requests.push(rfc3261_8_2_2_2);\n    \n    responses.push(rfc3261_8_1_3_3);\n    responses.push(rfc3261_18_1_2);\n    responses.push(rfc3261_18_3_response);\n    \n    all.push(minimumHeaders);\n    \n    sanityCheck = function(message, ua, transport) {\n      var len, pass;\n    \n      len = all.length;\n      while(len--) {\n        pass = all[len](message, ua, transport);\n        if(pass === false) {\n          return false;\n        }\n      }\n    \n      if(message instanceof SIP.IncomingRequest) {\n        len = requests.length;\n        while(len--) {\n          pass = requests[len](message, ua, transport);\n          if(pass === false) {\n            return false;\n          }\n        }\n      }\n    \n      else if(message instanceof SIP.IncomingResponse) {\n        len = responses.length;\n        while(len--) {\n          pass = responses[len](message, ua, transport);\n          if(pass === false) {\n            return false;\n          }\n        }\n      }\n    \n      //Everything is OK\n      return true;\n    };\n    \n    SIP.sanityCheck = sanityCheck;\n    };\n    \n    },{}],22:[function(require,module,exports){\n    \"use strict\";\n    module.exports = function (SIP) {\n    var ServerContext;\n    \n    ServerContext = function (ua, request) {\n      this.ua = ua;\n      this.logger = ua.getLogger('sip.servercontext');\n      this.request = request;\n      if (request.method === SIP.C.INVITE) {\n        this.transaction = new SIP.Transactions.InviteServerTransaction(request, ua);\n      } else {\n        this.transaction = new SIP.Transactions.NonInviteServerTransaction(request, ua);\n      }\n    \n      if (request.body) {\n        this.body = request.body;\n      }\n      if (request.hasHeader('Content-Type')) {\n        this.contentType = request.getHeader('Content-Type');\n      }\n      this.method = request.method;\n    \n      this.data = {};\n    \n      this.localIdentity = request.to;\n      this.remoteIdentity = request.from;\n    };\n    \n    ServerContext.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    ServerContext.prototype.progress = function (options) {\n      options = Object.create(options || Object.prototype);\n      options.statusCode || (options.statusCode = 180);\n      options.minCode = 100;\n      options.maxCode = 199;\n      options.events = ['progress'];\n      return this.reply(options);\n    };\n    \n    ServerContext.prototype.accept = function (options) {\n      options = Object.create(options || Object.prototype);\n      options.statusCode || (options.statusCode = 200);\n      options.minCode = 200;\n      options.maxCode = 299;\n      options.events = ['accepted'];\n      return this.reply(options);\n    };\n    \n    ServerContext.prototype.reject = function (options) {\n      options = Object.create(options || Object.prototype);\n      options.statusCode || (options.statusCode = 480);\n      options.minCode = 300;\n      options.maxCode = 699;\n      options.events = ['rejected', 'failed'];\n      return this.reply(options);\n    };\n    \n    ServerContext.prototype.reply = function (options) {\n      options = options || {}; // This is okay, so long as we treat options as read-only in this method\n      var\n        statusCode = options.statusCode || 100,\n        minCode = options.minCode || 100,\n        maxCode = options.maxCode || 699,\n        reasonPhrase = SIP.Utils.getReasonPhrase(statusCode, options.reasonPhrase),\n        extraHeaders = options.extraHeaders || [],\n        body = options.body,\n        events = options.events || [],\n        response;\n    \n      if (statusCode < minCode || statusCode > maxCode) {\n        throw new TypeError('Invalid statusCode: ' + statusCode);\n      }\n      response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n      events.forEach(function (event) {\n        this.emit(event, response, reasonPhrase);\n      }, this);\n    \n      return this;\n    };\n    \n    ServerContext.prototype.onRequestTimeout = function () {\n      this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n    };\n    \n    ServerContext.prototype.onTransportError = function () {\n      this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n    };\n    \n    SIP.ServerContext = ServerContext;\n    };\n    \n    },{}],23:[function(require,module,exports){\n    \"use strict\";\n    module.exports = function (SIP, environment) {\n    \n    var DTMF = require('./Session/DTMF')(SIP);\n    \n    var Session, InviteServerContext, InviteClientContext,\n     C = {\n        //Session states\n        STATUS_NULL:                        0,\n        STATUS_INVITE_SENT:                 1,\n        STATUS_1XX_RECEIVED:                2,\n        STATUS_INVITE_RECEIVED:             3,\n        STATUS_WAITING_FOR_ANSWER:          4,\n        STATUS_ANSWERED:                    5,\n        STATUS_WAITING_FOR_PRACK:           6,\n        STATUS_WAITING_FOR_ACK:             7,\n        STATUS_CANCELED:                    8,\n        STATUS_TERMINATED:                  9,\n        STATUS_ANSWERED_WAITING_FOR_PRACK: 10,\n        STATUS_EARLY_MEDIA:                11,\n        STATUS_CONFIRMED:                  12\n      };\n    \n    /*\n     * @param {function returning SIP.MediaHandler} [mediaHandlerFactory]\n     *        (See the documentation for the mediaHandlerFactory argument of the UA constructor.)\n     */\n    Session = function (mediaHandlerFactory) {\n      this.status = C.STATUS_NULL;\n      this.dialog = null;\n      this.earlyDialogs = {};\n      this.mediaHandlerFactory = mediaHandlerFactory || SIP.WebRTC.MediaHandler.defaultFactory;\n      // this.mediaHandler gets set by ICC/ISC constructors\n      this.hasOffer = false;\n      this.hasAnswer = false;\n    \n      // Session Timers\n      this.timers = {\n        ackTimer: null,\n        expiresTimer: null,\n        invite2xxTimer: null,\n        userNoAnswerTimer: null,\n        rel1xxTimer: null,\n        prackTimer: null\n      };\n    \n      // Session info\n      this.startTime = null;\n      this.endTime = null;\n      this.tones = null;\n    \n      // Mute/Hold state\n      this.local_hold = false;\n      this.remote_hold = false;\n    \n      this.pending_actions = {\n        actions: [],\n    \n        length: function() {\n          return this.actions.length;\n        },\n    \n        isPending: function(name){\n          var\n          idx = 0,\n          length = this.actions.length;\n    \n          for (idx; idx<length; idx++) {\n            if (this.actions[idx].name === name) {\n              return true;\n            }\n          }\n          return false;\n        },\n    \n        shift: function() {\n          return this.actions.shift();\n        },\n    \n        push: function(name) {\n          this.actions.push({\n            name: name\n          });\n        },\n    \n        pop: function(name) {\n          var\n          idx = 0,\n          length = this.actions.length;\n    \n          for (idx; idx<length; idx++) {\n            if (this.actions[idx].name === name) {\n              this.actions.splice(idx,1);\n              length --;\n              idx--;\n            }\n          }\n        }\n       };\n    \n      this.early_sdp = null;\n      this.rel100 = SIP.C.supported.UNSUPPORTED;\n    };\n    \n    Session.prototype = {\n      dtmf: function(tones, options) {\n        var tone, dtmfs = [],\n            self = this;\n    \n        options = options || {};\n    \n        if (tones === undefined) {\n          throw new TypeError('Not enough arguments');\n        }\n    \n        // Check Session Status\n        if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_WAITING_FOR_ACK) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        // Check tones\n        if ((typeof tones !== 'string' && typeof tones !== 'number') || !tones.toString().match(/^[0-9A-D#*,]+$/i)) {\n          throw new TypeError('Invalid tones: '+ tones);\n        }\n    \n        tones = tones.toString().split('');\n    \n        while (tones.length > 0) { dtmfs.push(new DTMF(this, tones.shift(), options)); }\n    \n        if (this.tones) {\n          // Tones are already queued, just add to the queue\n          this.tones =  this.tones.concat(dtmfs);\n          return this;\n        }\n    \n        var sendDTMF = function () {\n          var dtmf, timeout;\n    \n          if (self.status === C.STATUS_TERMINATED || !self.tones || self.tones.length === 0) {\n            // Stop sending DTMF\n            self.tones = null;\n            return this;\n          }\n    \n          dtmf = self.tones.shift();\n    \n          if (tone === ',') {\n            timeout = 2000;\n          } else {\n            dtmf.on('failed', function(){self.tones = null;});\n            dtmf.send(options);\n            timeout = dtmf.duration + dtmf.interToneGap;\n          }\n    \n          // Set timeout for the next tone\n          SIP.Timers.setTimeout(sendDTMF, timeout);\n        };\n    \n        this.tones = dtmfs;\n        sendDTMF();\n        return this;\n      },\n    \n      bye: function(options) {\n        options = Object.create(options || Object.prototype);\n        var statusCode = options.statusCode;\n    \n        // Check Session Status\n        if (this.status === C.STATUS_TERMINATED) {\n          this.logger.error('Error: Attempted to send BYE in a terminated session.');\n          return this;\n        }\n    \n        this.logger.log('terminating Session');\n    \n        if (statusCode && (statusCode < 200 || statusCode >= 700)) {\n          throw new TypeError('Invalid statusCode: '+ statusCode);\n        }\n    \n        options.receiveResponse = function () {};\n    \n        return this.\n          sendRequest(SIP.C.BYE, options).\n          terminated();\n      },\n    \n      refer: function(target, options) {\n        options = options || {};\n        var extraHeaders = (options.extraHeaders || []).slice(),\n            withReplaces =\n              target instanceof SIP.InviteServerContext ||\n              target instanceof SIP.InviteClientContext,\n            originalTarget = target;\n    \n        if (target === undefined) {\n          throw new TypeError('Not enough arguments');\n        }\n    \n        // Check Session Status\n        if (this.status !== C.STATUS_CONFIRMED) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        // transform `target` so that it can be a Refer-To header value\n        if (withReplaces) {\n          //Attended Transfer\n          // B.transfer(C)\n          target = '\"' + target.remoteIdentity.friendlyName + '\" ' +\n            '<' + target.dialog.remote_target.toString() +\n            '?Replaces=' + target.dialog.id.call_id +\n            '%3Bto-tag%3D' + target.dialog.id.remote_tag +\n            '%3Bfrom-tag%3D' + target.dialog.id.local_tag + '>';\n        } else {\n          //Blind Transfer\n          // normalizeTarget allows instances of SIP.URI to pass through unaltered,\n          // so try to make one ahead of time\n          try {\n            target = SIP.Grammar.parse(target, 'Refer_To').uri || target;\n          } catch (e) {\n            this.logger.debug(\".refer() cannot parse Refer_To from\", target);\n            this.logger.debug(\"...falling through to normalizeTarget()\");\n          }\n    \n          // Check target validity\n          target = this.ua.normalizeTarget(target);\n          if (!target) {\n            throw new TypeError('Invalid target: ' + originalTarget);\n          }\n        }\n    \n        extraHeaders.push('Contact: '+ this.contact);\n        extraHeaders.push('Allow: '+ SIP.UA.C.ALLOWED_METHODS.toString());\n        extraHeaders.push('Refer-To: '+ target);\n    \n        // Send the request\n        this.sendRequest(SIP.C.REFER, {\n          extraHeaders: extraHeaders,\n          body: options.body,\n          receiveResponse: function (response) {\n            if ( ! /^2[0-9]{2}$/.test(response.status_code) ) {\n              return;\n            }\n            // hang up only if we transferred to a SIP address\n            if (withReplaces || (target.scheme && target.scheme.match(\"^sips?$\"))) {\n              this.terminate();\n            }\n          }.bind(this)\n        });\n        return this;\n      },\n    \n      followRefer: function followRefer (callback) {\n        return function referListener (callback, request) {\n          // open non-SIP URIs if possible and keep session open\n          var referTo = request.parseHeader('refer-to');\n          var target = referTo.uri;\n          if (!target.scheme.match(\"^sips?$\")) {\n            var targetString = target.toString();\n            if (typeof environment.open === \"function\") {\n              environment.open(targetString);\n            } else {\n              this.logger.warn(\"referred to non-SIP URI but `open` isn't in the environment: \" + targetString);\n            }\n            return;\n          }\n    \n          var extraHeaders = [];\n    \n          /* Copy the Replaces query into a Replaces header */\n          /* TODO - make sure we don't copy a poorly formatted header? */\n          var replaces = target.getHeader('Replaces');\n          if (replaces !== undefined) {\n            extraHeaders.push('Replaces: ' + decodeURIComponent(replaces));\n          }\n    \n          // don't embed headers into Request-URI of INVITE\n          target.clearHeaders();\n    \n          /*\n            Harmless race condition.  Both sides of REFER\n            may send a BYE, but in the end the dialogs are destroyed.\n          */\n          var getReferMedia = this.mediaHandler.getReferMedia;\n          var mediaHint = getReferMedia ? getReferMedia.call(this.mediaHandler) : this.mediaHint;\n    \n          SIP.Hacks.Chrome.getsConfusedAboutGUM(this);\n    \n          var referSession = this.ua.invite(target, {\n            media: mediaHint,\n            params: {\n              to_displayName: referTo.friendlyName\n            },\n            extraHeaders: extraHeaders\n          });\n    \n          callback.call(this, request, referSession);\n    \n          this.terminate();\n        }.bind(this, callback);\n      },\n    \n      sendRequest: function(method,options) {\n        options = options || {};\n        var self = this;\n    \n        var request = new SIP.OutgoingRequest(\n          method,\n          this.dialog.remote_target,\n          this.ua,\n          {\n            cseq: options.cseq || (this.dialog.local_seqnum += 1),\n            call_id: this.dialog.id.call_id,\n            from_uri: this.dialog.local_uri,\n            from_tag: this.dialog.id.local_tag,\n            to_uri: this.dialog.remote_uri,\n            to_tag: this.dialog.id.remote_tag,\n            route_set: this.dialog.route_set,\n            statusCode: options.statusCode,\n            reasonPhrase: options.reasonPhrase\n          },\n          options.extraHeaders || [],\n          options.body\n        );\n    \n        new SIP.RequestSender({\n          request: request,\n          onRequestTimeout: function() {\n            self.onRequestTimeout();\n          },\n          onTransportError: function() {\n            self.onTransportError();\n          },\n          receiveResponse: options.receiveResponse || function(response) {\n            self.receiveNonInviteResponse(response);\n          }\n        }, this.ua).send();\n    \n        // Emit the request event\n        this.emit(method.toLowerCase(), request);\n    \n        return this;\n      },\n    \n      close: function() {\n        var idx;\n    \n        if(this.status === C.STATUS_TERMINATED) {\n          return this;\n        }\n    \n        this.logger.log('closing INVITE session ' + this.id);\n    \n        // 1st Step. Terminate media.\n        if (this.mediaHandler){\n          this.mediaHandler.close();\n        }\n    \n        // 2nd Step. Terminate signaling.\n    \n        // Clear session timers\n        for(idx in this.timers) {\n          SIP.Timers.clearTimeout(this.timers[idx]);\n        }\n    \n        // Terminate dialogs\n    \n        // Terminate confirmed dialog\n        if(this.dialog) {\n          this.dialog.terminate();\n          delete this.dialog;\n        }\n    \n        // Terminate early dialogs\n        for(idx in this.earlyDialogs) {\n          this.earlyDialogs[idx].terminate();\n          delete this.earlyDialogs[idx];\n        }\n    \n        this.status = C.STATUS_TERMINATED;\n    \n        delete this.ua.sessions[this.id];\n        return this;\n      },\n    \n      createDialog: function(message, type, early) {\n        var dialog, early_dialog,\n          local_tag = message[(type === 'UAS') ? 'to_tag' : 'from_tag'],\n          remote_tag = message[(type === 'UAS') ? 'from_tag' : 'to_tag'],\n          id = message.call_id + local_tag + remote_tag;\n    \n        early_dialog = this.earlyDialogs[id];\n    \n        // Early Dialog\n        if (early) {\n          if (early_dialog) {\n            return true;\n          } else {\n            early_dialog = new SIP.Dialog(this, message, type, SIP.Dialog.C.STATUS_EARLY);\n    \n            // Dialog has been successfully created.\n            if(early_dialog.error) {\n              this.logger.error(early_dialog.error);\n              this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n              return false;\n            } else {\n              this.earlyDialogs[id] = early_dialog;\n              return true;\n            }\n          }\n        }\n        // Confirmed Dialog\n        else {\n          // In case the dialog is in _early_ state, update it\n          if (early_dialog) {\n            early_dialog.update(message, type);\n            this.dialog = early_dialog;\n            delete this.earlyDialogs[id];\n            for (var dia in this.earlyDialogs) {\n              this.earlyDialogs[dia].terminate();\n              delete this.earlyDialogs[dia];\n            }\n            return true;\n          }\n    \n          // Otherwise, create a _confirmed_ dialog\n          dialog = new SIP.Dialog(this, message, type);\n    \n          if(dialog.error) {\n            this.logger.error(dialog.error);\n            this.failed(message, SIP.C.causes.INTERNAL_ERROR);\n            return false;\n          } else {\n            this.to_tag = message.to_tag;\n            this.dialog = dialog;\n            return true;\n          }\n        }\n      },\n    \n      /**\n      * Check if Session is ready for a re-INVITE\n      *\n      * @returns {Boolean}\n      */\n      isReadyToReinvite: function() {\n        return this.mediaHandler.isReady() &&\n          !this.dialog.uac_pending_reply &&\n          !this.dialog.uas_pending_reply;\n      },\n    \n      /**\n       * Mute\n       */\n      mute: function(options) {\n        var ret = this.mediaHandler.mute(options);\n        if (ret) {\n          this.onmute(ret);\n        }\n      },\n    \n      /**\n       * Unmute\n       */\n      unmute: function(options) {\n        var ret = this.mediaHandler.unmute(options);\n        if (ret) {\n          this.onunmute(ret);\n        }\n      },\n    \n      /**\n       * Hold\n       */\n      hold: function(options) {\n    \n        if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        this.mediaHandler.hold();\n    \n        // Check if RTCSession is ready to send a reINVITE\n        if (!this.isReadyToReinvite()) {\n          /* If there is a pending 'unhold' action, cancel it and don't queue this one\n           * Else, if there isn't any 'hold' action, add this one to the queue\n           * Else, if there is already a 'hold' action, skip\n           */\n          if (this.pending_actions.isPending('unhold')) {\n            this.pending_actions.pop('unhold');\n          } else if (!this.pending_actions.isPending('hold')) {\n            this.pending_actions.push('hold');\n          }\n          return;\n        } else if (this.local_hold === true) {\n            return;\n        }\n    \n        this.onhold('local');\n    \n        this.sendReinvite(options);\n      },\n    \n      /**\n       * Unhold\n       */\n      unhold: function(options) {\n    \n        if (this.status !== C.STATUS_WAITING_FOR_ACK && this.status !== C.STATUS_CONFIRMED) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        this.mediaHandler.unhold();\n    \n        if (!this.isReadyToReinvite()) {\n          /* If there is a pending 'hold' action, cancel it and don't queue this one\n           * Else, if there isn't any 'unhold' action, add this one to the queue\n           * Else, if there is already a 'unhold' action, skip\n           */\n          if (this.pending_actions.isPending('hold')) {\n            this.pending_actions.pop('hold');\n          } else if (!this.pending_actions.isPending('unhold')) {\n            this.pending_actions.push('unhold');\n          }\n          return;\n        } else if (this.local_hold === false) {\n          return;\n        }\n    \n        this.onunhold('local');\n    \n        this.sendReinvite(options);\n      },\n    \n      /**\n       * isOnHold\n       */\n      isOnHold: function() {\n        return {\n          local: this.local_hold,\n          remote: this.remote_hold\n        };\n      },\n    \n      /**\n       * In dialog INVITE Reception\n       * @private\n       */\n      receiveReinvite: function(request) {\n        var self = this;\n    \n        if (!this.mediaHandler.hasDescription(request)) {\n          this.logger.warn('invalid Content-Type');\n          request.reply(415);\n          return;\n        }\n    \n        this.mediaHandler.setDescription(request)\n        .then(this.mediaHandler.getDescription.bind(this.mediaHandler, this.mediaHint))\n        .then(function(description) {\n          var extraHeaders = ['Contact: ' + self.contact];\n          request.reply(200, null, extraHeaders, description,\n            function() {\n              self.status = C.STATUS_WAITING_FOR_ACK;\n              self.setInvite2xxTimer(request, description);\n              self.setACKTimer();\n    \n              if (self.remote_hold && !self.mediaHandler.remote_hold) {\n                self.onunhold('remote');\n              } else if (!self.remote_hold && self.mediaHandler.remote_hold) {\n                self.onhold('remote');\n              }\n            });\n        })\n        .catch(function onFailure (e) {\n          var statusCode;\n          if (e instanceof SIP.Exceptions.GetDescriptionError) {\n            statusCode = 500;\n          } else {\n            self.logger.error(e);\n            statusCode = 488;\n          }\n          request.reply(statusCode);\n        });\n      },\n    \n      sendReinvite: function(options) {\n        options = options || {};\n    \n        var\n          self = this,\n           extraHeaders = (options.extraHeaders || []).slice(),\n           eventHandlers = options.eventHandlers || {},\n           succeeded;\n    \n        if (eventHandlers.succeeded) {\n          succeeded = eventHandlers.succeeded;\n        }\n        this.reinviteSucceeded = function(){\n          SIP.Timers.clearTimeout(self.timers.ackTimer);\n          SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n          self.status = C.STATUS_CONFIRMED;\n          succeeded && succeeded.apply(this, arguments);\n        };\n        if (eventHandlers.failed) {\n          this.reinviteFailed = eventHandlers.failed;\n        } else {\n          this.reinviteFailed = function(){};\n        }\n    \n        extraHeaders.push('Contact: ' + this.contact);\n        extraHeaders.push('Allow: '+ SIP.UA.C.ALLOWED_METHODS.toString());\n    \n        this.receiveResponse = this.receiveReinviteResponse;\n        //REVISIT\n        this.mediaHandler.getDescription(self.mediaHint)\n        .then(\n          function(description){\n            self.dialog.sendRequest(self, SIP.C.INVITE, {\n              extraHeaders: extraHeaders,\n              body: description\n            });\n          },\n          function() {\n            if (self.isReadyToReinvite()) {\n              self.onReadyToReinvite();\n            }\n            self.reinviteFailed();\n          }\n        );\n      },\n    \n      receiveRequest: function (request) {\n        switch (request.method) {\n          case SIP.C.BYE:\n            request.reply(200);\n            if(this.status === C.STATUS_CONFIRMED) {\n              this.emit('bye', request);\n              this.terminated(request, SIP.C.causes.BYE);\n            }\n            break;\n          case SIP.C.INVITE:\n            if(this.status === C.STATUS_CONFIRMED) {\n              this.logger.log('re-INVITE received');\n              this.receiveReinvite(request);\n            }\n            break;\n          case SIP.C.INFO:\n            if(this.status === C.STATUS_CONFIRMED || this.status === C.STATUS_WAITING_FOR_ACK) {\n              if (this.onInfo) {\n                return this.onInfo(request);\n              }\n    \n              var body, tone, duration,\n                  contentType = request.getHeader('content-type'),\n                  reg_tone = /^(Signal\\s*?=\\s*?)([0-9A-D#*]{1})(\\s)?.*/,\n                  reg_duration = /^(Duration\\s?=\\s?)([0-9]{1,4})(\\s)?.*/;\n    \n              if (contentType) {\n                if (contentType.match(/^application\\/dtmf-relay/i)) {\n                  if (request.body) {\n                    body = request.body.split('\\r\\n', 2);\n                    if (body.length === 2) {\n                      if (reg_tone.test(body[0])) {\n                        tone = body[0].replace(reg_tone,\"$2\");\n                      }\n                      if (reg_duration.test(body[1])) {\n                        duration = parseInt(body[1].replace(reg_duration,\"$2\"), 10);\n                      }\n                    }\n                  }\n    \n                  new DTMF(this, tone, {duration: duration}).init_incoming(request);\n                } else {\n                  request.reply(415, null, [\"Accept: application/dtmf-relay\"]);\n                }\n              }\n            }\n            break;\n          case SIP.C.REFER:\n            if(this.status ===  C.STATUS_CONFIRMED) {\n              this.logger.log('REFER received');\n              var hasReferListener = this.listeners('refer').length,\n                  notifyBody;\n    \n              if (hasReferListener) {\n                request.reply(202, 'Accepted');\n                notifyBody = 'SIP/2.0 100 Trying';\n    \n                this.sendRequest(SIP.C.NOTIFY, {\n                  extraHeaders:[\n                    'Event: refer',\n                    'Subscription-State: terminated',\n                    'Content-Type: message/sipfrag'\n                  ],\n                  body: notifyBody,\n                  receiveResponse: function() {}\n                });\n    \n                this.emit('refer', request);\n              } else {\n                // RFC 3515.2.4.2: 'the UA MAY decline the request.'\n                request.reply(603, 'Declined');\n              }\n            }\n            break;\n          case SIP.C.NOTIFY:\n            request.reply(200, 'OK');\n            this.emit('notify', request);\n            break;\n        }\n      },\n    \n      /**\n       * Reception of Response for in-dialog INVITE\n       * @private\n       */\n      receiveReinviteResponse: function(response) {\n        var self = this;\n    \n        if (this.status === C.STATUS_TERMINATED) {\n          return;\n        }\n    \n        switch(true) {\n          case /^1[0-9]{2}$/.test(response.status_code):\n            break;\n          case /^2[0-9]{2}$/.test(response.status_code):\n            this.status = C.STATUS_CONFIRMED;\n    \n            this.sendRequest(SIP.C.ACK,{cseq:response.cseq});\n    \n            if (!this.mediaHandler.hasDescription(response)) {\n              this.reinviteFailed();\n              break;\n            }\n    \n            //REVISIT\n            this.mediaHandler.setDescription(response)\n            .then(\n              function onSuccess () {\n                self.reinviteSucceeded();\n              },\n              function onFailure () {\n                self.reinviteFailed();\n              }\n            );\n            break;\n          default:\n            this.reinviteFailed();\n        }\n      },\n    \n      acceptAndTerminate: function(response, status_code, reason_phrase) {\n        var extraHeaders = [];\n    \n        if (status_code) {\n          extraHeaders.push('Reason: ' + SIP.Utils.getReasonHeaderValue(status_code, reason_phrase));\n        }\n    \n        // An error on dialog creation will fire 'failed' event\n        if (this.dialog || this.createDialog(response, 'UAC')) {\n          this.sendRequest(SIP.C.ACK,{cseq: response.cseq});\n          this.sendRequest(SIP.C.BYE, {\n            extraHeaders: extraHeaders\n          });\n        }\n    \n        return this;\n      },\n    \n      /**\n       * RFC3261 13.3.1.4\n       * Response retransmissions cannot be accomplished by transaction layer\n       *  since it is destroyed when receiving the first 2xx answer\n       */\n      setInvite2xxTimer: function(request, description) {\n        var self = this,\n            timeout = SIP.Timers.T1;\n    \n        this.timers.invite2xxTimer = SIP.Timers.setTimeout(function invite2xxRetransmission() {\n          if (self.status !== C.STATUS_WAITING_FOR_ACK) {\n            return;\n          }\n    \n          self.logger.log('no ACK received, attempting to retransmit OK');\n    \n          var extraHeaders = ['Contact: ' + self.contact];\n    \n          request.reply(200, null, extraHeaders, description);\n    \n          timeout = Math.min(timeout * 2, SIP.Timers.T2);\n    \n          self.timers.invite2xxTimer = SIP.Timers.setTimeout(invite2xxRetransmission, timeout);\n        }, timeout);\n      },\n    \n      /**\n       * RFC3261 14.2\n       * If a UAS generates a 2xx response and never receives an ACK,\n       *  it SHOULD generate a BYE to terminate the dialog.\n       */\n      setACKTimer: function() {\n        var self = this;\n    \n        this.timers.ackTimer = SIP.Timers.setTimeout(function() {\n          if(self.status === C.STATUS_WAITING_FOR_ACK) {\n            self.logger.log('no ACK received for an extended period of time, terminating the call');\n            SIP.Timers.clearTimeout(self.timers.invite2xxTimer);\n            self.sendRequest(SIP.C.BYE);\n            self.terminated(null, SIP.C.causes.NO_ACK);\n          }\n        }, SIP.Timers.TIMER_H);\n      },\n    \n      /*\n       * @private\n       */\n      onReadyToReinvite: function() {\n        var action = this.pending_actions.shift();\n    \n        if (!action || !this[action.name]) {\n          return;\n        }\n    \n        this[action.name]();\n      },\n    \n      onTransportError: function() {\n        if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n          this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n        }\n      },\n    \n      onRequestTimeout: function() {\n        if (this.status === C.STATUS_CONFIRMED) {\n          this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n        } else if (this.status !== C.STATUS_TERMINATED) {\n          this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n          this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n        }\n      },\n    \n      onDialogError: function(response) {\n        if (this.status === C.STATUS_CONFIRMED) {\n          this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n        } else if (this.status !== C.STATUS_TERMINATED) {\n          this.failed(response, SIP.C.causes.DIALOG_ERROR);\n          this.terminated(response, SIP.C.causes.DIALOG_ERROR);\n        }\n      },\n    \n      /**\n       * @private\n       */\n      onhold: function(originator) {\n        this[originator === 'local' ? 'local_hold' : 'remote_hold'] = true;\n        this.emit('hold', { originator: originator });\n      },\n    \n      /**\n       * @private\n       */\n      onunhold: function(originator) {\n        this[originator === 'local' ? 'local_hold' : 'remote_hold'] = false;\n        this.emit('unhold', { originator: originator });\n      },\n    \n      /*\n       * @private\n       */\n      onmute: function(options) {\n        this.emit('muted', {\n          audio: options.audio,\n          video: options.video\n        });\n      },\n    \n      /*\n       * @private\n       */\n      onunmute: function(options) {\n        this.emit('unmuted', {\n          audio: options.audio,\n          video: options.video\n        });\n      },\n    \n      failed: function(response, cause) {\n        if (this.status === C.STATUS_TERMINATED) {\n          return this;\n        }\n        this.emit('failed', response || null, cause || null);\n        return this;\n      },\n    \n      rejected: function(response, cause) {\n        this.emit('rejected',\n          response || null,\n          cause || null\n        );\n        return this;\n      },\n    \n      canceled: function() {\n        this.emit('cancel');\n        return this;\n      },\n    \n      accepted: function(response, cause) {\n        cause = SIP.Utils.getReasonPhrase(response && response.status_code, cause);\n    \n        this.startTime = new Date();\n    \n        if (this.replacee) {\n          this.replacee.emit('replaced', this);\n          this.replacee.terminate();\n        }\n        this.emit('accepted', response, cause);\n        return this;\n      },\n    \n      terminated: function(message, cause) {\n        if (this.status === C.STATUS_TERMINATED) {\n          return this;\n        }\n    \n        this.endTime = new Date();\n    \n        this.close();\n        this.emit('terminated',\n          message || null,\n          cause || null\n        );\n        return this;\n      },\n    \n      connecting: function(request) {\n        this.emit('connecting', { request: request });\n        return this;\n      }\n    };\n    \n    Session.desugar = function desugar(options) {\n      if (environment.HTMLMediaElement && options instanceof environment.HTMLMediaElement) {\n        options = {\n          media: {\n            constraints: {\n              audio: true,\n              video: options.tagName === 'VIDEO'\n            },\n            render: {\n              remote: options\n            }\n          }\n        };\n      }\n      return options || {};\n    };\n    \n    \n    Session.C = C;\n    SIP.Session = Session;\n    \n    \n    InviteServerContext = function(ua, request) {\n      var expires,\n        self = this,\n        contentType = request.getHeader('Content-Type'),\n        contentDisp = request.parseHeader('Content-Disposition');\n    \n      SIP.Utils.augment(this, SIP.ServerContext, [ua, request]);\n      SIP.Utils.augment(this, SIP.Session, [ua.configuration.mediaHandlerFactory]);\n    \n      //Initialize Media Session\n      this.mediaHandler = this.mediaHandlerFactory(this, {\n        RTCConstraints: {\"optional\": [{'DtlsSrtpKeyAgreement': 'true'}]}\n      });\n    \n      // Check body and content type\n      if ((!contentDisp && !this.mediaHandler.hasDescription(request)) || (contentDisp && contentDisp.type === 'render')) {\n        this.renderbody = request.body;\n        this.rendertype = contentType;\n      } else if (!this.mediaHandler.hasDescription(request) && (contentDisp && contentDisp.type === 'session')) {\n        request.reply(415);\n        //TODO: instead of 415, pass off to the media handler, who can then decide if we can use it\n        return;\n      }\n    \n      this.status = C.STATUS_INVITE_RECEIVED;\n      this.from_tag = request.from_tag;\n      this.id = request.call_id + this.from_tag;\n      this.request = request;\n      this.contact = this.ua.contact.toString();\n    \n      this.receiveNonInviteResponse = function () {}; // intentional no-op\n    \n      this.logger = ua.getLogger('sip.inviteservercontext', this.id);\n    \n      //Save the session into the ua sessions collection.\n      this.ua.sessions[this.id] = this;\n    \n      //Get the Expires header value if exists\n      if(request.hasHeader('expires')) {\n        expires = request.getHeader('expires') * 1000;\n      }\n    \n      //Set 100rel if necessary\n      function set100rel(h,c) {\n        if (request.hasHeader(h) && request.getHeader(h).toLowerCase().indexOf('100rel') >= 0) {\n          self.rel100 = c;\n        }\n      }\n      set100rel('require', SIP.C.supported.REQUIRED);\n      set100rel('supported', SIP.C.supported.SUPPORTED);\n    \n      /* Set the to_tag before\n       * replying a response code that will create a dialog.\n       */\n      request.to_tag = SIP.Utils.newTag();\n    \n      // An error on dialog creation will fire 'failed' event\n      if(!this.createDialog(request, 'UAS', true)) {\n        request.reply(500, 'Missing Contact header field');\n        return;\n      }\n    \n      if (this.mediaHandler && this.mediaHandler.getRemoteStreams) {\n        this.getRemoteStreams = this.mediaHandler.getRemoteStreams.bind(this.mediaHandler);\n        this.getLocalStreams = this.mediaHandler.getLocalStreams.bind(this.mediaHandler);\n      }\n    \n      function fireNewSession() {\n        var options = {extraHeaders: ['Contact: ' + self.contact]};\n    \n        if (self.rel100 !== SIP.C.supported.REQUIRED) {\n          self.progress(options);\n        }\n        self.status = C.STATUS_WAITING_FOR_ANSWER;\n    \n        // Set userNoAnswerTimer\n        self.timers.userNoAnswerTimer = SIP.Timers.setTimeout(function() {\n          request.reply(408);\n          self.failed(request, SIP.C.causes.NO_ANSWER);\n          self.terminated(request, SIP.C.causes.NO_ANSWER);\n        }, self.ua.configuration.noAnswerTimeout);\n    \n        /* Set expiresTimer\n         * RFC3261 13.3.1\n         */\n        if (expires) {\n          self.timers.expiresTimer = SIP.Timers.setTimeout(function() {\n            if(self.status === C.STATUS_WAITING_FOR_ANSWER) {\n              request.reply(487);\n              self.failed(request, SIP.C.causes.EXPIRES);\n              self.terminated(request, SIP.C.causes.EXPIRES);\n            }\n          }, expires);\n        }\n    \n        self.emit('invite',request);\n      }\n    \n      if (!this.mediaHandler.hasDescription(request) || this.renderbody) {\n        SIP.Timers.setTimeout(fireNewSession, 0);\n      } else {\n        this.hasOffer = true;\n        this.mediaHandler.setDescription(request)\n        .then(\n          fireNewSession,\n          function onFailure (e) {\n            self.logger.warn('invalid description');\n            self.logger.warn(e);\n            request.reply(488);\n          }\n        );\n      }\n    };\n    \n    InviteServerContext.prototype = {\n      reject: function(options) {\n        // Check Session Status\n        if (this.status === C.STATUS_TERMINATED) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        this.logger.log('rejecting RTCSession');\n    \n        SIP.ServerContext.prototype.reject.call(this, options);\n        return this.terminated();\n      },\n    \n      terminate: function(options) {\n        options = options || {};\n    \n        var\n        extraHeaders = (options.extraHeaders || []).slice(),\n        body = options.body,\n        dialog,\n        self = this;\n    \n        if (this.status === C.STATUS_WAITING_FOR_ACK &&\n           this.request.server_transaction.state !== SIP.Transactions.C.STATUS_TERMINATED) {\n          dialog = this.dialog;\n    \n          this.receiveRequest = function(request) {\n            if (request.method === SIP.C.ACK) {\n              this.sendRequest(SIP.C.BYE, {\n                extraHeaders: extraHeaders,\n                body: body\n              });\n              dialog.terminate();\n            }\n          };\n    \n          this.request.server_transaction.on('stateChanged', function(){\n            if (this.state === SIP.Transactions.C.STATUS_TERMINATED && this.dialog) {\n              this.request = new SIP.OutgoingRequest(\n                SIP.C.BYE,\n                this.dialog.remote_target,\n                this.ua,\n                {\n                  'cseq': this.dialog.local_seqnum+=1,\n                  'call_id': this.dialog.id.call_id,\n                  'from_uri': this.dialog.local_uri,\n                  'from_tag': this.dialog.id.local_tag,\n                  'to_uri': this.dialog.remote_uri,\n                  'to_tag': this.dialog.id.remote_tag,\n                  'route_set': this.dialog.route_set\n                },\n                extraHeaders,\n                body\n              );\n    \n              new SIP.RequestSender(\n                {\n                  request: this.request,\n                  onRequestTimeout: function() {\n                    self.onRequestTimeout();\n                  },\n                  onTransportError: function() {\n                    self.onTransportError();\n                  },\n                  receiveResponse: function() {\n                    return;\n                  }\n                },\n                this.ua\n              ).send();\n              dialog.terminate();\n            }\n          });\n    \n          this.emit('bye', this.request);\n          this.terminated();\n    \n          // Restore the dialog into 'this' in order to be able to send the in-dialog BYE :-)\n          this.dialog = dialog;\n    \n          // Restore the dialog into 'ua' so the ACK can reach 'this' session\n          this.ua.dialogs[dialog.id.toString()] = dialog;\n    \n        } else if (this.status === C.STATUS_CONFIRMED) {\n          this.bye(options);\n        } else {\n          this.reject(options);\n        }\n    \n        return this;\n      },\n    \n      /*\n       * @param {Object} [options.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n       */\n      progress: function (options) {\n        options = options || {};\n        var\n          statusCode = options.statusCode || 180,\n          reasonPhrase = options.reasonPhrase,\n          extraHeaders = (options.extraHeaders || []).slice(),\n          iceServers,\n          stunServers = options.stunServers || null,\n          turnServers = options.turnServers || null,\n          body = options.body,\n          response;\n    \n        if (statusCode < 100 || statusCode > 199) {\n          throw new TypeError('Invalid statusCode: ' + statusCode);\n        }\n    \n        if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n          return this;\n        }\n    \n        if (stunServers || turnServers) {\n          if (stunServers) {\n            iceServers = this.ua.getConfigurationCheck().optional['stunServers'](stunServers);\n            if (!iceServers) {\n              throw new TypeError('Invalid stunServers: '+ stunServers);\n            } else {\n              this.stunServers = iceServers;\n            }\n          }\n    \n          if (turnServers) {\n            iceServers = this.ua.getConfigurationCheck().optional['turnServers'](turnServers);\n            if (!iceServers) {\n              throw new TypeError('Invalid turnServers: '+ turnServers);\n            } else {\n              this.turnServers = iceServers;\n            }\n          }\n    \n          this.mediaHandler.updateIceServers({\n            stunServers: this.stunServers,\n            turnServers: this.turnServers\n          });\n        }\n    \n        function do100rel() {\n          /* jshint validthis: true */\n          statusCode = options.statusCode || 183;\n    \n          // Set status and add extra headers\n          this.status = C.STATUS_WAITING_FOR_PRACK;\n          extraHeaders.push('Contact: '+ this.contact);\n          extraHeaders.push('Require: 100rel');\n          extraHeaders.push('RSeq: ' + Math.floor(Math.random() * 10000));\n    \n          // Save media hint for later (referred sessions)\n          this.mediaHint = options.media;\n    \n          // Get the session description to add to preaccept with\n          this.mediaHandler.getDescription(options.media)\n          .then(\n            function onSuccess (description) {\n              if (this.isCanceled || this.status === C.STATUS_TERMINATED) {\n                return;\n              }\n    \n              this.early_sdp = description.body;\n              this[this.hasOffer ? 'hasAnswer' : 'hasOffer'] = true;\n    \n              // Retransmit until we get a response or we time out (see prackTimer below)\n              var timeout = SIP.Timers.T1;\n              this.timers.rel1xxTimer = SIP.Timers.setTimeout(function rel1xxRetransmission() {\n                this.request.reply(statusCode, null, extraHeaders, description);\n                timeout *= 2;\n                this.timers.rel1xxTimer = SIP.Timers.setTimeout(rel1xxRetransmission.bind(this), timeout);\n              }.bind(this), timeout);\n    \n              // Timeout and reject INVITE if no response\n              this.timers.prackTimer = SIP.Timers.setTimeout(function () {\n                if (this.status !== C.STATUS_WAITING_FOR_PRACK) {\n                  return;\n                }\n    \n                this.logger.log('no PRACK received, rejecting the call');\n                SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                this.request.reply(504);\n                this.terminated(null, SIP.C.causes.NO_PRACK);\n              }.bind(this), SIP.Timers.T1 * 64);\n    \n              // Send the initial response\n              response = this.request.reply(statusCode, reasonPhrase, extraHeaders, description);\n              this.emit('progress', response, reasonPhrase);\n            }.bind(this),\n    \n            function onFailure () {\n              this.request.reply(480);\n              this.failed(null, SIP.C.causes.WEBRTC_ERROR);\n              this.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n            }.bind(this)\n          );\n        } // end do100rel\n    \n        function normalReply() {\n          /* jshint validthis:true */\n          response = this.request.reply(statusCode, reasonPhrase, extraHeaders, body);\n          this.emit('progress', response, reasonPhrase);\n        }\n    \n        if (options.statusCode !== 100 &&\n            (this.rel100 === SIP.C.supported.REQUIRED ||\n             (this.rel100 === SIP.C.supported.SUPPORTED && options.rel100) ||\n             (this.rel100 === SIP.C.supported.SUPPORTED && (this.ua.configuration.rel100 === SIP.C.supported.REQUIRED)))) {\n          do100rel.apply(this);\n        } else {\n          normalReply.apply(this);\n        }\n        return this;\n      },\n    \n      /*\n       * @param {Object} [options.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n       */\n      accept: function(options) {\n        options = Object.create(Session.desugar(options));\n        SIP.Utils.optionsOverride(options, 'media', 'mediaConstraints', true, this.logger, this.ua.configuration.media);\n        this.mediaHint = options.media;\n    \n        this.onInfo = options.onInfo;\n    \n        // commented out now-unused hold-related variables for jshint. See below. JMF 2014-1-21\n        var\n          //idx, length, hasAudio, hasVideo,\n          self = this,\n          request = this.request,\n          extraHeaders = (options.extraHeaders || []).slice(),\n        //mediaStream = options.mediaStream || null,\n          iceServers,\n          stunServers = options.stunServers || null,\n          turnServers = options.turnServers || null,\n          descriptionCreationSucceeded = function(description) {\n            var\n              response,\n              // run for reply success callback\n              replySucceeded = function() {\n                self.status = C.STATUS_WAITING_FOR_ACK;\n    \n                self.setInvite2xxTimer(request, description);\n                self.setACKTimer();\n              },\n    \n              // run for reply failure callback\n              replyFailed = function() {\n                self.failed(null, SIP.C.causes.CONNECTION_ERROR);\n                self.terminated(null, SIP.C.causes.CONNECTION_ERROR);\n              };\n    \n            // Chrome might call onaddstream before accept() is called, which means\n            // mediaHandler.render() was called without a renderHint, so we need to\n            // re-render now that mediaHint.render has been set.\n            //\n            // Chrome seems to be in the right regarding this, see\n            // http://dev.w3.org/2011/webrtc/editor/webrtc.html#widl-RTCPeerConnection-onaddstream\n            self.mediaHandler.render();\n    \n            extraHeaders.push('Contact: ' + self.contact);\n            extraHeaders.push('Allow: ' + SIP.UA.C.ALLOWED_METHODS.toString());\n    \n            if(!self.hasOffer) {\n              self.hasOffer = true;\n            } else {\n              self.hasAnswer = true;\n            }\n            response = request.reply(200, null, extraHeaders,\n                          description,\n                          replySucceeded,\n                          replyFailed\n                         );\n            if (self.status !== C.STATUS_TERMINATED) { // Didn't fail\n              self.accepted(response, SIP.Utils.getReasonPhrase(200));\n            }\n          },\n    \n          descriptionCreationFailed = function() {\n            if (self.status === C.STATUS_TERMINATED) {\n              return;\n            }\n            // TODO - fail out on error\n            self.request.reply(480);\n            //self.failed(response, SIP.C.causes.USER_DENIED_MEDIA_ACCESS);\n            self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n            self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n          };\n    \n        // Check Session Status\n        if (this.status === C.STATUS_WAITING_FOR_PRACK) {\n          this.status = C.STATUS_ANSWERED_WAITING_FOR_PRACK;\n          return this;\n        } else if (this.status === C.STATUS_WAITING_FOR_ANSWER) {\n          this.status = C.STATUS_ANSWERED;\n        } else if (this.status !== C.STATUS_EARLY_MEDIA) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        if ((stunServers || turnServers) &&\n            (this.status !== C.STATUS_EARLY_MEDIA && this.status !== C.STATUS_ANSWERED_WAITING_FOR_PRACK)) {\n          if (stunServers) {\n            iceServers = this.ua.getConfigurationCheck().optional['stunServers'](stunServers);\n            if (!iceServers) {\n              throw new TypeError('Invalid stunServers: '+ stunServers);\n            } else {\n              this.stunServers = iceServers;\n            }\n          }\n    \n          if (turnServers) {\n            iceServers = this.ua.getConfigurationCheck().optional['turnServers'](turnServers);\n            if (!iceServers) {\n              throw new TypeError('Invalid turnServers: '+ turnServers);\n            } else {\n              this.turnServers = iceServers;\n            }\n          }\n    \n          this.mediaHandler.updateIceServers({\n            stunServers: this.stunServers,\n            turnServers: this.turnServers\n          });\n        }\n    \n        // An error on dialog creation will fire 'failed' event\n        if(!this.createDialog(request, 'UAS')) {\n          request.reply(500, 'Missing Contact header field');\n          return this;\n        }\n    \n        SIP.Timers.clearTimeout(this.timers.userNoAnswerTimer);\n    \n        // this hold-related code breaks FF accepting new calls - JMF 2014-1-21\n        /*\n        length = this.getRemoteStreams().length;\n    \n        for (idx = 0; idx < length; idx++) {\n          if (this.mediaHandler.getRemoteStreams()[idx].getVideoTracks().length > 0) {\n            hasVideo = true;\n          }\n          if (this.mediaHandler.getRemoteStreams()[idx].getAudioTracks().length > 0) {\n            hasAudio = true;\n          }\n        }\n    \n        if (!hasAudio && this.mediaConstraints.audio === true) {\n          this.mediaConstraints.audio = false;\n          if (mediaStream) {\n            length = mediaStream.getAudioTracks().length;\n            for (idx = 0; idx < length; idx++) {\n              mediaStream.removeTrack(mediaStream.getAudioTracks()[idx]);\n            }\n          }\n        }\n    \n        if (!hasVideo && this.mediaConstraints.video === true) {\n          this.mediaConstraints.video = false;\n          if (mediaStream) {\n            length = mediaStream.getVideoTracks().length;\n            for (idx = 0; idx < length; idx++) {\n              mediaStream.removeTrack(mediaStream.getVideoTracks()[idx]);\n            }\n          }\n        }\n        */\n    \n        if (this.status === C.STATUS_EARLY_MEDIA) {\n          descriptionCreationSucceeded({});\n        } else {\n          this.mediaHandler.getDescription(self.mediaHint)\n          .then(\n            descriptionCreationSucceeded,\n            descriptionCreationFailed\n          );\n        }\n    \n        return this;\n      },\n    \n      receiveRequest: function(request) {\n    \n        // ISC RECEIVE REQUEST\n    \n        function confirmSession() {\n          /* jshint validthis:true */\n          var contentType;\n    \n          SIP.Timers.clearTimeout(this.timers.ackTimer);\n          SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n          this.status = C.STATUS_CONFIRMED;\n          this.unmute();\n    \n          // TODO - this logic assumes Content-Disposition defaults\n          contentType = request.getHeader('Content-Type');\n          if (!this.mediaHandler.hasDescription(request)) {\n            this.renderbody = request.body;\n            this.rendertype = contentType;\n          }\n    \n          this.emit('confirmed', request);\n        }\n    \n        switch(request.method) {\n        case SIP.C.CANCEL:\n          /* RFC3261 15 States that a UAS may have accepted an invitation while a CANCEL\n           * was in progress and that the UAC MAY continue with the session established by\n           * any 2xx response, or MAY terminate with BYE. SIP does continue with the\n           * established session. So the CANCEL is processed only if the session is not yet\n           * established.\n           */\n    \n          /*\n           * Terminate the whole session in case the user didn't accept (or yet to send the answer) nor reject the\n           *request opening the session.\n           */\n          if(this.status === C.STATUS_WAITING_FOR_ANSWER ||\n             this.status === C.STATUS_WAITING_FOR_PRACK ||\n             this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK ||\n             this.status === C.STATUS_EARLY_MEDIA ||\n             this.status === C.STATUS_ANSWERED) {\n    \n            this.status = C.STATUS_CANCELED;\n            this.request.reply(487);\n            this.canceled(request);\n            this.rejected(request, SIP.C.causes.CANCELED);\n            this.failed(request, SIP.C.causes.CANCELED);\n            this.terminated(request, SIP.C.causes.CANCELED);\n          }\n          break;\n        case SIP.C.ACK:\n          if(this.status === C.STATUS_WAITING_FOR_ACK) {\n            if (!this.hasAnswer) {\n              if(this.mediaHandler.hasDescription(request)) {\n                // ACK contains answer to an INVITE w/o SDP negotiation\n                this.hasAnswer = true;\n                this.mediaHandler.setDescription(request)\n                .then(\n                  confirmSession.bind(this),\n                  function onFailure (e) {\n                    this.logger.warn(e);\n                    this.terminate({\n                      statusCode: '488',\n                      reasonPhrase: 'Bad Media Description'\n                    });\n                    this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                    this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                  }.bind(this)\n                );\n              } else if (this.early_sdp) {\n                confirmSession.apply(this);\n              } else {\n                //TODO: Pass to mediahandler\n                this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n              }\n            } else {\n              confirmSession.apply(this);\n            }\n          }\n          break;\n        case SIP.C.PRACK:\n          if (this.status === C.STATUS_WAITING_FOR_PRACK || this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n            //localMedia = session.mediaHandler.localMedia;\n            if(!this.hasAnswer) {\n              if(this.mediaHandler.hasDescription(request)) {\n                this.hasAnswer = true;\n                this.mediaHandler.setDescription(request)\n                .then(\n                  function onSuccess () {\n                    SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n                    SIP.Timers.clearTimeout(this.timers.prackTimer);\n                    request.reply(200);\n                    if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                      this.status = C.STATUS_EARLY_MEDIA;\n                      this.accept();\n                    }\n                    this.status = C.STATUS_EARLY_MEDIA;\n                    //REVISIT\n                    this.mute();\n                  }.bind(this),\n                  function onFailure (e) {\n                    //TODO: Send to media handler\n                    this.logger.warn(e);\n                    this.terminate({\n                      statusCode: '488',\n                      reasonPhrase: 'Bad Media Description'\n                    });\n                    this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                    this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                  }.bind(this)\n                );\n              } else {\n                this.terminate({\n                  statusCode: '488',\n                  reasonPhrase: 'Bad Media Description'\n                });\n                this.failed(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                this.terminated(request, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n              }\n            } else {\n              SIP.Timers.clearTimeout(this.timers.rel1xxTimer);\n              SIP.Timers.clearTimeout(this.timers.prackTimer);\n              request.reply(200);\n    \n              if (this.status === C.STATUS_ANSWERED_WAITING_FOR_PRACK) {\n                this.status = C.STATUS_EARLY_MEDIA;\n                this.accept();\n              }\n              this.status = C.STATUS_EARLY_MEDIA;\n              //REVISIT\n              this.mute();\n            }\n          } else if(this.status === C.STATUS_EARLY_MEDIA) {\n            request.reply(200);\n          }\n          break;\n        default:\n          Session.prototype.receiveRequest.apply(this, [request]);\n          break;\n        }\n      },\n    \n      onTransportError: function() {\n        if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n          this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n        }\n      },\n    \n      onRequestTimeout: function() {\n        if (this.status === C.STATUS_CONFIRMED) {\n          this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n        } else if (this.status !== C.STATUS_TERMINATED) {\n          this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n          this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n        }\n      }\n    \n    };\n    \n    SIP.InviteServerContext = InviteServerContext;\n    \n    InviteClientContext = function(ua, target, options) {\n      options = Object.create(Session.desugar(options));\n      options.params = Object.create(options.params || Object.prototype);\n    \n      var iceServers,\n        extraHeaders = (options.extraHeaders || []).slice(),\n        stunServers = options.stunServers || null,\n        turnServers = options.turnServers || null,\n        mediaHandlerFactory = options.mediaHandlerFactory || ua.configuration.mediaHandlerFactory,\n        isMediaSupported = mediaHandlerFactory.isSupported;\n    \n      // Check WebRTC support\n      if (isMediaSupported && !isMediaSupported()) {\n        throw new SIP.Exceptions.NotSupportedError('Media not supported');\n      }\n    \n      this.RTCConstraints = options.RTCConstraints || {};\n      this.inviteWithoutSdp = options.inviteWithoutSdp || false;\n    \n      // Set anonymous property\n      this.anonymous = options.anonymous || false;\n    \n      // Custom data to be sent either in INVITE or in ACK\n      this.renderbody = options.renderbody || null;\n      this.rendertype = options.rendertype || 'text/plain';\n    \n      options.params.from_tag = this.from_tag;\n    \n      /* Do not add ;ob in initial forming dialog requests if the registration over\n       *  the current connection got a GRUU URI.\n       */\n      this.contact = ua.contact.toString({\n        anonymous: this.anonymous,\n        outbound: this.anonymous ? !ua.contact.temp_gruu : !ua.contact.pub_gruu\n      });\n    \n      if (this.anonymous) {\n        options.params.from_displayName = 'Anonymous';\n        options.params.from_uri = 'sip:anonymous@anonymous.invalid';\n    \n        extraHeaders.push('P-Preferred-Identity: '+ ua.configuration.uri.toString());\n        extraHeaders.push('Privacy: id');\n      }\n      extraHeaders.push('Contact: '+ this.contact);\n      extraHeaders.push('Allow: '+ SIP.UA.C.ALLOWED_METHODS.toString());\n      if (this.inviteWithoutSdp && this.renderbody) {\n        extraHeaders.push('Content-Type: ' + this.rendertype);\n        extraHeaders.push('Content-Disposition: render;handling=optional');\n      }\n    \n      if (ua.configuration.rel100 === SIP.C.supported.REQUIRED) {\n        extraHeaders.push('Require: 100rel');\n      }\n      if (ua.configuration.replaces === SIP.C.supported.REQUIRED) {\n        extraHeaders.push('Require: replaces');\n      }\n    \n      options.extraHeaders = extraHeaders;\n    \n      SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.INVITE, target, options]);\n      SIP.Utils.augment(this, SIP.Session, [mediaHandlerFactory]);\n    \n      // Check Session Status\n      if (this.status !== C.STATUS_NULL) {\n        throw new SIP.Exceptions.InvalidStateError(this.status);\n      }\n    \n      // Session parameter initialization\n      this.from_tag = SIP.Utils.newTag();\n    \n      // OutgoingSession specific parameters\n      this.isCanceled = false;\n      this.received_100 = false;\n    \n      this.method = SIP.C.INVITE;\n    \n      this.receiveNonInviteResponse = this.receiveResponse;\n      this.receiveResponse = this.receiveInviteResponse;\n    \n      this.logger = ua.getLogger('sip.inviteclientcontext');\n    \n      if (stunServers) {\n        iceServers = this.ua.getConfigurationCheck().optional['stunServers'](stunServers);\n        if (!iceServers) {\n          throw new TypeError('Invalid stunServers: '+ stunServers);\n        } else {\n          this.stunServers = iceServers;\n        }\n      }\n    \n      if (turnServers) {\n        iceServers = this.ua.getConfigurationCheck().optional['turnServers'](turnServers);\n        if (!iceServers) {\n          throw new TypeError('Invalid turnServers: '+ turnServers);\n        } else {\n          this.turnServers = iceServers;\n        }\n      }\n    \n      ua.applicants[this] = this;\n    \n      this.id = this.request.call_id + this.from_tag;\n    \n      //Initialize Media Session\n      this.mediaHandler = this.mediaHandlerFactory(this, {\n        RTCConstraints: this.RTCConstraints,\n        stunServers: this.stunServers,\n        turnServers: this.turnServers\n      });\n    \n      if (this.mediaHandler && this.mediaHandler.getRemoteStreams) {\n        this.getRemoteStreams = this.mediaHandler.getRemoteStreams.bind(this.mediaHandler);\n        this.getLocalStreams = this.mediaHandler.getLocalStreams.bind(this.mediaHandler);\n      }\n    \n      SIP.Utils.optionsOverride(options, 'media', 'mediaConstraints', true, this.logger, this.ua.configuration.media);\n      this.mediaHint = options.media;\n    \n      this.onInfo = options.onInfo;\n    };\n    \n    InviteClientContext.prototype = {\n      invite: function () {\n        var self = this;\n    \n        //Save the session into the ua sessions collection.\n        //Note: placing in constructor breaks call to request.cancel on close... User does not need this anyway\n        this.ua.sessions[this.id] = this;\n    \n        //Note: due to the way Firefox handles gUM calls, it is recommended to make the gUM call at the app level\n        // and hand sip.js a stream as the mediaHint\n        if (this.inviteWithoutSdp) {\n          //just send an invite with no sdp...\n          this.request.body = self.renderbody;\n          this.status = C.STATUS_INVITE_SENT;\n          this.send();\n        } else {\n          this.mediaHandler.getDescription(self.mediaHint)\n          .then(\n            function onSuccess(description) {\n              if (self.isCanceled || self.status === C.STATUS_TERMINATED) {\n                return;\n              }\n              self.hasOffer = true;\n              self.request.body = description;\n              self.status = C.STATUS_INVITE_SENT;\n              self.send();\n            },\n            function onFailure() {\n              if (self.status === C.STATUS_TERMINATED) {\n                return;\n              }\n              // TODO...fail out\n              //self.failed(null, SIP.C.causes.USER_DENIED_MEDIA_ACCESS);\n              //self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n              self.failed(null, SIP.C.causes.WEBRTC_ERROR);\n              self.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n            }\n          );\n        }\n    \n        return this;\n      },\n    \n      receiveInviteResponse: function(response) {\n        var cause, //localMedia,\n          session = this,\n          id = response.call_id + response.from_tag + response.to_tag,\n          extraHeaders = [],\n          options = {};\n    \n        if (this.status === C.STATUS_TERMINATED || response.method !== SIP.C.INVITE) {\n          return;\n        }\n    \n        if (this.dialog && (response.status_code >= 200 && response.status_code <= 299)) {\n          if (id !== this.dialog.id.toString() ) {\n            if (!this.createDialog(response, 'UAC', true)) {\n              return;\n            }\n            this.earlyDialogs[id].sendRequest(this, SIP.C.ACK,\n                                              {\n                                                body: SIP.Utils.generateFakeSDP(response.body)\n                                              });\n            this.earlyDialogs[id].sendRequest(this, SIP.C.BYE);\n    \n            /* NOTE: This fails because the forking proxy does not recognize that an unanswerable\n             * leg (due to peerConnection limitations) has been answered first. If your forking\n             * proxy does not hang up all unanswered branches on the first branch answered, remove this.\n             */\n            if(this.status !== C.STATUS_CONFIRMED) {\n              this.failed(response, SIP.C.causes.WEBRTC_ERROR);\n              this.terminated(response, SIP.C.causes.WEBRTC_ERROR);\n            }\n            return;\n          } else if (this.status === C.STATUS_CONFIRMED) {\n            this.sendRequest(SIP.C.ACK,{cseq: response.cseq});\n            return;\n          } else if (!this.hasAnswer) {\n            // invite w/o sdp is waiting for callback\n            //an invite with sdp must go on, and hasAnswer is true\n            return;\n          }\n        }\n    \n        if (this.dialog && response.status_code < 200) {\n          /*\n            Early media has been set up with at least one other different branch,\n            but a final 2xx response hasn't been received\n          */\n          if (this.dialog.pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n              (this.dialog.pracked[this.dialog.pracked.length-1] >= response.getHeader('rseq') && this.dialog.pracked.length > 0)) {\n            return;\n          }\n    \n          if (!this.earlyDialogs[id] && !this.createDialog(response, 'UAC', true)) {\n            return;\n          }\n    \n          if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n              (this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length-1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0)) {\n            return;\n          }\n    \n          extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n          this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n    \n          this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n            extraHeaders: extraHeaders,\n            body: SIP.Utils.generateFakeSDP(response.body)\n          });\n          return;\n        }\n    \n        // Proceed to cancellation if the user requested.\n        if(this.isCanceled) {\n          if(response.status_code >= 100 && response.status_code < 200) {\n            this.request.cancel(this.cancelReason, extraHeaders);\n            this.canceled(null);\n          } else if(response.status_code >= 200 && response.status_code < 299) {\n            this.acceptAndTerminate(response);\n            this.emit('bye', this.request);\n          } else if (response.status_code >= 300) {\n            cause = SIP.C.REASON_PHRASE[response.status_code] || SIP.C.causes.CANCELED;\n            this.rejected(response, cause);\n            this.failed(response, cause);\n            this.terminated(response, cause);\n          }\n          return;\n        }\n    \n        switch(true) {\n          case /^100$/.test(response.status_code):\n            this.received_100 = true;\n            this.emit('progress', response);\n            break;\n          case (/^1[0-9]{2}$/.test(response.status_code)):\n            // Do nothing with 1xx responses without To tag.\n            if(!response.to_tag) {\n              this.logger.warn('1xx response received without to tag');\n              break;\n            }\n    \n            // Create Early Dialog if 1XX comes with contact\n            if(response.hasHeader('contact')) {\n              // An error on dialog creation will fire 'failed' event\n              if (!this.createDialog(response, 'UAC', true)) {\n                break;\n              }\n            }\n    \n            this.status = C.STATUS_1XX_RECEIVED;\n    \n            if(response.hasHeader('require') &&\n               response.getHeader('require').indexOf('100rel') !== -1) {\n    \n              // Do nothing if this.dialog is already confirmed\n              if (this.dialog || !this.earlyDialogs[id]) {\n                break;\n              }\n    \n              if (this.earlyDialogs[id].pracked.indexOf(response.getHeader('rseq')) !== -1 ||\n                  (this.earlyDialogs[id].pracked[this.earlyDialogs[id].pracked.length-1] >= response.getHeader('rseq') && this.earlyDialogs[id].pracked.length > 0)) {\n                return;\n              }\n    \n              if (!this.mediaHandler.hasDescription(response)) {\n                extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                this.earlyDialogs[id].pracked.push(response.getHeader('rseq'));\n                this.earlyDialogs[id].sendRequest(this, SIP.C.PRACK, {\n                  extraHeaders: extraHeaders\n                });\n                this.emit('progress', response);\n    \n              } else if (this.hasOffer) {\n                if (!this.createDialog(response, 'UAC')) {\n                  break;\n                }\n                this.hasAnswer = true;\n                this.dialog.pracked.push(response.getHeader('rseq'));\n    \n                this.mediaHandler.setDescription(response)\n                .then(\n                  function onSuccess () {\n                    extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n    \n                    session.sendRequest(SIP.C.PRACK, {\n                      extraHeaders: extraHeaders,\n                      receiveResponse: function() {}\n                    });\n                    session.status = C.STATUS_EARLY_MEDIA;\n                    session.mute();\n                    session.emit('progress', response);\n                    /*\n                    if (session.status === C.STATUS_EARLY_MEDIA) {\n                      localMedia = session.mediaHandler.localMedia;\n                      if (localMedia.getAudioTracks().length > 0) {\n                        localMedia.getAudioTracks()[0].enabled = false;\n                      }\n                      if (localMedia.getVideoTracks().length > 0) {\n                        localMedia.getVideoTracks()[0].enabled = false;\n                      }\n                    }*/\n                  },\n                  function onFailure (e) {\n                    session.logger.warn(e);\n                    session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                    session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                  }\n                );\n              } else {\n                var earlyDialog = this.earlyDialogs[id];\n                var earlyMedia = earlyDialog.mediaHandler;\n    \n                earlyDialog.pracked.push(response.getHeader('rseq'));\n    \n                earlyMedia.setDescription(response)\n                .then(earlyMedia.getDescription.bind(earlyMedia, session.mediaHint))\n                .then(function onSuccess(description) {\n                  extraHeaders.push('RAck: ' + response.getHeader('rseq') + ' ' + response.getHeader('cseq'));\n                  earlyDialog.sendRequest(session, SIP.C.PRACK, {\n                    extraHeaders: extraHeaders,\n                    body: description\n                  });\n                  session.status = C.STATUS_EARLY_MEDIA;\n                  session.emit('progress', response);\n                })\n                .catch(function onFailure(e) {\n                  if (e instanceof SIP.Exceptions.GetDescriptionError) {\n                    earlyDialog.pracked.push(response.getHeader('rseq'));\n                    if (session.status === C.STATUS_TERMINATED) {\n                      return;\n                    }\n                    // TODO - fail out on error\n                    // session.failed(gum error);\n                    session.failed(null, SIP.C.causes.WEBRTC_ERROR);\n                    session.terminated(null, SIP.C.causes.WEBRTC_ERROR);\n                  } else {\n                    earlyDialog.pracked.splice(earlyDialog.pracked.indexOf(response.getHeader('rseq')), 1);\n                    // Could not set remote description\n                    session.logger.warn('invalid description');\n                    session.logger.warn(e);\n                  }\n                });\n              }\n            } else {\n              this.emit('progress', response);\n            }\n            break;\n          case /^2[0-9]{2}$/.test(response.status_code):\n            var cseq = this.request.cseq + ' ' + this.request.method;\n            if (cseq !== response.getHeader('cseq')) {\n              break;\n            }\n    \n            if (this.status === C.STATUS_EARLY_MEDIA && this.dialog) {\n              this.status = C.STATUS_CONFIRMED;\n              this.unmute();\n              /*localMedia = this.mediaHandler.localMedia;\n              if (localMedia.getAudioTracks().length > 0) {\n                localMedia.getAudioTracks()[0].enabled = true;\n              }\n              if (localMedia.getVideoTracks().length > 0) {\n                localMedia.getVideoTracks()[0].enabled = true;\n              }*/\n              options = {};\n              if (this.renderbody) {\n                extraHeaders.push('Content-Type: ' + this.rendertype);\n                options.extraHeaders = extraHeaders;\n                options.body = this.renderbody;\n              }\n              options.cseq = response.cseq;\n              this.sendRequest(SIP.C.ACK, options);\n              this.accepted(response);\n              break;\n            }\n            // Do nothing if this.dialog is already confirmed\n            if (this.dialog) {\n              break;\n            }\n    \n            // This is an invite without sdp\n            if (!this.hasOffer) {\n              if (this.earlyDialogs[id] && this.earlyDialogs[id].mediaHandler.localMedia) {\n                //REVISIT\n                this.hasOffer = true;\n                this.hasAnswer = true;\n                this.mediaHandler = this.earlyDialogs[id].mediaHandler;\n                if (!this.createDialog(response, 'UAC')) {\n                  break;\n                }\n                this.status = C.STATUS_CONFIRMED;\n                this.sendRequest(SIP.C.ACK, {cseq:response.cseq});\n    \n                this.unmute();\n                /*\n                localMedia = session.mediaHandler.localMedia;\n                if (localMedia.getAudioTracks().length > 0) {\n                  localMedia.getAudioTracks()[0].enabled = true;\n                }\n                if (localMedia.getVideoTracks().length > 0) {\n                  localMedia.getVideoTracks()[0].enabled = true;\n                }*/\n                this.accepted(response);\n              } else {\n                if(!this.mediaHandler.hasDescription(response)) {\n                  this.acceptAndTerminate(response, 400, 'Missing session description');\n                  this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                  break;\n                }\n                if (!this.createDialog(response, 'UAC')) {\n                  break;\n                }\n                this.hasOffer = true;\n                this.mediaHandler.setDescription(response)\n                .then(this.mediaHandler.getDescription.bind(this.mediaHandler, this.mediaHint))\n                .then(function onSuccess(description) {\n                  //var localMedia;\n                  if(session.isCanceled || session.status === C.STATUS_TERMINATED) {\n                    return;\n                  }\n    \n                  session.status = C.STATUS_CONFIRMED;\n                  session.hasAnswer = true;\n    \n                  session.unmute();\n                  /*localMedia = session.mediaHandler.localMedia;\n                  if (localMedia.getAudioTracks().length > 0) {\n                    localMedia.getAudioTracks()[0].enabled = true;\n                  }\n                  if (localMedia.getVideoTracks().length > 0) {\n                    localMedia.getVideoTracks()[0].enabled = true;\n                  }*/\n                  session.sendRequest(SIP.C.ACK,{\n                    body: description,\n                    cseq:response.cseq\n                  });\n                  session.accepted(response);\n                })\n                .catch(function onFailure(e) {\n                  if (e instanceof SIP.Exceptions.GetDescriptionError) {\n                    // TODO do something here\n                    session.logger.warn(\"there was a problem\");\n                  } else {\n                    session.logger.warn('invalid description');\n                    session.logger.warn(e);\n                    session.acceptAndTerminate(response, 488, 'Invalid session description');\n                    session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                  }\n                });\n              }\n            } else if (this.hasAnswer){\n              if (this.renderbody) {\n                extraHeaders.push('Content-Type: ' + session.rendertype);\n                options.extraHeaders = extraHeaders;\n                options.body = this.renderbody;\n              }\n              this.sendRequest(SIP.C.ACK, options);\n            } else {\n              if(!this.mediaHandler.hasDescription(response)) {\n                this.acceptAndTerminate(response, 400, 'Missing session description');\n                this.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                break;\n              }\n              if (!this.createDialog(response, 'UAC')) {\n                break;\n              }\n              this.hasAnswer = true;\n              this.mediaHandler.setDescription(response)\n              .then(\n                function onSuccess () {\n                  var options = {};//,localMedia;\n                  session.status = C.STATUS_CONFIRMED;\n                  session.unmute();\n                  /*localMedia = session.mediaHandler.localMedia;\n                  if (localMedia.getAudioTracks().length > 0) {\n                    localMedia.getAudioTracks()[0].enabled = true;\n                  }\n                  if (localMedia.getVideoTracks().length > 0) {\n                    localMedia.getVideoTracks()[0].enabled = true;\n                  }*/\n                  if (session.renderbody) {\n                    extraHeaders.push('Content-Type: ' + session.rendertype);\n                    options.extraHeaders = extraHeaders;\n                    options.body = session.renderbody;\n                  }\n                  options.cseq = response.cseq;\n                  session.sendRequest(SIP.C.ACK, options);\n                  session.accepted(response);\n                },\n                function onFailure (e) {\n                  session.logger.warn(e);\n                  session.acceptAndTerminate(response, 488, 'Not Acceptable Here');\n                  session.failed(response, SIP.C.causes.BAD_MEDIA_DESCRIPTION);\n                }\n              );\n            }\n            break;\n          default:\n            cause = SIP.Utils.sipErrorCause(response.status_code);\n            this.rejected(response, cause);\n            this.failed(response, cause);\n            this.terminated(response, cause);\n        }\n      },\n    \n      cancel: function(options) {\n        options = options || {};\n    \n        options.extraHeaders = (options.extraHeaders || []).slice();\n    \n        // Check Session Status\n        if (this.status === C.STATUS_TERMINATED || this.status === C.STATUS_CONFIRMED) {\n          throw new SIP.Exceptions.InvalidStateError(this.status);\n        }\n    \n        this.logger.log('canceling RTCSession');\n    \n        var cancel_reason = SIP.Utils.getCancelReason(options.status_code, options.reason_phrase);\n    \n        // Check Session Status\n        if (this.status === C.STATUS_NULL ||\n            (this.status === C.STATUS_INVITE_SENT && !this.received_100)) {\n          this.isCanceled = true;\n          this.cancelReason = cancel_reason;\n        } else if (this.status === C.STATUS_INVITE_SENT ||\n                   this.status === C.STATUS_1XX_RECEIVED ||\n                   this.status === C.STATUS_EARLY_MEDIA) {\n          this.request.cancel(cancel_reason, options.extraHeaders);\n        }\n    \n        return this.canceled();\n      },\n    \n      terminate: function(options) {\n        if (this.status === C.STATUS_TERMINATED) {\n          return this;\n        }\n    \n        if (this.status === C.STATUS_WAITING_FOR_ACK || this.status === C.STATUS_CONFIRMED) {\n          this.bye(options);\n        } else {\n          this.cancel(options);\n        }\n    \n        return this;\n      },\n    \n      receiveRequest: function(request) {\n        // ICC RECEIVE REQUEST\n    \n        // Reject CANCELs\n        if (request.method === SIP.C.CANCEL) {\n          // TODO; make this a switch when it gets added\n        }\n    \n        if (request.method === SIP.C.ACK && this.status === C.STATUS_WAITING_FOR_ACK) {\n          SIP.Timers.clearTimeout(this.timers.ackTimer);\n          SIP.Timers.clearTimeout(this.timers.invite2xxTimer);\n          this.status = C.STATUS_CONFIRMED;\n          this.unmute();\n    \n          this.accepted();\n        }\n    \n        return Session.prototype.receiveRequest.apply(this, [request]);\n      },\n    \n      onTransportError: function() {\n        if (this.status !== C.STATUS_CONFIRMED && this.status !== C.STATUS_TERMINATED) {\n          this.failed(null, SIP.C.causes.CONNECTION_ERROR);\n        }\n      },\n    \n      onRequestTimeout: function() {\n        if (this.status === C.STATUS_CONFIRMED) {\n          this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n        } else if (this.status !== C.STATUS_TERMINATED) {\n          this.failed(null, SIP.C.causes.REQUEST_TIMEOUT);\n          this.terminated(null, SIP.C.causes.REQUEST_TIMEOUT);\n        }\n      }\n    \n    };\n    \n    SIP.InviteClientContext = InviteClientContext;\n    \n    };\n    \n    },{\"./Session/DTMF\":24}],24:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview DTMF\n     */\n    \n    /**\n     * @class DTMF\n     * @param {SIP.Session} session\n     */\n    module.exports = function (SIP) {\n    \n    var DTMF,\n      C = {\n        MIN_DURATION:            70,\n        MAX_DURATION:            6000,\n        DEFAULT_DURATION:        100,\n        MIN_INTER_TONE_GAP:      50,\n        DEFAULT_INTER_TONE_GAP:  500\n      };\n    \n    DTMF = function(session, tone, options) {\n      var duration, interToneGap;\n    \n      if (tone === undefined) {\n        throw new TypeError('Not enough arguments');\n      }\n    \n      this.logger = session.ua.getLogger('sip.invitecontext.dtmf', session.id);\n      this.owner = session;\n      this.direction = null;\n    \n      options = options || {};\n      duration = options.duration || null;\n      interToneGap = options.interToneGap || null;\n    \n      // Check tone type\n      if (typeof tone === 'string' ) {\n        tone = tone.toUpperCase();\n      } else if (typeof tone === 'number') {\n        tone = tone.toString();\n      } else {\n        throw new TypeError('Invalid tone: '+ tone);\n      }\n    \n      // Check tone value\n      if (!tone.match(/^[0-9A-D#*]$/)) {\n        throw new TypeError('Invalid tone: '+ tone);\n      } else {\n        this.tone = tone;\n      }\n    \n      // Check duration\n      if (duration && !SIP.Utils.isDecimal(duration)) {\n        throw new TypeError('Invalid tone duration: '+ duration);\n      } else if (!duration) {\n        duration = DTMF.C.DEFAULT_DURATION;\n      } else if (duration < DTMF.C.MIN_DURATION) {\n        this.logger.warn('\"duration\" value is lower than the minimum allowed, setting it to '+ DTMF.C.MIN_DURATION+ ' milliseconds');\n        duration = DTMF.C.MIN_DURATION;\n      } else if (duration > DTMF.C.MAX_DURATION) {\n        this.logger.warn('\"duration\" value is greater than the maximum allowed, setting it to '+ DTMF.C.MAX_DURATION +' milliseconds');\n        duration = DTMF.C.MAX_DURATION;\n      } else {\n        duration = Math.abs(duration);\n      }\n      this.duration = duration;\n    \n      // Check interToneGap\n      if (interToneGap && !SIP.Utils.isDecimal(interToneGap)) {\n        throw new TypeError('Invalid interToneGap: '+ interToneGap);\n      } else if (!interToneGap) {\n        interToneGap = DTMF.C.DEFAULT_INTER_TONE_GAP;\n      } else if (interToneGap < DTMF.C.MIN_INTER_TONE_GAP) {\n        this.logger.warn('\"interToneGap\" value is lower than the minimum allowed, setting it to '+ DTMF.C.MIN_INTER_TONE_GAP +' milliseconds');\n        interToneGap = DTMF.C.MIN_INTER_TONE_GAP;\n      } else {\n        interToneGap = Math.abs(interToneGap);\n      }\n      this.interToneGap = interToneGap;\n    };\n    DTMF.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    \n    DTMF.prototype.send = function(options) {\n      var extraHeaders,\n        body = {};\n    \n      this.direction = 'outgoing';\n    \n      // Check RTCSession Status\n      if (this.owner.status !== SIP.Session.C.STATUS_CONFIRMED &&\n        this.owner.status !== SIP.Session.C.STATUS_WAITING_FOR_ACK) {\n        throw new SIP.Exceptions.InvalidStateError(this.owner.status);\n      }\n    \n      // Get DTMF options\n      options = options || {};\n      extraHeaders = options.extraHeaders ? options.extraHeaders.slice() : [];\n    \n      body.contentType = 'application/dtmf-relay';\n    \n      body.body = \"Signal= \" + this.tone + \"\\r\\n\";\n      body.body += \"Duration= \" + this.duration;\n    \n      this.request = this.owner.dialog.sendRequest(this, SIP.C.INFO, {\n        extraHeaders: extraHeaders,\n        body: body\n      });\n    \n      this.owner.emit('dtmf', this.request, this);\n    };\n    \n    /**\n     * @private\n     */\n    DTMF.prototype.receiveResponse = function(response) {\n      var cause;\n    \n      switch(true) {\n        case /^1[0-9]{2}$/.test(response.status_code):\n          // Ignore provisional responses.\n          break;\n    \n        case /^2[0-9]{2}$/.test(response.status_code):\n          this.emit('succeeded', {\n            originator: 'remote',\n            response: response\n          });\n          break;\n    \n        default:\n          cause = SIP.Utils.sipErrorCause(response.status_code);\n          this.emit('failed', response, cause);\n          break;\n      }\n    };\n    \n    /**\n     * @private\n     */\n    DTMF.prototype.onRequestTimeout = function() {\n      this.emit('failed', null, SIP.C.causes.REQUEST_TIMEOUT);\n      this.owner.onRequestTimeout();\n    };\n    \n    /**\n     * @private\n     */\n    DTMF.prototype.onTransportError = function() {\n      this.emit('failed', null, SIP.C.causes.CONNECTION_ERROR);\n      this.owner.onTransportError();\n    };\n    \n    /**\n     * @private\n     */\n    DTMF.prototype.onDialogError = function(response) {\n      this.emit('failed', response, SIP.C.causes.DIALOG_ERROR);\n      this.owner.onDialogError(response);\n    };\n    \n    /**\n     * @private\n     */\n    DTMF.prototype.init_incoming = function(request) {\n      this.direction = 'incoming';\n      this.request = request;\n    \n      request.reply(200);\n    \n      if (!this.tone || !this.duration) {\n        this.logger.warn('invalid INFO DTMF received, discarded');\n      } else {\n        this.owner.emit('dtmf', request, this);\n      }\n    };\n    \n    DTMF.C = C;\n    return DTMF;\n    };\n    \n    },{}],25:[function(require,module,exports){\n    \"use strict\";\n    \n    /**\n     * @fileoverview SIP Subscriber (SIP-Specific Event Notifications RFC6665)\n     */\n    \n    /**\n     * @augments SIP\n     * @class Class creating a SIP Subscription.\n     */\n    module.exports = function (SIP) {\n    SIP.Subscription = function (ua, target, event, options) {\n      options = Object.create(options || Object.prototype);\n      this.extraHeaders = options.extraHeaders = (options.extraHeaders || []).slice();\n    \n      this.id = null;\n      this.state = 'init';\n    \n      if (!event) {\n        throw new TypeError('Event necessary to create a subscription.');\n      } else {\n        //TODO: check for valid events here probably make a list in SIP.C; or leave it up to app to check?\n        //The check may need to/should probably occur on the other side,\n        this.event = event;\n      }\n    \n      if(typeof options.expires !== 'number'){\n        ua.logger.warn('expires must be a number. Using default of 3600.');\n        this.expires = 3600;\n      } else {\n        this.expires = options.expires;\n      }\n    \n      options.extraHeaders.push('Event: ' + this.event);\n      options.extraHeaders.push('Expires: ' + this.expires);\n    \n      if (options.body) {\n        this.body = options.body;\n      }\n    \n      this.contact = ua.contact.toString();\n    \n      options.extraHeaders.push('Contact: '+ this.contact);\n      options.extraHeaders.push('Allow: '+ SIP.UA.C.ALLOWED_METHODS.toString());\n    \n      SIP.Utils.augment(this, SIP.ClientContext, [ua, SIP.C.SUBSCRIBE, target, options]);\n    \n      this.logger = ua.getLogger('sip.subscription');\n    \n      this.dialog = null;\n      this.timers = {N: null, sub_duration: null};\n      this.errorCodes  = [404,405,410,416,480,481,482,483,484,485,489,501,604];\n    };\n    \n    SIP.Subscription.prototype = {\n      subscribe: function() {\n        var sub = this;\n    \n         //these states point to an existing subscription, no subscribe is necessary\n        if (this.state === 'active') {\n          this.refresh();\n          return this;\n        } else if (this.state === 'notify_wait') {\n          return this;\n        }\n    \n        SIP.Timers.clearTimeout(this.timers.sub_duration);\n        SIP.Timers.clearTimeout(this.timers.N);\n        this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n    \n        this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event] = this;\n    \n        this.send();\n    \n        this.state = 'notify_wait';\n    \n        return this;\n      },\n    \n      refresh: function () {\n        if (this.state === 'terminated' || this.state === 'pending' || this.state === 'notify_wait') {\n          return;\n        }\n    \n        this.dialog.sendRequest(this, SIP.C.SUBSCRIBE, {\n          extraHeaders: this.extraHeaders,\n          body: this.body\n        });\n      },\n    \n      receiveResponse: function(response) {\n        var expires, sub = this,\n            cause = SIP.Utils.getReasonPhrase(response.status_code);\n    \n        if ((this.state === 'notify_wait' && response.status_code >= 300) ||\n            (this.state !== 'notify_wait' && this.errorCodes.indexOf(response.status_code) !== -1)) {\n          this.failed(response, null);\n        } else if (/^2[0-9]{2}$/.test(response.status_code)){\n          this.emit('accepted', response, cause);\n          //As we don't support RFC 5839 or other extensions where the NOTIFY is optional, timer N will not be cleared\n          //SIP.Timers.clearTimeout(this.timers.N);\n    \n          expires = response.getHeader('Expires');\n    \n          if (expires && expires <= this.expires) {\n            // Preserve new expires value for subsequent requests\n            this.expires = expires;\n            this.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub), expires * 900);\n          } else {\n            if (!expires) {\n              this.logger.warn('Expires header missing in a 200-class response to SUBSCRIBE');\n              this.failed(response, SIP.C.EXPIRES_HEADER_MISSING);\n            } else {\n              this.logger.warn('Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request');\n              this.failed(response, SIP.C.INVALID_EXPIRES_HEADER);\n            }\n          }\n        } else if (response.statusCode > 300) {\n          this.emit('failed', response, cause);\n          this.emit('rejected', response, cause);\n        }\n      },\n    \n      unsubscribe: function() {\n        var extraHeaders = [], sub = this;\n    \n        this.state = 'terminated';\n    \n        extraHeaders.push('Event: ' + this.event);\n        extraHeaders.push('Expires: 0');\n    \n        extraHeaders.push('Contact: '+ this.contact);\n        extraHeaders.push('Allow: '+ SIP.UA.C.ALLOWED_METHODS.toString());\n    \n        //makes sure expires isn't set, and other typical resubscribe behavior\n        this.receiveResponse = function(){};\n    \n        this.dialog.sendRequest(this, this.method, {\n          extraHeaders: extraHeaders,\n          body: this.body\n        });\n    \n        SIP.Timers.clearTimeout(this.timers.sub_duration);\n        SIP.Timers.clearTimeout(this.timers.N);\n        this.timers.N = SIP.Timers.setTimeout(sub.timer_fire.bind(sub), SIP.Timers.TIMER_N);\n      },\n    \n      /**\n      * @private\n      */\n      timer_fire: function(){\n        if (this.state === 'terminated') {\n          this.terminateDialog();\n          SIP.Timers.clearTimeout(this.timers.N);\n          SIP.Timers.clearTimeout(this.timers.sub_duration);\n    \n          delete this.ua.subscriptions[this.id];\n        } else if (this.state === 'notify_wait' || this.state === 'pending') {\n          this.close();\n        } else {\n          this.refresh();\n        }\n      },\n    \n      /**\n      * @private\n      */\n      close: function() {\n        if (this.state === 'notify_wait') {\n          this.state = 'terminated';\n          SIP.Timers.clearTimeout(this.timers.N);\n          SIP.Timers.clearTimeout(this.timers.sub_duration);\n          this.receiveResponse = function(){};\n    \n          delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n        } else if (this.state !== 'terminated') {\n          this.unsubscribe();\n        }\n      },\n    \n      /**\n      * @private\n      */\n      createConfirmedDialog: function(message, type) {\n        var dialog;\n    \n        this.terminateDialog();\n        dialog = new SIP.Dialog(this, message, type);\n        dialog.invite_seqnum = this.request.cseq;\n        dialog.local_seqnum = this.request.cseq;\n    \n        if(!dialog.error) {\n          this.dialog = dialog;\n          return true;\n        }\n        // Dialog not created due to an error\n        else {\n          return false;\n        }\n      },\n    \n      /**\n      * @private\n      */\n      terminateDialog: function() {\n        if(this.dialog) {\n          delete this.ua.subscriptions[this.id];\n          this.dialog.terminate();\n          delete this.dialog;\n        }\n      },\n    \n      /**\n      * @private\n      */\n      receiveRequest: function(request) {\n        var sub_state, sub = this;\n    \n        function setExpiresTimeout() {\n          if (sub_state.expires) {\n            SIP.Timers.clearTimeout(sub.timers.sub_duration);\n            sub_state.expires = Math.min(sub.expires,\n                                         Math.max(sub_state.expires, 0));\n            sub.timers.sub_duration = SIP.Timers.setTimeout(sub.refresh.bind(sub),\n                                                        sub_state.expires * 900);\n          }\n        }\n    \n        if (!this.matchEvent(request)) { //checks event and subscription_state headers\n          request.reply(489);\n          return;\n        }\n    \n        if (!this.dialog) {\n          if (this.createConfirmedDialog(request,'UAS')) {\n            this.id = this.dialog.id.toString();\n            delete this.ua.earlySubscriptions[this.request.call_id + this.request.from.parameters.tag + this.event];\n            this.ua.subscriptions[this.id] = this;\n            // UPDATE ROUTE SET TO BE BACKWARDS COMPATIBLE?\n          }\n        }\n    \n        sub_state = request.parseHeader('Subscription-State');\n    \n        request.reply(200, SIP.C.REASON_200);\n    \n        SIP.Timers.clearTimeout(this.timers.N);\n    \n        this.emit('notify', {request: request});\n    \n        // if we've set state to terminated, no further processing should take place\n        // and we are only interested in cleaning up after the appropriate NOTIFY\n        if (this.state === 'terminated') {\n          if (sub_state.state === 'terminated') {\n            this.terminateDialog();\n            SIP.Timers.clearTimeout(this.timers.N);\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n    \n            delete this.ua.subscriptions[this.id];\n          }\n          return;\n        }\n    \n        switch (sub_state.state) {\n          case 'active':\n            this.state = 'active';\n            setExpiresTimeout();\n            break;\n          case 'pending':\n            if (this.state === 'notify_wait') {\n              setExpiresTimeout();\n            }\n            this.state = 'pending';\n            break;\n          case 'terminated':\n            SIP.Timers.clearTimeout(this.timers.sub_duration);\n            if (sub_state.reason) {\n              this.logger.log('terminating subscription with reason '+ sub_state.reason);\n              switch (sub_state.reason) {\n                case 'deactivated':\n                case 'timeout':\n                  this.subscribe();\n                  return;\n                case 'probation':\n                case 'giveup':\n                  if(sub_state.params && sub_state.params['retry-after']) {\n                    this.timers.sub_duration = SIP.Timers.setTimeout(sub.subscribe.bind(sub), sub_state.params['retry-after']);\n                  } else {\n                    this.subscribe();\n                  }\n                  return;\n                case 'rejected':\n                case 'noresource':\n                case 'invariant':\n                  break;\n              }\n            }\n            this.close();\n            break;\n        }\n      },\n    \n      failed: function(response, cause) {\n        this.close();\n        this.emit('failed', response, cause);\n        this.emit('rejected', response, cause);\n        return this;\n      },\n    \n      onDialogError: function(response) {\n        this.failed(response, SIP.C.causes.DIALOG_ERROR);\n      },\n    \n      /**\n      * @private\n      */\n      matchEvent: function(request) {\n        var event;\n    \n        // Check mandatory header Event\n        if (!request.hasHeader('Event')) {\n          this.logger.warn('missing Event header');\n          return false;\n        }\n        // Check mandatory header Subscription-State\n        if (!request.hasHeader('Subscription-State')) {\n          this.logger.warn('missing Subscription-State header');\n          return false;\n        }\n    \n        // Check whether the event in NOTIFY matches the event in SUBSCRIBE\n        event = request.parseHeader('event').event;\n    \n        if (this.event !== event) {\n          this.logger.warn('event match failed');\n          request.reply(481, 'Event Match Failed');\n          return false;\n        } else {\n          return true;\n        }\n      }\n    };\n    };\n    \n    },{}],26:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP TIMERS\n     */\n    \n    /**\n     * @augments SIP\n     */\n    var\n      T1 = 500,\n      T2 = 4000,\n      T4 = 5000;\n    module.exports = function (timers) {\n      var Timers = {\n        T1: T1,\n        T2: T2,\n        T4: T4,\n        TIMER_B: 64 * T1,\n        TIMER_D: 0  * T1,\n        TIMER_F: 64 * T1,\n        TIMER_H: 64 * T1,\n        TIMER_I: 0  * T1,\n        TIMER_J: 0  * T1,\n        TIMER_K: 0  * T4,\n        TIMER_L: 64 * T1,\n        TIMER_M: 64 * T1,\n        TIMER_N: 64 * T1,\n        PROVISIONAL_RESPONSE_INTERVAL: 60000  // See RFC 3261 Section 13.3.1.1\n      };\n    \n      ['setTimeout', 'clearTimeout', 'setInterval', 'clearInterval']\n      .forEach(function (name) {\n        // can't just use timers[name].bind(timers) since it bypasses jasmine's\n        // clock-mocking\n        Timers[name] = function () {\n          return timers[name].apply(timers, arguments);\n        };\n      });\n    \n      return Timers;\n    };\n    \n    },{}],27:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP Transactions\n     */\n    \n    /**\n     * SIP Transactions module.\n     * @augments SIP\n     */\n    module.exports = function (SIP) {\n    var\n      C = {\n        // Transaction states\n        STATUS_TRYING:     1,\n        STATUS_PROCEEDING: 2,\n        STATUS_CALLING:    3,\n        STATUS_ACCEPTED:   4,\n        STATUS_COMPLETED:  5,\n        STATUS_TERMINATED: 6,\n        STATUS_CONFIRMED:  7,\n    \n        // Transaction types\n        NON_INVITE_CLIENT: 'nict',\n        NON_INVITE_SERVER: 'nist',\n        INVITE_CLIENT: 'ict',\n        INVITE_SERVER: 'ist'\n      };\n    \n    function buildViaHeader (request_sender, transport, id) {\n      var via;\n      via = 'SIP/2.0/' + (request_sender.ua.configuration.hackViaTcp ? 'TCP' : transport.server.scheme);\n      via += ' ' + request_sender.ua.configuration.viaHost + ';branch=' + id;\n      if (request_sender.ua.configuration.forceRport) {\n        via += ';rport';\n      }\n      return via;\n    }\n    \n    /**\n    * @augments SIP.Transactions\n    * @class Non Invite Client Transaction\n    * @param {SIP.RequestSender} request_sender\n    * @param {SIP.OutgoingRequest} request\n    * @param {SIP.Transport} transport\n    */\n    var NonInviteClientTransaction = function(request_sender, request, transport) {\n      var via;\n    \n      this.type = C.NON_INVITE_CLIENT;\n      this.transport = transport;\n      this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n      this.request_sender = request_sender;\n      this.request = request;\n    \n      this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n    \n      via = buildViaHeader(request_sender, transport, this.id);\n      this.request.setHeader('via', via);\n    \n      this.request_sender.ua.newTransaction(this);\n    };\n    NonInviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    NonInviteClientTransaction.prototype.stateChanged = function(state) {\n      this.state = state;\n      this.emit('stateChanged');\n    };\n    \n    NonInviteClientTransaction.prototype.send = function() {\n      var tr = this;\n    \n      this.stateChanged(C.STATUS_TRYING);\n      this.F = SIP.Timers.setTimeout(tr.timer_F.bind(tr), SIP.Timers.TIMER_F);\n    \n      if(!this.transport.send(this.request)) {\n        this.onTransportError();\n      }\n    };\n    \n    NonInviteClientTransaction.prototype.onTransportError = function() {\n      this.logger.log('transport error occurred, deleting non-INVITE client transaction ' + this.id);\n      SIP.Timers.clearTimeout(this.F);\n      SIP.Timers.clearTimeout(this.K);\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.request_sender.ua.destroyTransaction(this);\n      this.request_sender.onTransportError();\n    };\n    \n    NonInviteClientTransaction.prototype.timer_F = function() {\n      this.logger.log('Timer F expired for non-INVITE client transaction ' + this.id);\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.request_sender.ua.destroyTransaction(this);\n      this.request_sender.onRequestTimeout();\n    };\n    \n    NonInviteClientTransaction.prototype.timer_K = function() {\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.request_sender.ua.destroyTransaction(this);\n    };\n    \n    NonInviteClientTransaction.prototype.receiveResponse = function(response) {\n      var\n        tr = this,\n        status_code = response.status_code;\n    \n      if(status_code < 200) {\n        switch(this.state) {\n          case C.STATUS_TRYING:\n          case C.STATUS_PROCEEDING:\n            this.stateChanged(C.STATUS_PROCEEDING);\n            this.request_sender.receiveResponse(response);\n            break;\n        }\n      } else {\n        switch(this.state) {\n          case C.STATUS_TRYING:\n          case C.STATUS_PROCEEDING:\n            this.stateChanged(C.STATUS_COMPLETED);\n            SIP.Timers.clearTimeout(this.F);\n    \n            if(status_code === 408) {\n              this.request_sender.onRequestTimeout();\n            } else {\n              this.request_sender.receiveResponse(response);\n            }\n    \n            this.K = SIP.Timers.setTimeout(tr.timer_K.bind(tr), SIP.Timers.TIMER_K);\n            break;\n          case C.STATUS_COMPLETED:\n            break;\n        }\n      }\n    };\n    \n    \n    \n    /**\n    * @augments SIP.Transactions\n    * @class Invite Client Transaction\n    * @param {SIP.RequestSender} request_sender\n    * @param {SIP.OutgoingRequest} request\n    * @param {SIP.Transport} transport\n    */\n    var InviteClientTransaction = function(request_sender, request, transport) {\n      var via,\n        tr = this;\n    \n      this.type = C.INVITE_CLIENT;\n      this.transport = transport;\n      this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n      this.request_sender = request_sender;\n      this.request = request;\n    \n      this.logger = request_sender.ua.getLogger('sip.transaction.ict', this.id);\n    \n      via = buildViaHeader(request_sender, transport, this.id);\n      this.request.setHeader('via', via);\n    \n      this.request_sender.ua.newTransaction(this);\n    \n      // Add the cancel property to the request.\n      //Will be called from the request instance, not the transaction itself.\n      this.request.cancel = function(reason, extraHeaders) {\n        extraHeaders = (extraHeaders || []).slice();\n        var length = extraHeaders.length;\n        var extraHeadersString = null;\n        for (var idx = 0; idx < length; idx++) {\n          extraHeadersString = (extraHeadersString || '') + extraHeaders[idx].trim() + '\\r\\n';\n        }\n    \n        tr.cancel_request(tr, reason, extraHeadersString);\n      };\n    };\n    InviteClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    InviteClientTransaction.prototype.stateChanged = function(state) {\n      this.state = state;\n      this.emit('stateChanged');\n    };\n    \n    InviteClientTransaction.prototype.send = function() {\n      var tr = this;\n      this.stateChanged(C.STATUS_CALLING);\n      this.B = SIP.Timers.setTimeout(tr.timer_B.bind(tr), SIP.Timers.TIMER_B);\n    \n      if(!this.transport.send(this.request)) {\n        this.onTransportError();\n      }\n    };\n    \n    InviteClientTransaction.prototype.onTransportError = function() {\n      this.logger.log('transport error occurred, deleting INVITE client transaction ' + this.id);\n      SIP.Timers.clearTimeout(this.B);\n      SIP.Timers.clearTimeout(this.D);\n      SIP.Timers.clearTimeout(this.M);\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.request_sender.ua.destroyTransaction(this);\n    \n      if (this.state !== C.STATUS_ACCEPTED) {\n        this.request_sender.onTransportError();\n      }\n    };\n    \n    // RFC 6026 7.2\n    InviteClientTransaction.prototype.timer_M = function() {\n      this.logger.log('Timer M expired for INVITE client transaction ' + this.id);\n    \n      if(this.state === C.STATUS_ACCEPTED) {\n        SIP.Timers.clearTimeout(this.B);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n      }\n    };\n    \n    // RFC 3261 17.1.1\n    InviteClientTransaction.prototype.timer_B = function() {\n      this.logger.log('Timer B expired for INVITE client transaction ' + this.id);\n      if(this.state === C.STATUS_CALLING) {\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.request_sender.ua.destroyTransaction(this);\n        this.request_sender.onRequestTimeout();\n      }\n    };\n    \n    InviteClientTransaction.prototype.timer_D = function() {\n      this.logger.log('Timer D expired for INVITE client transaction ' + this.id);\n      SIP.Timers.clearTimeout(this.B);\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.request_sender.ua.destroyTransaction(this);\n    };\n    \n    InviteClientTransaction.prototype.sendACK = function(response) {\n      var tr = this;\n    \n      this.ack = 'ACK ' + this.request.ruri + ' SIP/2.0\\r\\n';\n      this.ack += 'Via: ' + this.request.headers['Via'].toString() + '\\r\\n';\n    \n      if(this.request.headers['Route']) {\n        this.ack += 'Route: ' + this.request.headers['Route'].toString() + '\\r\\n';\n      }\n    \n      this.ack += 'To: ' + response.getHeader('to') + '\\r\\n';\n      this.ack += 'From: ' + this.request.headers['From'].toString() + '\\r\\n';\n      this.ack += 'Call-ID: ' + this.request.headers['Call-ID'].toString() + '\\r\\n';\n      this.ack += 'Content-Length: 0\\r\\n';\n      this.ack += 'CSeq: ' + this.request.headers['CSeq'].toString().split(' ')[0];\n      this.ack += ' ACK\\r\\n\\r\\n';\n    \n      this.D = SIP.Timers.setTimeout(tr.timer_D.bind(tr), SIP.Timers.TIMER_D);\n    \n      this.transport.send(this.ack);\n    };\n    \n    InviteClientTransaction.prototype.cancel_request = function(tr, reason, extraHeaders) {\n      var request = tr.request;\n    \n      this.cancel = SIP.C.CANCEL + ' ' + request.ruri + ' SIP/2.0\\r\\n';\n      this.cancel += 'Via: ' + request.headers['Via'].toString() + '\\r\\n';\n    \n      if(this.request.headers['Route']) {\n        this.cancel += 'Route: ' + request.headers['Route'].toString() + '\\r\\n';\n      }\n    \n      this.cancel += 'To: ' + request.headers['To'].toString() + '\\r\\n';\n      this.cancel += 'From: ' + request.headers['From'].toString() + '\\r\\n';\n      this.cancel += 'Call-ID: ' + request.headers['Call-ID'].toString() + '\\r\\n';\n      this.cancel += 'CSeq: ' + request.headers['CSeq'].toString().split(' ')[0] +\n      ' CANCEL\\r\\n';\n    \n      if(reason) {\n        this.cancel += 'Reason: ' + reason + '\\r\\n';\n      }\n    \n      if (extraHeaders) {\n        this.cancel += extraHeaders;\n      }\n    \n      this.cancel += 'Content-Length: 0\\r\\n\\r\\n';\n    \n      // Send only if a provisional response (>100) has been received.\n      if(this.state === C.STATUS_PROCEEDING) {\n        this.transport.send(this.cancel);\n      }\n    };\n    \n    InviteClientTransaction.prototype.receiveResponse = function(response) {\n      var\n      tr = this,\n      status_code = response.status_code;\n    \n      if(status_code >= 100 && status_code <= 199) {\n        switch(this.state) {\n          case C.STATUS_CALLING:\n            this.stateChanged(C.STATUS_PROCEEDING);\n            this.request_sender.receiveResponse(response);\n            if(this.cancel) {\n              this.transport.send(this.cancel);\n            }\n            break;\n          case C.STATUS_PROCEEDING:\n            this.request_sender.receiveResponse(response);\n            break;\n        }\n      } else if(status_code >= 200 && status_code <= 299) {\n        switch(this.state) {\n          case C.STATUS_CALLING:\n          case C.STATUS_PROCEEDING:\n            this.stateChanged(C.STATUS_ACCEPTED);\n            this.M = SIP.Timers.setTimeout(tr.timer_M.bind(tr), SIP.Timers.TIMER_M);\n            this.request_sender.receiveResponse(response);\n            break;\n          case C.STATUS_ACCEPTED:\n            this.request_sender.receiveResponse(response);\n            break;\n        }\n      } else if(status_code >= 300 && status_code <= 699) {\n        switch(this.state) {\n          case C.STATUS_CALLING:\n          case C.STATUS_PROCEEDING:\n            this.stateChanged(C.STATUS_COMPLETED);\n            this.sendACK(response);\n            this.request_sender.receiveResponse(response);\n            break;\n          case C.STATUS_COMPLETED:\n            this.sendACK(response);\n            break;\n        }\n      }\n    };\n    \n    \n    /**\n     * @augments SIP.Transactions\n     * @class ACK Client Transaction\n     * @param {SIP.RequestSender} request_sender\n     * @param {SIP.OutgoingRequest} request\n     * @param {SIP.Transport} transport\n     */\n    var AckClientTransaction = function(request_sender, request, transport) {\n      var via;\n    \n      this.transport = transport;\n      this.id = 'z9hG4bK' + Math.floor(Math.random() * 10000000);\n      this.request_sender = request_sender;\n      this.request = request;\n    \n      this.logger = request_sender.ua.getLogger('sip.transaction.nict', this.id);\n    \n      via = buildViaHeader(request_sender, transport, this.id);\n      this.request.setHeader('via', via);\n    };\n    AckClientTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    AckClientTransaction.prototype.send = function() {\n      if(!this.transport.send(this.request)) {\n        this.onTransportError();\n      }\n    };\n    \n    AckClientTransaction.prototype.onTransportError = function() {\n      this.logger.log('transport error occurred, for an ACK client transaction ' + this.id);\n      this.request_sender.onTransportError();\n    };\n    \n    \n    /**\n    * @augments SIP.Transactions\n    * @class Non Invite Server Transaction\n    * @param {SIP.IncomingRequest} request\n    * @param {SIP.UA} ua\n    */\n    var NonInviteServerTransaction = function(request, ua) {\n      this.type = C.NON_INVITE_SERVER;\n      this.id = request.via_branch;\n      this.request = request;\n      this.transport = request.transport;\n      this.ua = ua;\n      this.last_response = '';\n      request.server_transaction = this;\n    \n      this.logger = ua.getLogger('sip.transaction.nist', this.id);\n    \n      this.state = C.STATUS_TRYING;\n    \n      ua.newTransaction(this);\n    };\n    NonInviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    NonInviteServerTransaction.prototype.stateChanged = function(state) {\n      this.state = state;\n      this.emit('stateChanged');\n    };\n    \n    NonInviteServerTransaction.prototype.timer_J = function() {\n      this.logger.log('Timer J expired for non-INVITE server transaction ' + this.id);\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.ua.destroyTransaction(this);\n    };\n    \n    NonInviteServerTransaction.prototype.onTransportError = function() {\n      if (!this.transportError) {\n        this.transportError = true;\n    \n        this.logger.log('transport error occurred, deleting non-INVITE server transaction ' + this.id);\n    \n        SIP.Timers.clearTimeout(this.J);\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n      }\n    };\n    \n    NonInviteServerTransaction.prototype.receiveResponse = function(status_code, response) {\n      var tr = this;\n      var deferred = SIP.Utils.defer();\n    \n      if(status_code === 100) {\n        /* RFC 4320 4.1\n         * 'A SIP element MUST NOT\n         * send any provisional response with a\n         * Status-Code other than 100 to a non-INVITE request.'\n         */\n        switch(this.state) {\n          case C.STATUS_TRYING:\n            this.stateChanged(C.STATUS_PROCEEDING);\n            if(!this.transport.send(response))  {\n              this.onTransportError();\n            }\n            break;\n          case C.STATUS_PROCEEDING:\n            this.last_response = response;\n            if(!this.transport.send(response)) {\n              this.onTransportError();\n              deferred.reject();\n            } else {\n              deferred.resolve();\n            }\n            break;\n        }\n      } else if(status_code >= 200 && status_code <= 699) {\n        switch(this.state) {\n          case C.STATUS_TRYING:\n          case C.STATUS_PROCEEDING:\n            this.stateChanged(C.STATUS_COMPLETED);\n            this.last_response = response;\n            this.J = SIP.Timers.setTimeout(tr.timer_J.bind(tr), SIP.Timers.TIMER_J);\n            if(!this.transport.send(response)) {\n              this.onTransportError();\n              deferred.reject();\n            } else {\n              deferred.resolve();\n            }\n            break;\n          case C.STATUS_COMPLETED:\n            break;\n        }\n      }\n    \n      return deferred.promise;\n    };\n    \n    /**\n    * @augments SIP.Transactions\n    * @class Invite Server Transaction\n    * @param {SIP.IncomingRequest} request\n    * @param {SIP.UA} ua\n    */\n    var InviteServerTransaction = function(request, ua) {\n      this.type = C.INVITE_SERVER;\n      this.id = request.via_branch;\n      this.request = request;\n      this.transport = request.transport;\n      this.ua = ua;\n      this.last_response = '';\n      request.server_transaction = this;\n    \n      this.logger = ua.getLogger('sip.transaction.ist', this.id);\n    \n      this.state = C.STATUS_PROCEEDING;\n    \n      ua.newTransaction(this);\n    \n      this.resendProvisionalTimer = null;\n    \n      request.reply(100);\n    };\n    InviteServerTransaction.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    InviteServerTransaction.prototype.stateChanged = function(state) {\n      this.state = state;\n      this.emit('stateChanged');\n    };\n    \n    InviteServerTransaction.prototype.timer_H = function() {\n      this.logger.log('Timer H expired for INVITE server transaction ' + this.id);\n    \n      if(this.state === C.STATUS_COMPLETED) {\n        this.logger.warn('transactions', 'ACK for INVITE server transaction was never received, call will be terminated');\n      }\n    \n      this.stateChanged(C.STATUS_TERMINATED);\n      this.ua.destroyTransaction(this);\n    };\n    \n    InviteServerTransaction.prototype.timer_I = function() {\n      this.stateChanged(C.STATUS_TERMINATED);\n      this.ua.destroyTransaction(this);\n    };\n    \n    // RFC 6026 7.1\n    InviteServerTransaction.prototype.timer_L = function() {\n      this.logger.log('Timer L expired for INVITE server transaction ' + this.id);\n    \n      if(this.state === C.STATUS_ACCEPTED) {\n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n      }\n    };\n    \n    InviteServerTransaction.prototype.onTransportError = function() {\n      if (!this.transportError) {\n        this.transportError = true;\n    \n        this.logger.log('transport error occurred, deleting INVITE server transaction ' + this.id);\n    \n        if (this.resendProvisionalTimer !== null) {\n          SIP.Timers.clearInterval(this.resendProvisionalTimer);\n          this.resendProvisionalTimer = null;\n        }\n    \n        SIP.Timers.clearTimeout(this.L);\n        SIP.Timers.clearTimeout(this.H);\n        SIP.Timers.clearTimeout(this.I);\n    \n        this.stateChanged(C.STATUS_TERMINATED);\n        this.ua.destroyTransaction(this);\n      }\n    };\n    \n    InviteServerTransaction.prototype.resend_provisional = function() {\n      if(!this.transport.send(this.last_response)) {\n        this.onTransportError();\n      }\n    };\n    \n    // INVITE Server Transaction RFC 3261 17.2.1\n    InviteServerTransaction.prototype.receiveResponse = function(status_code, response) {\n      var tr = this;\n      var deferred = SIP.Utils.defer();\n    \n      if(status_code >= 100 && status_code <= 199) {\n        switch(this.state) {\n          case C.STATUS_PROCEEDING:\n            if(!this.transport.send(response)) {\n              this.onTransportError();\n            }\n            this.last_response = response;\n            break;\n        }\n      }\n    \n      if(status_code > 100 && status_code <= 199 && this.state === C.STATUS_PROCEEDING) {\n        // Trigger the resendProvisionalTimer only for the first non 100 provisional response.\n        if(this.resendProvisionalTimer === null) {\n          this.resendProvisionalTimer = SIP.Timers.setInterval(tr.resend_provisional.bind(tr),\n            SIP.Timers.PROVISIONAL_RESPONSE_INTERVAL);\n        }\n      } else if(status_code >= 200 && status_code <= 299) {\n        switch(this.state) {\n          case C.STATUS_PROCEEDING:\n            this.stateChanged(C.STATUS_ACCEPTED);\n            this.last_response = response;\n            this.L = SIP.Timers.setTimeout(tr.timer_L.bind(tr), SIP.Timers.TIMER_L);\n    \n            if (this.resendProvisionalTimer !== null) {\n              SIP.Timers.clearInterval(this.resendProvisionalTimer);\n              this.resendProvisionalTimer = null;\n            }\n            /* falls through */\n            case C.STATUS_ACCEPTED:\n              // Note that this point will be reached for proceeding tr.state also.\n              if(!this.transport.send(response)) {\n                this.onTransportError();\n                deferred.reject();\n              } else {\n                deferred.resolve();\n              }\n              break;\n        }\n      } else if(status_code >= 300 && status_code <= 699) {\n        switch(this.state) {\n          case C.STATUS_PROCEEDING:\n            if (this.resendProvisionalTimer !== null) {\n              SIP.Timers.clearInterval(this.resendProvisionalTimer);\n              this.resendProvisionalTimer = null;\n            }\n    \n            if(!this.transport.send(response)) {\n              this.onTransportError();\n              deferred.reject();\n            } else {\n              this.stateChanged(C.STATUS_COMPLETED);\n              this.H = SIP.Timers.setTimeout(tr.timer_H.bind(tr), SIP.Timers.TIMER_H);\n              deferred.resolve();\n            }\n            break;\n        }\n      }\n    \n      return deferred.promise;\n    };\n    \n    /**\n     * @function\n     * @param {SIP.UA} ua\n     * @param {SIP.IncomingRequest} request\n     *\n     * @return {boolean}\n     * INVITE:\n     *  _true_ if retransmission\n     *  _false_ new request\n     *\n     * ACK:\n     *  _true_  ACK to non2xx response\n     *  _false_ ACK must be passed to TU (accepted state)\n     *          ACK to 2xx response\n     *\n     * CANCEL:\n     *  _true_  no matching invite transaction\n     *  _false_ matching invite transaction and no final response sent\n     *\n     * OTHER:\n     *  _true_  retransmission\n     *  _false_ new request\n     */\n    var checkTransaction = function(ua, request) {\n      var tr;\n    \n      switch(request.method) {\n        case SIP.C.INVITE:\n          tr = ua.transactions.ist[request.via_branch];\n          if(tr) {\n            switch(tr.state) {\n              case C.STATUS_PROCEEDING:\n                tr.transport.send(tr.last_response);\n                break;\n    \n                // RFC 6026 7.1 Invite retransmission\n                //received while in C.STATUS_ACCEPTED state. Absorb it.\n              case C.STATUS_ACCEPTED:\n                break;\n            }\n            return true;\n          }\n          break;\n        case SIP.C.ACK:\n          tr = ua.transactions.ist[request.via_branch];\n    \n          // RFC 6026 7.1\n          if(tr) {\n            if(tr.state === C.STATUS_ACCEPTED) {\n              return false;\n            } else if(tr.state === C.STATUS_COMPLETED) {\n              tr.stateChanged(C.STATUS_CONFIRMED);\n              tr.I = SIP.Timers.setTimeout(tr.timer_I.bind(tr), SIP.Timers.TIMER_I);\n              return true;\n            }\n          }\n    \n          // ACK to 2XX Response.\n          else {\n            return false;\n          }\n          break;\n        case SIP.C.CANCEL:\n          tr = ua.transactions.ist[request.via_branch];\n          if(tr) {\n            request.reply_sl(200);\n            if(tr.state === C.STATUS_PROCEEDING) {\n              return false;\n            } else {\n              return true;\n            }\n          } else {\n            request.reply_sl(481);\n            return true;\n          }\n          break;\n        default:\n    \n          // Non-INVITE Server Transaction RFC 3261 17.2.2\n          tr = ua.transactions.nist[request.via_branch];\n          if(tr) {\n            switch(tr.state) {\n              case C.STATUS_TRYING:\n                break;\n              case C.STATUS_PROCEEDING:\n              case C.STATUS_COMPLETED:\n                tr.transport.send(tr.last_response);\n                break;\n            }\n            return true;\n          }\n          break;\n      }\n    };\n    \n    SIP.Transactions = {\n      C: C,\n      checkTransaction: checkTransaction,\n      NonInviteClientTransaction: NonInviteClientTransaction,\n      InviteClientTransaction: InviteClientTransaction,\n      AckClientTransaction: AckClientTransaction,\n      NonInviteServerTransaction: NonInviteServerTransaction,\n      InviteServerTransaction: InviteServerTransaction\n    };\n    \n    };\n    \n    },{}],28:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview Transport\n     */\n    \n    /**\n     * @augments SIP\n     * @class Transport\n     * @param {SIP.UA} ua\n     * @param {Object} server ws_server Object\n     */\n    module.exports = function (SIP, WebSocket) {\n    var Transport,\n      C = {\n        // Transport status codes\n        STATUS_READY:        0,\n        STATUS_DISCONNECTED: 1,\n        STATUS_ERROR:        2\n      };\n    \n    /**\n     * Compute an amount of time in seconds to wait before sending another\n     * keep-alive.\n     * @returns {Number}\n     */\n    function computeKeepAliveTimeout(upperBound) {\n      var lowerBound = upperBound * 0.8;\n      return 1000 * (Math.random() * (upperBound - lowerBound) + lowerBound);\n    }\n    \n    Transport = function(ua, server) {\n    \n      this.logger = ua.getLogger('sip.transport');\n      this.ua = ua;\n      this.ws = null;\n      this.server = server;\n      this.reconnection_attempts = 0;\n      this.closed = false;\n      this.connected = false;\n      this.reconnectTimer = null;\n      this.lastTransportError = {};\n    \n      this.keepAliveInterval = ua.configuration.keepAliveInterval;\n      this.keepAliveTimeout = null;\n      this.keepAliveTimer = null;\n    \n      this.ua.transport = this;\n    \n      // Connect\n      this.connect();\n    };\n    \n    Transport.prototype = {\n      /**\n       * Send a message.\n       * @param {SIP.OutgoingRequest|String} msg\n       * @returns {Boolean}\n       */\n      send: function(msg) {\n        var message = msg.toString();\n    \n        if(this.ws && this.ws.readyState === WebSocket.OPEN) {\n          if (this.ua.configuration.traceSip === true) {\n            this.logger.log('sending WebSocket message:\\n\\n' + message + '\\n');\n          }\n          this.ws.send(message);\n          return true;\n        } else {\n          this.logger.warn('unable to send message, WebSocket is not open');\n          return false;\n        }\n      },\n    \n      /**\n       * Send a keep-alive (a double-CRLF sequence).\n       * @private\n       * @returns {Boolean}\n       */\n      sendKeepAlive: function() {\n        if(this.keepAliveTimeout) { return; }\n    \n        this.keepAliveTimeout = SIP.Timers.setTimeout(function() {\n          this.ua.emit('keepAliveTimeout');\n        }.bind(this), 10000);\n    \n        return this.send('\\r\\n\\r\\n');\n      },\n    \n      /**\n       * Start sending keep-alives.\n       * @private\n       */\n      startSendingKeepAlives: function() {\n        if (this.keepAliveInterval && !this.keepAliveTimer) {\n          this.keepAliveTimer = SIP.Timers.setTimeout(function() {\n            this.sendKeepAlive();\n            this.keepAliveTimer = null;\n            this.startSendingKeepAlives();\n          }.bind(this), computeKeepAliveTimeout(this.keepAliveInterval));\n        }\n      },\n    \n      /**\n       * Stop sending keep-alives.\n       * @private\n       */\n      stopSendingKeepAlives: function() {\n        SIP.Timers.clearTimeout(this.keepAliveTimer);\n        SIP.Timers.clearTimeout(this.keepAliveTimeout);\n        this.keepAliveTimer = null;\n        this.keepAliveTimeout = null;\n      },\n    \n      /**\n      * Disconnect socket.\n      */\n      disconnect: function() {\n        if(this.ws) {\n          // Clear reconnectTimer\n          SIP.Timers.clearTimeout(this.reconnectTimer);\n    \n          this.stopSendingKeepAlives();\n    \n          this.closed = true;\n          this.logger.log('closing WebSocket ' + this.server.ws_uri);\n          this.ws.close();\n          this.ws = null;\n        }\n    \n        if (this.reconnectTimer !== null) {\n          SIP.Timers.clearTimeout(this.reconnectTimer);\n          this.reconnectTimer = null;\n          this.ua.emit('disconnected', {\n            transport: this,\n            code: this.lastTransportError.code,\n            reason: this.lastTransportError.reason\n          });\n        }\n      },\n    \n      /**\n      * Connect socket.\n      */\n      connect: function() {\n        var transport = this;\n    \n        if(this.ws && (this.ws.readyState === WebSocket.OPEN || this.ws.readyState === WebSocket.CONNECTING)) {\n          this.logger.log('WebSocket ' + this.server.ws_uri + ' is already connected');\n          return false;\n        }\n    \n        if(this.ws) {\n          this.ws.close();\n          this.ws = null;\n        }\n    \n        this.logger.log('connecting to WebSocket ' + this.server.ws_uri);\n        this.ua.onTransportConnecting(this,\n          (this.reconnection_attempts === 0)?1:this.reconnection_attempts);\n    \n        try {\n          this.ws = new WebSocket(this.server.ws_uri, 'sip');\n        } catch(e) {\n          this.logger.warn('error connecting to WebSocket ' + this.server.ws_uri + ': ' + e);\n        }\n    \n        this.ws.binaryType = 'arraybuffer';\n    \n        this.ws.onopen = function() {\n          transport.onOpen();\n        };\n    \n        this.ws.onclose = function(e) {\n          transport.onClose(e);\n          // Always cleanup. Eases GC, prevents potential memory leaks.\n          this.onopen = null;\n          this.onclose = null;\n          this.onmessage = null;\n          this.onerror = null;\n        };\n    \n        this.ws.onmessage = function(e) {\n          transport.onMessage(e);\n        };\n    \n        this.ws.onerror = function(e) {\n          transport.onError(e);\n        };\n      },\n    \n      // Transport Event Handlers\n    \n      /**\n      * @event\n      * @param {event} e\n      */\n      onOpen: function() {\n        this.connected = true;\n    \n        this.logger.log('WebSocket ' + this.server.ws_uri + ' connected');\n        // Clear reconnectTimer since we are not disconnected\n        if (this.reconnectTimer !== null) {\n          SIP.Timers.clearTimeout(this.reconnectTimer);\n          this.reconnectTimer = null;\n        }\n        // Reset reconnection_attempts\n        this.reconnection_attempts = 0;\n        // Disable closed\n        this.closed = false;\n        // Trigger onTransportConnected callback\n        this.ua.onTransportConnected(this);\n        // Start sending keep-alives\n        this.startSendingKeepAlives();\n      },\n    \n      /**\n      * @event\n      * @param {event} e\n      */\n      onClose: function(e) {\n        var connected_before = this.connected;\n    \n        this.lastTransportError.code = e.code;\n        this.lastTransportError.reason = e.reason;\n    \n        this.stopSendingKeepAlives();\n    \n        if (this.reconnection_attempts > 0) {\n          this.logger.log('Reconnection attempt ' + this.reconnection_attempts + ' failed (code: ' + e.code + (e.reason? '| reason: ' + e.reason : '') +')');\n          this.reconnect();\n        } else {\n          this.connected = false;\n          this.logger.log('WebSocket disconnected (code: ' + e.code + (e.reason? '| reason: ' + e.reason : '') +')');\n    \n          if(e.wasClean === false) {\n            this.logger.warn('WebSocket abrupt disconnection');\n          }\n          // Transport was connected\n          if(connected_before === true) {\n            this.ua.onTransportClosed(this);\n            // Check whether the user requested to close.\n            if(!this.closed) {\n              this.reconnect();\n            } else {\n              this.ua.emit('disconnected', {\n                transport: this,\n                code: this.lastTransportError.code,\n                reason: this.lastTransportError.reason\n              });\n    \n            }\n          } else {\n            // This is the first connection attempt\n            //Network error\n            this.ua.onTransportError(this);\n          }\n        }\n      },\n    \n      /**\n      * @event\n      * @param {event} e\n      */\n      onMessage: function(e) {\n        var message, transaction,\n          data = e.data;\n    \n        // CRLF Keep Alive response from server. Ignore it.\n        if(data === '\\r\\n') {\n          SIP.Timers.clearTimeout(this.keepAliveTimeout);\n          this.keepAliveTimeout = null;\n    \n          if (this.ua.configuration.traceSip === true) {\n            this.logger.log('received WebSocket message with CRLF Keep Alive response');\n          }\n    \n          return;\n        }\n    \n        // WebSocket binary message.\n        else if (typeof data !== 'string') {\n          try {\n            data = String.fromCharCode.apply(null, new Uint8Array(data));\n          } catch(evt) {\n            this.logger.warn('received WebSocket binary message failed to be converted into string, message discarded');\n            return;\n          }\n    \n          if (this.ua.configuration.traceSip === true) {\n            this.logger.log('received WebSocket binary message:\\n\\n' + data + '\\n');\n          }\n        }\n    \n        // WebSocket text message.\n        else {\n          if (this.ua.configuration.traceSip === true) {\n            this.logger.log('received WebSocket text message:\\n\\n' + data + '\\n');\n          }\n        }\n    \n        message = SIP.Parser.parseMessage(data, this.ua);\n    \n        if (!message) {\n          return;\n        }\n    \n        if(this.ua.status === SIP.UA.C.STATUS_USER_CLOSED && message instanceof SIP.IncomingRequest) {\n          return;\n        }\n    \n        // Do some sanity check\n        if(SIP.sanityCheck(message, this.ua, this)) {\n          if(message instanceof SIP.IncomingRequest) {\n            message.transport = this;\n            this.ua.receiveRequest(message);\n          } else if(message instanceof SIP.IncomingResponse) {\n            /* Unike stated in 18.1.2, if a response does not match\n            * any transaction, it is discarded here and no passed to the core\n            * in order to be discarded there.\n            */\n            switch(message.method) {\n              case SIP.C.INVITE:\n                transaction = this.ua.transactions.ict[message.via_branch];\n                if(transaction) {\n                  transaction.receiveResponse(message);\n                }\n                break;\n              case SIP.C.ACK:\n                // Just in case ;-)\n                break;\n              default:\n                transaction = this.ua.transactions.nict[message.via_branch];\n                if(transaction) {\n                  transaction.receiveResponse(message);\n                }\n                break;\n            }\n          }\n        }\n      },\n    \n      /**\n      * @event\n      * @param {event} e\n      */\n      onError: function(e) {\n        this.logger.warn('WebSocket connection error: ' + JSON.stringify(e));\n      },\n    \n      /**\n      * Reconnection attempt logic.\n      * @private\n      */\n      reconnect: function() {\n        var transport = this;\n    \n        this.reconnection_attempts += 1;\n    \n        if(this.reconnection_attempts > this.ua.configuration.wsServerMaxReconnection) {\n          this.logger.warn('maximum reconnection attempts for WebSocket ' + this.server.ws_uri);\n          this.ua.onTransportError(this);\n        } else if (this.reconnection_attempts === 1) {\n          this.logger.log('Connection to WebSocket ' + this.server.ws_uri + ' severed, attempting first reconnect');\n          transport.connect();\n        } else {\n          this.logger.log('trying to reconnect to WebSocket ' + this.server.ws_uri + ' (reconnection attempt ' + this.reconnection_attempts + ')');\n    \n          this.reconnectTimer = SIP.Timers.setTimeout(function() {\n            transport.connect();\n            transport.reconnectTimer = null;\n          }, this.ua.configuration.wsServerReconnectionTimeout * 1000);\n        }\n      }\n    };\n    \n    Transport.C = C;\n    return Transport;\n    };\n    \n    },{}],29:[function(require,module,exports){\n    (function (global){\n    \"use strict\";\n    /**\n     * @augments SIP\n     * @class Class creating a SIP User Agent.\n     * @param {function returning SIP.MediaHandler} [configuration.mediaHandlerFactory]\n     *        A function will be invoked by each of the UA's Sessions to build the MediaHandler for that Session.\n     *        If no (or a falsy) value is provided, each Session will use a default (WebRTC) MediaHandler.\n     *\n     * @param {Object} [configuration.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n     */\n    module.exports = function (SIP, environment) {\n    var UA,\n      C = {\n        // UA status codes\n        STATUS_INIT:                0,\n        STATUS_STARTING:            1,\n        STATUS_READY:               2,\n        STATUS_USER_CLOSED:         3,\n        STATUS_NOT_READY:           4,\n    \n        // UA error codes\n        CONFIGURATION_ERROR:  1,\n        NETWORK_ERROR:        2,\n    \n        ALLOWED_METHODS: [\n          'ACK',\n          'CANCEL',\n          'INVITE',\n          'MESSAGE',\n          'BYE',\n          'OPTIONS',\n          'INFO',\n          'NOTIFY',\n          'REFER'\n        ],\n    \n        ACCEPTED_BODY_TYPES: [\n          'application/sdp',\n          'application/dtmf-relay'\n        ],\n    \n        MAX_FORWARDS: 70,\n        TAG_LENGTH: 10\n      };\n    \n    UA = function(configuration) {\n      var self = this;\n    \n      // Helper function for forwarding events\n      function selfEmit(type) {\n        //registrationFailed handler is invoked with two arguments. Allow event handlers to be invoked with a variable no. of arguments\n        return self.emit.bind(self, type);\n      }\n    \n      // Set Accepted Body Types\n      C.ACCEPTED_BODY_TYPES = C.ACCEPTED_BODY_TYPES.toString();\n    \n      this.log = new SIP.LoggerFactory();\n      this.logger = this.getLogger('sip.ua');\n    \n      this.cache = {\n        credentials: {}\n      };\n    \n      this.configuration = {};\n      this.dialogs = {};\n    \n      //User actions outside any session/dialog (MESSAGE)\n      this.applicants = {};\n    \n      this.data = {};\n      this.sessions = {};\n      this.subscriptions = {};\n      this.earlySubscriptions = {};\n      this.transport = null;\n      this.contact = null;\n      this.status = C.STATUS_INIT;\n      this.error = null;\n      this.transactions = {\n        nist: {},\n        nict: {},\n        ist: {},\n        ict: {}\n      };\n    \n      this.transportRecoverAttempts = 0;\n      this.transportRecoveryTimer = null;\n    \n      Object.defineProperties(this, {\n        transactionsCount: {\n          get: function() {\n            var type,\n              transactions = ['nist','nict','ist','ict'],\n              count = 0;\n    \n            for (type in transactions) {\n              count += Object.keys(this.transactions[transactions[type]]).length;\n            }\n    \n            return count;\n          }\n        },\n    \n        nictTransactionsCount: {\n          get: function() {\n            return Object.keys(this.transactions['nict']).length;\n          }\n        },\n    \n        nistTransactionsCount: {\n          get: function() {\n            return Object.keys(this.transactions['nist']).length;\n          }\n        },\n    \n        ictTransactionsCount: {\n          get: function() {\n            return Object.keys(this.transactions['ict']).length;\n          }\n        },\n    \n        istTransactionsCount: {\n          get: function() {\n            return Object.keys(this.transactions['ist']).length;\n          }\n        }\n      });\n    \n      /**\n       * Load configuration\n       *\n       * @throws {SIP.Exceptions.ConfigurationError}\n       * @throws {TypeError}\n       */\n    \n      if(configuration === undefined) {\n        configuration = {};\n      } else if (typeof configuration === 'string' || configuration instanceof String) {\n        configuration = {\n          uri: configuration\n        };\n      }\n    \n      // Apply log configuration if present\n      if (configuration.log) {\n        if (configuration.log.hasOwnProperty('builtinEnabled')) {\n          this.log.builtinEnabled = configuration.log.builtinEnabled;\n        }\n    \n        if (configuration.log.hasOwnProperty('level')) {\n          this.log.level = configuration.log.level;\n        }\n    \n        if (configuration.log.hasOwnProperty('connector')) {\n          this.log.connector = configuration.log.connector;\n        }\n      }\n    \n      try {\n        this.loadConfig(configuration);\n      } catch(e) {\n        this.status = C.STATUS_NOT_READY;\n        this.error = C.CONFIGURATION_ERROR;\n        throw e;\n      }\n    \n      // Initialize registerContext\n      this.registerContext = new SIP.RegisterContext(this);\n      this.registerContext.on('failed', selfEmit('registrationFailed'));\n      this.registerContext.on('registered', selfEmit('registered'));\n      this.registerContext.on('unregistered', selfEmit('unregistered'));\n    \n      if(this.configuration.autostart) {\n        this.start();\n      }\n    };\n    UA.prototype = Object.create(SIP.EventEmitter.prototype);\n    \n    //=================\n    //  High Level API\n    //=================\n    \n    UA.prototype.register = function(options) {\n      this.configuration.register = true;\n      this.registerContext.register(options);\n    \n      return this;\n    };\n    \n    /**\n     * Unregister.\n     *\n     * @param {Boolean} [all] unregister all user bindings.\n     *\n     */\n    UA.prototype.unregister = function(options) {\n      this.configuration.register = false;\n    \n      var context = this.registerContext;\n      this.afterConnected(context.unregister.bind(context, options));\n    \n      return this;\n    };\n    \n    UA.prototype.isRegistered = function() {\n      return this.registerContext.registered;\n    };\n    \n    /**\n     * Connection state.\n     * @param {Boolean}\n     */\n    UA.prototype.isConnected = function() {\n      return this.transport ? this.transport.connected : false;\n    };\n    \n    UA.prototype.afterConnected = function afterConnected (callback) {\n      if (this.isConnected()) {\n        callback();\n      } else {\n        this.once('connected', callback);\n      }\n    };\n    \n    /**\n     * Make an outgoing call.\n     *\n     * @param {String} target\n     * @param {Object} views\n     * @param {Object} [options.media] gets passed to SIP.MediaHandler.getDescription as mediaHint\n     *\n     * @throws {TypeError}\n     *\n     */\n    UA.prototype.invite = function(target, options) {\n      var context = new SIP.InviteClientContext(this, target, options);\n    \n      this.afterConnected(context.invite.bind(context));\n      this.emit('inviteSent', context);\n      return context;\n    };\n    \n    UA.prototype.subscribe = function(target, event, options) {\n      var sub = new SIP.Subscription(this, target, event, options);\n    \n      this.afterConnected(sub.subscribe.bind(sub));\n      return sub;\n    };\n    \n    /**\n     * Send a message.\n     *\n     * @param {String} target\n     * @param {String} body\n     * @param {Object} [options]\n     *\n     * @throws {TypeError}\n     *\n     */\n    UA.prototype.message = function(target, body, options) {\n      if (body === undefined) {\n        throw new TypeError('Not enough arguments');\n      }\n    \n      // There is no Message module, so it is okay that the UA handles defaults here.\n      options = Object.create(options || Object.prototype);\n      options.contentType || (options.contentType = 'text/plain');\n      options.body = body;\n    \n      return this.request(SIP.C.MESSAGE, target, options);\n    };\n    \n    UA.prototype.request = function (method, target, options) {\n      var req = new SIP.ClientContext(this, method, target, options);\n    \n      this.afterConnected(req.send.bind(req));\n      return req;\n    };\n    \n    /**\n     * Gracefully close.\n     *\n     */\n    UA.prototype.stop = function() {\n      var session, subscription, applicant,\n        ua = this;\n    \n      function transactionsListener() {\n        if (ua.nistTransactionsCount === 0 && ua.nictTransactionsCount === 0) {\n            ua.removeListener('transactionDestroyed', transactionsListener);\n            ua.transport.disconnect();\n        }\n      }\n    \n      this.logger.log('user requested closure...');\n    \n      if(this.status === C.STATUS_USER_CLOSED) {\n        this.logger.warn('UA already closed');\n        return this;\n      }\n    \n      // Clear transportRecoveryTimer\n      SIP.Timers.clearTimeout(this.transportRecoveryTimer);\n    \n      // Close registerContext\n      this.logger.log('closing registerContext');\n      this.registerContext.close();\n    \n      // Run  _terminate_ on every Session\n      for(session in this.sessions) {\n        this.logger.log('closing session ' + session);\n        this.sessions[session].terminate();\n      }\n    \n      //Run _close_ on every confirmed Subscription\n      for(subscription in this.subscriptions) {\n        this.logger.log('unsubscribing from subscription ' + subscription);\n        this.subscriptions[subscription].close();\n      }\n    \n      //Run _close_ on every early Subscription\n      for(subscription in this.earlySubscriptions) {\n        this.logger.log('unsubscribing from early subscription ' + subscription);\n        this.earlySubscriptions[subscription].close();\n      }\n    \n      // Run  _close_ on every applicant\n      for(applicant in this.applicants) {\n        this.applicants[applicant].close();\n      }\n    \n      this.status = C.STATUS_USER_CLOSED;\n    \n      /*\n       * If the remaining transactions are all INVITE transactions, there is no need to\n       * wait anymore because every session has already been closed by this method.\n       * - locally originated sessions where terminated (CANCEL or BYE)\n       * - remotely originated sessions where rejected (4XX) or terminated (BYE)\n       * Remaining INVITE transactions belong tho sessions that where answered. This are in\n       * 'accepted' state due to timers 'L' and 'M' defined in [RFC 6026]\n       */\n      if (this.nistTransactionsCount === 0 && this.nictTransactionsCount === 0) {\n        this.transport.disconnect();\n      } else {\n        this.on('transactionDestroyed', transactionsListener);\n      }\n    \n      if (typeof environment.removeEventListener === 'function') {\n        // Google Chrome Packaged Apps don't allow 'unload' listeners:\n        // unload is not available in packaged apps\n        if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n          environment.removeEventListener('unload', this.environListener);\n        }\n      }\n    \n      return this;\n    };\n    \n    /**\n     * Connect to the WS server if status = STATUS_INIT.\n     * Resume UA after being closed.\n     *\n     */\n    UA.prototype.start = function() {\n      var server;\n    \n      this.logger.log('user requested startup...');\n      if (this.status === C.STATUS_INIT) {\n        server = this.getNextWsServer();\n        this.status = C.STATUS_STARTING;\n        new SIP.Transport(this, server);\n      } else if(this.status === C.STATUS_USER_CLOSED) {\n        this.logger.log('resuming');\n        this.status = C.STATUS_READY;\n        this.transport.connect();\n      } else if (this.status === C.STATUS_STARTING) {\n        this.logger.log('UA is in STARTING status, not opening new connection');\n      } else if (this.status === C.STATUS_READY) {\n        this.logger.log('UA is in READY status, not resuming');\n      } else {\n        this.logger.error('Connection is down. Auto-Recovery system is trying to connect');\n      }\n    \n      if (this.configuration.autostop && typeof environment.addEventListener === 'function') {\n        // Google Chrome Packaged Apps don't allow 'unload' listeners:\n        // unload is not available in packaged apps\n        if (!(global.chrome && global.chrome.app && global.chrome.app.runtime)) {\n          this.environListener = this.stop.bind(this);\n          environment.addEventListener('unload', this.environListener);\n        }\n      }\n    \n      return this;\n    };\n    \n    /**\n     * Normalize a string into a valid SIP request URI\n     *\n     * @param {String} target\n     *\n     * @returns {SIP.URI|undefined}\n     */\n    UA.prototype.normalizeTarget = function(target) {\n      return SIP.Utils.normalizeTarget(target, this.configuration.hostportParams);\n    };\n    \n    \n    //===============================\n    //  Private (For internal use)\n    //===============================\n    \n    UA.prototype.saveCredentials = function(credentials) {\n      this.cache.credentials[credentials.realm] = this.cache.credentials[credentials.realm] || {};\n      this.cache.credentials[credentials.realm][credentials.uri] = credentials;\n    \n      return this;\n    };\n    \n    UA.prototype.getCredentials = function(request) {\n      var realm, credentials;\n    \n      realm = request.ruri.host;\n    \n      if (this.cache.credentials[realm] && this.cache.credentials[realm][request.ruri]) {\n        credentials = this.cache.credentials[realm][request.ruri];\n        credentials.method = request.method;\n      }\n    \n      return credentials;\n    };\n    \n    UA.prototype.getLogger = function(category, label) {\n      return this.log.getLogger(category, label);\n    };\n    \n    \n    //==============================\n    // Event Handlers\n    //==============================\n    \n    /**\n     * Transport Close event\n     * @private\n     * @event\n     * @param {SIP.Transport} transport.\n     */\n    UA.prototype.onTransportClosed = function(transport) {\n      // Run _onTransportError_ callback on every client transaction using _transport_\n      var type, idx, length,\n        client_transactions = ['nict', 'ict', 'nist', 'ist'];\n    \n      transport.server.status = SIP.Transport.C.STATUS_DISCONNECTED;\n      this.logger.log('connection state set to '+ SIP.Transport.C.STATUS_DISCONNECTED);\n    \n      length = client_transactions.length;\n      for (type = 0; type < length; type++) {\n        for(idx in this.transactions[client_transactions[type]]) {\n          this.transactions[client_transactions[type]][idx].onTransportError();\n        }\n      }\n    \n      // Close sessions if GRUU is not being used\n      if (!this.contact.pub_gruu) {\n        this.closeSessionsOnTransportError();\n      }\n    \n    };\n    \n    /**\n     * Unrecoverable transport event.\n     * Connection reattempt logic has been done and didn't success.\n     * @private\n     * @event\n     * @param {SIP.Transport} transport.\n     */\n    UA.prototype.onTransportError = function(transport) {\n      var server;\n    \n      this.logger.log('transport ' + transport.server.ws_uri + ' failed | connection state set to '+ SIP.Transport.C.STATUS_ERROR);\n    \n      // Close sessions.\n      //Mark this transport as 'down'\n      transport.server.status = SIP.Transport.C.STATUS_ERROR;\n    \n      this.emit('disconnected', {\n        transport: transport\n      });\n    \n      // try the next transport if the UA isn't closed\n      if(this.status === C.STATUS_USER_CLOSED) {\n        return;\n      }\n    \n      server = this.getNextWsServer();\n    \n      if(server) {\n        new SIP.Transport(this, server);\n      }else {\n        this.closeSessionsOnTransportError();\n        if (!this.error || this.error !== C.NETWORK_ERROR) {\n          this.status = C.STATUS_NOT_READY;\n          this.error = C.NETWORK_ERROR;\n        }\n        // Transport Recovery process\n        this.recoverTransport();\n      }\n    };\n    \n    /**\n     * Transport connection event.\n     * @private\n     * @event\n     * @param {SIP.Transport} transport.\n     */\n    UA.prototype.onTransportConnected = function(transport) {\n      this.transport = transport;\n    \n      // Reset transport recovery counter\n      this.transportRecoverAttempts = 0;\n    \n      transport.server.status = SIP.Transport.C.STATUS_READY;\n      this.logger.log('connection state set to '+ SIP.Transport.C.STATUS_READY);\n    \n      if(this.status === C.STATUS_USER_CLOSED) {\n        return;\n      }\n    \n      this.status = C.STATUS_READY;\n      this.error = null;\n    \n      if(this.configuration.register) {\n        this.configuration.authenticationFactory.initialize().then(function () {\n          this.registerContext.onTransportConnected();\n        }.bind(this));\n      }\n    \n      this.emit('connected', {\n        transport: transport\n      });\n    };\n    \n    \n    /**\n     * Transport connecting event\n     * @private\n     * @param {SIP.Transport} transport.\n     * #param {Integer} attempts.\n     */\n      UA.prototype.onTransportConnecting = function(transport, attempts) {\n        this.emit('connecting', {\n          transport: transport,\n          attempts: attempts\n        });\n      };\n    \n    \n    /**\n     * new Transaction\n     * @private\n     * @param {SIP.Transaction} transaction.\n     */\n    UA.prototype.newTransaction = function(transaction) {\n      this.transactions[transaction.type][transaction.id] = transaction;\n      this.emit('newTransaction', {transaction: transaction});\n    };\n    \n    \n    /**\n     * destroy Transaction\n     * @private\n     * @param {SIP.Transaction} transaction.\n     */\n    UA.prototype.destroyTransaction = function(transaction) {\n      delete this.transactions[transaction.type][transaction.id];\n      this.emit('transactionDestroyed', {\n        transaction: transaction\n      });\n    };\n    \n    \n    //=========================\n    // receiveRequest\n    //=========================\n    \n    /**\n     * Request reception\n     * @private\n     * @param {SIP.IncomingRequest} request.\n     */\n    UA.prototype.receiveRequest = function(request) {\n      var dialog, session, message, earlySubscription,\n        method = request.method,\n        transaction,\n        replaces,\n        replacedDialog,\n        self = this;\n    \n      function ruriMatches (uri) {\n        return uri && uri.user === request.ruri.user;\n      }\n    \n      // Check that request URI points to us\n      if(!(ruriMatches(this.configuration.uri) ||\n           ruriMatches(this.contact.uri) ||\n           ruriMatches(this.contact.pub_gruu) ||\n           ruriMatches(this.contact.temp_gruu))) {\n        this.logger.warn('Request-URI does not point to us');\n        if (request.method !== SIP.C.ACK) {\n          request.reply_sl(404);\n        }\n        return;\n      }\n    \n      // Check request URI scheme\n      if(request.ruri.scheme === SIP.C.SIPS) {\n        request.reply_sl(416);\n        return;\n      }\n    \n      // Check transaction\n      if(SIP.Transactions.checkTransaction(this, request)) {\n        return;\n      }\n    \n      /* RFC3261 12.2.2\n       * Requests that do not change in any way the state of a dialog may be\n       * received within a dialog (for example, an OPTIONS request).\n       * They are processed as if they had been received outside the dialog.\n       */\n      if(method === SIP.C.OPTIONS) {\n        new SIP.Transactions.NonInviteServerTransaction(request, this);\n        request.reply(200, null, [\n          'Allow: '+ SIP.UA.C.ALLOWED_METHODS.toString(),\n          'Accept: '+ C.ACCEPTED_BODY_TYPES\n        ]);\n      } else if (method === SIP.C.MESSAGE) {\n        message = new SIP.ServerContext(this, request);\n        message.body = request.body;\n        message.content_type = request.getHeader('Content-Type') || 'text/plain';\n    \n        request.reply(200, null);\n        this.emit('message', message);\n      } else if (method !== SIP.C.INVITE &&\n                 method !== SIP.C.ACK) {\n        // Let those methods pass through to normal processing for now.\n        transaction = new SIP.ServerContext(this, request);\n      }\n    \n      // Initial Request\n      if(!request.to_tag) {\n        switch(method) {\n          case SIP.C.INVITE:\n            replaces =\n              this.configuration.replaces !== SIP.C.supported.UNSUPPORTED &&\n              request.parseHeader('replaces');\n    \n            if (replaces) {\n              replacedDialog = this.dialogs[replaces.call_id + replaces.replaces_to_tag + replaces.replaces_from_tag];\n    \n              if (!replacedDialog) {\n                //Replaced header without a matching dialog, reject\n                request.reply_sl(481, null);\n                return;\n              } else if (replacedDialog.owner.status === SIP.Session.C.STATUS_TERMINATED) {\n                request.reply_sl(603, null);\n                return;\n              } else if (replacedDialog.state === SIP.Dialog.C.STATUS_CONFIRMED && replaces.early_only) {\n                request.reply_sl(486, null);\n                return;\n              }\n            }\n    \n            var isMediaSupported = this.configuration.mediaHandlerFactory.isSupported;\n            if(!isMediaSupported || isMediaSupported()) {\n              session = new SIP.InviteServerContext(this, request);\n              session.replacee = replacedDialog && replacedDialog.owner;\n              session.on('invite', function() {\n                self.emit('invite', this);\n              });\n            } else {\n              this.logger.warn('INVITE received but WebRTC is not supported');\n              request.reply(488);\n            }\n            break;\n          case SIP.C.BYE:\n            // Out of dialog BYE received\n            request.reply(481);\n            break;\n          case SIP.C.CANCEL:\n            session = this.findSession(request);\n            if(session) {\n              session.receiveRequest(request);\n            } else {\n              this.logger.warn('received CANCEL request for a non existent session');\n            }\n            break;\n          case SIP.C.ACK:\n            /* Absorb it.\n             * ACK request without a corresponding Invite Transaction\n             * and without To tag.\n             */\n            break;\n          case SIP.C.NOTIFY:\n            if (this.configuration.allowLegacyNotifications && this.listeners('notify').length > 0) {\n              request.reply(200, null);\n              self.emit('notify', {request: request});\n            } else {\n              request.reply(481, 'Subscription does not exist');\n            }\n            break;\n          default:\n            request.reply(405);\n            break;\n        }\n      }\n      // In-dialog request\n      else {\n        dialog = this.findDialog(request);\n    \n        if(dialog) {\n          if (method === SIP.C.INVITE) {\n            new SIP.Transactions.InviteServerTransaction(request, this);\n          }\n          dialog.receiveRequest(request);\n        } else if (method === SIP.C.NOTIFY) {\n          session = this.findSession(request);\n          earlySubscription = this.findEarlySubscription(request);\n          if(session) {\n            session.receiveRequest(request);\n          } else if(earlySubscription) {\n            earlySubscription.receiveRequest(request);\n          } else {\n            this.logger.warn('received NOTIFY request for a non existent session or subscription');\n            request.reply(481, 'Subscription does not exist');\n          }\n        }\n        /* RFC3261 12.2.2\n         * Request with to tag, but no matching dialog found.\n         * Exception: ACK for an Invite request for which a dialog has not\n         * been created.\n         */\n        else {\n          if(method !== SIP.C.ACK) {\n            request.reply(481);\n          }\n        }\n      }\n    };\n    \n    //=================\n    // Utils\n    //=================\n    \n    /**\n     * Get the session to which the request belongs to, if any.\n     * @private\n     * @param {SIP.IncomingRequest} request.\n     * @returns {SIP.OutgoingSession|SIP.IncomingSession|null}\n     */\n    UA.prototype.findSession = function(request) {\n      return this.sessions[request.call_id + request.from_tag] ||\n              this.sessions[request.call_id + request.to_tag] ||\n              null;\n    };\n    \n    /**\n     * Get the dialog to which the request belongs to, if any.\n     * @private\n     * @param {SIP.IncomingRequest}\n     * @returns {SIP.Dialog|null}\n     */\n    UA.prototype.findDialog = function(request) {\n      return this.dialogs[request.call_id + request.from_tag + request.to_tag] ||\n              this.dialogs[request.call_id + request.to_tag + request.from_tag] ||\n              null;\n    };\n    \n    /**\n     * Get the subscription which has not been confirmed to which the request belongs to, if any\n     * @private\n     * @param {SIP.IncomingRequest}\n     * @returns {SIP.Subscription|null}\n     */\n    UA.prototype.findEarlySubscription = function(request) {\n      return this.earlySubscriptions[request.call_id + request.to_tag + request.getHeader('event')] || null;\n    };\n    \n    /**\n     * Retrieve the next server to which connect.\n     * @private\n     * @returns {Object} ws_server\n     */\n    UA.prototype.getNextWsServer = function() {\n      // Order servers by weight\n      var idx, length, ws_server,\n        candidates = [];\n    \n      length = this.configuration.wsServers.length;\n      for (idx = 0; idx < length; idx++) {\n        ws_server = this.configuration.wsServers[idx];\n    \n        if (ws_server.status === SIP.Transport.C.STATUS_ERROR) {\n          continue;\n        } else if (candidates.length === 0) {\n          candidates.push(ws_server);\n        } else if (ws_server.weight > candidates[0].weight) {\n          candidates = [ws_server];\n        } else if (ws_server.weight === candidates[0].weight) {\n          candidates.push(ws_server);\n        }\n      }\n    \n      idx = Math.floor(Math.random() * candidates.length);\n    \n      return candidates[idx];\n    };\n    \n    /**\n     * Close all sessions on transport error.\n     * @private\n     */\n    UA.prototype.closeSessionsOnTransportError = function() {\n      var idx;\n    \n      // Run _transportError_ for every Session\n      for(idx in this.sessions) {\n        this.sessions[idx].onTransportError();\n      }\n      // Call registerContext _onTransportClosed_\n      this.registerContext.onTransportClosed();\n    };\n    \n    UA.prototype.recoverTransport = function(ua) {\n      var idx, length, k, nextRetry, count, server;\n    \n      ua = ua || this;\n      count = ua.transportRecoverAttempts;\n    \n      length = ua.configuration.wsServers.length;\n      for (idx = 0; idx < length; idx++) {\n        ua.configuration.wsServers[idx].status = 0;\n      }\n    \n      server = ua.getNextWsServer();\n    \n      k = Math.floor((Math.random() * Math.pow(2,count)) +1);\n      nextRetry = k * ua.configuration.connectionRecoveryMinInterval;\n    \n      if (nextRetry > ua.configuration.connectionRecoveryMaxInterval) {\n        this.logger.log('time for next connection attempt exceeds connectionRecoveryMaxInterval, resetting counter');\n        nextRetry = ua.configuration.connectionRecoveryMinInterval;\n        count = 0;\n      }\n    \n      this.logger.log('next connection attempt in '+ nextRetry +' seconds');\n    \n      this.transportRecoveryTimer = SIP.Timers.setTimeout(\n        function(){\n          ua.transportRecoverAttempts = count + 1;\n          new SIP.Transport(ua, server);\n        }, nextRetry * 1000);\n    };\n    \n    function checkAuthenticationFactory (authenticationFactory) {\n      if (!(authenticationFactory instanceof Function)) {\n        return;\n      }\n      if (!authenticationFactory.initialize) {\n        authenticationFactory.initialize = function initialize () {\n          return SIP.Utils.Promise.resolve();\n        };\n      }\n      return authenticationFactory;\n    }\n    \n    /**\n     * Configuration load.\n     * @private\n     * returns {Boolean}\n     */\n    UA.prototype.loadConfig = function(configuration) {\n      // Settings and default values\n      var parameter, value, checked_value, hostportParams, registrarServer,\n        settings = {\n          /* Host address\n          * Value to be set in Via sent_by and host part of Contact FQDN\n          */\n          viaHost: SIP.Utils.createRandomToken(12) + '.invalid',\n    \n          uri: new SIP.URI('sip', 'anonymous.' + SIP.Utils.createRandomToken(6), 'anonymous.invalid', null, null),\n          wsServers: [{\n            scheme: 'WSS',\n            sip_uri: '<sip:edge.sip.onsip.com;transport=ws;lr>',\n            status: 0,\n            weight: 0,\n            ws_uri: 'wss://edge.sip.onsip.com'\n          }],\n    \n          //Custom Configuration Settings\n          custom: {},\n    \n          //Display name\n          displayName: '',\n    \n          // Password\n          password: null,\n    \n          // Registration parameters\n          registerExpires: 600,\n          register: true,\n          registrarServer: null,\n    \n          // Transport related parameters\n          wsServerMaxReconnection: 3,\n          wsServerReconnectionTimeout: 4,\n    \n          connectionRecoveryMinInterval: 2,\n          connectionRecoveryMaxInterval: 30,\n    \n          keepAliveInterval: 0,\n    \n          extraSupported: [],\n    \n          usePreloadedRoute: false,\n    \n          //string to be inserted into User-Agent request header\n          userAgentString: SIP.C.USER_AGENT,\n    \n          // Session parameters\n          iceCheckingTimeout: 5000,\n          noAnswerTimeout: 60,\n          stunServers: ['stun:stun.l.google.com:19302'],\n          turnServers: [],\n    \n          // Logging parameters\n          traceSip: false,\n    \n          // Hacks\n          hackViaTcp: false,\n          hackIpInContact: false,\n          hackWssInTransport: false,\n          hackAllowUnregisteredOptionTags: false,\n          hackCleanJitsiSdpImageattr: false,\n          hackStripTcp: false,\n    \n          contactTransport: 'ws',\n          forceRport: false,\n    \n          //autostarting\n          autostart: true,\n          autostop: true,\n    \n          //Reliable Provisional Responses\n          rel100: SIP.C.supported.UNSUPPORTED,\n    \n          // Replaces header (RFC 3891)\n          // http://tools.ietf.org/html/rfc3891\n          replaces: SIP.C.supported.UNSUPPORTED,\n    \n          mediaHandlerFactory: SIP.WebRTC.MediaHandler.defaultFactory,\n    \n          authenticationFactory: checkAuthenticationFactory(function authenticationFactory (ua) {\n            return new SIP.DigestAuthentication(ua);\n          }),\n    \n          allowLegacyNotifications: false\n        };\n    \n      // Pre-Configuration\n      function aliasUnderscored (parameter, logger) {\n        var underscored = parameter.replace(/([a-z][A-Z])/g, function (m) {\n          return m[0] + '_' + m[1].toLowerCase();\n        });\n    \n        if (parameter === underscored) {\n          return;\n        }\n    \n        var hasParameter = configuration.hasOwnProperty(parameter);\n        if (configuration.hasOwnProperty(underscored)) {\n          logger.warn(underscored + ' is deprecated, please use ' + parameter);\n          if (hasParameter) {\n            logger.warn(parameter + ' overriding ' + underscored);\n          }\n        }\n    \n        configuration[parameter] = hasParameter ? configuration[parameter] : configuration[underscored];\n      }\n    \n      var configCheck = this.getConfigurationCheck();\n    \n      // Check Mandatory parameters\n      for(parameter in configCheck.mandatory) {\n        aliasUnderscored(parameter, this.logger);\n        if(!configuration.hasOwnProperty(parameter)) {\n          throw new SIP.Exceptions.ConfigurationError(parameter);\n        } else {\n          value = configuration[parameter];\n          checked_value = configCheck.mandatory[parameter](value);\n          if (checked_value !== undefined) {\n            settings[parameter] = checked_value;\n          } else {\n            throw new SIP.Exceptions.ConfigurationError(parameter, value);\n          }\n        }\n      }\n    \n      SIP.Utils.optionsOverride(configuration, 'rel100', 'reliable', true, this.logger, SIP.C.supported.UNSUPPORTED);\n    \n      var emptyArraysAllowed = ['stunServers', 'turnServers'];\n    \n      // Check Optional parameters\n      for(parameter in configCheck.optional) {\n        aliasUnderscored(parameter, this.logger);\n        if(configuration.hasOwnProperty(parameter)) {\n          value = configuration[parameter];\n    \n          // If the parameter value is an empty array, but shouldn't be, apply its default value.\n          if (value instanceof Array && value.length === 0 && emptyArraysAllowed.indexOf(parameter) < 0) { continue; }\n    \n          // If the parameter value is null, empty string, or undefined then apply its default value.\n          if(value === null || value === \"\" || value === undefined) { continue; }\n          // If it's a number with NaN value then also apply its default value.\n          // NOTE: JS does not allow \"value === NaN\", the following does the work:\n          else if(typeof(value) === 'number' && isNaN(value)) { continue; }\n    \n          checked_value = configCheck.optional[parameter](value);\n          if (checked_value !== undefined) {\n            settings[parameter] = checked_value;\n          } else {\n            throw new SIP.Exceptions.ConfigurationError(parameter, value);\n          }\n        }\n      }\n    \n      // Sanity Checks\n    \n      // Connection recovery intervals\n      if(settings.connectionRecoveryMaxInterval < settings.connectionRecoveryMinInterval) {\n        throw new SIP.Exceptions.ConfigurationError('connectionRecoveryMaxInterval', settings.connectionRecoveryMaxInterval);\n      }\n    \n      // Post Configuration Process\n    \n      // Allow passing 0 number as displayName.\n      if (settings.displayName === 0) {\n        settings.displayName = '0';\n      }\n    \n      // Instance-id for GRUU\n      if (!settings.instanceId) {\n        settings.instanceId = SIP.Utils.newUUID();\n      }\n    \n      // sipjsId instance parameter. Static random tag of length 5\n      settings.sipjsId = SIP.Utils.createRandomToken(5);\n    \n      // String containing settings.uri without scheme and user.\n      hostportParams = settings.uri.clone();\n      hostportParams.user = null;\n      settings.hostportParams = hostportParams.toRaw().replace(/^sip:/i, '');\n    \n      /* Check whether authorizationUser is explicitly defined.\n       * Take 'settings.uri.user' value if not.\n       */\n      if (!settings.authorizationUser) {\n        settings.authorizationUser = settings.uri.user;\n      }\n    \n      /* If no 'registrarServer' is set use the 'uri' value without user portion. */\n      if (!settings.registrarServer) {\n        registrarServer = settings.uri.clone();\n        registrarServer.user = null;\n        settings.registrarServer = registrarServer;\n      }\n    \n      // User noAnswerTimeout\n      settings.noAnswerTimeout = settings.noAnswerTimeout * 1000;\n    \n      // Via Host\n      if (settings.hackIpInContact) {\n        if (typeof settings.hackIpInContact === 'boolean') {\n          settings.viaHost = SIP.Utils.getRandomTestNetIP();\n        }\n        else if (typeof settings.hackIpInContact === 'string') {\n          settings.viaHost = settings.hackIpInContact;\n        }\n      }\n    \n      // Contact transport parameter\n      if (settings.hackWssInTransport) {\n        settings.contactTransport = 'wss';\n      }\n    \n      this.contact = {\n        pub_gruu: null,\n        temp_gruu: null,\n        uri: new SIP.URI('sip', SIP.Utils.createRandomToken(8), settings.viaHost, null, {transport: settings.contactTransport}),\n        toString: function(options){\n          options = options || {};\n    \n          var\n            anonymous = options.anonymous || null,\n            outbound = options.outbound || null,\n            contact = '<';\n    \n          if (anonymous) {\n            contact += (this.temp_gruu || ('sip:anonymous@anonymous.invalid;transport='+settings.contactTransport)).toString();\n          } else {\n            contact += (this.pub_gruu || this.uri).toString();\n          }\n    \n          if (outbound) {\n            contact += ';ob';\n          }\n    \n          contact += '>';\n    \n          return contact;\n        }\n      };\n    \n      // media overrides mediaConstraints\n      SIP.Utils.optionsOverride(settings, 'media', 'mediaConstraints', true, this.logger);\n    \n      var skeleton = {};\n      // Fill the value of the configuration_skeleton\n      for(parameter in settings) {\n        skeleton[parameter] = {\n          value: settings[parameter],\n          writable: (parameter === 'register' || parameter === 'custom'),\n          configurable: false\n        };\n      }\n    \n      Object.defineProperties(this.configuration, skeleton);\n    \n      this.logger.log('configuration parameters after validation:');\n      for(parameter in settings) {\n        switch(parameter) {\n          case 'uri':\n          case 'registrarServer':\n          case 'mediaHandlerFactory':\n            this.logger.log('· ' + parameter + ': ' + settings[parameter]);\n            break;\n          case 'password':\n            this.logger.log('· ' + parameter + ': ' + 'NOT SHOWN');\n            break;\n          default:\n            this.logger.log('· ' + parameter + ': ' + JSON.stringify(settings[parameter]));\n        }\n      }\n    \n      return;\n    };\n    \n    /**\n     * Configuration checker.\n     * @private\n     * @return {Boolean}\n     */\n    UA.prototype.getConfigurationCheck = function () {\n      return {\n        mandatory: {\n        },\n    \n        optional: {\n    \n          uri: function(uri) {\n            var parsed;\n    \n            if (!(/^sip:/i).test(uri)) {\n              uri = SIP.C.SIP + ':' + uri;\n            }\n            parsed = SIP.URI.parse(uri);\n    \n            if(!parsed) {\n              return;\n            } else if(!parsed.user) {\n              return;\n            } else {\n              return parsed;\n            }\n          },\n    \n          //Note: this function used to call 'this.logger.error' but calling 'this' with anything here is invalid\n          wsServers: function(wsServers) {\n            var idx, length, url;\n    \n            /* Allow defining wsServers parameter as:\n             *  String: \"host\"\n             *  Array of Strings: [\"host1\", \"host2\"]\n             *  Array of Objects: [{ws_uri:\"host1\", weight:1}, {ws_uri:\"host2\", weight:0}]\n             *  Array of Objects and Strings: [{ws_uri:\"host1\"}, \"host2\"]\n             */\n            if (typeof wsServers === 'string') {\n              wsServers = [{ws_uri: wsServers}];\n            } else if (wsServers instanceof Array) {\n              length = wsServers.length;\n              for (idx = 0; idx < length; idx++) {\n                if (typeof wsServers[idx] === 'string'){\n                  wsServers[idx] = {ws_uri: wsServers[idx]};\n                }\n              }\n            } else {\n              return;\n            }\n    \n            if (wsServers.length === 0) {\n              return false;\n            }\n    \n            length = wsServers.length;\n            for (idx = 0; idx < length; idx++) {\n              if (!wsServers[idx].ws_uri) {\n                return;\n              }\n              if (wsServers[idx].weight && !Number(wsServers[idx].weight)) {\n                return;\n              }\n    \n              url = SIP.Grammar.parse(wsServers[idx].ws_uri, 'absoluteURI');\n    \n              if(url === -1) {\n                return;\n              } else if(['wss', 'ws', 'udp'].indexOf(url.scheme) < 0) {\n                return;\n              } else {\n                wsServers[idx].sip_uri = '<sip:' + url.host + (url.port ? ':' + url.port : '') + ';transport=' + url.scheme.replace(/^wss$/i, 'ws') + ';lr>';\n    \n                if (!wsServers[idx].weight) {\n                  wsServers[idx].weight = 0;\n                }\n    \n                wsServers[idx].status = 0;\n                wsServers[idx].scheme = url.scheme.toUpperCase();\n              }\n            }\n            return wsServers;\n          },\n    \n          authorizationUser: function(authorizationUser) {\n            if(SIP.Grammar.parse('\"'+ authorizationUser +'\"', 'quoted_string') === -1) {\n              return;\n            } else {\n              return authorizationUser;\n            }\n          },\n    \n          connectionRecoveryMaxInterval: function(connectionRecoveryMaxInterval) {\n            var value;\n            if(SIP.Utils.isDecimal(connectionRecoveryMaxInterval)) {\n              value = Number(connectionRecoveryMaxInterval);\n              if(value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          connectionRecoveryMinInterval: function(connectionRecoveryMinInterval) {\n            var value;\n            if(SIP.Utils.isDecimal(connectionRecoveryMinInterval)) {\n              value = Number(connectionRecoveryMinInterval);\n              if(value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          displayName: function(displayName) {\n            if(SIP.Grammar.parse('\"' + displayName + '\"', 'displayName') === -1) {\n              return;\n            } else {\n              return displayName;\n            }\n          },\n    \n          hackViaTcp: function(hackViaTcp) {\n            if (typeof hackViaTcp === 'boolean') {\n              return hackViaTcp;\n            }\n          },\n    \n          hackIpInContact: function(hackIpInContact) {\n            if (typeof hackIpInContact === 'boolean') {\n              return hackIpInContact;\n            }\n            else if (typeof hackIpInContact === 'string' && SIP.Grammar.parse(hackIpInContact, 'host') !== -1) {\n              return hackIpInContact;\n            }\n          },\n    \n          iceCheckingTimeout: function(iceCheckingTimeout) {\n            if(SIP.Utils.isDecimal(iceCheckingTimeout)) {\n              return Math.max(500, iceCheckingTimeout);\n            }\n          },\n    \n          hackWssInTransport: function(hackWssInTransport) {\n            if (typeof hackWssInTransport === 'boolean') {\n              return hackWssInTransport;\n            }\n          },\n    \n          hackAllowUnregisteredOptionTags: function(hackAllowUnregisteredOptionTags) {\n            if (typeof hackAllowUnregisteredOptionTags === 'boolean') {\n              return hackAllowUnregisteredOptionTags;\n            }\n          },\n    \n          hackCleanJitsiSdpImageattr: function(hackCleanJitsiSdpImageattr) {\n            if (typeof hackCleanJitsiSdpImageattr === 'boolean') {\n              return hackCleanJitsiSdpImageattr;\n            }\n          },\n    \n          hackStripTcp: function(hackStripTcp) {\n            if (typeof hackStripTcp === 'boolean') {\n              return hackStripTcp;\n            }\n          },\n    \n          contactTransport: function(contactTransport) {\n            if (typeof contactTransport === 'string') {\n              return contactTransport;\n            }\n          },\n    \n          forceRport: function(forceRport) {\n            if (typeof forceRport === 'boolean') {\n              return forceRport;\n            }\n          },\n    \n          instanceId: function(instanceId) {\n            if(typeof instanceId !== 'string') {\n              return;\n            }\n    \n            if ((/^uuid:/i.test(instanceId))) {\n              instanceId = instanceId.substr(5);\n            }\n    \n            if(SIP.Grammar.parse(instanceId, 'uuid') === -1) {\n              return;\n            } else {\n              return instanceId;\n            }\n          },\n    \n          keepAliveInterval: function(keepAliveInterval) {\n            var value;\n            if (SIP.Utils.isDecimal(keepAliveInterval)) {\n              value = Number(keepAliveInterval);\n              if (value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          extraSupported: function(optionTags) {\n            var idx, length;\n    \n            if (!(optionTags instanceof Array)) {\n              return;\n            }\n    \n            length = optionTags.length;\n            for (idx = 0; idx < length; idx++) {\n              if (typeof optionTags[idx] !== 'string') {\n                return;\n              }\n            }\n    \n            return optionTags;\n          },\n    \n          noAnswerTimeout: function(noAnswerTimeout) {\n            var value;\n            if (SIP.Utils.isDecimal(noAnswerTimeout)) {\n              value = Number(noAnswerTimeout);\n              if (value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          password: function(password) {\n            return String(password);\n          },\n    \n          rel100: function(rel100) {\n            if(rel100 === SIP.C.supported.REQUIRED) {\n              return SIP.C.supported.REQUIRED;\n            } else if (rel100 === SIP.C.supported.SUPPORTED) {\n              return SIP.C.supported.SUPPORTED;\n            } else  {\n              return SIP.C.supported.UNSUPPORTED;\n            }\n          },\n    \n          replaces: function(replaces) {\n            if(replaces === SIP.C.supported.REQUIRED) {\n              return SIP.C.supported.REQUIRED;\n            } else if (replaces === SIP.C.supported.SUPPORTED) {\n              return SIP.C.supported.SUPPORTED;\n            } else  {\n              return SIP.C.supported.UNSUPPORTED;\n            }\n          },\n    \n          register: function(register) {\n            if (typeof register === 'boolean') {\n              return register;\n            }\n          },\n    \n          registerExpires: function(registerExpires) {\n            var value;\n            if (SIP.Utils.isDecimal(registerExpires)) {\n              value = Number(registerExpires);\n              if (value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          registrarServer: function(registrarServer) {\n            var parsed;\n    \n            if(typeof registrarServer !== 'string') {\n              return;\n            }\n    \n            if (!/^sip:/i.test(registrarServer)) {\n              registrarServer = SIP.C.SIP + ':' + registrarServer;\n            }\n            parsed = SIP.URI.parse(registrarServer);\n    \n            if(!parsed) {\n              return;\n            } else if(parsed.user) {\n              return;\n            } else {\n              return parsed;\n            }\n          },\n    \n          stunServers: function(stunServers) {\n            var idx, length, stun_server;\n    \n            if (typeof stunServers === 'string') {\n              stunServers = [stunServers];\n            } else if (!(stunServers instanceof Array)) {\n              return;\n            }\n    \n            length = stunServers.length;\n            for (idx = 0; idx < length; idx++) {\n              stun_server = stunServers[idx];\n              if (!(/^stuns?:/.test(stun_server))) {\n                stun_server = 'stun:' + stun_server;\n              }\n    \n              if(SIP.Grammar.parse(stun_server, 'stun_URI') === -1) {\n                return;\n              } else {\n                stunServers[idx] = stun_server;\n              }\n            }\n            return stunServers;\n          },\n    \n          traceSip: function(traceSip) {\n            if (typeof traceSip === 'boolean') {\n              return traceSip;\n            }\n          },\n    \n          turnServers: function(turnServers) {\n            var idx, jdx, length, turn_server, num_turn_server_urls, url;\n    \n            if (turnServers instanceof Array) {\n              // Do nothing\n            } else {\n              turnServers = [turnServers];\n            }\n    \n            length = turnServers.length;\n            for (idx = 0; idx < length; idx++) {\n              turn_server = turnServers[idx];\n              //Backwards compatibility: Allow defining the turn_server url with the 'server' property.\n              if (turn_server.server) {\n                turn_server.urls = [turn_server.server];\n              }\n    \n              if (!turn_server.urls) {\n                return;\n              }\n    \n              if (turn_server.urls instanceof Array) {\n                num_turn_server_urls = turn_server.urls.length;\n              } else {\n                turn_server.urls = [turn_server.urls];\n                num_turn_server_urls = 1;\n              }\n    \n              for (jdx = 0; jdx < num_turn_server_urls; jdx++) {\n                url = turn_server.urls[jdx];\n    \n                if (!(/^turns?:/.test(url))) {\n                  url = 'turn:' + url;\n                }\n    \n                if(SIP.Grammar.parse(url, 'turn_URI') === -1) {\n                  return;\n                }\n              }\n            }\n            return turnServers;\n          },\n    \n          rtcpMuxPolicy: function(rtcpMuxPolicy) {\n            if (typeof rtcpMuxPolicy === 'string') {\n              return rtcpMuxPolicy;\n            }\n          },\n    \n          userAgentString: function(userAgentString) {\n            if (typeof userAgentString === 'string') {\n              return userAgentString;\n            }\n          },\n    \n          usePreloadedRoute: function(usePreloadedRoute) {\n            if (typeof usePreloadedRoute === 'boolean') {\n              return usePreloadedRoute;\n            }\n          },\n    \n          wsServerMaxReconnection: function(wsServerMaxReconnection) {\n            var value;\n            if (SIP.Utils.isDecimal(wsServerMaxReconnection)) {\n              value = Number(wsServerMaxReconnection);\n              if (value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          wsServerReconnectionTimeout: function(wsServerReconnectionTimeout) {\n            var value;\n            if (SIP.Utils.isDecimal(wsServerReconnectionTimeout)) {\n              value = Number(wsServerReconnectionTimeout);\n              if (value > 0) {\n                return value;\n              }\n            }\n          },\n    \n          autostart: function(autostart) {\n            if (typeof autostart === 'boolean') {\n              return autostart;\n            }\n          },\n    \n          autostop: function(autostop) {\n            if (typeof autostop === 'boolean') {\n              return autostop;\n            }\n          },\n    \n          mediaHandlerFactory: function(mediaHandlerFactory) {\n            if (mediaHandlerFactory instanceof Function) {\n              var promisifiedFactory = function promisifiedFactory () {\n                var mediaHandler = mediaHandlerFactory.apply(this, arguments);\n    \n                function patchMethod (methodName) {\n                  var method = mediaHandler[methodName];\n                  if (method.length > 1) {\n                    var callbacksFirst = methodName === 'getDescription';\n                    mediaHandler[methodName] = SIP.Utils.promisify(mediaHandler, methodName, callbacksFirst);\n                  }\n                }\n    \n                patchMethod('getDescription');\n                patchMethod('setDescription');\n    \n                return mediaHandler;\n              };\n    \n              promisifiedFactory.isSupported = mediaHandlerFactory.isSupported;\n              return promisifiedFactory;\n            }\n          },\n    \n          authenticationFactory: checkAuthenticationFactory,\n    \n          allowLegacyNotifications: function(allowLegacyNotifications) {\n            if (typeof allowLegacyNotifications === 'boolean') {\n              return allowLegacyNotifications;\n            }\n          },\n    \n          custom: function(custom) {\n            if (typeof custom === 'object') {\n              return custom;\n            }\n          }\n        }\n      };\n    };\n    \n    UA.C = C;\n    SIP.UA = UA;\n    };\n    \n    }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{}],30:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview SIP URI\n     */\n    \n    /**\n     * @augments SIP\n     * @class Class creating a SIP URI.\n     *\n     * @param {String} [scheme]\n     * @param {String} [user]\n     * @param {String} host\n     * @param {String} [port]\n     * @param {Object} [parameters]\n     * @param {Object} [headers]\n     *\n     */\n    module.exports = function (SIP) {\n    var URI;\n    \n    URI = function(scheme, user, host, port, parameters, headers) {\n      var param, header, raw, normal;\n    \n      // Checks\n      if(!host) {\n        throw new TypeError('missing or invalid \"host\" parameter');\n      }\n    \n      // Initialize parameters\n      scheme = scheme || SIP.C.SIP;\n      this.parameters = {};\n      this.headers = {};\n    \n      for (param in parameters) {\n        this.setParam(param, parameters[param]);\n      }\n    \n      for (header in headers) {\n        this.setHeader(header, headers[header]);\n      }\n    \n      // Raw URI\n      raw = {\n        scheme: scheme,\n        user: user,\n        host: host,\n        port: port\n      };\n    \n      // Normalized URI\n      normal = {\n        scheme: scheme.toLowerCase(),\n        user: user,\n        host: host.toLowerCase(),\n        port: port\n      };\n    \n      Object.defineProperties(this, {\n        _normal: {\n          get: function() { return normal; }\n        },\n    \n        _raw: {\n          get: function() { return raw; }\n        },\n    \n        scheme: {\n          get: function() { return normal.scheme; },\n          set: function(value) {\n            raw.scheme = value;\n            normal.scheme = value.toLowerCase();\n          }\n        },\n    \n        user: {\n          get: function() { return normal.user; },\n          set: function(value) {\n            normal.user = raw.user = value;\n          }\n        },\n    \n        host: {\n          get: function() { return normal.host; },\n          set: function(value) {\n            raw.host = value;\n            normal.host = value.toLowerCase();\n          }\n        },\n    \n        aor: {\n          get: function() { return normal.user + '@' + normal.host; }\n        },\n    \n        port: {\n          get: function() { return normal.port; },\n          set: function(value) {\n            normal.port = raw.port = value === 0 ? value : (parseInt(value,10) || null);\n          }\n        }\n      });\n    };\n    \n    URI.prototype = {\n      setParam: function(key, value) {\n        if(key) {\n          this.parameters[key.toLowerCase()] = (typeof value === 'undefined' || value === null) ? null : value.toString().toLowerCase();\n        }\n      },\n    \n      getParam: function(key) {\n        if(key) {\n          return this.parameters[key.toLowerCase()];\n        }\n      },\n    \n      hasParam: function(key) {\n        if(key) {\n          return (this.parameters.hasOwnProperty(key.toLowerCase()) && true) || false;\n        }\n      },\n    \n      deleteParam: function(parameter) {\n        var value;\n        parameter = parameter.toLowerCase();\n        if (this.parameters.hasOwnProperty(parameter)) {\n          value = this.parameters[parameter];\n          delete this.parameters[parameter];\n          return value;\n        }\n      },\n    \n      clearParams: function() {\n        this.parameters = {};\n      },\n    \n      setHeader: function(name, value) {\n        this.headers[SIP.Utils.headerize(name)] = (value instanceof Array) ? value : [value];\n      },\n    \n      getHeader: function(name) {\n        if(name) {\n          return this.headers[SIP.Utils.headerize(name)];\n        }\n      },\n    \n      hasHeader: function(name) {\n        if(name) {\n          return (this.headers.hasOwnProperty(SIP.Utils.headerize(name)) && true) || false;\n        }\n      },\n    \n      deleteHeader: function(header) {\n        var value;\n        header = SIP.Utils.headerize(header);\n        if(this.headers.hasOwnProperty(header)) {\n          value = this.headers[header];\n          delete this.headers[header];\n          return value;\n        }\n      },\n    \n      clearHeaders: function() {\n        this.headers = {};\n      },\n    \n      clone: function() {\n        return new URI(\n          this._raw.scheme,\n          this._raw.user,\n          this._raw.host,\n          this._raw.port,\n          JSON.parse(JSON.stringify(this.parameters)),\n          JSON.parse(JSON.stringify(this.headers)));\n      },\n    \n      toRaw: function() {\n        return this._toString(this._raw);\n      },\n    \n      toString: function() {\n        return this._toString(this._normal);\n      },\n    \n      _toString: function(uri) {\n        var header, parameter, idx, uriString, headers = [];\n    \n        uriString  = uri.scheme + ':';\n        // add slashes if it's not a sip(s) URI\n        if (!uri.scheme.toLowerCase().match(\"^sips?$\")) {\n          uriString += \"//\";\n        }\n        if (uri.user) {\n          uriString += SIP.Utils.escapeUser(uri.user) + '@';\n        }\n        uriString += uri.host;\n        if (uri.port || uri.port === 0) {\n          uriString += ':' + uri.port;\n        }\n    \n        for (parameter in this.parameters) {\n          uriString += ';' + parameter;\n    \n          if (this.parameters[parameter] !== null) {\n            uriString += '='+ this.parameters[parameter];\n          }\n        }\n    \n        for(header in this.headers) {\n          for(idx in this.headers[header]) {\n            headers.push(header + '=' + this.headers[header][idx]);\n          }\n        }\n    \n        if (headers.length > 0) {\n          uriString += '?' + headers.join('&');\n        }\n    \n        return uriString;\n      }\n    };\n    \n    \n    /**\n      * Parse the given string and returns a SIP.URI instance or undefined if\n      * it is an invalid URI.\n      * @public\n      * @param {String} uri\n      */\n    URI.parse = function(uri) {\n      uri = SIP.Grammar.parse(uri,'SIP_URI');\n    \n      if (uri !== -1) {\n        return uri;\n      } else {\n        return undefined;\n      }\n    };\n    \n    SIP.URI = URI;\n    };\n    \n    },{}],31:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview Utils\n     */\n    \n    module.exports = function (SIP, environment) {\n    var Utils;\n    \n    Utils= {\n    \n      Promise: environment.Promise,\n    \n      defer: function defer () {\n        var deferred = {};\n        deferred.promise = new Utils.Promise(function (resolve, reject) {\n          deferred.resolve = resolve;\n          deferred.reject = reject;\n        });\n        return deferred;\n      },\n    \n      promisify: function promisify (object, methodName, callbacksFirst) {\n        var oldMethod = object[methodName];\n        return function promisifiedMethod (arg, onSuccess, onFailure) {\n          return new Utils.Promise(function (resolve, reject) {\n            var oldArgs = [arg, resolve, reject];\n            if (callbacksFirst) {\n              oldArgs = [resolve, reject, arg];\n            }\n            oldMethod.apply(object, oldArgs);\n          }).then(onSuccess, onFailure);\n        };\n      },\n    \n      augment: function (object, constructor, args, override) {\n        var idx, proto;\n    \n        // Add public properties from constructor's prototype onto object\n        proto = constructor.prototype;\n        for (idx in proto) {\n          if (override || object[idx] === undefined) {\n            object[idx] = proto[idx];\n          }\n        }\n    \n        // Construct the object as though it were just created by constructor\n        constructor.apply(object, args);\n      },\n    \n      optionsOverride: function (options, winner, loser, isDeprecated, logger, defaultValue) {\n        if (isDeprecated && options[loser]) {\n          logger.warn(loser + ' is deprecated, please use ' + winner + ' instead');\n        }\n    \n        if (options[winner] && options[loser]) {\n          logger.warn(winner + ' overriding ' + loser);\n        }\n    \n        options[winner] = options[winner] || options[loser] || defaultValue;\n      },\n    \n      str_utf8_length: function(string) {\n        return encodeURIComponent(string).replace(/%[A-F\\d]{2}/g, 'U').length;\n      },\n    \n      generateFakeSDP: function(body) {\n        if (!body) {\n          return;\n        }\n    \n        var start = body.indexOf('o=');\n        var end = body.indexOf('\\r\\n', start);\n    \n        return 'v=0\\r\\n' + body.slice(start, end) + '\\r\\ns=-\\r\\nt=0 0\\r\\nc=IN IP4 0.0.0.0';\n      },\n    \n      isFunction: function(fn) {\n        if (fn !== undefined) {\n          return Object.prototype.toString.call(fn) === '[object Function]';\n        } else {\n          return false;\n        }\n      },\n    \n      isDecimal: function (num) {\n        return !isNaN(num) && (parseFloat(num) === parseInt(num,10));\n      },\n    \n      createRandomToken: function(size, base) {\n        var i, r,\n          token = '';\n    \n        base = base || 32;\n    \n        for( i=0; i < size; i++ ) {\n          r = Math.random() * base|0;\n          token += r.toString(base);\n        }\n    \n        return token;\n      },\n    \n      newTag: function() {\n        return SIP.Utils.createRandomToken(SIP.UA.C.TAG_LENGTH);\n      },\n    \n      // http://stackoverflow.com/users/109538/broofa\n      newUUID: function() {\n        var UUID =  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n          var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n          return v.toString(16);\n        });\n    \n        return UUID;\n      },\n    \n      hostType: function(host) {\n        if (!host) {\n          return;\n        } else {\n          host = SIP.Grammar.parse(host,'host');\n          if (host !== -1) {\n            return host.host_type;\n          }\n        }\n      },\n    \n      /**\n      * Normalize SIP URI.\n      * NOTE: It does not allow a SIP URI without username.\n      * Accepts 'sip', 'sips' and 'tel' URIs and convert them into 'sip'.\n      * Detects the domain part (if given) and properly hex-escapes the user portion.\n      * If the user portion has only 'tel' number symbols the user portion is clean of 'tel' visual separators.\n      * @private\n      * @param {String} target\n      * @param {String} [domain]\n      */\n      normalizeTarget: function(target, domain) {\n        var uri, target_array, target_user, target_domain;\n    \n        // If no target is given then raise an error.\n        if (!target) {\n          return;\n        // If a SIP.URI instance is given then return it.\n        } else if (target instanceof SIP.URI) {\n          return target;\n    \n        // If a string is given split it by '@':\n        // - Last fragment is the desired domain.\n        // - Otherwise append the given domain argument.\n        } else if (typeof target === 'string') {\n          target_array = target.split('@');\n    \n          switch(target_array.length) {\n            case 1:\n              if (!domain) {\n                return;\n              }\n              target_user = target;\n              target_domain = domain;\n              break;\n            case 2:\n              target_user = target_array[0];\n              target_domain = target_array[1];\n              break;\n            default:\n              target_user = target_array.slice(0, target_array.length-1).join('@');\n              target_domain = target_array[target_array.length-1];\n          }\n    \n          // Remove the URI scheme (if present).\n          target_user = target_user.replace(/^(sips?|tel):/i, '');\n    \n          // Remove 'tel' visual separators if the user portion just contains 'tel' number symbols.\n          if (/^[\\-\\.\\(\\)]*\\+?[0-9\\-\\.\\(\\)]+$/.test(target_user)) {\n            target_user = target_user.replace(/[\\-\\.\\(\\)]/g, '');\n          }\n    \n          // Build the complete SIP URI.\n          target = SIP.C.SIP + ':' + SIP.Utils.escapeUser(target_user) + '@' + target_domain;\n    \n          // Finally parse the resulting URI.\n          if (uri = SIP.URI.parse(target)) {\n            return uri;\n          } else {\n            return;\n          }\n        } else {\n          return;\n        }\n      },\n    \n      /**\n      * Hex-escape a SIP URI user.\n      * @private\n      * @param {String} user\n      */\n      escapeUser: function(user) {\n        // Don't hex-escape ':' (%3A), '+' (%2B), '?' (%3F\"), '/' (%2F).\n        return encodeURIComponent(decodeURIComponent(user)).replace(/%3A/ig, ':').replace(/%2B/ig, '+').replace(/%3F/ig, '?').replace(/%2F/ig, '/');\n      },\n    \n      headerize: function(string) {\n        var exceptions = {\n          'Call-Id': 'Call-ID',\n          'Cseq': 'CSeq',\n          'Min-Se': 'Min-SE',\n          'Rack': 'RAck',\n          'Rseq': 'RSeq',\n          'Www-Authenticate': 'WWW-Authenticate'\n          },\n          name = string.toLowerCase().replace(/_/g,'-').split('-'),\n          hname = '',\n          parts = name.length, part;\n    \n        for (part = 0; part < parts; part++) {\n          if (part !== 0) {\n            hname +='-';\n          }\n          hname += name[part].charAt(0).toUpperCase()+name[part].substring(1);\n        }\n        if (exceptions[hname]) {\n          hname = exceptions[hname];\n        }\n        return hname;\n      },\n    \n      sipErrorCause: function(status_code) {\n        var cause;\n    \n        for (cause in SIP.C.SIP_ERROR_CAUSES) {\n          if (SIP.C.SIP_ERROR_CAUSES[cause].indexOf(status_code) !== -1) {\n            return SIP.C.causes[cause];\n          }\n        }\n    \n        return SIP.C.causes.SIP_FAILURE_CODE;\n      },\n    \n      getReasonPhrase: function getReasonPhrase (code, specific) {\n        return specific || SIP.C.REASON_PHRASE[code] || '';\n      },\n    \n      getReasonHeaderValue: function getReasonHeaderValue (code, reason) {\n        reason = SIP.Utils.getReasonPhrase(code, reason);\n        return 'SIP ;cause=' + code + ' ;text=\"' + reason + '\"';\n      },\n    \n      getCancelReason: function getCancelReason (code, reason) {\n        if (code && code < 200 || code > 699) {\n          throw new TypeError('Invalid status_code: ' + code);\n        } else if (code) {\n          return SIP.Utils.getReasonHeaderValue(code, reason);\n        }\n      },\n    \n      buildStatusLine: function buildStatusLine (code, reason) {\n        code = code || null;\n        reason = reason || null;\n    \n        // Validate code and reason values\n        if (!code || (code < 100 || code > 699)) {\n          throw new TypeError('Invalid status_code: '+ code);\n        } else if (reason && typeof reason !== 'string' && !(reason instanceof String)) {\n          throw new TypeError('Invalid reason_phrase: '+ reason);\n        }\n    \n        reason = Utils.getReasonPhrase(code, reason);\n    \n        return 'SIP/2.0 ' + code + ' ' + reason + '\\r\\n';\n      },\n    \n      /**\n      * Generate a random Test-Net IP (http://tools.ietf.org/html/rfc5735)\n      * @private\n      */\n      getRandomTestNetIP: function() {\n        function getOctet(from,to) {\n          return Math.floor(Math.random()*(to-from+1)+from);\n        }\n        return '192.0.2.' + getOctet(1, 254);\n      },\n    \n      // MD5 (Message-Digest Algorithm) http://www.webtoolkit.info\n      calculateMD5: function(string) {\n        function RotateLeft(lValue, iShiftBits) {\n          return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));\n        }\n    \n        function AddUnsigned(lX,lY) {\n          var lX4,lY4,lX8,lY8,lResult;\n          lX8 = (lX & 0x80000000);\n          lY8 = (lY & 0x80000000);\n          lX4 = (lX & 0x40000000);\n          lY4 = (lY & 0x40000000);\n          lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);\n          if (lX4 & lY4) {\n            return (lResult ^ 0x80000000 ^ lX8 ^ lY8);\n          }\n          if (lX4 | lY4) {\n            if (lResult & 0x40000000) {\n              return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);\n            } else {\n              return (lResult ^ 0x40000000 ^ lX8 ^ lY8);\n            }\n          } else {\n            return (lResult ^ lX8 ^ lY8);\n          }\n        }\n    \n        function F(x,y,z) {\n          return (x & y) | ((~x) & z);\n        }\n    \n        function G(x,y,z) {\n          return (x & z) | (y & (~z));\n        }\n    \n        function H(x,y,z) {\n          return (x ^ y ^ z);\n        }\n    \n        function I(x,y,z) {\n          return (y ^ (x | (~z)));\n        }\n    \n        function FF(a,b,c,d,x,s,ac) {\n          a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));\n          return AddUnsigned(RotateLeft(a, s), b);\n        }\n    \n        function GG(a,b,c,d,x,s,ac) {\n          a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));\n          return AddUnsigned(RotateLeft(a, s), b);\n        }\n    \n        function HH(a,b,c,d,x,s,ac) {\n          a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));\n          return AddUnsigned(RotateLeft(a, s), b);\n        }\n    \n        function II(a,b,c,d,x,s,ac) {\n          a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));\n          return AddUnsigned(RotateLeft(a, s), b);\n        }\n    \n        function ConvertToWordArray(string) {\n          var lWordCount;\n          var lMessageLength = string.length;\n          var lNumberOfWords_temp1=lMessageLength + 8;\n          var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;\n          var lNumberOfWords = (lNumberOfWords_temp2+1)*16;\n          var lWordArray=Array(lNumberOfWords-1);\n          var lBytePosition = 0;\n          var lByteCount = 0;\n          while ( lByteCount < lMessageLength ) {\n            lWordCount = (lByteCount-(lByteCount % 4))/4;\n            lBytePosition = (lByteCount % 4)*8;\n            lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));\n            lByteCount++;\n          }\n          lWordCount = (lByteCount-(lByteCount % 4))/4;\n          lBytePosition = (lByteCount % 4)*8;\n          lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);\n          lWordArray[lNumberOfWords-2] = lMessageLength<<3;\n          lWordArray[lNumberOfWords-1] = lMessageLength>>>29;\n          return lWordArray;\n        }\n    \n        function WordToHex(lValue) {\n          var WordToHexValue=\"\",WordToHexValue_temp=\"\",lByte,lCount;\n          for (lCount = 0;lCount<=3;lCount++) {\n            lByte = (lValue>>>(lCount*8)) & 255;\n            WordToHexValue_temp = \"0\" + lByte.toString(16);\n            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);\n          }\n          return WordToHexValue;\n        }\n    \n        function Utf8Encode(string) {\n          string = string.replace(/\\r\\n/g,\"\\n\");\n          var utftext = \"\";\n    \n          for (var n = 0; n < string.length; n++) {\n            var c = string.charCodeAt(n);\n    \n            if (c < 128) {\n              utftext += String.fromCharCode(c);\n            }\n            else if((c > 127) && (c < 2048)) {\n              utftext += String.fromCharCode((c >> 6) | 192);\n              utftext += String.fromCharCode((c & 63) | 128);\n            }\n            else {\n              utftext += String.fromCharCode((c >> 12) | 224);\n              utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n              utftext += String.fromCharCode((c & 63) | 128);\n            }\n          }\n          return utftext;\n        }\n    \n        var x=[];\n        var k,AA,BB,CC,DD,a,b,c,d;\n        var S11=7, S12=12, S13=17, S14=22;\n        var S21=5, S22=9 , S23=14, S24=20;\n        var S31=4, S32=11, S33=16, S34=23;\n        var S41=6, S42=10, S43=15, S44=21;\n    \n        string = Utf8Encode(string);\n    \n        x = ConvertToWordArray(string);\n    \n        a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;\n    \n        for (k=0;k<x.length;k+=16) {\n          AA=a; BB=b; CC=c; DD=d;\n          a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);\n          d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);\n          c=FF(c,d,a,b,x[k+2], S13,0x242070DB);\n          b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);\n          a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);\n          d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);\n          c=FF(c,d,a,b,x[k+6], S13,0xA8304613);\n          b=FF(b,c,d,a,x[k+7], S14,0xFD469501);\n          a=FF(a,b,c,d,x[k+8], S11,0x698098D8);\n          d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);\n          c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);\n          b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);\n          a=FF(a,b,c,d,x[k+12],S11,0x6B901122);\n          d=FF(d,a,b,c,x[k+13],S12,0xFD987193);\n          c=FF(c,d,a,b,x[k+14],S13,0xA679438E);\n          b=FF(b,c,d,a,x[k+15],S14,0x49B40821);\n          a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);\n          d=GG(d,a,b,c,x[k+6], S22,0xC040B340);\n          c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);\n          b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);\n          a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);\n          d=GG(d,a,b,c,x[k+10],S22,0x2441453);\n          c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);\n          b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);\n          a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);\n          d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);\n          c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);\n          b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);\n          a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);\n          d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);\n          c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);\n          b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);\n          a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);\n          d=HH(d,a,b,c,x[k+8], S32,0x8771F681);\n          c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);\n          b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);\n          a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);\n          d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);\n          c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);\n          b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);\n          a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);\n          d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);\n          c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);\n          b=HH(b,c,d,a,x[k+6], S34,0x4881D05);\n          a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);\n          d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);\n          c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);\n          b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);\n          a=II(a,b,c,d,x[k+0], S41,0xF4292244);\n          d=II(d,a,b,c,x[k+7], S42,0x432AFF97);\n          c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);\n          b=II(b,c,d,a,x[k+5], S44,0xFC93A039);\n          a=II(a,b,c,d,x[k+12],S41,0x655B59C3);\n          d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);\n          c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);\n          b=II(b,c,d,a,x[k+1], S44,0x85845DD1);\n          a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);\n          d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);\n          c=II(c,d,a,b,x[k+6], S43,0xA3014314);\n          b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);\n          a=II(a,b,c,d,x[k+4], S41,0xF7537E82);\n          d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);\n          c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);\n          b=II(b,c,d,a,x[k+9], S44,0xEB86D391);\n          a=AddUnsigned(a,AA);\n          b=AddUnsigned(b,BB);\n          c=AddUnsigned(c,CC);\n          d=AddUnsigned(d,DD);\n        }\n    \n        var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);\n    \n        return temp.toLowerCase();\n      }\n    };\n    \n    SIP.Utils = Utils;\n    };\n    \n    },{}],32:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview WebRTC\n     */\n    \n    module.exports = function (SIP, environment) {\n    var WebRTC;\n    \n    WebRTC = {};\n    \n    WebRTC.MediaHandler = require('./WebRTC/MediaHandler')(SIP);\n    WebRTC.MediaStreamManager = require('./WebRTC/MediaStreamManager')(SIP, environment);\n    \n    var _isSupported;\n    \n    WebRTC.isSupported = function () {\n      if (_isSupported !== undefined) {\n        return _isSupported;\n      }\n    \n      WebRTC.MediaStream = environment.MediaStream;\n      WebRTC.getUserMedia = environment.getUserMedia;\n      WebRTC.RTCPeerConnection = environment.RTCPeerConnection;\n      WebRTC.RTCSessionDescription = environment.RTCSessionDescription;\n    \n      if (WebRTC.RTCPeerConnection && WebRTC.RTCSessionDescription) {\n        if (WebRTC.getUserMedia) {\n          WebRTC.getUserMedia = SIP.Utils.promisify(environment, 'getUserMedia');\n        }\n        _isSupported = true;\n      }\n      else {\n        _isSupported = false;\n      }\n      return _isSupported;\n    };\n    \n    return WebRTC;\n    };\n    \n    },{\"./WebRTC/MediaHandler\":33,\"./WebRTC/MediaStreamManager\":34}],33:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview MediaHandler\n     */\n    \n    /* MediaHandler\n     * @class PeerConnection helper Class.\n     * @param {SIP.Session} session\n     * @param {Object} [options]\n     * @param {SIP.WebRTC.MediaStreamManager} [options.mediaStreamManager]\n     *        The MediaStreamManager to acquire/release streams from/to.\n     *        If not provided, a default MediaStreamManager will be used.\n     */\n    module.exports = function (SIP) {\n    \n    var MediaHandler = function(session, options) {\n      options = options || {};\n    \n      this.logger = session.ua.getLogger('sip.invitecontext.mediahandler', session.id);\n      this.session = session;\n      this.localMedia = null;\n      this.ready = true;\n      this.mediaStreamManager = options.mediaStreamManager || new SIP.WebRTC.MediaStreamManager(this.logger);\n      this.audioMuted = false;\n      this.videoMuted = false;\n      this.local_hold = false;\n      this.remote_hold = false;\n    \n      // old init() from here on\n      var servers = this.prepareIceServers(options.stunServers, options.turnServers);\n      this.RTCConstraints = options.RTCConstraints || {};\n    \n      this.initPeerConnection(servers);\n    \n      function selfEmit(mh, event) {\n        if (mh.mediaStreamManager.on) {\n          mh.mediaStreamManager.on(event, function () {\n            mh.emit.apply(mh, [event].concat(Array.prototype.slice.call(arguments)));\n          });\n        }\n      }\n    \n      selfEmit(this, 'userMediaRequest');\n      selfEmit(this, 'userMedia');\n      selfEmit(this, 'userMediaFailed');\n    };\n    \n    MediaHandler.defaultFactory = function defaultFactory (session, options) {\n      return new MediaHandler(session, options);\n    };\n    MediaHandler.defaultFactory.isSupported = function () {\n      return SIP.WebRTC.isSupported();\n    };\n    \n    MediaHandler.prototype = Object.create(SIP.MediaHandler.prototype, {\n    // Functions the session can use\n      isReady: {writable: true, value: function isReady () {\n        return this.ready;\n      }},\n    \n      close: {writable: true, value: function close () {\n        this.logger.log('closing PeerConnection');\n        this._remoteStreams = [];\n        // have to check signalingState since this.close() gets called multiple times\n        // TODO figure out why that happens\n        if(this.peerConnection && this.peerConnection.signalingState !== 'closed') {\n          this.peerConnection.close();\n    \n          if(this.localMedia) {\n            this.mediaStreamManager.release(this.localMedia);\n          }\n        }\n      }},\n    \n      /**\n       * @param {SIP.WebRTC.MediaStream | (getUserMedia constraints)} [mediaHint]\n       *        the MediaStream (or the constraints describing it) to be used for the session\n       */\n      getDescription: {writable: true, value: function getDescription (mediaHint) {\n        var self = this;\n        var acquire = self.mediaStreamManager.acquire;\n        if (acquire.length > 1) {\n          acquire = SIP.Utils.promisify(this.mediaStreamManager, 'acquire', true);\n        }\n        mediaHint = mediaHint || {};\n        if (mediaHint.dataChannel === true) {\n          mediaHint.dataChannel = {};\n        }\n        this.mediaHint = mediaHint;\n    \n        /*\n         * 1. acquire streams (skip if MediaStreams passed in)\n         * 2. addStreams\n         * 3. createOffer/createAnswer\n         */\n    \n        var streamPromise;\n        if (self.localMedia) {\n          self.logger.log('already have local media');\n          streamPromise = SIP.Utils.Promise.resolve(self.localMedia);\n        }\n        else {\n          self.logger.log('acquiring local media');\n          streamPromise = acquire.call(self.mediaStreamManager, mediaHint)\n            .then(function acquireSucceeded(streams) {\n              self.logger.log('acquired local media streams');\n              self.localMedia = streams;\n              self.session.connecting();\n              return streams;\n            }, function acquireFailed(err) {\n              self.logger.error('unable to acquire streams');\n              self.logger.error(err);\n              self.session.connecting();\n              throw err;\n            })\n            .then(this.addStreams.bind(this))\n          ;\n        }\n    \n        return streamPromise\n          .then(function streamAdditionSucceeded() {\n            if (self.hasOffer('remote')) {\n              self.peerConnection.ondatachannel = function (evt) {\n                self.dataChannel = evt.channel;\n                self.emit('dataChannel', self.dataChannel);\n              };\n            } else if (mediaHint.dataChannel &&\n                       self.peerConnection.createDataChannel) {\n              self.dataChannel = self.peerConnection.createDataChannel(\n                'sipjs',\n                mediaHint.dataChannel\n              );\n              self.emit('dataChannel', self.dataChannel);\n            }\n    \n            self.render();\n            return self.createOfferOrAnswer(self.RTCConstraints);\n          })\n          .then(function(sdp) {\n            sdp = SIP.Hacks.Firefox.hasMissingCLineInSDP(sdp);\n    \n            if (self.local_hold) {\n              // Don't receive media\n              // TODO - This will break for media streams with different directions.\n              if (!(/a=(sendrecv|sendonly|recvonly|inactive)/).test(sdp)) {\n                sdp = sdp.replace(/(m=[^\\r]*\\r\\n)/g, '$1a=sendonly\\r\\n');\n              } else {\n                sdp = sdp.replace(/a=sendrecv\\r\\n/g, 'a=sendonly\\r\\n');\n                sdp = sdp.replace(/a=recvonly\\r\\n/g, 'a=inactive\\r\\n');\n              }\n            }\n    \n            return {\n              body: sdp,\n              contentType: 'application/sdp'\n            };\n          })\n        ;\n      }},\n    \n      /**\n       * Check if a SIP message contains a session description.\n       * @param {SIP.SIPMessage} message\n       * @returns {boolean}\n       */\n      hasDescription: {writeable: true, value: function hasDescription (message) {\n        return message.getHeader('Content-Type') === 'application/sdp' && !!message.body;\n      }},\n    \n      /**\n       * Set the session description contained in a SIP message.\n       * @param {SIP.SIPMessage} message\n       * @returns {Promise}\n       */\n      setDescription: {writable: true, value: function setDescription (message) {\n        var self = this;\n        var sdp = message.body;\n    \n        this.remote_hold = /a=(sendonly|inactive)/.test(sdp);\n    \n        sdp = SIP.Hacks.Firefox.cannotHandleExtraWhitespace(sdp);\n        sdp = SIP.Hacks.AllBrowsers.maskDtls(sdp);\n    \n        var rawDescription = {\n          type: this.hasOffer('local') ? 'answer' : 'offer',\n          sdp: sdp\n        };\n    \n        this.emit('setDescription', rawDescription);\n    \n        var description = new SIP.WebRTC.RTCSessionDescription(rawDescription);\n        return SIP.Utils.promisify(this.peerConnection, 'setRemoteDescription')(description)\n          .catch(function setRemoteDescriptionError(e) {\n            self.emit('peerConnection-setRemoteDescriptionFailed', e);\n            throw e;\n          });\n      }},\n    \n      /**\n       * If the Session associated with this MediaHandler were to be referred,\n       * what mediaHint should be provided to the UA's invite method?\n       */\n      getReferMedia: {writable: true, value: function getReferMedia () {\n        function hasTracks (trackGetter, stream) {\n          return stream[trackGetter]().length > 0;\n        }\n    \n        function bothHaveTracks (trackGetter) {\n          /* jshint validthis:true */\n          return this.getLocalStreams().some(hasTracks.bind(null, trackGetter)) &&\n                 this.getRemoteStreams().some(hasTracks.bind(null, trackGetter));\n        }\n    \n        return {\n          constraints: {\n            audio: bothHaveTracks.call(this, 'getAudioTracks'),\n            video: bothHaveTracks.call(this, 'getVideoTracks')\n          }\n        };\n      }},\n    \n      updateIceServers: {writeable:true, value: function (options) {\n        var servers = this.prepareIceServers(options.stunServers, options.turnServers);\n        this.RTCConstraints = options.RTCConstraints || this.RTCConstraints;\n    \n        this.initPeerConnection(servers);\n    \n        /* once updateIce is implemented correctly, this is better than above\n        //no op if browser does not support this\n        if (!this.peerConnection.updateIce) {\n          return;\n        }\n    \n        this.peerConnection.updateIce({'iceServers': servers}, this.RTCConstraints);\n        */\n      }},\n    \n    // Functions the session can use, but only because it's convenient for the application\n      isMuted: {writable: true, value: function isMuted () {\n        return {\n          audio: this.audioMuted,\n          video: this.videoMuted\n        };\n      }},\n    \n      mute: {writable: true, value: function mute (options) {\n        if (this.getLocalStreams().length === 0) {\n          return;\n        }\n    \n        options = options || {\n          audio: this.getLocalStreams()[0].getAudioTracks().length > 0,\n          video: this.getLocalStreams()[0].getVideoTracks().length > 0\n        };\n    \n        var audioMuted = false,\n            videoMuted = false;\n    \n        if (options.audio && !this.audioMuted) {\n          audioMuted = true;\n          this.audioMuted = true;\n          this.toggleMuteAudio(true);\n        }\n    \n        if (options.video && !this.videoMuted) {\n          videoMuted = true;\n          this.videoMuted = true;\n          this.toggleMuteVideo(true);\n        }\n    \n        //REVISIT\n        if (audioMuted || videoMuted) {\n          return {\n            audio: audioMuted,\n            video: videoMuted\n          };\n          /*this.session.onmute({\n            audio: audioMuted,\n            video: videoMuted\n          });*/\n        }\n      }},\n    \n      unmute: {writable: true, value: function unmute (options) {\n        if (this.getLocalStreams().length === 0) {\n          return;\n        }\n    \n        options = options || {\n          audio: this.getLocalStreams()[0].getAudioTracks().length > 0,\n          video: this.getLocalStreams()[0].getVideoTracks().length > 0\n        };\n    \n        var audioUnMuted = false,\n            videoUnMuted = false;\n    \n        if (options.audio && this.audioMuted) {\n          audioUnMuted = true;\n          this.audioMuted = false;\n          this.toggleMuteAudio(false);\n        }\n    \n        if (options.video && this.videoMuted) {\n          videoUnMuted = true;\n          this.videoMuted = false;\n          this.toggleMuteVideo(false);\n        }\n    \n        //REVISIT\n        if (audioUnMuted || videoUnMuted) {\n          return {\n            audio: audioUnMuted,\n            video: videoUnMuted\n          };\n          /*this.session.onunmute({\n            audio: audioUnMuted,\n            video: videoUnMuted\n          });*/\n        }\n      }},\n    \n      hold: {writable: true, value: function hold () {\n        this.local_hold = true;\n        this.toggleMuteAudio(true);\n        this.toggleMuteVideo(true);\n      }},\n    \n      unhold: {writable: true, value: function unhold () {\n        this.local_hold = false;\n    \n        if (!this.audioMuted) {\n          this.toggleMuteAudio(false);\n        }\n    \n        if (!this.videoMuted) {\n          this.toggleMuteVideo(false);\n        }\n      }},\n    \n    // Functions the application can use, but not the session\n      getLocalStreams: {writable: true, value: function getLocalStreams () {\n        var pc = this.peerConnection;\n        if (pc && pc.signalingState === 'closed') {\n          this.logger.warn('peerConnection is closed, getLocalStreams returning []');\n          return [];\n        }\n        return (pc.getLocalStreams && pc.getLocalStreams()) ||\n          pc.localStreams || [];\n      }},\n    \n      getRemoteStreams: {writable: true, value: function getRemoteStreams () {\n        var pc = this.peerConnection;\n        if (pc && pc.signalingState === 'closed') {\n          this.logger.warn('peerConnection is closed, getRemoteStreams returning this._remoteStreams');\n          return this._remoteStreams;\n        }\n        return(pc.getRemoteStreams && pc.getRemoteStreams()) ||\n          pc.remoteStreams || [];\n      }},\n    \n      render: {writable: true, value: function render (renderHint) {\n        renderHint = renderHint || (this.mediaHint && this.mediaHint.render);\n        if (!renderHint) {\n          return false;\n        }\n        var streamGetters = {\n          local: 'getLocalStreams',\n          remote: 'getRemoteStreams'\n        };\n        Object.keys(streamGetters).forEach(function (loc) {\n          var streamGetter = streamGetters[loc];\n          var streams = this[streamGetter]();\n          SIP.WebRTC.MediaStreamManager.render(streams, renderHint[loc]);\n        }.bind(this));\n      }},\n    \n    // Internal functions\n      hasOffer: {writable: true, value: function hasOffer (where) {\n        var offerState = 'have-' + where + '-offer';\n        return this.peerConnection.signalingState === offerState;\n        // TODO consider signalingStates with 'pranswer'?\n      }},\n    \n      prepareIceServers: {writable: true, value: function prepareIceServers (stunServers, turnServers) {\n        var servers = [],\n          config = this.session.ua.configuration;\n    \n        stunServers = stunServers || config.stunServers;\n        turnServers = turnServers || config.turnServers;\n    \n        [].concat(stunServers).forEach(function (server) {\n          servers.push({'urls': server});\n        });\n    \n        [].concat(turnServers).forEach(function (server) {\n          var turnServer = {'urls': server.urls};\n          if (server.username) {\n            turnServer.username = server.username;\n          }\n          if (server.password) {\n            turnServer.credential = server.password;\n          }\n          servers.push(turnServer);\n        });\n    \n        return servers;\n      }},\n    \n      initPeerConnection: {writable: true, value: function initPeerConnection(servers) {\n        var self = this,\n          config = this.session.ua.configuration;\n    \n        this.onIceCompleted = SIP.Utils.defer();\n        this.onIceCompleted.promise.then(function(pc) {\n          self.emit('iceGatheringComplete', pc);\n          if (self.iceCheckingTimer) {\n            SIP.Timers.clearTimeout(self.iceCheckingTimer);\n            self.iceCheckingTimer = null;\n          }\n        });\n    \n        if (this.peerConnection) {\n          this.peerConnection.close();\n        }\n    \n        var connConfig = {\n          iceServers: servers\n        };\n    \n        if (config.rtcpMuxPolicy) {\n          connConfig.rtcpMuxPolicy = config.rtcpMuxPolicy;\n        }\n    \n        this.peerConnection = new SIP.WebRTC.RTCPeerConnection(connConfig);\n    \n        // Firefox (35.0.1) sometimes throws on calls to peerConnection.getRemoteStreams\n        // even if peerConnection.onaddstream was just called. In order to make\n        // MediaHandler.prototype.getRemoteStreams work, keep track of them manually\n        this._remoteStreams = [];\n    \n        this.peerConnection.onaddstream = function(e) {\n          self.logger.log('stream added: '+ e.stream.id);\n          self._remoteStreams.push(e.stream);\n          self.render();\n          self.emit('addStream', e);\n        };\n    \n        this.peerConnection.onremovestream = function(e) {\n          self.logger.log('stream removed: '+ e.stream.id);\n        };\n    \n        this.startIceCheckingTimer = function () {\n          if (!self.iceCheckingTimer) {\n            self.iceCheckingTimer = SIP.Timers.setTimeout(function() {\n              self.logger.log('RTCIceChecking Timeout Triggered after '+config.iceCheckingTimeout+' milliseconds');\n              self.onIceCompleted.resolve(this);\n            }.bind(this.peerConnection), config.iceCheckingTimeout);\n          }\n        };\n    \n        this.peerConnection.onicecandidate = function(e) {\n          self.emit('iceCandidate', e);\n          if (e.candidate) {\n            self.logger.log('ICE candidate received: '+ (e.candidate.candidate === null ? null : e.candidate.candidate.trim()));\n            self.startIceCheckingTimer();\n          } else {\n            self.onIceCompleted.resolve(this);\n          }\n        };\n    \n        this.peerConnection.onicegatheringstatechange = function () {\n          self.logger.log('RTCIceGatheringState changed: ' + this.iceGatheringState);\n          if (this.iceGatheringState === 'gathering') {\n            self.emit('iceGathering', this);\n          }\n          if (this.iceGatheringState === 'complete') {\n            self.onIceCompleted.resolve(this);\n          }\n        };\n    \n        this.peerConnection.oniceconnectionstatechange = function() {  //need e for commented out case\n          var stateEvent;\n    \n          if (this.iceConnectionState === 'checking') {\n            self.startIceCheckingTimer();\n          }\n    \n          switch (this.iceConnectionState) {\n          case 'new':\n            stateEvent = 'iceConnection';\n            break;\n          case 'checking':\n            stateEvent = 'iceConnectionChecking';\n            break;\n          case 'connected':\n            stateEvent = 'iceConnectionConnected';\n            break;\n          case 'completed':\n            stateEvent = 'iceConnectionCompleted';\n            break;\n          case 'failed':\n            stateEvent = 'iceConnectionFailed';\n            break;\n          case 'disconnected':\n            stateEvent = 'iceConnectionDisconnected';\n            break;\n          case 'closed':\n            stateEvent = 'iceConnectionClosed';\n            break;\n          default:\n            self.logger.warn('Unknown iceConnection state:', this.iceConnectionState);\n            return;\n          }\n          self.emit(stateEvent, this);\n    \n          //Bria state changes are always connected -> disconnected -> connected on accept, so session gets terminated\n          //normal calls switch from failed to connected in some cases, so checking for failed and terminated\n          /*if (this.iceConnectionState === 'failed') {\n            self.session.terminate({\n            cause: SIP.C.causes.RTP_TIMEOUT,\n            status_code: 200,\n            reason_phrase: SIP.C.causes.RTP_TIMEOUT\n          });\n          } else if (e.currentTarget.iceGatheringState === 'complete' && this.iceConnectionState !== 'closed') {\n          self.onIceCompleted(this);\n          }*/\n        };\n    \n        this.peerConnection.onstatechange = function() {\n          self.logger.log('PeerConnection state changed to \"'+ this.readyState +'\"');\n        };\n      }},\n    \n      createOfferOrAnswer: {writable: true, value: function createOfferOrAnswer (constraints) {\n        var self = this;\n        var methodName;\n        var pc = self.peerConnection;\n    \n        self.ready = false;\n        methodName = self.hasOffer('remote') ? 'createAnswer' : 'createOffer';\n    \n        return SIP.Utils.promisify(pc, methodName, true)(constraints)\n          .catch(function methodError(e) {\n            self.emit('peerConnection-' + methodName + 'Failed', e);\n            throw e;\n          })\n          .then(SIP.Utils.promisify(pc, 'setLocalDescription'))\n          .catch(function localDescError(e) {\n            self.emit('peerConnection-selLocalDescriptionFailed', e);\n            throw e;\n          })\n          .then(function onSetLocalDescriptionSuccess() {\n            var deferred = SIP.Utils.defer();\n            if (pc.iceGatheringState === 'complete' && (pc.iceConnectionState === 'connected' || pc.iceConnectionState === 'completed')) {\n              deferred.resolve();\n            } else {\n              self.onIceCompleted.promise.then(deferred.resolve);\n            }\n            return deferred.promise;\n          })\n          .then(function readySuccess () {\n            var sdp = pc.localDescription.sdp;\n    \n            sdp = SIP.Hacks.Chrome.needsExplicitlyInactiveSDP(sdp);\n            sdp = SIP.Hacks.AllBrowsers.unmaskDtls(sdp);\n    \n            var sdpWrapper = {\n              type: methodName === 'createOffer' ? 'offer' : 'answer',\n              sdp: sdp\n            };\n    \n            self.emit('getDescription', sdpWrapper);\n    \n            if (self.session.ua.configuration.hackStripTcp) {\n              sdpWrapper.sdp = sdpWrapper.sdp.replace(/^a=candidate:\\d+ \\d+ tcp .*?\\r\\n/img, \"\");\n            }\n    \n            self.ready = true;\n            return sdpWrapper.sdp;\n          })\n          .catch(function createOfferAnswerError (e) {\n            self.logger.error(e);\n            self.ready = true;\n            throw new SIP.Exceptions.GetDescriptionError(e);\n          })\n        ;\n      }},\n    \n      addStreams: {writable: true, value: function addStreams (streams) {\n        try {\n          streams = [].concat(streams);\n          streams.forEach(function (stream) {\n            this.peerConnection.addStream(stream);\n          }, this);\n        } catch(e) {\n          this.logger.error('error adding stream');\n          this.logger.error(e);\n          return SIP.Utils.Promise.reject(e);\n        }\n    \n        return SIP.Utils.Promise.resolve();\n      }},\n    \n      toggleMuteHelper: {writable: true, value: function toggleMuteHelper (trackGetter, mute) {\n        this.getLocalStreams().forEach(function (stream) {\n          stream[trackGetter]().forEach(function (track) {\n            track.enabled = !mute;\n          });\n        });\n      }},\n    \n      toggleMuteAudio: {writable: true, value: function toggleMuteAudio (mute) {\n        this.toggleMuteHelper('getAudioTracks', mute);\n      }},\n    \n      toggleMuteVideo: {writable: true, value: function toggleMuteVideo (mute) {\n        this.toggleMuteHelper('getVideoTracks', mute);\n      }}\n    });\n    \n    // Return since it will be assigned to a variable.\n    return MediaHandler;\n    };\n    \n    },{}],34:[function(require,module,exports){\n    \"use strict\";\n    /**\n     * @fileoverview MediaStreamManager\n     */\n    \n    /* MediaStreamManager\n     * @class Manages the acquisition and release of MediaStreams.\n     * @param {mediaHint} [defaultMediaHint] The mediaHint to use if none is provided to acquire()\n     */\n    module.exports = function (SIP, environment) {\n    \n    // Default MediaStreamManager provides single-use streams created with getUserMedia\n    var MediaStreamManager = function MediaStreamManager (logger, defaultMediaHint) {\n      if (!SIP.WebRTC.isSupported()) {\n        throw new SIP.Exceptions.NotSupportedError('Media not supported');\n      }\n    \n      this.mediaHint = defaultMediaHint || {\n        constraints: {audio: true, video: true}\n      };\n    \n      // map of streams to acquisition manner:\n      // true -> passed in as mediaHint.stream\n      // false -> getUserMedia\n      this.acquisitions = {};\n    };\n    MediaStreamManager.streamId = function (stream) {\n      return stream.getAudioTracks().concat(stream.getVideoTracks())\n        .map(function trackId (track) {\n          return track.id;\n        })\n        .join('');\n    };\n    \n    /**\n     * @param {(Array of) MediaStream} streams - The streams to render\n     *\n     * @param {(Array of) HTMLMediaElement} elements\n     *        - The <audio>/<video> element(s) that should render the streams\n     *\n     * Each stream in streams renders to the corresponding element in elements,\n     * wrapping around elements if needed.\n     */\n    MediaStreamManager.render = function render (streams, elements) {\n      if (!elements) {\n        return false;\n      }\n      if (Array.isArray(elements) && !elements.length) {\n        throw new TypeError('elements must not be empty');\n      }\n    \n      function attachMediaStream(element, stream) {\n        element.srcObject = stream;\n      }\n    \n      function ensureMediaPlaying (mediaElement) {\n        var interval = 100;\n        mediaElement.ensurePlayingIntervalId = SIP.Timers.setInterval(function () {\n          if (mediaElement.paused && mediaElement.srcObject) {\n            mediaElement.play();\n          }\n          else {\n            SIP.Timers.clearInterval(mediaElement.ensurePlayingIntervalId);\n          }\n        }, interval);\n      }\n    \n      function attachAndPlay (elements, stream, index) {\n        var element = elements[index % elements.length];\n        if (typeof element === 'function') {\n          element = element();\n        }\n        (environment.attachMediaStream || attachMediaStream)(element, stream);\n        ensureMediaPlaying(element);\n      }\n    \n      // [].concat \"casts\" `elements` into an array\n      // so forEach works even if `elements` was a single element\n      elements = [].concat(elements);\n      [].concat(streams).forEach(attachAndPlay.bind(null, elements));\n    };\n    \n    MediaStreamManager.prototype = Object.create(SIP.EventEmitter.prototype, {\n      'acquire': {writable: true, value: function acquire (mediaHint) {\n        mediaHint = Object.keys(mediaHint || {}).length ? mediaHint : this.mediaHint;\n    \n        var saveSuccess = function (isHintStream, streams) {\n          streams = [].concat(streams);\n          streams.forEach(function (stream) {\n            var streamId = MediaStreamManager.streamId(stream);\n            this.acquisitions[streamId] = !!isHintStream;\n          }, this);\n          return SIP.Utils.Promise.resolve(streams);\n        }.bind(this);\n    \n        if (mediaHint.stream) {\n          return saveSuccess(true, mediaHint.stream);\n        } else {\n          // Fallback to audio/video enabled if no mediaHint can be found.\n          var constraints = mediaHint.constraints ||\n            (this.mediaHint && this.mediaHint.constraints) ||\n            {audio: true, video: true};\n    \n          var deferred = SIP.Utils.defer();\n    \n          /*\n           * Make the call asynchronous, so that ICCs have a chance\n           * to define callbacks to `userMediaRequest`\n           */\n          SIP.Timers.setTimeout(function () {\n            this.emit('userMediaRequest', constraints);\n    \n            var emitThenCall = function (eventName, callback) {\n              var callbackArgs = Array.prototype.slice.call(arguments, 2);\n              // Emit with all of the arguments from the real callback.\n              var newArgs = [eventName].concat(callbackArgs);\n    \n              this.emit.apply(this, newArgs);\n    \n              return callback.apply(null, callbackArgs);\n            }.bind(this);\n    \n            if (constraints.audio || constraints.video) {\n              deferred.resolve(\n                SIP.WebRTC.getUserMedia(constraints)\n                .then(\n                  emitThenCall.bind(this, 'userMedia', saveSuccess.bind(null, false)),\n                  emitThenCall.bind(this, 'userMediaFailed', function(e){throw e;})\n                )\n              );\n            } else {\n              // Local streams were explicitly excluded.\n              deferred.resolve([]);\n            }\n          }.bind(this), 0);\n    \n          return deferred.promise;\n        }\n      }},\n    \n      'release': {writable: true, value: function release (streams) {\n        streams = [].concat(streams);\n        streams.forEach(function (stream) {\n          var streamId = MediaStreamManager.streamId(stream);\n          if (this.acquisitions[streamId] === false) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n          }\n          delete this.acquisitions[streamId];\n        }, this);\n      }},\n    });\n    \n    // Return since it will be assigned to a variable.\n    return MediaStreamManager;\n    };\n    \n    },{}],35:[function(require,module,exports){\n    (function (global){\n    \"use strict\";\n    \n    var toplevel = global.window || global;\n    \n    function getPrefixedProperty (object, name) {\n      if (object == null) {\n        return;\n      }\n      var capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n      var prefixedNames = [name, 'webkit' + capitalizedName, 'moz' + capitalizedName];\n      for (var i in prefixedNames) {\n        var property = object[prefixedNames[i]];\n        if (property) {\n          return property.bind(object);\n        }\n      }\n    }\n    \n    module.exports = {\n      WebSocket: toplevel.WebSocket,\n      Transport: require('./Transport'),\n      open: toplevel.open,\n      Promise: toplevel.Promise,\n      timers: toplevel,\n    \n      // Console is not defined in ECMAScript, so just in case...\n      console: toplevel.console || {\n        debug: function () {},\n        log: function () {},\n        warn: function () {},\n        error: function () {}\n      },\n    \n      MediaStream: getPrefixedProperty(toplevel, 'MediaStream'),\n      getUserMedia: getPrefixedProperty(toplevel.navigator, 'getUserMedia'),\n      RTCPeerConnection: getPrefixedProperty(toplevel, 'RTCPeerConnection'),\n      RTCSessionDescription: getPrefixedProperty(toplevel, 'RTCSessionDescription'),\n    \n      addEventListener: getPrefixedProperty(toplevel, 'addEventListener'),\n      removeEventListener: getPrefixedProperty(toplevel, 'removeEventListener'),\n      HTMLMediaElement: toplevel.HTMLMediaElement,\n    \n      attachMediaStream: toplevel.attachMediaStream,\n      createObjectURL: toplevel.URL && toplevel.URL.createObjectURL,\n      revokeObjectURL: toplevel.URL && toplevel.URL.revokeObjectURL\n    };\n    \n    }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./Transport\":28}],36:[function(require,module,exports){\n    \"use strict\";\n    module.exports = require('./SIP')(require('./environment'));\n    \n    },{\"./SIP\":19,\"./environment\":35}]},{},[36])(36)\n    });"],"mappings":"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"},"metadata":{},"sourceType":"module"}