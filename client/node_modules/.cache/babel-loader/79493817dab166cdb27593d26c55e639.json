{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/IncommingAlertComp.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Snackbar, Button } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction IncommingAlertComp(_ref) {\n  _s();\n\n  let {\n    incomingAlert,\n    call\n  } = _ref;\n  console.log({\n    incomingAlert,\n    call\n  });\n  useEffect(() => {\n    // to prevent user to reload page when have incomming call\n    if (incomingAlert) {\n      window.onbeforeunload = () => {\n        return true;\n      };\n    }\n\n    return () => {\n      window.onbeforeunload = null;\n    };\n  }, [incomingAlert]); // if (activeCall && incomingCall) {\n  //     console.log('transfer call');\n  //     call.reject();\n  // }\n\n  const answer = () => {\n    call.accept();\n  };\n\n  const dismiss = () => {\n    call.reject();\n  };\n\n  const action = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      color: \"success\",\n      size: \"small\",\n      onClick: answer,\n      children: \"\\u05DE\\u05E2\\u05E0\\u05D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      color: \"error\",\n      size: \"small\",\n      onClick: dismiss,\n      children: \"\\u05D3\\u05D7\\u05D9\\u05D9\\u05D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n\n  const ringtone = /*#__PURE__*/_jsxDEV(\"audio\", {\n    controls: true,\n    autoPlay: true,\n    loop: true,\n    style: {\n      'display': 'none'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"source\", {\n      src: \"https://finance-server.com/records/ringtone.mp3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), \"Your browser does not support the audio element.\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n\n  const incoming = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      open: incomingAlert,\n      message: `שיחה נכנסת`,\n      action: action\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), ringtone]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: incomingAlert ? incoming : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n\n_s(IncommingAlertComp, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = IncommingAlertComp;\nexport default IncommingAlertComp;\n\nvar _c;\n\n$RefreshReg$(_c, \"IncommingAlertComp\");","map":{"version":3,"names":["React","useEffect","Snackbar","Button","IncommingAlertComp","incomingAlert","call","console","log","window","onbeforeunload","answer","accept","dismiss","reject","action","ringtone","incoming","vertical","horizontal"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/IncommingAlertComp.js"],"sourcesContent":["import React, {useEffect} from 'react';\nimport { Snackbar, Button } from '@mui/material';\n\nfunction IncommingAlertComp({incomingAlert, call}) {\n    console.log({incomingAlert, call});\n    useEffect(() => { // to prevent user to reload page when have incomming call\n        if (incomingAlert) {\n            window.onbeforeunload = () => {\n                return true;\n            };\n        }\n    \n        return () => {\n            window.onbeforeunload = null;\n        };\n    }, [incomingAlert]);\n\n    // if (activeCall && incomingCall) {\n    //     console.log('transfer call');\n    //     call.reject();\n    // }\n\n    const answer = () => {\n        call.accept();\n    }\n\n    const dismiss = () => {\n        call.reject();\n    }\n\n    const action = (\n        <>\n            <Button color=\"success\" size=\"small\" onClick={answer}>\n                מענה\n            </Button>\n            <Button color=\"error\" size=\"small\" onClick={dismiss}>\n                דחייה\n            </Button>\n\n        </>\n    );\n\n\n    const ringtone = (\n        <audio controls autoPlay loop style={{'display' : 'none'}}>\n            <source src='https://finance-server.com/records/ringtone.mp3'/>\n            Your browser does not support the audio element.\n        </audio>\n        )\n\n    const incoming = (\n        <div>\n            <Snackbar\n                anchorOrigin={{ vertical : 'top', horizontal : 'center' }}\n                open={incomingAlert}\n                message={`שיחה נכנסת`}\n                action={action}\n            />\n            {ringtone}\n    </div>\n    )\n\n    return (\n        <div>\n            {incomingAlert ? incoming : null}\n        </div>\n    );\n}\n\nexport default IncommingAlertComp;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,eAAjC;;;;AAEA,SAASC,kBAAT,OAAmD;EAAA;;EAAA,IAAvB;IAACC,aAAD;IAAgBC;EAAhB,CAAuB;EAC/CC,OAAO,CAACC,GAAR,CAAY;IAACH,aAAD;IAAgBC;EAAhB,CAAZ;EACAL,SAAS,CAAC,MAAM;IAAE;IACd,IAAII,aAAJ,EAAmB;MACfI,MAAM,CAACC,cAAP,GAAwB,MAAM;QAC1B,OAAO,IAAP;MACH,CAFD;IAGH;;IAED,OAAO,MAAM;MACTD,MAAM,CAACC,cAAP,GAAwB,IAAxB;IACH,CAFD;EAGH,CAVQ,EAUN,CAACL,aAAD,CAVM,CAAT,CAF+C,CAc/C;EACA;EACA;EACA;;EAEA,MAAMM,MAAM,GAAG,MAAM;IACjBL,IAAI,CAACM,MAAL;EACH,CAFD;;EAIA,MAAMC,OAAO,GAAG,MAAM;IAClBP,IAAI,CAACQ,MAAL;EACH,CAFD;;EAIA,MAAMC,MAAM,gBACR;IAAA,wBACI,QAAC,MAAD;MAAQ,KAAK,EAAC,SAAd;MAAwB,IAAI,EAAC,OAA7B;MAAqC,OAAO,EAAEJ,MAA9C;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAII,QAAC,MAAD;MAAQ,KAAK,EAAC,OAAd;MAAsB,IAAI,EAAC,OAA3B;MAAmC,OAAO,EAAEE,OAA5C;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAJJ;EAAA,gBADJ;;EAaA,MAAMG,QAAQ,gBACV;IAAO,QAAQ,MAAf;IAAgB,QAAQ,MAAxB;IAAyB,IAAI,MAA7B;IAA8B,KAAK,EAAE;MAAC,WAAY;IAAb,CAArC;IAAA,wBACI;MAAQ,GAAG,EAAC;IAAZ;MAAA;MAAA;MAAA;IAAA,QADJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;;EAOA,MAAMC,QAAQ,gBACV;IAAA,wBACI,QAAC,QAAD;MACI,YAAY,EAAE;QAAEC,QAAQ,EAAG,KAAb;QAAoBC,UAAU,EAAG;MAAjC,CADlB;MAEI,IAAI,EAAEd,aAFV;MAGI,OAAO,EAAG,YAHd;MAII,MAAM,EAAEU;IAJZ;MAAA;MAAA;MAAA;IAAA,QADJ,EAOKC,QAPL;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;;EAYA,oBACI;IAAA,UACKX,aAAa,GAAGY,QAAH,GAAc;EADhC;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH;;GAhEQb,kB;;KAAAA,kB;AAkET,eAAeA,kBAAf"},"metadata":{},"sourceType":"module"}