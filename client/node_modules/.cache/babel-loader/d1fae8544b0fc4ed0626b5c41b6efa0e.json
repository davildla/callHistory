{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/SystemPage/components/activeCallsView/ActiveCallsTable.js\",\n    _s = $RefreshSig$();\n\nimport utils from '../../../../utils/manage/recordsUtils';\nimport DataTable from '../../../../components/DataTable';\nimport React, { useState, useEffect } from 'react'; // import { useNavigate } from 'react-router-dom';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ActiveCallsTable(props) {\n  _s();\n\n  const [pageState, setPageState] = useState({\n    isLoading: false,\n    data: [],\n    total: 0,\n    page: 1,\n    pageSize: 25\n  }); // const navigate = useNavigate();\n\n  const columns = [{\n    field: 'name',\n    headerName: 'שם ליד',\n    width: 150,\n    renderCell: params => /*#__PURE__*/_jsxDEV(\"b\", {\n      title: \"\\u05E4\\u05EA\\u05D7\",\n      style: {\n        cursor: 'pointer'\n      } // onClick={() => navigate(`${params.id}`, {\n      //     state : {\n      //         name    : params.value,\n      //         gitPath : params.row.gitPath\n      //     }\n      // })}\n      ,\n      children: params.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 17\n    }, this)\n  }, {\n    field: 'phone',\n    headerName: 'טלפון',\n    width: 150 // editable: true,\n\n  }];\n  useEffect(() => {\n    let isMounted = true;\n\n    const getData = async () => {\n      setPageState(old => ({ ...old,\n        isLoading: true\n      }));\n      return await utils.getRecordsInActiveCall(pageState.page, pageState.pageSize, props.systemId);\n    };\n\n    getData().then(resp => {\n      if (isMounted) {\n        setPageState(old => ({ ...old,\n          isLoading: false,\n          data: resp.results,\n          total: resp.total\n        }));\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [pageState.page, pageState.pageSize, props.systemId]);\n  return /*#__PURE__*/_jsxDEV(DataTable, {\n    height: \"45vh\",\n    rows: pageState.data,\n    rowCount: pageState.total,\n    loading: pageState.isLoading,\n    page: pageState.page - 1,\n    paginationMode: \"server\",\n    columns: columns,\n    pageSize: pageState.pageSize,\n    getRowId: row => row._id,\n    onPageChange: newPage => setPageState(old => ({ ...old,\n      page: newPage + 1\n    })),\n    disableSelectionOnClick: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ActiveCallsTable, \"BsIZ6/0KVSnyHpIItFh8r7FNmzo=\");\n\n_c = ActiveCallsTable;\nexport default ActiveCallsTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"ActiveCallsTable\");","map":{"version":3,"names":["utils","DataTable","React","useState","useEffect","ActiveCallsTable","props","pageState","setPageState","isLoading","data","total","page","pageSize","columns","field","headerName","width","renderCell","params","cursor","value","isMounted","getData","old","getRecordsInActiveCall","systemId","then","resp","results","row","_id","newPage"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/SystemPage/components/activeCallsView/ActiveCallsTable.js"],"sourcesContent":["import utils from '../../../../utils/manage/recordsUtils';\nimport DataTable from '../../../../components/DataTable';\nimport React, {useState, useEffect} from 'react';\n// import { useNavigate } from 'react-router-dom';\n\n\nfunction ActiveCallsTable(props) {\n    const [pageState, setPageState] = useState({\n        isLoading : false,\n        data : [],\n        total : 0,\n        page : 1,\n        pageSize : 25\n    });\n\n    // const navigate = useNavigate();\n\n    const columns = [\n        {\n            field: 'name',\n            headerName: 'שם ליד',\n            width: 150,\n            renderCell : (params) => (\n                <b\n                    title='פתח'\n                    style={{cursor : 'pointer'}}\n                    // onClick={() => navigate(`${params.id}`, {\n                    //     state : {\n                    //         name    : params.value,\n                    //         gitPath : params.row.gitPath\n                    //     }\n                    // })}\n                >\n                    {params.value}\n                </b>\n            )\n        },\n        {\n            field: 'phone',\n            headerName: 'טלפון',\n            width: 150,\n            // editable: true,\n        },\n    ];\n\n    useEffect(()=>{\n        let isMounted = true;\n\n        const getData = async ()=>{\n            setPageState(old => ({...old, isLoading : true}));\n            return await utils.getRecordsInActiveCall(pageState.page, pageState.pageSize, props.systemId);\n        };\n\n        getData().then(\n            resp =>{\n                if (isMounted) {\n                    setPageState(old => ({...old, isLoading : false, data : resp.results, total : resp.total }));\n                }\n            }\n        );\n        return () => { isMounted = false };\n    },[pageState.page, pageState.pageSize, props.systemId]);\n    \n\n    return (\n        <DataTable\n            height='45vh'\n            rows={pageState.data}\n            rowCount={pageState.total}\n            loading={pageState.isLoading}\n            page={ pageState.page -1 }\n            paginationMode='server'\n            columns={columns}\n            pageSize={pageState.pageSize}\n            getRowId={(row => row._id)}\n            onPageChange={ newPage => setPageState(old => ({ ...old, page : newPage + 1 }))}\n            disableSelectionOnClick\n        />\n    );\n}\n\nexport default ActiveCallsTable;"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,uCAAlB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC,C,CACA;;;;AAGA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;EAAA;;EAC7B,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BL,QAAQ,CAAC;IACvCM,SAAS,EAAG,KAD2B;IAEvCC,IAAI,EAAG,EAFgC;IAGvCC,KAAK,EAAG,CAH+B;IAIvCC,IAAI,EAAG,CAJgC;IAKvCC,QAAQ,EAAG;EAL4B,CAAD,CAA1C,CAD6B,CAS7B;;EAEA,MAAMC,OAAO,GAAG,CACZ;IACIC,KAAK,EAAE,MADX;IAEIC,UAAU,EAAE,QAFhB;IAGIC,KAAK,EAAE,GAHX;IAIIC,UAAU,EAAIC,MAAD,iBACT;MACI,KAAK,EAAC,oBADV;MAEI,KAAK,EAAE;QAACC,MAAM,EAAG;MAAV,CAFX,CAGI;MACA;MACA;MACA;MACA;MACA;MARJ;MAAA,UAUKD,MAAM,CAACE;IAVZ;MAAA;MAAA;MAAA;IAAA;EALR,CADY,EAoBZ;IACIN,KAAK,EAAE,OADX;IAEIC,UAAU,EAAE,OAFhB;IAGIC,KAAK,EAAE,GAHX,CAII;;EAJJ,CApBY,CAAhB;EA4BAb,SAAS,CAAC,MAAI;IACV,IAAIkB,SAAS,GAAG,IAAhB;;IAEA,MAAMC,OAAO,GAAG,YAAU;MACtBf,YAAY,CAACgB,GAAG,KAAK,EAAC,GAAGA,GAAJ;QAASf,SAAS,EAAG;MAArB,CAAL,CAAJ,CAAZ;MACA,OAAO,MAAMT,KAAK,CAACyB,sBAAN,CAA6BlB,SAAS,CAACK,IAAvC,EAA6CL,SAAS,CAACM,QAAvD,EAAiEP,KAAK,CAACoB,QAAvE,CAAb;IACH,CAHD;;IAKAH,OAAO,GAAGI,IAAV,CACIC,IAAI,IAAG;MACH,IAAIN,SAAJ,EAAe;QACXd,YAAY,CAACgB,GAAG,KAAK,EAAC,GAAGA,GAAJ;UAASf,SAAS,EAAG,KAArB;UAA4BC,IAAI,EAAGkB,IAAI,CAACC,OAAxC;UAAiDlB,KAAK,EAAGiB,IAAI,CAACjB;QAA9D,CAAL,CAAJ,CAAZ;MACH;IACJ,CALL;IAOA,OAAO,MAAM;MAAEW,SAAS,GAAG,KAAZ;IAAmB,CAAlC;EACH,CAhBQ,EAgBP,CAACf,SAAS,CAACK,IAAX,EAAiBL,SAAS,CAACM,QAA3B,EAAqCP,KAAK,CAACoB,QAA3C,CAhBO,CAAT;EAmBA,oBACI,QAAC,SAAD;IACI,MAAM,EAAC,MADX;IAEI,IAAI,EAAEnB,SAAS,CAACG,IAFpB;IAGI,QAAQ,EAAEH,SAAS,CAACI,KAHxB;IAII,OAAO,EAAEJ,SAAS,CAACE,SAJvB;IAKI,IAAI,EAAGF,SAAS,CAACK,IAAV,GAAgB,CAL3B;IAMI,cAAc,EAAC,QANnB;IAOI,OAAO,EAAEE,OAPb;IAQI,QAAQ,EAAEP,SAAS,CAACM,QARxB;IASI,QAAQ,EAAGiB,GAAG,IAAIA,GAAG,CAACC,GAT1B;IAUI,YAAY,EAAGC,OAAO,IAAIxB,YAAY,CAACgB,GAAG,KAAK,EAAE,GAAGA,GAAL;MAAUZ,IAAI,EAAGoB,OAAO,GAAG;IAA3B,CAAL,CAAJ,CAV1C;IAWI,uBAAuB;EAX3B;IAAA;IAAA;IAAA;EAAA,QADJ;AAeH;;GAzEQ3B,gB;;KAAAA,gB;AA2ET,eAAeA,gBAAf"},"metadata":{},"sourceType":"module"}