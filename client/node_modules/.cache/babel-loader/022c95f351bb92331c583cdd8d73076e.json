{"ast":null,"code":"\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Deferred_1 = require(\"./Deferred\");\n\nvar EventTarget_1 = require(\"./EventTarget\");\n/**\n * An {@link AudioPlayer} is an HTMLAudioElement-like object that uses AudioContext\n *   to circumvent browser limitations.\n */\n\n\nvar AudioPlayer = function (_EventTarget_1$defaul) {\n  _inherits(AudioPlayer, _EventTarget_1$defaul);\n  /**\n   * @private\n   */\n\n\n  function AudioPlayer(audioContext) {\n    var srcOrOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, AudioPlayer);\n    /**\n     * The AudioBufferSourceNode of the actively loaded sound. Null if a sound\n     *   has not been loaded yet. This is re-used for each time the sound is\n     *   played.\n     */\n\n\n    var _this = _possibleConstructorReturn(this, (AudioPlayer.__proto__ || Object.getPrototypeOf(AudioPlayer)).call(this));\n\n    _this._audioNode = null;\n    /**\n     * An Array of deferred-like objects for each pending `play` Promise. When\n     *   .pause() is called or .src is set, all pending play Promises are\n     *   immediately rejected.\n     */\n\n    _this._pendingPlayDeferreds = [];\n    /**\n     * Whether or not the audio element should loop. If disabled during playback,\n     *   playing continues until the sound ends and then stops looping.\n     */\n\n    _this._loop = false;\n    /**\n     * The source URL of the sound to play. When set, the currently playing sound will stop.\n     */\n\n    _this._src = '';\n    /**\n     * The current sinkId of the device audio is being played through.\n     */\n\n    _this._sinkId = 'default';\n\n    if (typeof srcOrOptions !== 'string') {\n      options = srcOrOptions;\n    }\n\n    _this._audioContext = audioContext;\n    _this._audioElement = new (options.AudioFactory || Audio)();\n    _this._bufferPromise = _this._createPlayDeferred().promise;\n    _this._destination = _this._audioContext.destination;\n    _this._gainNode = _this._audioContext.createGain();\n\n    _this._gainNode.connect(_this._destination);\n\n    _this._XMLHttpRequest = options.XMLHttpRequestFactory || XMLHttpRequest;\n\n    _this.addEventListener('canplaythrough', function () {\n      _this._resolvePlayDeferreds();\n    });\n\n    if (typeof srcOrOptions === 'string') {\n      _this.src = srcOrOptions;\n    }\n\n    return _this;\n  }\n\n  _createClass(AudioPlayer, [{\n    key: \"load\",\n\n    /**\n     * Stop any ongoing playback and reload the source file.\n     */\n    value: function load() {\n      this._load(this._src);\n    }\n    /**\n     * Pause the audio coming from this AudioPlayer. This will reject any pending\n     *   play Promises.\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      if (this.paused) {\n        return;\n      }\n\n      this._audioElement.pause();\n\n      this._audioNode.stop();\n\n      this._audioNode.disconnect(this._gainNode);\n\n      this._audioNode = null;\n\n      this._rejectPlayDeferreds(new Error('The play() request was interrupted by a call to pause().'));\n    }\n    /**\n     * Play the sound. If the buffer hasn't loaded yet, wait for the buffer to load. If\n     *   the source URL is not set yet, this Promise will remain pending until a source\n     *   URL is set.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n        var _this2 = this;\n\n        var buffer;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.paused) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return this._bufferPromise;\n\n              case 3:\n                if (this.paused) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 5:\n                throw new Error('The play() request was interrupted by a call to pause().');\n\n              case 6:\n                this._audioNode = this._audioContext.createBufferSource();\n                this._audioNode.loop = this.loop;\n\n                this._audioNode.addEventListener('ended', function () {\n                  if (_this2._audioNode && _this2._audioNode.loop) {\n                    return;\n                  }\n\n                  _this2.dispatchEvent('ended');\n                });\n\n                _context.next = 11;\n                return this._bufferPromise;\n\n              case 11:\n                buffer = _context.sent;\n\n                if (!this.paused) {\n                  _context.next = 14;\n                  break;\n                }\n\n                throw new Error('The play() request was interrupted by a call to pause().');\n\n              case 14:\n                this._audioNode.buffer = buffer;\n\n                this._audioNode.connect(this._gainNode);\n\n                this._audioNode.start();\n\n                if (!this._audioElement.srcObject) {\n                  _context.next = 19;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this._audioElement.play());\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * Change which device the sound should play through.\n     * @param sinkId - The sink of the device to play sound through.\n     */\n\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(sinkId) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(typeof this._audioElement.setSinkId !== 'function')) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new Error('This browser does not support setSinkId.');\n\n              case 2:\n                if (!(sinkId === this.sinkId)) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                if (!(sinkId === 'default')) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                if (!this.paused) {\n                  this._gainNode.disconnect(this._destination);\n                }\n\n                this._audioElement.srcObject = null;\n                this._destination = this._audioContext.destination;\n\n                this._gainNode.connect(this._destination);\n\n                this._sinkId = sinkId;\n                return _context2.abrupt(\"return\");\n\n              case 11:\n                _context2.next = 13;\n                return this._audioElement.setSinkId(sinkId);\n\n              case 13:\n                if (!this._audioElement.srcObject) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 15:\n                this._gainNode.disconnect(this._audioContext.destination);\n\n                this._destination = this._audioContext.createMediaStreamDestination();\n                this._audioElement.srcObject = this._destination.stream;\n                this._sinkId = sinkId;\n\n                this._gainNode.connect(this._destination);\n\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * Create a Deferred for a Promise that will be resolved when .src is set or rejected\n     *   when .pause is called.\n     */\n\n  }, {\n    key: \"_createPlayDeferred\",\n    value: function _createPlayDeferred() {\n      var deferred = new Deferred_1.default();\n\n      this._pendingPlayDeferreds.push(deferred);\n\n      return deferred;\n    }\n    /**\n     * Stop current playback and load a sound file.\n     * @param src - The source URL of the file to load\n     */\n\n  }, {\n    key: \"_load\",\n    value: function _load(src) {\n      var _this3 = this;\n\n      if (this._src && this._src !== src) {\n        this.pause();\n      }\n\n      this._src = src;\n      this._bufferPromise = new Promise(function (resolve, reject) {\n        return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee3() {\n          var buffer;\n          return _regenerator2.default.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (src) {\n                    _context3.next = 2;\n                    break;\n                  }\n\n                  return _context3.abrupt(\"return\", this._createPlayDeferred().promise);\n\n                case 2:\n                  _context3.next = 4;\n                  return bufferSound(this._audioContext, this._XMLHttpRequest, src);\n\n                case 4:\n                  buffer = _context3.sent;\n                  this.dispatchEvent('canplaythrough');\n                  resolve(buffer);\n\n                case 7:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n      });\n    }\n    /**\n     * Reject all deferreds for the Play promise.\n     * @param reason\n     */\n\n  }, {\n    key: \"_rejectPlayDeferreds\",\n    value: function _rejectPlayDeferreds(reason) {\n      var deferreds = this._pendingPlayDeferreds;\n      deferreds.splice(0, deferreds.length).forEach(function (_ref) {\n        var reject = _ref.reject;\n        return reject(reason);\n      });\n    }\n    /**\n     * Resolve all deferreds for the Play promise.\n     * @param result\n     */\n\n  }, {\n    key: \"_resolvePlayDeferreds\",\n    value: function _resolvePlayDeferreds(result) {\n      var deferreds = this._pendingPlayDeferreds;\n      deferreds.splice(0, deferreds.length).forEach(function (_ref2) {\n        var resolve = _ref2.resolve;\n        return resolve(result);\n      });\n    }\n  }, {\n    key: \"destination\",\n    get: function get() {\n      return this._destination;\n    }\n  }, {\n    key: \"loop\",\n    get: function get() {\n      return this._loop;\n    },\n    set: function set(shouldLoop) {\n      // If a sound is already looping, it should continue playing\n      //   the current playthrough and then stop.\n      if (!shouldLoop && this.loop && !this.paused) {\n        var _pauseAfterPlaythrough = function _pauseAfterPlaythrough() {\n          self._audioNode.removeEventListener('ended', _pauseAfterPlaythrough);\n\n          self.pause();\n        };\n\n        var self = this;\n\n        this._audioNode.addEventListener('ended', _pauseAfterPlaythrough);\n      }\n\n      this._loop = shouldLoop;\n    }\n    /**\n     * Whether the audio element is muted.\n     */\n\n  }, {\n    key: \"muted\",\n    get: function get() {\n      return this._gainNode.gain.value === 0;\n    },\n    set: function set(shouldBeMuted) {\n      this._gainNode.gain.value = shouldBeMuted ? 0 : 1;\n    }\n    /**\n     * Whether the sound is paused. this._audioNode only exists when sound is playing;\n     *   otherwise AudioPlayer is considered paused.\n     */\n\n  }, {\n    key: \"paused\",\n    get: function get() {\n      return this._audioNode === null;\n    }\n  }, {\n    key: \"src\",\n    get: function get() {\n      return this._src;\n    },\n    set: function set(src) {\n      this._load(src);\n    }\n    /**\n     * The srcObject of the HTMLMediaElement\n     */\n\n  }, {\n    key: \"srcObject\",\n    get: function get() {\n      return this._audioElement.srcObject;\n    },\n    set: function set(srcObject) {\n      this._audioElement.srcObject = srcObject;\n    }\n  }, {\n    key: \"sinkId\",\n    get: function get() {\n      return this._sinkId;\n    }\n  }]);\n\n  return AudioPlayer;\n}(EventTarget_1.default);\n\nexports.default = AudioPlayer;\n/**\n * Use XMLHttpRequest to load the AudioBuffer of a remote audio asset.\n * @private\n * @param context - The AudioContext to use to decode the audio data\n * @param RequestFactory - The XMLHttpRequest factory to build\n * @param src - The URL of the audio asset to load.\n * @returns A Promise containing the decoded AudioBuffer.\n */\n// tslint:disable-next-line:variable-name\n\nfunction bufferSound(context, RequestFactory, src) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee4() {\n    var request, event;\n    return _regenerator2.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            request = new RequestFactory();\n            request.open('GET', src, true);\n            request.responseType = 'arraybuffer';\n            _context4.next = 5;\n            return new Promise(function (resolve) {\n              request.addEventListener('load', resolve);\n              request.send();\n            });\n\n          case 5:\n            event = _context4.sent;\n            _context4.prev = 6;\n            return _context4.abrupt(\"return\", context.decodeAudioData(event.target.response));\n\n          case 10:\n            _context4.prev = 10;\n            _context4.t0 = _context4[\"catch\"](6);\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              context.decodeAudioData(event.target.response, resolve);\n            }));\n\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this, [[6, 10]]);\n  }));\n}","map":{"version":3,"names":["_regenerator","require","_regenerator2","_interopRequireDefault","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","__awaiter","undefined","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","exports","Deferred_1","EventTarget_1","AudioPlayer","_EventTarget_1$defaul","audioContext","srcOrOptions","arguments","options","_this","getPrototypeOf","_audioNode","_pendingPlayDeferreds","_loop","_src","_sinkId","_audioContext","_audioElement","AudioFactory","Audio","_bufferPromise","_createPlayDeferred","promise","_destination","destination","_gainNode","createGain","connect","_XMLHttpRequest","XMLHttpRequestFactory","XMLHttpRequest","addEventListener","_resolvePlayDeferreds","src","load","_load","pause","paused","stop","disconnect","_rejectPlayDeferreds","Error","play","mark","_callee","_this2","buffer","wrap","_callee$","_context","prev","abrupt","createBufferSource","loop","dispatchEvent","sent","start","srcObject","setSinkId","sinkId","_callee2","_callee2$","_context2","createMediaStreamDestination","stream","deferred","push","_this3","_callee3","_callee3$","_context3","bufferSound","reason","deferreds","splice","forEach","_ref","_ref2","get","set","shouldLoop","_pauseAfterPlaythrough","removeEventListener","gain","shouldBeMuted","context","RequestFactory","_callee4","request","event","_callee4$","_context4","open","responseType","send","decodeAudioData","response","t0"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/node_modules/@twilio/audioplayer/es5/AudioPlayer.js"],"sourcesContent":["\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Deferred_1 = require(\"./Deferred\");\nvar EventTarget_1 = require(\"./EventTarget\");\n/**\n * An {@link AudioPlayer} is an HTMLAudioElement-like object that uses AudioContext\n *   to circumvent browser limitations.\n */\n\nvar AudioPlayer = function (_EventTarget_1$defaul) {\n    _inherits(AudioPlayer, _EventTarget_1$defaul);\n\n    /**\n     * @private\n     */\n    function AudioPlayer(audioContext) {\n        var srcOrOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        _classCallCheck(this, AudioPlayer);\n\n        /**\n         * The AudioBufferSourceNode of the actively loaded sound. Null if a sound\n         *   has not been loaded yet. This is re-used for each time the sound is\n         *   played.\n         */\n        var _this = _possibleConstructorReturn(this, (AudioPlayer.__proto__ || Object.getPrototypeOf(AudioPlayer)).call(this));\n\n        _this._audioNode = null;\n        /**\n         * An Array of deferred-like objects for each pending `play` Promise. When\n         *   .pause() is called or .src is set, all pending play Promises are\n         *   immediately rejected.\n         */\n        _this._pendingPlayDeferreds = [];\n        /**\n         * Whether or not the audio element should loop. If disabled during playback,\n         *   playing continues until the sound ends and then stops looping.\n         */\n        _this._loop = false;\n        /**\n         * The source URL of the sound to play. When set, the currently playing sound will stop.\n         */\n        _this._src = '';\n        /**\n         * The current sinkId of the device audio is being played through.\n         */\n        _this._sinkId = 'default';\n        if (typeof srcOrOptions !== 'string') {\n            options = srcOrOptions;\n        }\n        _this._audioContext = audioContext;\n        _this._audioElement = new (options.AudioFactory || Audio)();\n        _this._bufferPromise = _this._createPlayDeferred().promise;\n        _this._destination = _this._audioContext.destination;\n        _this._gainNode = _this._audioContext.createGain();\n        _this._gainNode.connect(_this._destination);\n        _this._XMLHttpRequest = options.XMLHttpRequestFactory || XMLHttpRequest;\n        _this.addEventListener('canplaythrough', function () {\n            _this._resolvePlayDeferreds();\n        });\n        if (typeof srcOrOptions === 'string') {\n            _this.src = srcOrOptions;\n        }\n        return _this;\n    }\n\n    _createClass(AudioPlayer, [{\n        key: \"load\",\n\n        /**\n         * Stop any ongoing playback and reload the source file.\n         */\n        value: function load() {\n            this._load(this._src);\n        }\n        /**\n         * Pause the audio coming from this AudioPlayer. This will reject any pending\n         *   play Promises.\n         */\n\n    }, {\n        key: \"pause\",\n        value: function pause() {\n            if (this.paused) {\n                return;\n            }\n            this._audioElement.pause();\n            this._audioNode.stop();\n            this._audioNode.disconnect(this._gainNode);\n            this._audioNode = null;\n            this._rejectPlayDeferreds(new Error('The play() request was interrupted by a call to pause().'));\n        }\n        /**\n         * Play the sound. If the buffer hasn't loaded yet, wait for the buffer to load. If\n         *   the source URL is not set yet, this Promise will remain pending until a source\n         *   URL is set.\n         */\n\n    }, {\n        key: \"play\",\n        value: function play() {\n            return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n                var _this2 = this;\n\n                var buffer;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.paused) {\n                                    _context.next = 6;\n                                    break;\n                                }\n\n                                _context.next = 3;\n                                return this._bufferPromise;\n\n                            case 3:\n                                if (this.paused) {\n                                    _context.next = 5;\n                                    break;\n                                }\n\n                                return _context.abrupt(\"return\");\n\n                            case 5:\n                                throw new Error('The play() request was interrupted by a call to pause().');\n\n                            case 6:\n                                this._audioNode = this._audioContext.createBufferSource();\n                                this._audioNode.loop = this.loop;\n                                this._audioNode.addEventListener('ended', function () {\n                                    if (_this2._audioNode && _this2._audioNode.loop) {\n                                        return;\n                                    }\n                                    _this2.dispatchEvent('ended');\n                                });\n                                _context.next = 11;\n                                return this._bufferPromise;\n\n                            case 11:\n                                buffer = _context.sent;\n\n                                if (!this.paused) {\n                                    _context.next = 14;\n                                    break;\n                                }\n\n                                throw new Error('The play() request was interrupted by a call to pause().');\n\n                            case 14:\n                                this._audioNode.buffer = buffer;\n                                this._audioNode.connect(this._gainNode);\n                                this._audioNode.start();\n\n                                if (!this._audioElement.srcObject) {\n                                    _context.next = 19;\n                                    break;\n                                }\n\n                                return _context.abrupt(\"return\", this._audioElement.play());\n\n                            case 19:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Change which device the sound should play through.\n         * @param sinkId - The sink of the device to play sound through.\n         */\n\n    }, {\n        key: \"setSinkId\",\n        value: function setSinkId(sinkId) {\n            return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (!(typeof this._audioElement.setSinkId !== 'function')) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('This browser does not support setSinkId.');\n\n                            case 2:\n                                if (!(sinkId === this.sinkId)) {\n                                    _context2.next = 4;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\");\n\n                            case 4:\n                                if (!(sinkId === 'default')) {\n                                    _context2.next = 11;\n                                    break;\n                                }\n\n                                if (!this.paused) {\n                                    this._gainNode.disconnect(this._destination);\n                                }\n                                this._audioElement.srcObject = null;\n                                this._destination = this._audioContext.destination;\n                                this._gainNode.connect(this._destination);\n                                this._sinkId = sinkId;\n                                return _context2.abrupt(\"return\");\n\n                            case 11:\n                                _context2.next = 13;\n                                return this._audioElement.setSinkId(sinkId);\n\n                            case 13:\n                                if (!this._audioElement.srcObject) {\n                                    _context2.next = 15;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\");\n\n                            case 15:\n                                this._gainNode.disconnect(this._audioContext.destination);\n                                this._destination = this._audioContext.createMediaStreamDestination();\n                                this._audioElement.srcObject = this._destination.stream;\n                                this._sinkId = sinkId;\n                                this._gainNode.connect(this._destination);\n\n                            case 20:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Create a Deferred for a Promise that will be resolved when .src is set or rejected\n         *   when .pause is called.\n         */\n\n    }, {\n        key: \"_createPlayDeferred\",\n        value: function _createPlayDeferred() {\n            var deferred = new Deferred_1.default();\n            this._pendingPlayDeferreds.push(deferred);\n            return deferred;\n        }\n        /**\n         * Stop current playback and load a sound file.\n         * @param src - The source URL of the file to load\n         */\n\n    }, {\n        key: \"_load\",\n        value: function _load(src) {\n            var _this3 = this;\n\n            if (this._src && this._src !== src) {\n                this.pause();\n            }\n            this._src = src;\n            this._bufferPromise = new Promise(function (resolve, reject) {\n                return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee3() {\n                    var buffer;\n                    return _regenerator2.default.wrap(function _callee3$(_context3) {\n                        while (1) {\n                            switch (_context3.prev = _context3.next) {\n                                case 0:\n                                    if (src) {\n                                        _context3.next = 2;\n                                        break;\n                                    }\n\n                                    return _context3.abrupt(\"return\", this._createPlayDeferred().promise);\n\n                                case 2:\n                                    _context3.next = 4;\n                                    return bufferSound(this._audioContext, this._XMLHttpRequest, src);\n\n                                case 4:\n                                    buffer = _context3.sent;\n\n                                    this.dispatchEvent('canplaythrough');\n                                    resolve(buffer);\n\n                                case 7:\n                                case \"end\":\n                                    return _context3.stop();\n                            }\n                        }\n                    }, _callee3, this);\n                }));\n            });\n        }\n        /**\n         * Reject all deferreds for the Play promise.\n         * @param reason\n         */\n\n    }, {\n        key: \"_rejectPlayDeferreds\",\n        value: function _rejectPlayDeferreds(reason) {\n            var deferreds = this._pendingPlayDeferreds;\n            deferreds.splice(0, deferreds.length).forEach(function (_ref) {\n                var reject = _ref.reject;\n                return reject(reason);\n            });\n        }\n        /**\n         * Resolve all deferreds for the Play promise.\n         * @param result\n         */\n\n    }, {\n        key: \"_resolvePlayDeferreds\",\n        value: function _resolvePlayDeferreds(result) {\n            var deferreds = this._pendingPlayDeferreds;\n            deferreds.splice(0, deferreds.length).forEach(function (_ref2) {\n                var resolve = _ref2.resolve;\n                return resolve(result);\n            });\n        }\n    }, {\n        key: \"destination\",\n        get: function get() {\n            return this._destination;\n        }\n    }, {\n        key: \"loop\",\n        get: function get() {\n            return this._loop;\n        },\n        set: function set(shouldLoop) {\n            // If a sound is already looping, it should continue playing\n            //   the current playthrough and then stop.\n            if (!shouldLoop && this.loop && !this.paused) {\n                var _pauseAfterPlaythrough = function _pauseAfterPlaythrough() {\n                    self._audioNode.removeEventListener('ended', _pauseAfterPlaythrough);\n                    self.pause();\n                };\n\n                var self = this;\n\n                this._audioNode.addEventListener('ended', _pauseAfterPlaythrough);\n            }\n            this._loop = shouldLoop;\n        }\n        /**\n         * Whether the audio element is muted.\n         */\n\n    }, {\n        key: \"muted\",\n        get: function get() {\n            return this._gainNode.gain.value === 0;\n        },\n        set: function set(shouldBeMuted) {\n            this._gainNode.gain.value = shouldBeMuted ? 0 : 1;\n        }\n        /**\n         * Whether the sound is paused. this._audioNode only exists when sound is playing;\n         *   otherwise AudioPlayer is considered paused.\n         */\n\n    }, {\n        key: \"paused\",\n        get: function get() {\n            return this._audioNode === null;\n        }\n    }, {\n        key: \"src\",\n        get: function get() {\n            return this._src;\n        },\n        set: function set(src) {\n            this._load(src);\n        }\n        /**\n         * The srcObject of the HTMLMediaElement\n         */\n\n    }, {\n        key: \"srcObject\",\n        get: function get() {\n            return this._audioElement.srcObject;\n        },\n        set: function set(srcObject) {\n            this._audioElement.srcObject = srcObject;\n        }\n    }, {\n        key: \"sinkId\",\n        get: function get() {\n            return this._sinkId;\n        }\n    }]);\n\n    return AudioPlayer;\n}(EventTarget_1.default);\n\nexports.default = AudioPlayer;\n/**\n * Use XMLHttpRequest to load the AudioBuffer of a remote audio asset.\n * @private\n * @param context - The AudioContext to use to decode the audio data\n * @param RequestFactory - The XMLHttpRequest factory to build\n * @param src - The URL of the audio asset to load.\n * @returns A Promise containing the decoded AudioBuffer.\n */\n// tslint:disable-next-line:variable-name\nfunction bufferSound(context, RequestFactory, src) {\n    return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee4() {\n        var request, event;\n        return _regenerator2.default.wrap(function _callee4$(_context4) {\n            while (1) {\n                switch (_context4.prev = _context4.next) {\n                    case 0:\n                        request = new RequestFactory();\n\n                        request.open('GET', src, true);\n                        request.responseType = 'arraybuffer';\n                        _context4.next = 5;\n                        return new Promise(function (resolve) {\n                            request.addEventListener('load', resolve);\n                            request.send();\n                        });\n\n                    case 5:\n                        event = _context4.sent;\n                        _context4.prev = 6;\n                        return _context4.abrupt(\"return\", context.decodeAudioData(event.target.response));\n\n                    case 10:\n                        _context4.prev = 10;\n                        _context4.t0 = _context4[\"catch\"](6);\n                        return _context4.abrupt(\"return\", new Promise(function (resolve) {\n                            context.decodeAudioData(event.target.response, resolve);\n                        }));\n\n                    case 13:\n                    case \"end\":\n                        return _context4.stop();\n                }\n            }\n        }, _callee4, this, [[6, 10]]);\n    }));\n}\n//# sourceMappingURL=AudioPlayer.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}