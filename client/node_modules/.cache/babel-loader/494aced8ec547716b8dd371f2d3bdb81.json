{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Manage/LoadDataModal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport generalUtils from '../../utils/utils';\nimport AddIcon from '@mui/icons-material/Add';\nimport { Fab, Grid, Button } from '@mui/material';\nimport DataTable from '../../components/DataTable';\nimport utils from '../../utils/manage/recordsUtils';\nimport ChoseFileBtn from '../../components/ChoseFileBtn';\nimport ModalTemplate from '../../components/ModalComp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n;\n\nfunction LoadDataModal(props) {\n  _s();\n\n  var _pageState$data;\n\n  const [open, setOpen] = useState(false);\n  const [fileName, setFileName] = useState();\n  const [pageState, setPageState] = useState({\n    isLoading: false,\n    data: [],\n    total: 0\n  });\n  const fabStyle = {\n    margin: 0,\n    top: 'auto',\n    right: 'auto',\n    bottom: 20,\n    left: 20,\n    position: 'fixed'\n  };\n  const title = 'טען רשומות';\n  const columns = [{\n    field: 'name',\n    headerName: 'שם',\n    width: 150 // editable: true,\n\n  }, {\n    field: 'phone',\n    headerName: 'טלפון',\n    width: 150 // editable: true,\n\n  }, {\n    field: 'city',\n    headerName: 'עיר',\n    width: 150 // editable: true,\n\n  }, {\n    field: 'birthDate',\n    headerName: 'תאריך לידה',\n    width: 150 // editable: true,\n\n  }, {\n    field: 'email',\n    headerName: 'אימייל',\n    width: 150 // editable: true,\n\n  }];\n\n  const handleOnFileSelected = async file => {\n    var _file$name;\n\n    const setItems = items => setPageState(old => ({ ...old,\n      data: items,\n      total: items.length\n    }));\n\n    setFileName(file === null || file === void 0 ? void 0 : (_file$name = file.name) === null || _file$name === void 0 ? void 0 : _file$name.replace(/\\.[^/.]+$/, \"\"));\n    setPageState(old => ({ ...old,\n      isLoading: true\n    }));\n    await generalUtils.readExcel(file, setItems);\n    console.log(fileName);\n    setPageState(old => ({ ...old,\n      isLoading: false\n    }));\n  };\n\n  const makeTrigerBtn = additionalProps => {\n    return /*#__PURE__*/_jsxDEV(Fab, {\n      onClick: additionalProps.onClick,\n      style: fabStyle,\n      title: \"\\u05D8\\u05E2\\u05DF \\u05D3\\u05D0\\u05D8\\u05D0\",\n      color: \"info\",\n      children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  };\n\n  const body = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(DataTable, {\n      rows: pageState === null || pageState === void 0 ? void 0 : pageState.data,\n      rowCount: pageState === null || pageState === void 0 ? void 0 : pageState.total,\n      loading: pageState.isLoading,\n      columns: columns,\n      getRowId: row => row.__rowNum__,\n      disableSelectionOnClick: true,\n      checkboxSelection: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 1,\n      children: (pageState === null || pageState === void 0 ? void 0 : (_pageState$data = pageState.data) === null || _pageState$data === void 0 ? void 0 : _pageState$data.length) === 0 ? /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(ChoseFileBtn, {\n          title: \"\\u05D1\\u05D7\\u05E8 \\u05E8\\u05E9\\u05D5\\u05DE\\u05D5\\u05EA\",\n          onFileSelected: handleOnFileSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(ChoseFileBtn, {\n            title: \"\\u05D1\\u05D7\\u05E8 \\u05E8\\u05E9\\u05D5\\u05DE\\u05D4 \\u05D0\\u05D7\\u05E8\\u05EA\",\n            onFileSelected: handleOnFileSelected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            fullWidth: true,\n            color: \"success\",\n            variant: \"contained\",\n            onClick: () => utils.uploadRecords(pageState.data, props.systemId),\n            children: \"\\u05D4\\u05E2\\u05DC\\u05D4 \\u05E8\\u05E9\\u05D5\\u05DE\\u05D5\\u05EA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(ModalTemplate, {\n      closeBtn: true,\n      fullWidth: true,\n      body: body,\n      title: title,\n      closeTxt: 'סגור',\n      makeTrigerBtn: makeTrigerBtn,\n      openController: {\n        open,\n        setOpen\n      },\n      closeCallBack: () => setPageState({\n        data: [],\n        total: 0\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoadDataModal, \"PWo0RcWrdJf7UfKEIcZc/ieT0L0=\");\n\n_c = LoadDataModal;\nexport default LoadDataModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoadDataModal\");","map":{"version":3,"names":["React","useState","generalUtils","AddIcon","Fab","Grid","Button","DataTable","utils","ChoseFileBtn","ModalTemplate","LoadDataModal","props","open","setOpen","fileName","setFileName","pageState","setPageState","isLoading","data","total","fabStyle","margin","top","right","bottom","left","position","title","columns","field","headerName","width","handleOnFileSelected","file","setItems","items","old","length","name","replace","readExcel","console","log","makeTrigerBtn","additionalProps","onClick","body","row","__rowNum__","uploadRecords","systemId"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Manage/LoadDataModal.js"],"sourcesContent":["import React, {useState} from 'react';\nimport generalUtils from '../../utils/utils';\nimport AddIcon from '@mui/icons-material/Add';\nimport { Fab, Grid, Button } from '@mui/material';\nimport DataTable from '../../components/DataTable';\nimport utils from '../../utils/manage/recordsUtils';\nimport ChoseFileBtn from '../../components/ChoseFileBtn';\n\n\nimport ModalTemplate from '../../components/ModalComp';;\n\nfunction LoadDataModal(props) {\n    const [open, setOpen] = useState(false);\n    const [fileName, setFileName] = useState();\n    const [pageState, setPageState] = useState({\n        isLoading : false,\n        data : [],\n        total : 0,\n    });\n\n    const fabStyle = {\n        margin: 0,\n        top: 'auto',\n        right: 'auto',\n        bottom: 20,\n        left: 20,\n        position: 'fixed',\n    };\n\n    const title = 'טען רשומות';\n\n    const columns = [\n        {\n            field: 'name',\n            headerName: 'שם',\n            width: 150,\n            // editable: true,\n        },\n        {\n            field: 'phone',\n            headerName: 'טלפון',\n            width: 150,\n            // editable: true,\n        },\n        {\n            field: 'city',\n            headerName: 'עיר',\n            width: 150,\n            // editable: true,\n        },\n        {\n            field: 'birthDate',\n            headerName: 'תאריך לידה',\n            width: 150,\n            // editable: true,\n        },\n        {\n            field: 'email',\n            headerName: 'אימייל',\n            width: 150,\n            // editable: true,\n        },\n    ];\n\n\n    const handleOnFileSelected = async (file) => {\n        const setItems = items => setPageState(old => ({...old, data : items, total : items.length}));\n\n        setFileName(file?.name?.replace(/\\.[^/.]+$/, \"\"));\n\n        setPageState(old => ({...old, isLoading : true}));\n\n        await generalUtils.readExcel(file, setItems);\nconsole.log(fileName);\n        setPageState(old => ({...old, isLoading : false}));\n    };\n\n    const makeTrigerBtn = (additionalProps) => {\n        return (\n            <Fab onClick={additionalProps.onClick} style={fabStyle} title='טען דאטא' color='info'>\n                <AddIcon/>\n            </Fab>\n        )\n    }\n\n    const body = (\n        <div>\n            <DataTable\n                rows={pageState?.data}\n                rowCount={pageState?.total}\n                loading={pageState.isLoading}\n                columns={columns}\n                getRowId={(row) => row.__rowNum__}\n                disableSelectionOnClick\n                checkboxSelection\n                \n            />\n            <br/>\n            <Grid container spacing={1}>\n                {\n                    pageState?.data?.length === 0 ? (\n                        <Grid item xs={12}>\n                            <ChoseFileBtn title='בחר רשומות' onFileSelected={handleOnFileSelected}/>\n                        </Grid>\n                    ) : (\n                        <>\n                            <Grid item xs={12} sm={6}>\n                                <ChoseFileBtn title='בחר רשומה אחרת' onFileSelected={handleOnFileSelected}/>\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <Button\n                                    fullWidth\n                                    color='success'\n                                    variant='contained'\n                                    onClick={() => utils.uploadRecords(pageState.data, props.systemId)}\n                                >\n                                    העלה רשומות\n                                </Button>\n                            </Grid>\n                        </>\n                    )\n                }\n            </Grid>\n        </div>\n    )\n\n    return (\n        <div>\n            <ModalTemplate \n                closeBtn \n                fullWidth\n                body={body} \n                title={title} \n                closeTxt={'סגור'}\n                makeTrigerBtn={makeTrigerBtn}\n                openController={{open, setOpen}}\n                closeCallBack={() => setPageState({data: [], total : 0})}\n            />\n        </div>\n    );\n}\n\nexport default LoadDataModal;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}