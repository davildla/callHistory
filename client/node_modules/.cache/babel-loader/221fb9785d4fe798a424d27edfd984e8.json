{"ast":null,"code":"\"use strict\";\n/**\n * @packageDocumentation\n * @module Tools\n * @internalapi\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar errors_1 = require(\"./errors\");\n/**\n * A Map of DTMF Sound Names to their mock frequency pairs.\n */\n\n\nvar bandFrequencies = {\n  dtmf0: [1360, 960],\n  dtmf1: [1230, 720],\n  dtmf2: [1360, 720],\n  dtmf3: [1480, 720],\n  dtmf4: [1230, 790],\n  dtmf5: [1360, 790],\n  dtmf6: [1480, 790],\n  dtmf7: [1230, 870],\n  dtmf8: [1360, 870],\n  dtmf9: [1480, 870],\n  dtmfh: [1480, 960],\n  dtmfs: [1230, 960]\n};\n\nvar DialtonePlayer =\n/** @class */\nfunction () {\n  function DialtonePlayer(_context) {\n    var _this = this;\n\n    this._context = _context;\n    /**\n     * Gain nodes, reducing the frequency.\n     */\n\n    this._gainNodes = [];\n    this._gainNodes = [this._context.createGain(), this._context.createGain()];\n\n    this._gainNodes.forEach(function (gainNode) {\n      gainNode.connect(_this._context.destination);\n      gainNode.gain.value = 0.1;\n\n      _this._gainNodes.push(gainNode);\n    });\n  }\n\n  DialtonePlayer.prototype.cleanup = function () {\n    this._gainNodes.forEach(function (gainNode) {\n      gainNode.disconnect();\n    });\n  };\n  /**\n   * Play the dual frequency tone for the passed DTMF name.\n   * @param sound\n   */\n\n\n  DialtonePlayer.prototype.play = function (sound) {\n    var _this = this;\n\n    var frequencies = bandFrequencies[sound];\n\n    if (!frequencies) {\n      throw new errors_1.InvalidArgumentError('Invalid DTMF sound name');\n    }\n\n    var oscillators = [this._context.createOscillator(), this._context.createOscillator()];\n    oscillators.forEach(function (oscillator, i) {\n      oscillator.type = 'sine';\n      oscillator.frequency.value = frequencies[i];\n      oscillator.connect(_this._gainNodes[i]);\n      oscillator.start();\n      oscillator.stop(_this._context.currentTime + 0.1);\n      oscillator.addEventListener('ended', function () {\n        return oscillator.disconnect();\n      });\n    });\n  };\n\n  return DialtonePlayer;\n}();\n\nexports.default = DialtonePlayer; //# sourceMappingURL=dialtonePlayer.js.map","map":null,"metadata":{},"sourceType":"script"}