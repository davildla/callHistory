{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport JsSIP from 'jssip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst config = {\n  uri: 'sip:200-dataocean@webrtc.1com.co.il',\n  password: 'password',\n  ws_servers: 'wss://webrtc.1com.co.il/ws'\n};\n\nconst SipAudio = () => {\n  _s();\n\n  const [connected, setConnected] = useState(false);\n  useEffect(() => {\n    const userAgent = new JsSIP.UA(config);\n    const audio = new Audio('/ringtone.mp3');\n    userAgent.on('connected', () => {\n      setConnected(true);\n      console.log('Connected to SIP server');\n    });\n    userAgent.on('disconnected', () => {\n      setConnected(false);\n      console.log('Disconnected from SIP server');\n    });\n    userAgent.on('newRTCSession', data => {\n      const {\n        session\n      } = data;\n      session.on('ended', () => {\n        console.log('Call ended');\n      });\n      session.on('confirmed', () => {\n        console.log('Call confirmed');\n        audio.pause();\n      });\n      session.on('failed', () => {\n        console.log('Call failed');\n        audio.pause();\n      });\n      session.on('peerconnection', data => {\n        const {\n          peerconnection\n        } = data;\n        const remoteStream = new MediaStream();\n        peerconnection.getReceivers().forEach(receiver => {\n          const track = receiver.track;\n\n          if (track) {\n            remoteStream.addTrack(track);\n          }\n        });\n        const remoteAudio = new Audio();\n        remoteAudio.srcObject = remoteStream;\n        remoteAudio.play();\n      });\n      session.answer({\n        mediaConstraints: {\n          audio: true,\n          video: false\n        }\n      });\n      audio.play();\n    });\n    userAgent.start();\n    return () => {\n      userAgent.stop();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: connected ? 'Connected' : 'Disconnected'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 12\n  }, this);\n};\n\n_s(SipAudio, \"NFlTEg7F86aU6mjdNH+dIO8IVKM=\");\n\n_c = SipAudio;\nexport default SipAudio;\n\nvar _c;\n\n$RefreshReg$(_c, \"SipAudio\");","map":{"version":3,"names":["React","useState","useEffect","JsSIP","config","uri","password","ws_servers","SipAudio","connected","setConnected","userAgent","UA","audio","Audio","on","console","log","data","session","pause","peerconnection","remoteStream","MediaStream","getReceivers","forEach","receiver","track","addTrack","remoteAudio","srcObject","play","answer","mediaConstraints","video","start","stop"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport JsSIP from 'jssip';\n\nconst config = {\n    uri: 'sip:200-dataocean@webrtc.1com.co.il',\n    password: 'password',\n    ws_servers: 'wss://webrtc.1com.co.il/ws',\n};\n\nconst SipAudio = () => {\n    const [connected, setConnected] = useState(false);\n\n    useEffect(() => {\n        const userAgent = new JsSIP.UA(config);\n        const audio = new Audio('/ringtone.mp3');\n\n        userAgent.on('connected', () => {\n            setConnected(true);\n            console.log('Connected to SIP server');\n        });\n\n        userAgent.on('disconnected', () => {\n            setConnected(false);\n            console.log('Disconnected from SIP server');\n        });\n\n        userAgent.on('newRTCSession', (data) => {\n            const { session } = data;\n\n            session.on('ended', () => {\n                console.log('Call ended');\n            });\n\n            session.on('confirmed', () => {\n                console.log('Call confirmed');\n                audio.pause();\n            });\n\n            session.on('failed', () => {\n                console.log('Call failed');\n                audio.pause();\n            });\n\n            session.on('peerconnection', (data) => {\n                const { peerconnection } = data;\n                const remoteStream = new MediaStream();\n                peerconnection.getReceivers().forEach((receiver) => {\n                    const track = receiver.track;\n                    if (track) {\n                        remoteStream.addTrack(track);\n                    }\n                });\n                const remoteAudio = new Audio();\n                remoteAudio.srcObject = remoteStream;\n                remoteAudio.play();\n            });\n\n            session.answer({\n                mediaConstraints: {\n                    audio: true,\n                    video: false,\n                },\n            });\n\n            audio.play();\n        });\n\n        userAgent.start();\n\n        return () => {\n            userAgent.stop();\n        };\n    }, []);\n\n    return <div>{connected ? 'Connected' : 'Disconnected'}</div>;\n};\n\nexport default SipAudio;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,MAAM,GAAG;EACXC,GAAG,EAAE,qCADM;EAEXC,QAAQ,EAAE,UAFC;EAGXC,UAAU,EAAE;AAHD,CAAf;;AAMA,MAAMC,QAAQ,GAAG,MAAM;EAAA;;EACnB,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,KAAD,CAA1C;EAEAC,SAAS,CAAC,MAAM;IACZ,MAAMS,SAAS,GAAG,IAAIR,KAAK,CAACS,EAAV,CAAaR,MAAb,CAAlB;IACA,MAAMS,KAAK,GAAG,IAAIC,KAAJ,CAAU,eAAV,CAAd;IAEAH,SAAS,CAACI,EAAV,CAAa,WAAb,EAA0B,MAAM;MAC5BL,YAAY,CAAC,IAAD,CAAZ;MACAM,OAAO,CAACC,GAAR,CAAY,yBAAZ;IACH,CAHD;IAKAN,SAAS,CAACI,EAAV,CAAa,cAAb,EAA6B,MAAM;MAC/BL,YAAY,CAAC,KAAD,CAAZ;MACAM,OAAO,CAACC,GAAR,CAAY,8BAAZ;IACH,CAHD;IAKAN,SAAS,CAACI,EAAV,CAAa,eAAb,EAA+BG,IAAD,IAAU;MACpC,MAAM;QAAEC;MAAF,IAAcD,IAApB;MAEAC,OAAO,CAACJ,EAAR,CAAW,OAAX,EAAoB,MAAM;QACtBC,OAAO,CAACC,GAAR,CAAY,YAAZ;MACH,CAFD;MAIAE,OAAO,CAACJ,EAAR,CAAW,WAAX,EAAwB,MAAM;QAC1BC,OAAO,CAACC,GAAR,CAAY,gBAAZ;QACAJ,KAAK,CAACO,KAAN;MACH,CAHD;MAKAD,OAAO,CAACJ,EAAR,CAAW,QAAX,EAAqB,MAAM;QACvBC,OAAO,CAACC,GAAR,CAAY,aAAZ;QACAJ,KAAK,CAACO,KAAN;MACH,CAHD;MAKAD,OAAO,CAACJ,EAAR,CAAW,gBAAX,EAA8BG,IAAD,IAAU;QACnC,MAAM;UAAEG;QAAF,IAAqBH,IAA3B;QACA,MAAMI,YAAY,GAAG,IAAIC,WAAJ,EAArB;QACAF,cAAc,CAACG,YAAf,GAA8BC,OAA9B,CAAuCC,QAAD,IAAc;UAChD,MAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;;UACA,IAAIA,KAAJ,EAAW;YACPL,YAAY,CAACM,QAAb,CAAsBD,KAAtB;UACH;QACJ,CALD;QAMA,MAAME,WAAW,GAAG,IAAIf,KAAJ,EAApB;QACAe,WAAW,CAACC,SAAZ,GAAwBR,YAAxB;QACAO,WAAW,CAACE,IAAZ;MACH,CAZD;MAcAZ,OAAO,CAACa,MAAR,CAAe;QACXC,gBAAgB,EAAE;UACdpB,KAAK,EAAE,IADO;UAEdqB,KAAK,EAAE;QAFO;MADP,CAAf;MAOArB,KAAK,CAACkB,IAAN;IACH,CAvCD;IAyCApB,SAAS,CAACwB,KAAV;IAEA,OAAO,MAAM;MACTxB,SAAS,CAACyB,IAAV;IACH,CAFD;EAGH,CA5DQ,EA4DN,EA5DM,CAAT;EA8DA,oBAAO;IAAA,UAAM3B,SAAS,GAAG,WAAH,GAAiB;EAAhC;IAAA;IAAA;IAAA;EAAA,QAAP;AACH,CAlED;;GAAMD,Q;;KAAAA,Q;AAoEN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}