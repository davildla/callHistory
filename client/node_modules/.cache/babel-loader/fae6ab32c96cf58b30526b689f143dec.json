{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport JsSIP from \"jssip\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SIP_USERNAME = \"200-dataocean\";\nconst SIP_PASSWORD = \"RjH2TV2s9s8FHSpz\";\nconst SIP_DOMAIN = \"webrtc.1com.co.il\";\nconst SIP_SERVER = `wss://${SIP_DOMAIN}/ws`;\n\nfunction SipAudio() {\n  _s();\n\n  useEffect(() => {\n    const socket = new JsSIP.WebSocketInterface(SIP_SERVER);\n    const configuration = {\n      sockets: [socket],\n      uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,\n      password: SIP_PASSWORD\n    };\n    const userAgent = new JsSIP.UA(configuration);\n    userAgent.on(\"registered\", data => {\n      console.log(\"SIP registered:\", data);\n    });\n    userAgent.on(\"unregistered\", data => {\n      console.log(\"SIP unregistered:\", data);\n    });\n    userAgent.on(\"registrationFailed\", data => {\n      console.log(\"SIP registration failed:\", data);\n    });\n    userAgent.on(\"newRTCSession\", data => {\n      const session = data.session;\n      const remoteAudio = new Audio();\n      remoteAudio.autoplay = true;\n      session.on(\"ended\", () => {\n        console.log(\"SIP call ended\");\n      });\n      session.on(\"peerconnection\", data => {\n        const pc = data.peerconnection;\n        const remoteStream = new MediaStream();\n        pc.getReceivers().forEach(receiver => {\n          const track = receiver.track;\n\n          if (track) {\n            remoteStream.addTrack(track);\n          }\n        });\n        remoteAudio.srcObject = remoteStream;\n      });\n      const options = {\n        mediaConstraints: {\n          audio: true,\n          video: false\n        }\n      };\n      session.answer(options);\n    });\n    userAgent.start();\n    return () => {\n      userAgent.stop();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"SIP audio call\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 12\n  }, this);\n}\n\n_s(SipAudio, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = SipAudio;\nexport default SipAudio;\n\nvar _c;\n\n$RefreshReg$(_c, \"SipAudio\");","map":{"version":3,"names":["React","useEffect","JsSIP","SIP_USERNAME","SIP_PASSWORD","SIP_DOMAIN","SIP_SERVER","SipAudio","socket","WebSocketInterface","configuration","sockets","uri","password","userAgent","UA","on","data","console","log","session","remoteAudio","Audio","autoplay","pc","peerconnection","remoteStream","MediaStream","getReceivers","forEach","receiver","track","addTrack","srcObject","options","mediaConstraints","audio","video","answer","start","stop"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport JsSIP from \"jssip\";\n\nconst SIP_USERNAME = \"200-dataocean\";\nconst SIP_PASSWORD = \"RjH2TV2s9s8FHSpz\";\nconst SIP_DOMAIN = \"webrtc.1com.co.il\";\nconst SIP_SERVER = `wss://${SIP_DOMAIN}/ws`;\n\nfunction SipAudio() {\n    useEffect(() => {\n        const socket = new JsSIP.WebSocketInterface(SIP_SERVER);\n        const configuration = {\n            sockets: [socket],\n            uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,\n            password: SIP_PASSWORD,\n        };\n        const userAgent = new JsSIP.UA(configuration);\n\n        userAgent.on(\"registered\", (data) => {\n            console.log(\"SIP registered:\", data);\n        });\n\n        userAgent.on(\"unregistered\", (data) => {\n            console.log(\"SIP unregistered:\", data);\n        });\n\n        userAgent.on(\"registrationFailed\", (data) => {\n            console.log(\"SIP registration failed:\", data);\n        });\n\n        userAgent.on(\"newRTCSession\", (data) => {\n            const session = data.session;\n            const remoteAudio = new Audio();\n            remoteAudio.autoplay = true;\n\n            session.on(\"ended\", () => {\n                console.log(\"SIP call ended\");\n            });\n\n            session.on(\"peerconnection\", (data) => {\n                const pc = data.peerconnection;\n                const remoteStream = new MediaStream();\n                pc.getReceivers().forEach((receiver) => {\n                    const track = receiver.track;\n                    if (track) {\n                        remoteStream.addTrack(track);\n                    }\n                });\n                remoteAudio.srcObject = remoteStream;\n            });\n\n            const options = {\n                mediaConstraints: { audio: true, video: false },\n            };\n            session.answer(options);\n        });\n\n        userAgent.start();\n\n        return () => {\n            userAgent.stop();\n        };\n    }, []);\n\n    return <div>SIP audio call</div>;\n}\n\nexport default SipAudio;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,YAAY,GAAG,eAArB;AACA,MAAMC,YAAY,GAAG,kBAArB;AACA,MAAMC,UAAU,GAAG,mBAAnB;AACA,MAAMC,UAAU,GAAI,SAAQD,UAAW,KAAvC;;AAEA,SAASE,QAAT,GAAoB;EAAA;;EAChBN,SAAS,CAAC,MAAM;IACZ,MAAMO,MAAM,GAAG,IAAIN,KAAK,CAACO,kBAAV,CAA6BH,UAA7B,CAAf;IACA,MAAMI,aAAa,GAAG;MAClBC,OAAO,EAAE,CAACH,MAAD,CADS;MAElBI,GAAG,EAAG,OAAMT,YAAa,IAAGE,UAAW,EAFrB;MAGlBQ,QAAQ,EAAET;IAHQ,CAAtB;IAKA,MAAMU,SAAS,GAAG,IAAIZ,KAAK,CAACa,EAAV,CAAaL,aAAb,CAAlB;IAEAI,SAAS,CAACE,EAAV,CAAa,YAAb,EAA4BC,IAAD,IAAU;MACjCC,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,IAA/B;IACH,CAFD;IAIAH,SAAS,CAACE,EAAV,CAAa,cAAb,EAA8BC,IAAD,IAAU;MACnCC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,IAAjC;IACH,CAFD;IAIAH,SAAS,CAACE,EAAV,CAAa,oBAAb,EAAoCC,IAAD,IAAU;MACzCC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCF,IAAxC;IACH,CAFD;IAIAH,SAAS,CAACE,EAAV,CAAa,eAAb,EAA+BC,IAAD,IAAU;MACpC,MAAMG,OAAO,GAAGH,IAAI,CAACG,OAArB;MACA,MAAMC,WAAW,GAAG,IAAIC,KAAJ,EAApB;MACAD,WAAW,CAACE,QAAZ,GAAuB,IAAvB;MAEAH,OAAO,CAACJ,EAAR,CAAW,OAAX,EAAoB,MAAM;QACtBE,OAAO,CAACC,GAAR,CAAY,gBAAZ;MACH,CAFD;MAIAC,OAAO,CAACJ,EAAR,CAAW,gBAAX,EAA8BC,IAAD,IAAU;QACnC,MAAMO,EAAE,GAAGP,IAAI,CAACQ,cAAhB;QACA,MAAMC,YAAY,GAAG,IAAIC,WAAJ,EAArB;QACAH,EAAE,CAACI,YAAH,GAAkBC,OAAlB,CAA2BC,QAAD,IAAc;UACpC,MAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;;UACA,IAAIA,KAAJ,EAAW;YACPL,YAAY,CAACM,QAAb,CAAsBD,KAAtB;UACH;QACJ,CALD;QAMAV,WAAW,CAACY,SAAZ,GAAwBP,YAAxB;MACH,CAVD;MAYA,MAAMQ,OAAO,GAAG;QACZC,gBAAgB,EAAE;UAAEC,KAAK,EAAE,IAAT;UAAeC,KAAK,EAAE;QAAtB;MADN,CAAhB;MAGAjB,OAAO,CAACkB,MAAR,CAAeJ,OAAf;IACH,CAzBD;IA2BApB,SAAS,CAACyB,KAAV;IAEA,OAAO,MAAM;MACTzB,SAAS,CAAC0B,IAAV;IACH,CAFD;EAGH,CArDQ,EAqDN,EArDM,CAAT;EAuDA,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;AACH;;GAzDQjC,Q;;KAAAA,Q;AA2DT,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}