{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport { Inviter, SessionState, UserAgent, Registerer } from \"sip.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Phone(props) {\n  _s();\n\n  const audioRef = useRef();\n\n  const onInvite = invitation => {\n    let accept = prompt('answer?');\n    console.log({\n      invitation\n    });\n    if (accept === 'yes') invitation.accept().then(session => {\n      setupRemoteMedia(session);\n      session.stateChange.addListener(state => {\n        console.log(`Session state changed to ${state}`);\n\n        switch (state) {\n          case SessionState.Terminating:\n          case SessionState.Terminated:\n            cleanupMedia();\n            break;\n        }\n      });\n    }).catch(error => {\n      console.error('Failed to accept invitation', error);\n    });else invitation.reject();\n  };\n\n  const remoteStream = new MediaStream();\n\n  const setupRemoteMedia = session => {\n    session.sessionDescriptionHandler.peerConnection.getReceivers().forEach(receiver => {\n      if (receiver.track) {\n        remoteStream.addTrack(receiver.track);\n      }\n    });\n    let player = audioRef.current;\n    player.srcObject = remoteStream;\n    player.play();\n  };\n\n  const cleanupMedia = () => {\n    let player = audioRef.current;\n    player.srcObject = null;\n    player.pause();\n  };\n\n  const transportOptions = {\n    server: \"wss://webrtc.1com.co.il/ws\"\n  };\n  const uri = UserAgent.makeURI(\"sip:200-dataocean@webrtc.1com.co.il\");\n  const userAgentOptions = {\n    authorizationPassword: 'RjH2TV2s9s8FHSpz',\n    authorizationUsername: '200-dataocean',\n    transportOptions,\n    delegate: {\n      onInvite\n    },\n    uri\n  };\n  const userAgent = new UserAgent(userAgentOptions);\n  const registerer = new Registerer(userAgent);\n  userAgent.start().then(() => {\n    registerer.register();\n  });\n  userAgent.start().then(() => {\n    const target = UserAgent.makeURI(\"sip:0534217014@webrtc.1com.co.il\");\n    const inviter = new Inviter(userAgent, target);\n    inviter.stateChange.addListener(state => {\n      console.log(`Session state changed to ${state}`);\n\n      switch (state) {\n        case SessionState.Initial:\n          break;\n\n        case SessionState.Establishing:\n          break;\n\n        case SessionState.Established:\n          setupRemoteMedia(inviter);\n          break;\n\n        case SessionState.Terminating: // fall through\n\n        case SessionState.Terminated:\n          cleanupMedia();\n          break;\n\n        default:\n          throw new Error(\"Unknown session state.\");\n      }\n    }); // inviter.invite();\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"audio\", {\n        controls: true,\n        ref: audioRef,\n        children: \"Your browser does not support the audio element.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => console.log(audioRef.current),\n      children: \"test\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Phone, \"0sm4EU6wFifmHvgu8ujVUSp82DM=\");\n\n_c = Phone;\nexport default Phone;\n\nvar _c;\n\n$RefreshReg$(_c, \"Phone\");","map":{"version":3,"names":["React","useRef","Inviter","SessionState","UserAgent","Registerer","Phone","props","audioRef","onInvite","invitation","accept","prompt","console","log","then","session","setupRemoteMedia","stateChange","addListener","state","Terminating","Terminated","cleanupMedia","catch","error","reject","remoteStream","MediaStream","sessionDescriptionHandler","peerConnection","getReceivers","forEach","receiver","track","addTrack","player","current","srcObject","play","pause","transportOptions","server","uri","makeURI","userAgentOptions","authorizationPassword","authorizationUsername","delegate","userAgent","registerer","start","register","target","inviter","Initial","Establishing","Established","Error","display"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport { Inviter, SessionState, UserAgent, Registerer } from \"sip.js\";\n\nfunction Phone(props) {\n    const audioRef = useRef();\n\n    const onInvite = (invitation) => {\n        let accept = prompt('answer?');\n\n        console.log({ invitation });\n\n\n        if (accept === 'yes') invitation.accept().then((session) => {\n            setupRemoteMedia(session);\n            session.stateChange.addListener((state) => {\n                console.log(`Session state changed to ${state}`);\n                switch (state) {\n                    case SessionState.Terminating:\n                    case SessionState.Terminated:\n                        cleanupMedia();\n                        break;\n                }\n            });\n        })\n            .catch((error) => {\n                console.error('Failed to accept invitation', error);\n            });\n\n        else invitation.reject();\n\n    }\n\n    const remoteStream = new MediaStream();\n\n    const setupRemoteMedia = (session) => {\n        session.sessionDescriptionHandler.peerConnection.getReceivers().forEach((receiver) => {\n            if (receiver.track) {\n                remoteStream.addTrack(receiver.track);\n            }\n        });\n\n        let player = audioRef.current;\n        player.srcObject = remoteStream;\n        player.play();\n    }\n\n    const cleanupMedia = () => {\n        let player = audioRef.current;\n        player.srcObject = null;\n        player.pause();\n    }\n\n    const transportOptions = {\n        server: \"wss://webrtc.1com.co.il/ws\"\n    };\n\n    const uri = UserAgent.makeURI(\"sip:200-dataocean@webrtc.1com.co.il\");\n\n    const userAgentOptions = {\n        authorizationPassword: 'RjH2TV2s9s8FHSpz',\n        authorizationUsername: '200-dataocean',\n        transportOptions,\n        delegate: {\n            onInvite\n        },\n        uri\n    };\n\n\n    const userAgent = new UserAgent(userAgentOptions);\n\n    const registerer = new Registerer(userAgent);\n\n    userAgent.start().then(() => {\n        registerer.register();\n    });\n\n    userAgent.start().then(() => {\n        const target = UserAgent.makeURI(\"sip:0534217014@webrtc.1com.co.il\");\n\n        const inviter = new Inviter(userAgent, target);\n\n        inviter.stateChange.addListener((state) => {\n            console.log(`Session state changed to ${state}`);\n            switch (state) {\n                case SessionState.Initial:\n                    break;\n                case SessionState.Establishing:\n                    break;\n                case SessionState.Established:\n                    setupRemoteMedia(inviter);\n                    break;\n                case SessionState.Terminating:\n                // fall through\n                case SessionState.Terminated:\n                    cleanupMedia();\n                    break;\n                default:\n                    throw new Error(\"Unknown session state.\");\n            }\n        });\n\n        // inviter.invite();\n    });\n\n\n    return (\n        <div>\n            <div style={{ display: 'none' }}>\n                <audio controls ref={audioRef}>\n                    Your browser does not support the audio element.\n                </audio>\n            </div>\n\n\n\n            <button onClick={() => console.log(audioRef.current)}>test</button>\n        </div>\n    );\n}\n\nexport default Phone;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;AACA,SAASC,OAAT,EAAkBC,YAAlB,EAAgCC,SAAhC,EAA2CC,UAA3C,QAA6D,QAA7D;;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;EAAA;;EAClB,MAAMC,QAAQ,GAAGP,MAAM,EAAvB;;EAEA,MAAMQ,QAAQ,GAAIC,UAAD,IAAgB;IAC7B,IAAIC,MAAM,GAAGC,MAAM,CAAC,SAAD,CAAnB;IAEAC,OAAO,CAACC,GAAR,CAAY;MAAEJ;IAAF,CAAZ;IAGA,IAAIC,MAAM,KAAK,KAAf,EAAsBD,UAAU,CAACC,MAAX,GAAoBI,IAApB,CAA0BC,OAAD,IAAa;MACxDC,gBAAgB,CAACD,OAAD,CAAhB;MACAA,OAAO,CAACE,WAAR,CAAoBC,WAApB,CAAiCC,KAAD,IAAW;QACvCP,OAAO,CAACC,GAAR,CAAa,4BAA2BM,KAAM,EAA9C;;QACA,QAAQA,KAAR;UACI,KAAKjB,YAAY,CAACkB,WAAlB;UACA,KAAKlB,YAAY,CAACmB,UAAlB;YACIC,YAAY;YACZ;QAJR;MAMH,CARD;IASH,CAXqB,EAYjBC,KAZiB,CAYVC,KAAD,IAAW;MACdZ,OAAO,CAACY,KAAR,CAAc,6BAAd,EAA6CA,KAA7C;IACH,CAdiB,EAAtB,KAgBKf,UAAU,CAACgB,MAAX;EAER,CAxBD;;EA0BA,MAAMC,YAAY,GAAG,IAAIC,WAAJ,EAArB;;EAEA,MAAMX,gBAAgB,GAAID,OAAD,IAAa;IAClCA,OAAO,CAACa,yBAAR,CAAkCC,cAAlC,CAAiDC,YAAjD,GAAgEC,OAAhE,CAAyEC,QAAD,IAAc;MAClF,IAAIA,QAAQ,CAACC,KAAb,EAAoB;QAChBP,YAAY,CAACQ,QAAb,CAAsBF,QAAQ,CAACC,KAA/B;MACH;IACJ,CAJD;IAMA,IAAIE,MAAM,GAAG5B,QAAQ,CAAC6B,OAAtB;IACAD,MAAM,CAACE,SAAP,GAAmBX,YAAnB;IACAS,MAAM,CAACG,IAAP;EACH,CAVD;;EAYA,MAAMhB,YAAY,GAAG,MAAM;IACvB,IAAIa,MAAM,GAAG5B,QAAQ,CAAC6B,OAAtB;IACAD,MAAM,CAACE,SAAP,GAAmB,IAAnB;IACAF,MAAM,CAACI,KAAP;EACH,CAJD;;EAMA,MAAMC,gBAAgB,GAAG;IACrBC,MAAM,EAAE;EADa,CAAzB;EAIA,MAAMC,GAAG,GAAGvC,SAAS,CAACwC,OAAV,CAAkB,qCAAlB,CAAZ;EAEA,MAAMC,gBAAgB,GAAG;IACrBC,qBAAqB,EAAE,kBADF;IAErBC,qBAAqB,EAAE,eAFF;IAGrBN,gBAHqB;IAIrBO,QAAQ,EAAE;MACNvC;IADM,CAJW;IAOrBkC;EAPqB,CAAzB;EAWA,MAAMM,SAAS,GAAG,IAAI7C,SAAJ,CAAcyC,gBAAd,CAAlB;EAEA,MAAMK,UAAU,GAAG,IAAI7C,UAAJ,CAAe4C,SAAf,CAAnB;EAEAA,SAAS,CAACE,KAAV,GAAkBpC,IAAlB,CAAuB,MAAM;IACzBmC,UAAU,CAACE,QAAX;EACH,CAFD;EAIAH,SAAS,CAACE,KAAV,GAAkBpC,IAAlB,CAAuB,MAAM;IACzB,MAAMsC,MAAM,GAAGjD,SAAS,CAACwC,OAAV,CAAkB,kCAAlB,CAAf;IAEA,MAAMU,OAAO,GAAG,IAAIpD,OAAJ,CAAY+C,SAAZ,EAAuBI,MAAvB,CAAhB;IAEAC,OAAO,CAACpC,WAAR,CAAoBC,WAApB,CAAiCC,KAAD,IAAW;MACvCP,OAAO,CAACC,GAAR,CAAa,4BAA2BM,KAAM,EAA9C;;MACA,QAAQA,KAAR;QACI,KAAKjB,YAAY,CAACoD,OAAlB;UACI;;QACJ,KAAKpD,YAAY,CAACqD,YAAlB;UACI;;QACJ,KAAKrD,YAAY,CAACsD,WAAlB;UACIxC,gBAAgB,CAACqC,OAAD,CAAhB;UACA;;QACJ,KAAKnD,YAAY,CAACkB,WAAlB,CARJ,CASI;;QACA,KAAKlB,YAAY,CAACmB,UAAlB;UACIC,YAAY;UACZ;;QACJ;UACI,MAAM,IAAImC,KAAJ,CAAU,wBAAV,CAAN;MAdR;IAgBH,CAlBD,EALyB,CAyBzB;EACH,CA1BD;EA6BA,oBACI;IAAA,wBACI;MAAK,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAX,CAAZ;MAAA,uBACI;QAAO,QAAQ,MAAf;QAAgB,GAAG,EAAEnD,QAArB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IADJ;MAAA;MAAA;MAAA;IAAA,QADJ,eASI;MAAQ,OAAO,EAAE,MAAMK,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAAC6B,OAArB,CAAvB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QATJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAaH;;GApHQ/B,K;;KAAAA,K;AAsHT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}