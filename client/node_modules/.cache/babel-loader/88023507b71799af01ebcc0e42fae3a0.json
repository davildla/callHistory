{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from 'react';\nimport { Inviter, SessionState, UserAgent, Registerer } from \"sip.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Phone(props) {\n  _s();\n\n  const [stream, setStream] = useState(null);\n  const audioRef = useRef(); // const onInvite = (invitation) => {\n  //     invitation.accept();\n  // }\n  // const remoteStream = new MediaStream();\n  // const setupRemoteMedia = (session) => {\n  //     session.sessionDescriptionHandler.peerConnection.getReceivers().forEach((receiver) => {\n  //         if (receiver.track) {\n  //             remoteStream.addTrack(receiver.track);\n  //         }\n  //     });\n  //     setStream(remoteStream);\n  // }\n  // const cleanupMedia = () => {\n  //     setStream(null);\n  // }\n  // const transportOptions = {\n  //     server: \"wss://webrtc2.odricall.com:8443\"\n  // };\n  // const uri = UserAgent.makeURI(\"sip:6666@odricomt2.odricall.com\");\n  // const userAgentOptions = {\n  //     authorizationPassword: '#rCVGePfdwn%%',\n  //     authorizationUsername: '6666',\n  //     transportOptions,\n  //     delegate: {\n  //         onInvite\n  //     },\n  //     uri\n  // };\n  // const userAgent = new UserAgent(userAgentOptions);\n  // const registerer = new Registerer(userAgent);\n  // userAgent.start().then(() => {\n  //     registerer.register();\n  // });\n  // userAgent.start().then(() => {\n  //     const target = UserAgent.makeURI(\"sip:0534217014@odricomt2.odricall.com\");\n  //     const inviter = new Inviter(userAgent, target);\n  //     inviter.stateChange.addListener((state) => {\n  //         console.log(`Session state changed to ${state}`);\n  //         switch (state) {\n  //             case SessionState.Initial:\n  //             break;\n  //             case SessionState.Establishing:\n  //             break;\n  //             case SessionState.Established:\n  //             setupRemoteMedia(inviter);\n  //             break;\n  //             case SessionState.Terminating:\n  //             // fall through\n  //             case SessionState.Terminated:\n  //             cleanupMedia();\n  //             break;\n  //             default:\n  //             throw new Error(\"Unknown session state.\");\n  //     }});\n  //     inviter.invite();\n  // });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      controls: true,\n      autoPlay: stream ? true : false,\n      ref: audioRef,\n      children: [/*#__PURE__*/_jsxDEV(\"source\", {\n        src: stream\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), \"Your browser does not support the audio element.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => console.log(audioRef.current),\n      children: \"test\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setStream('https://finance-server.com/records/david.mp3'),\n      children: \"play\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setStream(null),\n      children: \"stop\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Phone, \"EnPCHTflVV7C+fqPc6+tkQ7fvBM=\");\n\n_c = Phone;\nexport default Phone;\n\nvar _c;\n\n$RefreshReg$(_c, \"Phone\");","map":{"version":3,"names":["React","useState","useRef","Inviter","SessionState","UserAgent","Registerer","Phone","props","stream","setStream","audioRef","console","log","current"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Inviter, SessionState, UserAgent, Registerer } from \"sip.js\";\n\nfunction Phone(props) {\n    const [stream, setStream] = useState(null);\n    const audioRef = useRef();\n\n    // const onInvite = (invitation) => {\n    //     invitation.accept();\n    // }\n\n    // const remoteStream = new MediaStream();\n\n    // const setupRemoteMedia = (session) => {\n    //     session.sessionDescriptionHandler.peerConnection.getReceivers().forEach((receiver) => {\n    //         if (receiver.track) {\n    //             remoteStream.addTrack(receiver.track);\n    //         }\n    //     });\n\n    //     setStream(remoteStream);\n    // }\n    \n    // const cleanupMedia = () => {\n    //     setStream(null);\n    // }\n\n    // const transportOptions = {\n    //     server: \"wss://webrtc2.odricall.com:8443\"\n    // };\n\n    // const uri = UserAgent.makeURI(\"sip:6666@odricomt2.odricall.com\");\n\n    // const userAgentOptions = {\n    //     authorizationPassword: '#rCVGePfdwn%%',\n    //     authorizationUsername: '6666',\n    //     transportOptions,\n    //     delegate: {\n    //         onInvite\n    //     },\n    //     uri\n    // };\n\n\n    // const userAgent = new UserAgent(userAgentOptions);\n\n    // const registerer = new Registerer(userAgent);\n\n    // userAgent.start().then(() => {\n    //     registerer.register();\n    // });\n\n    // userAgent.start().then(() => {\n    //     const target = UserAgent.makeURI(\"sip:0534217014@odricomt2.odricall.com\");\n    \n    //     const inviter = new Inviter(userAgent, target);\n\n    //     inviter.stateChange.addListener((state) => {\n    //         console.log(`Session state changed to ${state}`);\n    //         switch (state) {\n    //             case SessionState.Initial:\n    //             break;\n    //             case SessionState.Establishing:\n    //             break;\n    //             case SessionState.Established:\n    //             setupRemoteMedia(inviter);\n    //             break;\n    //             case SessionState.Terminating:\n    //             // fall through\n    //             case SessionState.Terminated:\n    //             cleanupMedia();\n    //             break;\n    //             default:\n    //             throw new Error(\"Unknown session state.\");\n    //     }});\n\n    //     inviter.invite();\n    // });\n\n\n    return (\n        <div>\n            <audio controls autoPlay={stream ? true : false} ref={audioRef}>\n                    <source src={stream} />\n                    Your browser does not support the audio element.\n            </audio>\n            <button onClick={() => console.log(audioRef.current)}>test</button>\n            <button onClick={() => setStream('https://finance-server.com/records/david.mp3')}>play</button>\n            <button onClick={() => setStream(null)}>stop</button>\n        </div>\n    );\n}\n\nexport default Phone;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,OAAxC;AACA,SAASC,OAAT,EAAkBC,YAAlB,EAAgCC,SAAhC,EAA2CC,UAA3C,QAA6D,QAA7D;;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;EAAA;;EAClB,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAAC,IAAD,CAApC;EACA,MAAMU,QAAQ,GAAGT,MAAM,EAAvB,CAFkB,CAIlB;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAEA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAGA;EAEA;EAEA;EACA;EACA;EAEA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;;EAGA,oBACI;IAAA,wBACI;MAAO,QAAQ,MAAf;MAAgB,QAAQ,EAAEO,MAAM,GAAG,IAAH,GAAU,KAA1C;MAAiD,GAAG,EAAEE,QAAtD;MAAA,wBACQ;QAAQ,GAAG,EAAEF;MAAb;QAAA;QAAA;QAAA;MAAA,QADR;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAKI;MAAQ,OAAO,EAAE,MAAMG,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,OAArB,CAAvB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QALJ,eAMI;MAAQ,OAAO,EAAE,MAAMJ,SAAS,CAAC,8CAAD,CAAhC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QANJ,eAOI;MAAQ,OAAO,EAAE,MAAMA,SAAS,CAAC,IAAD,CAAhC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAPJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAWH;;GAxFQH,K;;KAAAA,K;AA0FT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}