{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport JsSIP from 'jssip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SIP_USERNAME = '200-dataocean';\nconst SIP_PASSWORD = 'RjH2TV2s9s8FHSpz';\nconst SIP_DOMAIN = 'webrtc.1com.co.il';\nconst SIP_SERVER = `wss://${SIP_DOMAIN}/ws`;\n\nconst Phone = () => {\n  _s();\n\n  const [connected, setConnected] = useState(false);\n  const [calling, setCalling] = useState(false);\n  const [number, setNumber] = useState('');\n  const [ua, setUa] = useState(null);\n\n  const startSip = () => {\n    if (!ua) {\n      const configuration = {\n        uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,\n        password: SIP_PASSWORD,\n        sockets: [new JsSIP.WebSocketInterface(SIP_SERVER)]\n      };\n      const newUa = new JsSIP.UA(configuration);\n      newUa.on('connected', () => {\n        setConnected(true);\n      });\n      newUa.on('disconnected', () => {\n        setConnected(false);\n      });\n      setUa(newUa);\n    }\n  };\n\n  const makeCall = () => {\n    const session = ua.call(`sip:${number}@${SIP_DOMAIN}`, {\n      mediaConstraints: {\n        audio: true,\n        video: false\n      },\n      pcConfig: {\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }, {\n          urls: 'turn:numb.viagenie.ca',\n          credential: 'muazkh',\n          username: 'webrtc@live.com'\n        }]\n      }\n    });\n    session.on('progress', () => {\n      setCalling(true);\n    });\n    session.on('failed', () => {\n      setCalling(false);\n    });\n    session.on('ended', () => {\n      setCalling(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startSip,\n      children: \"Connect\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: connected ? 'Connected' : 'Disconnected'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: number,\n      onChange: e => setNumber(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: makeCall,\n      children: \"Call\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: calling ? 'Calling...' : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Phone, \"XQUQV8exJu/S8uBFs4XyX4Cd3lY=\");\n\n_c = Phone;\nexport default Phone;\n\nvar _c;\n\n$RefreshReg$(_c, \"Phone\");","map":{"version":3,"names":["React","useState","JsSIP","SIP_USERNAME","SIP_PASSWORD","SIP_DOMAIN","SIP_SERVER","Phone","connected","setConnected","calling","setCalling","number","setNumber","ua","setUa","startSip","configuration","uri","password","sockets","WebSocketInterface","newUa","UA","on","makeCall","session","call","mediaConstraints","audio","video","pcConfig","iceServers","urls","credential","username","e","target","value"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useState } from 'react';\nimport JsSIP from 'jssip';\n\nconst SIP_USERNAME = '200-dataocean';\nconst SIP_PASSWORD = 'RjH2TV2s9s8FHSpz';\nconst SIP_DOMAIN = 'webrtc.1com.co.il';\nconst SIP_SERVER = `wss://${SIP_DOMAIN}/ws`;\n\nconst Phone = () => {\n    const [connected, setConnected] = useState(false);\n    const [calling, setCalling] = useState(false);\n    const [number, setNumber] = useState('');\n\n    const [ua, setUa] = useState(null);\n\n    const startSip = () => {\n        if (!ua) {\n            const configuration = {\n                uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,\n                password: SIP_PASSWORD,\n                sockets: [new JsSIP.WebSocketInterface(SIP_SERVER)]\n            };\n\n            const newUa = new JsSIP.UA(configuration);\n\n            newUa.on('connected', () => {\n                setConnected(true);\n            });\n\n            newUa.on('disconnected', () => {\n                setConnected(false);\n            });\n\n            setUa(newUa);\n        }\n    };\n\n    const makeCall = () => {\n        const session = ua.call(`sip:${number}@${SIP_DOMAIN}`, {\n            mediaConstraints: { audio: true, video: false },\n            pcConfig: {\n                iceServers: [\n                    { urls: 'stun:stun.l.google.com:19302' },\n                    {\n                        urls: 'turn:numb.viagenie.ca',\n                        credential: 'muazkh',\n                        username: 'webrtc@live.com'\n                    }\n                ]\n            }\n        });\n\n        session.on('progress', () => {\n            setCalling(true);\n        });\n\n        session.on('failed', () => {\n            setCalling(false);\n        });\n\n        session.on('ended', () => {\n            setCalling(false);\n        });\n    };\n\n    return (\n        <div>\n            <button onClick={startSip}>Connect</button>\n            <div>{connected ? 'Connected' : 'Disconnected'}</div>\n            <input type=\"text\" value={number} onChange={(e) => setNumber(e.target.value)} />\n            <button onClick={makeCall}>Call</button>\n            <div>{calling ? 'Calling...' : ''}</div>\n        </div>\n    );\n};\n\nexport default Phone;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}