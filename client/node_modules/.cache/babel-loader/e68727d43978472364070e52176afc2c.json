{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport JsSIP from 'jssip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SIPClient = () => {\n  _s();\n\n  const [call, setCall] = useState(null);\n  const [status, setStatus] = useState('disconnected');\n  const jssipConfig = {\n    uri: 'sip:200-dataocean@webrtc.1com.co.il',\n    password: 'RjH2TV2s9s8FHSpz',\n    sockets: [new JsSIP.WebSocketInterface('wss://webrtc.1com.co.il/ws')]\n  };\n  const ua = new JsSIP.UA(jssipConfig);\n\n  const handleConnect = () => {\n    ua.start();\n  };\n\n  const handleDisconnect = () => {\n    ua.stop();\n  };\n\n  const handleCall = () => {\n    const options = {\n      mediaConstraints: {\n        audio: true\n      },\n      pcConfig: {\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }]\n      }\n    };\n    const uri = 'sip:0534217014@webrtc.1com.co.il';\n    const session = ua.call(uri, options);\n    session.on('ended', () => {\n      setCall(null);\n    });\n    setCall(session);\n  };\n\n  const handleHangup = () => {\n    call.terminate();\n    setCall(null);\n  };\n\n  const handleAccept = () => {\n    const options = {\n      mediaConstraints: {\n        audio: true\n      },\n      pcConfig: {\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }]\n      }\n    };\n    call.answer(options);\n  };\n\n  ua.on('connected', () => {\n    setStatus('connected');\n  });\n  ua.on('disconnected', () => {\n    setStatus('disconnected');\n  });\n  ua.on('newRTCSession', data => {\n    const {\n      session\n    } = data;\n\n    if (session.direction === 'incoming') {\n      setCall(session);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: status === 'disconnected' ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleConnect,\n      children: \"Connect to SIP server\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [call === null ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCall,\n        children: \"Make call\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDisconnect,\n        children: \"Disconnect from SIP server\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SIPClient, \"sS2n8ZyAnmFNC8lVKi/TL58OH4M=\");\n\n_c = SIPClient;\nexport default SIPClient;\n\nvar _c;\n\n$RefreshReg$(_c, \"SIPClient\");","map":{"version":3,"names":["React","useState","JsSIP","SIPClient","call","setCall","status","setStatus","jssipConfig","uri","password","sockets","WebSocketInterface","ua","UA","handleConnect","start","handleDisconnect","stop","handleCall","options","mediaConstraints","audio","pcConfig","iceServers","urls","session","on","handleHangup","terminate","handleAccept","answer","data","direction"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useState } from 'react';\nimport JsSIP from 'jssip';\n\nconst SIPClient = () => {\n    const [call, setCall] = useState(null);\n    const [status, setStatus] = useState('disconnected');\n\n    const jssipConfig = {\n        uri: 'sip:200-dataocean@webrtc.1com.co.il',\n        password: 'RjH2TV2s9s8FHSpz',\n        sockets: [new JsSIP.WebSocketInterface('wss://webrtc.1com.co.il/ws')],\n    };\n\n    const ua = new JsSIP.UA(jssipConfig);\n\n    const handleConnect = () => {\n        ua.start();\n    };\n\n    const handleDisconnect = () => {\n        ua.stop();\n    };\n\n    const handleCall = () => {\n        const options = {\n            mediaConstraints: { audio: true },\n            pcConfig: {\n                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }],\n            },\n        };\n        const uri = 'sip:0534217014@webrtc.1com.co.il';\n        const session = ua.call(uri, options);\n        session.on('ended', () => {\n            setCall(null);\n        });\n        setCall(session);\n    };\n\n    const handleHangup = () => {\n        call.terminate();\n        setCall(null);\n    };\n\n    const handleAccept = () => {\n        const options = {\n            mediaConstraints: { audio: true },\n            pcConfig: {\n                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }],\n            },\n        };\n        call.answer(options);\n    };\n\n    ua.on('connected', () => {\n        setStatus('connected');\n    });\n\n    ua.on('disconnected', () => {\n        setStatus('disconnected');\n    });\n\n    ua.on('newRTCSession', (data) => {\n        const { session } = data;\n        if (session.direction === 'incoming') {\n            setCall(session);\n        }\n    });\n\n    return (\n        <div>\n            {status === 'disconnected' ? (\n                <button onClick={handleConnect}>Connect to SIP server</button>\n            ) : (\n                <>\n                    {call === null ? (\n                        <button onClick={handleCall}>Make call</button>\n                    ) : (\n                        <div>\n                            {/* <button onClick={handleHangup}>Hang up</button>\n                            {call.isInProgress() && (\n                                <div>\n                                    <p>Call in progress...</p>\n                                </div>\n                            )}\n                            {call.isReadyToReinvite() && (\n                                <div>\n                                    <button onClick={handleAccept}>Accept call</button>\n                                </div>\n                            )} */}\n                        </div>\n                    )}\n                    <button onClick={handleDisconnect}>Disconnect from SIP server</button>\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default SIPClient;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;AAEA,MAAMC,SAAS,GAAG,MAAM;EAAA;;EACpB,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBJ,QAAQ,CAAC,IAAD,CAAhC;EACA,MAAM,CAACK,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,cAAD,CAApC;EAEA,MAAMO,WAAW,GAAG;IAChBC,GAAG,EAAE,qCADW;IAEhBC,QAAQ,EAAE,kBAFM;IAGhBC,OAAO,EAAE,CAAC,IAAIT,KAAK,CAACU,kBAAV,CAA6B,4BAA7B,CAAD;EAHO,CAApB;EAMA,MAAMC,EAAE,GAAG,IAAIX,KAAK,CAACY,EAAV,CAAaN,WAAb,CAAX;;EAEA,MAAMO,aAAa,GAAG,MAAM;IACxBF,EAAE,CAACG,KAAH;EACH,CAFD;;EAIA,MAAMC,gBAAgB,GAAG,MAAM;IAC3BJ,EAAE,CAACK,IAAH;EACH,CAFD;;EAIA,MAAMC,UAAU,GAAG,MAAM;IACrB,MAAMC,OAAO,GAAG;MACZC,gBAAgB,EAAE;QAAEC,KAAK,EAAE;MAAT,CADN;MAEZC,QAAQ,EAAE;QACNC,UAAU,EAAE,CAAC;UAAEC,IAAI,EAAE;QAAR,CAAD;MADN;IAFE,CAAhB;IAMA,MAAMhB,GAAG,GAAG,kCAAZ;IACA,MAAMiB,OAAO,GAAGb,EAAE,CAACT,IAAH,CAAQK,GAAR,EAAaW,OAAb,CAAhB;IACAM,OAAO,CAACC,EAAR,CAAW,OAAX,EAAoB,MAAM;MACtBtB,OAAO,CAAC,IAAD,CAAP;IACH,CAFD;IAGAA,OAAO,CAACqB,OAAD,CAAP;EACH,CAbD;;EAeA,MAAME,YAAY,GAAG,MAAM;IACvBxB,IAAI,CAACyB,SAAL;IACAxB,OAAO,CAAC,IAAD,CAAP;EACH,CAHD;;EAKA,MAAMyB,YAAY,GAAG,MAAM;IACvB,MAAMV,OAAO,GAAG;MACZC,gBAAgB,EAAE;QAAEC,KAAK,EAAE;MAAT,CADN;MAEZC,QAAQ,EAAE;QACNC,UAAU,EAAE,CAAC;UAAEC,IAAI,EAAE;QAAR,CAAD;MADN;IAFE,CAAhB;IAMArB,IAAI,CAAC2B,MAAL,CAAYX,OAAZ;EACH,CARD;;EAUAP,EAAE,CAACc,EAAH,CAAM,WAAN,EAAmB,MAAM;IACrBpB,SAAS,CAAC,WAAD,CAAT;EACH,CAFD;EAIAM,EAAE,CAACc,EAAH,CAAM,cAAN,EAAsB,MAAM;IACxBpB,SAAS,CAAC,cAAD,CAAT;EACH,CAFD;EAIAM,EAAE,CAACc,EAAH,CAAM,eAAN,EAAwBK,IAAD,IAAU;IAC7B,MAAM;MAAEN;IAAF,IAAcM,IAApB;;IACA,IAAIN,OAAO,CAACO,SAAR,KAAsB,UAA1B,EAAsC;MAClC5B,OAAO,CAACqB,OAAD,CAAP;IACH;EACJ,CALD;EAOA,oBACI;IAAA,UACKpB,MAAM,KAAK,cAAX,gBACG;MAAQ,OAAO,EAAES,aAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADH,gBAGG;MAAA,WACKX,IAAI,KAAK,IAAT,gBACG;QAAQ,OAAO,EAAEe,UAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADH,gBAGG;QAAA;QAAA;QAAA;MAAA,QAJR,eAkBI;QAAQ,OAAO,EAAEF,gBAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAlBJ;IAAA;EAJR;IAAA;IAAA;IAAA;EAAA,QADJ;AA4BH,CA7FD;;GAAMd,S;;KAAAA,S;AA+FN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}