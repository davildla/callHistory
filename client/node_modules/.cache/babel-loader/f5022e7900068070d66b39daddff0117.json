{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Inviter, SessionState, UserAgent, Registerer } from \"sip.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Phone(props) {\n  _s();\n\n  const [stream, setStream] = useState(null);\n\n  const onInvite = invitation => {\n    invitation.accept();\n  };\n\n  const remoteStream = new MediaStream();\n\n  const setupRemoteMedia = session => {\n    session.sessionDescriptionHandler.peerConnection.getReceivers().forEach(receiver => {\n      if (receiver.track) {\n        remoteStream.addTrack(receiver.track);\n      }\n    });\n    setStream(remoteStream);\n  };\n\n  const transportOptions = {\n    server: \"wss://webrtc2.odricall.com:8443\"\n  };\n  const uri = UserAgent.makeURI(\"sip:6666@odricomt2.odricall.com\");\n  const userAgentOptions = {\n    authorizationPassword: '#rCVGePfdwn%%',\n    authorizationUsername: '6666',\n    transportOptions,\n    delegate: {\n      onInvite\n    },\n    uri\n  };\n  const userAgent = new UserAgent(userAgentOptions);\n  const registerer = new Registerer(userAgent);\n  userAgent.start().then(() => {\n    registerer.register();\n  }); // userAgent.start().then(() => {\n  // const target = UserAgent.makeURI(\"sip:0534217014@odricomt2.odricall.com\");\n\n  const inviter = new Inviter(userAgent, target);\n  inviter.statChange.addListener(state => {\n    console.log(`Session state changed to ${state}`);\n\n    switch (state) {\n      case SessionState.Initial:\n        break;\n\n      case SessionState.Establishing:\n        break;\n\n      case SessionState.Established:\n        setupRemoteMedia(inviter);\n        break;\n\n      case SessionState.Terminating: // fall through\n\n      case SessionState.Terminated:\n        cleanupMedia();\n        break;\n\n      default:\n        throw new Error(\"Unknown session state.\");\n    }\n  }); // inviter.invite();\n  // });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: audio => audio.srcObject = stream,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Phone, \"8WzrO1SK6RxfwLyaWvVKmZyPavI=\");\n\n_c = Phone;\nexport default Phone;\n\nvar _c;\n\n$RefreshReg$(_c, \"Phone\");","map":{"version":3,"names":["React","useState","Inviter","SessionState","UserAgent","Registerer","Phone","props","stream","setStream","onInvite","invitation","accept","remoteStream","MediaStream","setupRemoteMedia","session","sessionDescriptionHandler","peerConnection","getReceivers","forEach","receiver","track","addTrack","transportOptions","server","uri","makeURI","userAgentOptions","authorizationPassword","authorizationUsername","delegate","userAgent","registerer","start","then","register","inviter","target","statChange","addListener","state","console","log","Initial","Establishing","Established","Terminating","Terminated","cleanupMedia","Error","audio","srcObject"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Inviter, SessionState, UserAgent, Registerer } from \"sip.js\";\n\nfunction Phone(props) {\n    const [stream, setStream] = useState(null);\n\n    const onInvite = (invitation) => {\n        invitation.accept();\n    }\n\n    const remoteStream = new MediaStream();\n\n    const setupRemoteMedia = (session) => {\n        session.sessionDescriptionHandler.peerConnection.getReceivers().forEach((receiver) => {\n            if (receiver.track) {\n                remoteStream.addTrack(receiver.track);\n            }\n        });\n\n        setStream(remoteStream);\n    }\n\n\n    const transportOptions = {\n        server: \"wss://webrtc2.odricall.com:8443\"\n    };\n\n    const uri = UserAgent.makeURI(\"sip:6666@odricomt2.odricall.com\");\n\n    const userAgentOptions = {\n        authorizationPassword: '#rCVGePfdwn%%',\n        authorizationUsername: '6666',\n        transportOptions,\n        delegate: {\n            onInvite\n        },\n        uri\n    };\n\n\n    const userAgent = new UserAgent(userAgentOptions);\n\n    const registerer = new Registerer(userAgent);\n\n    userAgent.start().then(() => {\n        registerer.register();\n    });\n\n    // userAgent.start().then(() => {\n        // const target = UserAgent.makeURI(\"sip:0534217014@odricomt2.odricall.com\");\n    \n        const inviter = new Inviter(userAgent, target);\n\n        inviter.statChange.addListener((state) => {\n            console.log(`Session state changed to ${state}`);\n            switch (state) {\n                case SessionState.Initial:\n                break;\n                case SessionState.Establishing:\n                break;\n                case SessionState.Established:\n                setupRemoteMedia(inviter);\n                break;\n                case SessionState.Terminating:\n                // fall through\n                case SessionState.Terminated:\n                cleanupMedia();\n                break;\n                default:\n                throw new Error(\"Unknown session state.\");\n        }});\n\n        // inviter.invite();\n    // });\n\n\n    return (\n        <div>\n            <audio\n                ref={ audio => audio.srcObject = stream}\n                autoPlay\n            />\n        </div>\n    );\n}\n\nexport default Phone;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,OAAT,EAAkBC,YAAlB,EAAgCC,SAAhC,EAA2CC,UAA3C,QAA6D,QAA7D;;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;EAAA;;EAClB,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,IAAD,CAApC;;EAEA,MAAMS,QAAQ,GAAIC,UAAD,IAAgB;IAC7BA,UAAU,CAACC,MAAX;EACH,CAFD;;EAIA,MAAMC,YAAY,GAAG,IAAIC,WAAJ,EAArB;;EAEA,MAAMC,gBAAgB,GAAIC,OAAD,IAAa;IAClCA,OAAO,CAACC,yBAAR,CAAkCC,cAAlC,CAAiDC,YAAjD,GAAgEC,OAAhE,CAAyEC,QAAD,IAAc;MAClF,IAAIA,QAAQ,CAACC,KAAb,EAAoB;QAChBT,YAAY,CAACU,QAAb,CAAsBF,QAAQ,CAACC,KAA/B;MACH;IACJ,CAJD;IAMAb,SAAS,CAACI,YAAD,CAAT;EACH,CARD;;EAWA,MAAMW,gBAAgB,GAAG;IACrBC,MAAM,EAAE;EADa,CAAzB;EAIA,MAAMC,GAAG,GAAGtB,SAAS,CAACuB,OAAV,CAAkB,iCAAlB,CAAZ;EAEA,MAAMC,gBAAgB,GAAG;IACrBC,qBAAqB,EAAE,eADF;IAErBC,qBAAqB,EAAE,MAFF;IAGrBN,gBAHqB;IAIrBO,QAAQ,EAAE;MACNrB;IADM,CAJW;IAOrBgB;EAPqB,CAAzB;EAWA,MAAMM,SAAS,GAAG,IAAI5B,SAAJ,CAAcwB,gBAAd,CAAlB;EAEA,MAAMK,UAAU,GAAG,IAAI5B,UAAJ,CAAe2B,SAAf,CAAnB;EAEAA,SAAS,CAACE,KAAV,GAAkBC,IAAlB,CAAuB,MAAM;IACzBF,UAAU,CAACG,QAAX;EACH,CAFD,EAzCkB,CA6ClB;EACI;;EAEA,MAAMC,OAAO,GAAG,IAAInC,OAAJ,CAAY8B,SAAZ,EAAuBM,MAAvB,CAAhB;EAEAD,OAAO,CAACE,UAAR,CAAmBC,WAAnB,CAAgCC,KAAD,IAAW;IACtCC,OAAO,CAACC,GAAR,CAAa,4BAA2BF,KAAM,EAA9C;;IACA,QAAQA,KAAR;MACI,KAAKtC,YAAY,CAACyC,OAAlB;QACA;;MACA,KAAKzC,YAAY,CAAC0C,YAAlB;QACA;;MACA,KAAK1C,YAAY,CAAC2C,WAAlB;QACA/B,gBAAgB,CAACsB,OAAD,CAAhB;QACA;;MACA,KAAKlC,YAAY,CAAC4C,WAAlB,CARJ,CASI;;MACA,KAAK5C,YAAY,CAAC6C,UAAlB;QACAC,YAAY;QACZ;;MACA;QACA,MAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN;IAdJ;EAeF,CAjBF,EAlDc,CAqEd;EACJ;;EAGA,oBACI;IAAA,uBACI;MACI,GAAG,EAAGC,KAAK,IAAIA,KAAK,CAACC,SAAN,GAAkB5C,MADrC;MAEI,QAAQ;IAFZ;MAAA;MAAA;MAAA;IAAA;EADJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAQH;;GAjFQF,K;;KAAAA,K;AAmFT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}