{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @packageDocumentation\n * @internalapi\n */\n\nvar events_1 = require(\"events\");\n\nvar connection_1 = require(\"./twilio/connection\");\n\nexports.Connection = connection_1.default;\n\nvar device_1 = require(\"./twilio/device\");\n\nexports.Device = device_1.default;\n\nvar preflight_1 = require(\"./twilio/preflight/preflight\");\n\nexports.PreflightTest = preflight_1.PreflightTest;\n\nvar PStream = require('./twilio/pstream');\n\nexports.PStream = PStream;\nvar instance;\nObject.defineProperty(device_1.default, 'instance', {\n  get: function () {\n    return instance;\n  },\n  set: function (_instance) {\n    if (_instance === null) {\n      instance = null;\n    }\n  }\n});\n\ndevice_1.default.destroy = function destroySingleton() {\n  if (instance) {\n    instance.destroy();\n  }\n\n  bindSingleton();\n};\n/**\n * Create a new Device instance and bind its functions to the Device static. This maintains\n * backwards compatibility for the Device singleton behavior and will be removed in the next\n * breaking release.\n */\n\n\nfunction bindSingleton() {\n  instance = new device_1.default();\n  Object.getOwnPropertyNames(device_1.default.prototype).concat(Object.getOwnPropertyNames(events_1.EventEmitter.prototype)).filter(function (prop) {\n    return typeof device_1.default.prototype[prop] === 'function';\n  }).filter(function (prop) {\n    return prop !== 'destroy';\n  }).forEach(function (prop) {\n    device_1.default[prop] = device_1.default.prototype[prop].bind(instance);\n  });\n}\n\nbindSingleton();\nObject.getOwnPropertyNames(instance).filter(function (prop) {\n  return typeof device_1.default.prototype[prop] !== 'function';\n}).forEach(function (prop) {\n  Object.defineProperty(device_1.default, prop, {\n    get: function () {\n      if (instance) {\n        return instance[prop];\n      }\n    },\n    set: function (_prop) {\n      if (instance) {\n        instance[prop] = _prop;\n      }\n    }\n  });\n}); //# sourceMappingURL=twilio.js.map","map":null,"metadata":{},"sourceType":"script"}