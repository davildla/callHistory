{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef } from 'react';\nimport { register } from './utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Phone(props) {\n  _s();\n\n  const [ua, setUa] = useState(null);\n  const [connecting, setConnecting] = useState(false);\n  const [critical, setCritical] = useState(false);\n  const [sipStatus, setSipStatus] = useState('');\n  useEffect(() => {\n    setConnecting(true);\n    register('200-dataocean', 'RjH2TV2s9s8FHSpz', userAgent => {\n      setUa(userAgent);\n    });\n    return () => {\n      if (ua) {\n        ua.stop();\n      }\n    }; // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    if (ua) {\n      ua.on('registered', () => {\n        setConnecting(false);\n        setCritical(false);\n      });\n      ua.on('registrationFailed', () => {\n        setConnecting(false);\n        setCritical(true);\n      });\n    }\n  }, [ua]);\n\n  const makeCall = phone => {\n    let eventHandlers = {\n      'connecting': e => {\n        console.log('call is in progress');\n        setSipStatus('connecting');\n      },\n      'progress': e => {\n        console.log('call is in progress');\n        setSipStatus(\"progress\");\n      },\n      'failed': e => {\n        console.log('call failed with cause: ', e);\n        setSipStatus(\"failed\");\n      },\n      'ended': e => {\n        console.log('call ended with cause: ', e);\n        setSipStatus(\"ended\");\n      },\n      'confirmed': e => {\n        setSipStatus(\"confirmed\");\n      }\n    };\n    let options = {\n      eventHandlers: eventHandlers,\n      mediaConstraints: {\n        'audio': true,\n        'video': false\n      }\n    };\n    let session = ua.call('sip:0534217014@webrtc.1com.co.il', options);\n    session.connection.addEventListener('addstream', e => {\n      this.audioElement.srcObject = e.stream;\n      this.audioElement.play();\n    });\n    console.log(session);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: makeCall,\n      children: \"call\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Phone, \"mtKn7FXYiwQI/frP1eCiEenfzVY=\");\n\n_c = Phone;\nexport default Phone;\n\nvar _c;\n\n$RefreshReg$(_c, \"Phone\");","map":{"version":3,"names":["useEffect","useState","useRef","register","Phone","props","ua","setUa","connecting","setConnecting","critical","setCritical","sipStatus","setSipStatus","userAgent","stop","on","makeCall","phone","eventHandlers","e","console","log","options","mediaConstraints","session","call","connection","addEventListener","audioElement","srcObject","stream","play"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport { register } from './utils';\n\n\nfunction Phone(props) {\n    const [ua, setUa] = useState(null);\n    const [connecting, setConnecting] = useState(false);\n    const [critical, setCritical] = useState(false);\n    const [sipStatus, setSipStatus] = useState('');\n\n    useEffect(() => {\n        setConnecting(true);\n        register('200-dataocean', 'RjH2TV2s9s8FHSpz', (userAgent) => {\n            setUa(userAgent);\n        });\n\n        return () => {\n            if (ua) {\n                ua.stop();\n            }\n        };\n        // eslint-disable-next-line\n    }, []);\n\n    useEffect(() => {\n        if (ua) {\n            ua.on('registered', () => {\n                setConnecting(false);\n                setCritical(false);\n            });\n\n            ua.on('registrationFailed', () => {\n                setConnecting(false);\n                setCritical(true);\n            });\n        }\n    }, [ua]);\n\n    const makeCall = (phone) => {\n        let eventHandlers = {\n            'connecting': (e) => {\n                console.log('call is in progress')\n                setSipStatus('connecting')\n            },\n            'progress': (e) => {\n                console.log('call is in progress')\n                setSipStatus(\"progress\")\n            },\n            'failed': (e) => {\n                console.log('call failed with cause: ', e)\n                setSipStatus(\"failed\")\n            },\n            'ended': (e) => {\n                console.log('call ended with cause: ', e)\n                setSipStatus(\"ended\")\n            },\n            'confirmed': (e) => {\n                setSipStatus(\"confirmed\")\n            }\n        }\n\n        let options = {\n            eventHandlers: eventHandlers,\n            mediaConstraints: { 'audio': true, 'video': false }\n        }\n        let session = ua.call('sip:0534217014@webrtc.1com.co.il', options);\n\n        session.connection.addEventListener('addstream', (e) => {\n            this.audioElement.srcObject = e.stream\n            this.audioElement.play()\n        })\n        console.log(session);\n\n    }\n\n\n    return (\n        <div>\n            <button onClick={makeCall}>call</button>\n        </div>\n    );\n}\n\nexport default Phone;\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,SAASC,QAAT,QAAyB,SAAzB;;;AAGA,SAASC,KAAT,CAAeC,KAAf,EAAsB;EAAA;;EAClB,MAAM,CAACC,EAAD,EAAKC,KAAL,IAAcN,QAAQ,CAAC,IAAD,CAA5B;EACA,MAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BR,QAAQ,CAAC,KAAD,CAA5C;EACA,MAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,KAAD,CAAxC;EACA,MAAM,CAACW,SAAD,EAAYC,YAAZ,IAA4BZ,QAAQ,CAAC,EAAD,CAA1C;EAEAD,SAAS,CAAC,MAAM;IACZS,aAAa,CAAC,IAAD,CAAb;IACAN,QAAQ,CAAC,eAAD,EAAkB,kBAAlB,EAAuCW,SAAD,IAAe;MACzDP,KAAK,CAACO,SAAD,CAAL;IACH,CAFO,CAAR;IAIA,OAAO,MAAM;MACT,IAAIR,EAAJ,EAAQ;QACJA,EAAE,CAACS,IAAH;MACH;IACJ,CAJD,CANY,CAWZ;EACH,CAZQ,EAYN,EAZM,CAAT;EAcAf,SAAS,CAAC,MAAM;IACZ,IAAIM,EAAJ,EAAQ;MACJA,EAAE,CAACU,EAAH,CAAM,YAAN,EAAoB,MAAM;QACtBP,aAAa,CAAC,KAAD,CAAb;QACAE,WAAW,CAAC,KAAD,CAAX;MACH,CAHD;MAKAL,EAAE,CAACU,EAAH,CAAM,oBAAN,EAA4B,MAAM;QAC9BP,aAAa,CAAC,KAAD,CAAb;QACAE,WAAW,CAAC,IAAD,CAAX;MACH,CAHD;IAIH;EACJ,CAZQ,EAYN,CAACL,EAAD,CAZM,CAAT;;EAcA,MAAMW,QAAQ,GAAIC,KAAD,IAAW;IACxB,IAAIC,aAAa,GAAG;MAChB,cAAeC,CAAD,IAAO;QACjBC,OAAO,CAACC,GAAR,CAAY,qBAAZ;QACAT,YAAY,CAAC,YAAD,CAAZ;MACH,CAJe;MAKhB,YAAaO,CAAD,IAAO;QACfC,OAAO,CAACC,GAAR,CAAY,qBAAZ;QACAT,YAAY,CAAC,UAAD,CAAZ;MACH,CARe;MAShB,UAAWO,CAAD,IAAO;QACbC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCF,CAAxC;QACAP,YAAY,CAAC,QAAD,CAAZ;MACH,CAZe;MAahB,SAAUO,CAAD,IAAO;QACZC,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCF,CAAvC;QACAP,YAAY,CAAC,OAAD,CAAZ;MACH,CAhBe;MAiBhB,aAAcO,CAAD,IAAO;QAChBP,YAAY,CAAC,WAAD,CAAZ;MACH;IAnBe,CAApB;IAsBA,IAAIU,OAAO,GAAG;MACVJ,aAAa,EAAEA,aADL;MAEVK,gBAAgB,EAAE;QAAE,SAAS,IAAX;QAAiB,SAAS;MAA1B;IAFR,CAAd;IAIA,IAAIC,OAAO,GAAGnB,EAAE,CAACoB,IAAH,CAAQ,kCAAR,EAA4CH,OAA5C,CAAd;IAEAE,OAAO,CAACE,UAAR,CAAmBC,gBAAnB,CAAoC,WAApC,EAAkDR,CAAD,IAAO;MACpD,KAAKS,YAAL,CAAkBC,SAAlB,GAA8BV,CAAC,CAACW,MAAhC;MACA,KAAKF,YAAL,CAAkBG,IAAlB;IACH,CAHD;IAIAX,OAAO,CAACC,GAAR,CAAYG,OAAZ;EAEH,CAnCD;;EAsCA,oBACI;IAAA,uBACI;MAAQ,OAAO,EAAER,QAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EADJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH;;GA7EQb,K;;KAAAA,K;AA+ET,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}