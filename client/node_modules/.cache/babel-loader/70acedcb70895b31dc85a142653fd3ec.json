{"ast":null,"code":"var _jsxFileName = \"/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport JsSIP from \"jssip\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SIP_USERNAME = \"200-dataocean\";\nconst SIP_PASSWORD = \"RjH2TV2s9s8FHSpz\";\nconst SIP_DOMAIN = \"webrtc.1com.co.il\";\nconst SIP_SERVER = `wss://${SIP_DOMAIN}/ws`;\n\nfunction SipAudio() {\n  _s();\n\n  const [ua, setUa] = useState(null);\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  useEffect(() => {\n    const socket = new JsSIP.WebSocketInterface(SIP_SERVER);\n    const configuration = {\n      sockets: [socket],\n      uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,\n      password: SIP_PASSWORD\n    };\n    const userAgent = new JsSIP.UA(configuration);\n    setUa(userAgent);\n    userAgent.on(\"registered\", data => {\n      console.log(\"SIP registered:\", data);\n    });\n    userAgent.on(\"unregistered\", data => {\n      console.log(\"SIP unregistered:\", data);\n    });\n    userAgent.on(\"registrationFailed\", data => {\n      console.log(\"SIP registration failed:\", data);\n    });\n    userAgent.on(\"newRTCSession\", data => {\n      const session = data.session;\n      const remoteAudio = new Audio();\n      remoteAudio.autoplay = true;\n      session.on(\"ended\", () => {\n        console.log(\"SIP call ended\");\n      });\n      session.on(\"peerconnection\", data => {\n        const pc = data.peerconnection;\n        const remoteStream = new MediaStream();\n        pc.getReceivers().forEach(receiver => {\n          const track = receiver.track;\n\n          if (track) {\n            remoteStream.addTrack(track);\n          }\n        });\n        remoteAudio.srcObject = remoteStream;\n      }); // session.answer();\n    });\n    userAgent.start();\n    return () => {\n      userAgent.stop();\n    };\n  }, []);\n\n  const makeCall = () => {\n    const options = {\n      mediaConstraints: {\n        audio: true,\n        video: false\n      }\n    };\n    const session = ua.call(`sip:${phoneNumber}@${SIP_DOMAIN}`, options);\n    session.on(\"accepted\", () => {\n      console.log(\"SIP call accepted\");\n    });\n    console.log(session);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"SIP audio call\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: phoneNumber,\n      onChange: e => setPhoneNumber(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: makeCall,\n      children: \"Call\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SipAudio, \"OdnLNKfyzdUFI/+m8J7LXkNcMDk=\");\n\n_c = SipAudio;\nexport default SipAudio;\n\nvar _c;\n\n$RefreshReg$(_c, \"SipAudio\");","map":{"version":3,"names":["React","useState","useEffect","JsSIP","SIP_USERNAME","SIP_PASSWORD","SIP_DOMAIN","SIP_SERVER","SipAudio","ua","setUa","phoneNumber","setPhoneNumber","socket","WebSocketInterface","configuration","sockets","uri","password","userAgent","UA","on","data","console","log","session","remoteAudio","Audio","autoplay","pc","peerconnection","remoteStream","MediaStream","getReceivers","forEach","receiver","track","addTrack","srcObject","start","stop","makeCall","options","mediaConstraints","audio","video","call","e","target","value"],"sources":["/home/david/Desktop/workSpace/bots-dashboard/src/pages/Phone.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport JsSIP from \"jssip\";\n\nconst SIP_USERNAME = \"200-dataocean\";\nconst SIP_PASSWORD = \"RjH2TV2s9s8FHSpz\";\nconst SIP_DOMAIN = \"webrtc.1com.co.il\";\nconst SIP_SERVER = `wss://${SIP_DOMAIN}/ws`;\n\nfunction SipAudio() {\n    const [ua, setUa] = useState(null);\n    const [phoneNumber, setPhoneNumber] = useState(\"\");\n\n    useEffect(() => {\n        const socket = new JsSIP.WebSocketInterface(SIP_SERVER);\n        const configuration = {\n            sockets: [socket],\n            uri: `sip:${SIP_USERNAME}@${SIP_DOMAIN}`,\n            password: SIP_PASSWORD,\n        };\n        const userAgent = new JsSIP.UA(configuration);\n\n        setUa(userAgent);\n\n        userAgent.on(\"registered\", (data) => {\n            console.log(\"SIP registered:\", data);\n        });\n\n        userAgent.on(\"unregistered\", (data) => {\n            console.log(\"SIP unregistered:\", data);\n        });\n\n        userAgent.on(\"registrationFailed\", (data) => {\n            console.log(\"SIP registration failed:\", data);\n        });\n\n        userAgent.on(\"newRTCSession\", (data) => {\n            const session = data.session;\n            const remoteAudio = new Audio();\n            remoteAudio.autoplay = true;\n\n            session.on(\"ended\", () => {\n                console.log(\"SIP call ended\");\n            });\n\n            session.on(\"peerconnection\", (data) => {\n                const pc = data.peerconnection;\n                const remoteStream = new MediaStream();\n                pc.getReceivers().forEach((receiver) => {\n                    const track = receiver.track;\n                    if (track) {\n                        remoteStream.addTrack(track);\n                    }\n                });\n                remoteAudio.srcObject = remoteStream;\n            });\n\n            // session.answer();\n        });\n\n        userAgent.start();\n\n        return () => {\n            userAgent.stop();\n        };\n    }, []);\n\n    const makeCall = () => {\n        const options = {\n            mediaConstraints: { audio: true, video: false },\n        };\n        const session = ua.call(`sip:${phoneNumber}@${SIP_DOMAIN}`, options);\n        session.on(\"accepted\", () => {\n            console.log(\"SIP call accepted\");\n        });\n        console.log(session);\n    };\n\n    return (\n        <div>\n            <div>SIP audio call</div>\n            <input\n                type=\"text\"\n                value={phoneNumber}\n                onChange={(e) => setPhoneNumber(e.target.value)}\n            />\n            <button onClick={makeCall}>Call</button>\n        </div>\n    );\n}\n\nexport default SipAudio;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}